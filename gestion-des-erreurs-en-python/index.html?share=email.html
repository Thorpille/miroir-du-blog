<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">                          
<!--<![endif]-->
					<head>
				    <meta charset="UTF-8" />
				    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" />
            				    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
				    <link rel="profile" href="http://gmpg.org/xfn/11" />
				    <link rel="pingback" href="../xmlrpc.php" />

				   <!-- Icons font support for IE6-7  -->
				    <!--[if lt IE 8]>
				      <script src="http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/lte-ie7.js"></script>
				    <![endif]-->
				    <style type="text/css" id="customizr-inline-fonts">@font-face{font-family:genericons;src:url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.eot');src:url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.eot%3F') format('embedded-opentype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.woff') format('woff'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.ttf') format('truetype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/genericons-regular-webfont.svg') format('svg')}@font-face{font-family:entypo;src:url('http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.eot);src:url(http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.eot?#iefix') format('embedded-opentype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.woff') format('woff'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.ttf') format('truetype'),url('../wp-content/themes/customizr/inc/assets/css/fonts/fonts/entypo.svg') format('svg')}</style><title>Gestion des erreurs en Python | Sam &amp; Max</title>
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max &raquo; Feed" href="../feed.1" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max &raquo; Comments Feed" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max &raquo; Gestion des erreurs en Python Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='contact-form-7-css'  href='../wp-content/plugins/contact-form-7/includes/css/styles.css%3Fver=4.0.3.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-polls-css'  href='../wp-content/plugins/wp-polls/polls-css.css%3Fver=2.68.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='../wp-content/plugins/wp-syntax/css/wp-syntax.css%3Fver=1.0.css' type='text/css' media='all' />
<link rel='stylesheet' id='customizr-skin-css'  href='../wp-content/themes/customizr/inc/assets/css/black2.min.css%3Fver=3.2.10.css' type='text/css' media='all' />
<style id='customizr-skin-inline-css' type='text/css'>

.sticky-enabled .tc-shrink-on .site-logo img {
						height:30px!important;width:auto!important
					}

					.sticky-enabled .tc-shrink-on .brand .site-title {
						font-size:0.6em;opacity:0.8;line-height:1.2em
					}

.tc-rectangular-thumb {
            max-height: 250px;
            height :250px
          }

          .single .tc-rectangular-thumb {
            max-height: 250px;
            height :250px
          }


</style>
<link rel='stylesheet' id='customizr-style-css'  href='../wp-content/themes/customizr/style.css%3Fver=3.2.10.css' type='text/css' media='all' />
<link rel='stylesheet' id='fancyboxcss-css'  href='../wp-content/themes/customizr/inc/assets/js/fancybox/jquery.fancybox-1.3.4.min.css%3Fver=4.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='../wp-content/plugins/jetpack/_inc/genericons/genericons/genericons.css%3Fver=3.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='../wp-content/plugins/jetpack/css/jetpack.css%3Fver=3.3.css' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jquery.js%3Fver=1.11.1'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min.js%3Fver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var TCParams = {"FancyBoxState":"1","FancyBoxAutoscale":"1","SliderName":"","SliderDelay":"","SliderHover":"1","SmoothScroll":"linear","ReorderBlocks":"1","CenterSlides":"1","HasComments":"1","LeftSidebarClass":".span3.left.tc-sidebar","RightSidebarClass":".span3.right.tc-sidebar","LoadModernizr":"1","stickyCustomOffset":"0","stickyHeader":"1","dropdowntoViewport":"0","timerOnScrollAllBrowsers":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/themes/customizr/inc/assets/js/tc-scripts.min.js%3Fver=3.2.10'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Le don du mois : Mozilla' href='../le-don-du-mois-mozilla/index.html' />
<link rel='next' title='Utiliser requests de manière non bloquante facilement' href='../utiliser-requests-de-maniere-non-bloquante-facilement/index.html' />
<meta name="generator" content="WordPress 4.1" />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='http://wp.me/p2ckfk-46C' />
<style type="text/css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('../wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}
</style>
<style type="text/css" media="all">
/* <![CDATA[ */
@import url("../wp-content/plugins/wp-table-reloaded/css/plugin.css%3Fver=1.9.4.css");
@import url("../wp-content/plugins/wp-table-reloaded/css/datatables.css%3Fver=1.9.4.css");
/* ]]> */
</style><link rel="shortcut icon" href="../wp-content/uploads/2015/06/favicon.png" type="image/png">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Gestion des erreurs en Python" />
<meta property="og:url" content="http://sametmax.com/gestion-des-erreurs-en-python/" />
<meta property="og:description" content="Plus on code, plus on oublie ce que c&#039;était quand on a débuté. Même moi, et pourtant je fais un gros effort pour essayer de me replonger dans cet état d&#039;esprit. Dernièrement j&#039;ai eu plusieurs inter..." />
<meta property="article:published_time" content="2015-01-20T17:46:12+00:00" />
<meta property="article:modified_time" content="2015-10-16T13:00:34+00:00" />
<meta property="article:author" content="http://sametmax.com/author/sam/" />
<meta property="og:site_name" content="Sam &amp; Max" />
<meta property="og:image" content="http://sametmax.com/wp-content/uploads/2015/01/epic-fail-catch.jpg" />
<meta name="twitter:site" content="@jetpack" />
<meta name="twitter:image:src" content="http://sametmax.com/wp-content/uploads/2015/01/epic-fail-catch.jpg?w=640" />
<meta name="twitter:card" content="summary_large_image" />
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="../index.html%3Fcustom-css=1&amp;csblog=1&amp;cscache=6&amp;csrev=13.css" />
						    <!--Icons size hack for IE8 and less -->
				    <!--[if lt IE 9]>
				      <link href="http://sametmax.com/wp-content/themes/customizr/inc/assets/css/fonts/ie8-hacks.css" rel="stylesheet" type="text/css"/>
				    <![endif]-->
				</head>
				
	<body class="single single-post postid-15786 single-format-standard tc-fade-hover-links tc-sticky-header tc-transparent-on-scroll" itemscope itemtype="http://schema.org/WebPage">
		
		
	   	<header class="tc-header clearfix row-fluid tc-tagline-off tc-title-logo-on  tc-shrink-on tc-menu-on logo-left" role="banner">
			      <div class="brand span3 pull-left ">

        <h1><a class="site-title" href="../index.html" title="Sam &amp; Max | Du code, du cul">Sam &amp; Max</a></h1>
      </div> <!-- brand span3 pull-left -->
      <div class="container outside"><h2 class="site-description">Du code, du cul</h2></div>      	<div class="navbar-wrapper clearfix span9 tc-submenu-fade tc-submenu-move tc-open-on-hover left">
        	<div class="navbar resp">
          		<div class="navbar-inner" role="navigation">
            		<div class="row-fluid">
              		<div class="social-block span5" ><a class="social-icon icon-feed" href="../feed/rss/index.html" title="Subscribe to my rss feed"  ></a></div><h2 class="span7 inside site-description">Du code, du cul</h2><button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="nav-collapse collapse tc-hover-menu-wrapper"><div class="menu-top-menu-container"><ul id="menu-top-menu-2" class="nav tc-hover-menu"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1702"><a href="../category/programmation/index.html">Prog</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1703"><a href="../category/administration-system/index.html">Admin Sys</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1704"><a href="../category/philo-et-culture/index.html">Philo &#038; culture</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1706"><a href="../category/cul/index.html">Cul</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3340"><a href="../cours-et-tutos/index.html">Cours &#038; tutos</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1707"><a title="Les meilleurs blogs du Web" href="http://multiboards.net/">Multiboards</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12415"><a href="../planet-python-fr/index.html">Veille Python Fr</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15634"><a href="http://indexerror.net">Questions Python</a></li>
</ul></div></div>          			</div>
          		</div><!-- /.navbar-inner -->
        	</div><!-- /.navbar resp -->
      	</div><!-- /.navbar-wrapper -->
    			</header>
		<div id="tc-reset-margin-top" class="container-fluid" style="margin-top:103px"></div><div id="main-wrapper" class="container">

        
    <div class="container" role="main">
        <div class="row column-content-wrapper">

                            
                <div id="content" class="span9 article-container">
                    
                    
                        
                                                                                    
                                                                    <article id="post-15786" class="post-15786 post type-post status-publish format-standard has-post-thumbnail hentry category-programmation tag-else tag-erreurs tag-except tag-exceptions tag-finally tag-python tag-try row-fluid">
                                                <header class="entry-header">
          <h1 class="entry-title format-icon">Gestion des erreurs en Python <span class="comments-link"><a href="index.html%3Fshare=email.html#tc-comment-title" title="Comment(s) on Gestion des erreurs en Python"><span class="tc-comment-bubble fs1 icon-bubble" ></span><span class="inner">12</span></a></span></h1>            <div class="entry-meta">
                This entry was posted in <a class="btn btn-mini" href="../category/programmation/index.html" title="View all posts in Programmation"> Programmation </a> and tagged <a class="btn btn-mini btn-tag" href="../tag/else/index.html" title="View all posts in else"> else </a><a class="btn btn-mini btn-tag" href="../tag/erreurs/index.html" title="View all posts in erreurs"> erreurs </a><a class="btn btn-mini btn-tag" href="../tag/except/index.html" title="View all posts in except"> except </a><a class="btn btn-mini btn-tag" href="../tag/exceptions/index.html" title="View all posts in exceptions"> exceptions </a><a class="btn btn-mini btn-tag" href="../tag/finally/index.html" title="View all posts in finally"> finally </a><a class="btn btn-mini btn-tag" href="../tag/python/index.html" title="View all posts in python"> python </a><a class="btn btn-mini btn-tag" href="../tag/try/index.html" title="View all posts in try"> try </a> on <a href="../2015/01/20/index.html" title="17:46" rel="bookmark"><time class="entry-date updated" datetime="2015-01-20T17:46:12+00:00">20/01/2015</time></a> <span class="by-author">by <span class="author vcard"><a class="url fn n" href="../author/sam/index.html" title="View all posts by Sam" rel="author">Sam</a></span></span>             </div><!-- .entry-meta -->
            <hr class="featurette-divider __before_content">        </header>
            

          <section class="entry-content ">
              <p>Plus on code, plus on oublie ce que c&#8217;était quand on a débuté. Même moi, et pourtant je fais un gros effort pour essayer de me replonger dans cet état d&#8217;esprit.</p>
<p>Dernièrement j&#8217;ai eu plusieurs interactions qui m&#8217;ont mis un petit taquet derrière la tête :</p>
<blockquote><p>- &#8220;Mec, les exceptions, y a plein de personnes qui pigent pas.&#8221;</p>
<p>&#8211; &#8220;Nannnn, mais quand même, les exceptions&#8230;&#8221;</p>
<p>&#8211; &#8220;Si, les exceptions.&#8221;</p>
<p>&#8211; &#8220;Nan, vraiment ?&#8221;</p>
<p>&#8211; &#8220;Oui, vraiment.&#8221;</p></blockquote>
<p>Donc, back to black, et petit tour de la gestion d&#8217;erreur en Python.</p>
<p>Et de la musique.</p>
<p><span class='embed-youtube' style='text-align:center; display: block;'><iframe class='youtube-player' type='text/html' width='1170' height='689' src='http://www.youtube.com/embed/8inJtTG_DuU?version=3&#038;rel=1&#038;fs=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' frameborder='0' allowfullscreen='true'></iframe></span></p>
<h2>La notion d&#8217;exception</h2>
<p>Une exception est un mécanisme d&#8217;interruption du programme utilisé pour signaler que quelque chose d&#8217;anormal est en train de se produire.</p>
<p>On les rencontre dans de nombreux cas, mais souvent, c&#8217;est dans le cadre d&#8217;erreurs. Par exemple, Python va lever une exception dans les cas suivant :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff4500;">1</span> / <span style="color: #ff4500;">0</span> <span style="color: #808080; font-style: italic;"># division par zéro</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-2-b710d87c980c&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #ff4500;">1</span> / <span style="color: #ff4500;">0</span>
<span style="color: #008000;">ZeroDivisionError</span>: integer division <span style="color: #ff7700;font-weight:bold;">or</span> modulo by zero
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> l<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># dépassement d'un tableau</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-4-3e7ce3111e95&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    l<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span><span style="color: black;">&#93;</span>
<span style="color: #008000;">IndexError</span>: <span style="color: #008000;">list</span> index out of <span style="color: #008000;">range</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'cle'</span>: <span style="color: #483d8b;">'valeur'</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d<span style="color: black;">&#91;</span><span style="color: #483d8b;">'nope'</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># clé de dico inconnue</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-6-9d965227e4b0&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    d<span style="color: black;">&#91;</span><span style="color: #483d8b;">'nope'</span><span style="color: black;">&#93;</span>
<span style="color: #008000;">KeyError</span>: <span style="color: #483d8b;">'nope'</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff4500;">1</span> + <span style="color: #483d8b;">&quot;banane&quot;</span> <span style="color: #808080; font-style: italic;"># opération entre types incompatibles</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-7-5147635e41b3&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #ff4500;">1</span> + <span style="color: #483d8b;">&quot;banane&quot;</span>
<span style="color: #008000;">TypeError</span>: unsupported operand <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>s<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> +: <span style="color: #483d8b;">'int'</span> <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #483d8b;">'str'</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> nawak <span style="color: #808080; font-style: italic;"># ce module n'existe pas</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-12-c948b8798146&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #ff7700;font-weight:bold;">import</span> nawak
<span style="color: #008000;">ImportError</span>: No module named nawak
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'nawak'</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># le fichier n'existe pas</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-13-4d15cfd2ffd1&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'nawak'</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">IOError</span>: <span style="color: black;">&#91;</span>Errno <span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span> No such <span style="color: #008000;">file</span> <span style="color: #ff7700;font-weight:bold;">or</span> directory: <span style="color: #483d8b;">'nawak'</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>nawak<span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># la variable n'existe pas</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-15-f47a27cedc12&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>nawak<span style="color: black;">&#41;</span>
<span style="color: #008000;">NameError</span>: name <span style="color: #483d8b;">'nawak'</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #ff7700;font-weight:bold;">not</span> defined
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> n a w a k <span style="color: #808080; font-style: italic;"># erreur de syntaxe</span>
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-16-532bf025442e&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span>
    n a w a k <span style="color: #808080; font-style: italic;"># erreur de syntaxe</span>
      ^
<span style="color: #008000;">SyntaxError</span>: invalid syntax
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">int</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'a'</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># la valeur passée n'a aucun sens</span>
&nbsp;
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-17-b3c3f4515dd4&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #008000;">int</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'a'</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">ValueError</span>: invalid literal <span style="color: #ff7700;font-weight:bold;">for</span> <span style="color: #008000;">int</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">with</span> base <span style="color: #ff4500;">10</span>: <span style="color: #483d8b;">'a'</span></pre></td></tr></table></div>

<p>De base, il y a un paquet d&#8217;exceptions en Python, et celles fournies par défaut sont listées <a href="https://docs.python.org/2/library/exceptions.html#exceptions.TypeError">ici</a>.</p>
<p>Malgré l&#8217;abondance de ces exceptions, vous pouvez remarquer un motif récurrent quand Python crash et affiche l&#8217;erreur :</p>
<pre>Gros pâté de texte.
Gros pâté de texte.
Gros pâté de texte.
NomDeLExceptionError: description de l'erreur.</pre>
<p>En effet, non seulement une exception interrompt le programme, mais elle collecte des informations sur la source de l&#8217;erreur afin qu&#8217;au moment où ça crash, le développeur ait de quoi déboguer.</p>
<p>Une exception va donc normalement déclencher un affichage à la fin avec toutes ces infos, et sur la dernière ligne, le type de l&#8217;exception (ValueError, IndexError, etc) ainsi qu&#8217;une description de ce qui a causé l&#8217;erreur.</p>
<p>Néanmoins, le plus intéressant est ce qu&#8217;il y a au dessus : le gros pâté de texte. C&#8217;est ce qu&#8217;on appelle une stack trace, et ça représente la pile d&#8217;appels qui ont amené à cette erreur. Chaque ligne de la stack trace va vous donner le chemin d&#8217;un fichier de code, et une ligne.</p>
<p>Une erreur se lit donc à l&#8217;envers, de bas en haut.</p>
<p>Vous lisez d&#8217;abord le nom de l&#8217;erreur et sa cause, puis, vous remontez la stack trace ligne à ligne, pour essayer de trouver quelle ligne de quel fichier de code vous devez déboguer.</p>
<p>Par exemple, si vous avez un fichier <code>wololo.py</code> :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> une_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #ff4500;">1</span> / <span style="color: #ff4500;">0</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> une_autre_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    une_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
une_autre_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Lancer ce script va vous pondre :</p>
<pre>
Traceback (most recent call last):
  File "wololo.py", line 7, in <module>
    une_autre_fonction()
  File "wololo.py", line 5, in une_autre_fonction
    une_fonction()
  File "wololo.py", line 2, in une_fonction
    return 1 / 0
ZeroDivisionError: integer division or modulo by zero
</pre>
<p>On le lit de bas en haut :</p>
<pre>ZeroDivisionError: integer division or modulo by zero</pre>
<p>Ok, donc c&#8217;est une erreur de division par 0.</p>
<pre>  File "wololo.py", line 2, in une_fonction
    return 1 / 0</pre>
<p>Elle a lieu dans mon fichier <code>wololo.py</code> à la ligne 2.</p>
<p>Mais visiblement, ce qui déclenche tout le bordel, c&#8217;est que la fonction contenant cette ligne est appelé à la ligne 5 :</p>
<pre>
  File "wololo.py", line 5, in une_autre_fonction
    une_fonction()</pre>
<p>Qui est elle même appelée à la ligne 7 :</p>
<pre>
  File "wololo.py", line 7, in <module>
    une_autre_fonction()
</pre>
<p>Avec ces infos, on peut prendre une décision : aller ligne 2 pour corriger un bug, ou aller ligne 5, ou 7 pour retirer l&#8217;appel qui cause le déclenchement du code fautif.</p>
<p>Dans ce cas, vous pourriez vous dire qu&#8217;il faut retirer la division par 0, et que les premières ligne de la stack trace ne servent à rien.</p>
<p>Mais imaginez que je change mon code :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> une_fonction<span style="color: black;">&#40;</span>diviseur<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #ff4500;">1</span> / diviseur
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> une_autre_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    une_fonction<span style="color: black;">&#40;</span>diviseur<span style="color: #66cc66;">=</span><span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>
&nbsp;
une_autre_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>A ce moment là, mon stack trace sera :</p>
<pre>Traceback (most recent call last):
  File "wololo.py", line 7, in <module>
    une_autre_fonction()
  File "wololo.py", line 5, in une_autre_fonction
    une_fonction(diviseur=0)
  File "wololo.py", line 2, in une_fonction
    return 1 / diviseur
ZeroDivisionError: integer division or modulo by zero</pre>
<p>Et là, on ne veut pas changer la ligne 2, on veut changer la ligne 5, car c&#8217;est ce paramètre qui fait qu&#8217;à la ligne 2 on a une division par 0.</p>
<p>La stack trace permet donc de remonter la chaîne de causalité de vos erreurs.</p>
<h2>Lever ses propres exceptions</h2>
<p>Quand une exception est activée, on dit qu&#8217;elle est &#8220;levée&#8221;.</p>
<p>Python va lever des exceptions de lui-même, par exemple en cas d&#8217;erreurs, mais on peut aussi lever soi-même des exceptions en faisant <code>raise NomDeLException("Message")</code>.</p>
<p>Par exemple, vous avez une fonction qui n&#8217;accepte en paramètre que comme valeur 1, 2 ou 3. Vous savez que si un utilisateur rentre quelque chose d&#8217;autre, ça va tout faire merder.</p>
<p>Vous pouvez faire ceci :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> votre_super_fonction<span style="color: black;">&#40;</span>param<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> param <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">raise</span> <span style="color: #008000;">ValueError</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;'param' can only be either 1, 2 or 3&quot;</span><span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;"># reste du code</span></pre></td></tr></table></div>

<p>Ainsi, si quelqu&#8217;un passe un mauvais paramètre, il est immédiatement alerté :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> votre_super_fonction<span style="color: black;">&#40;</span><span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-3-bcd6e8653c83&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    votre_super_fonction<span style="color: black;">&#40;</span><span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-2-46fc7cd18c42&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> votre_super_fonction
    <span style="color: #ff7700;font-weight:bold;">raise</span> <span style="color: #008000;">ValueError</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;'param' can only be either 1, 2 or 3&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">ValueError</span>: <span style="color: #483d8b;">'param'</span> can only be either <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span> <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #ff4500;">3</span></pre></td></tr></table></div>

<p>Attention : le message ne peut pas contenir de caractères non-ASCII. Oubliez les accents.</p>
<h2>Attraper une exception</h2>
<p>Les exceptions ne sont pas un simple mécanisme de debuggage. Elles servent d&#8217;abord et avant tout à gérer les cas exceptionnels, et on peut donc les détecter, et réagir quand elles surviennent, à l&#8217;aide de l&#8217;instruction <code>try/except</code>.</p>
<p>Cela s&#8217;utilise en enrobant les lignes qui peuvent lever une exception :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #808080; font-style: italic;"># lignes qui peuvent</span>
        <span style="color: #808080; font-style: italic;"># lever une exception</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> NomException:
        <span style="color: #808080; font-style: italic;"># faire un truc si l'exception se déclenche</span></pre></td></tr></table></div>

<p>Quand vous attrapez une exception, le programme ne plante pas. A la place, le bloc <code>except</code> correspondant au nom de l&#8217;exception est appelée.</p>
<p>Bien entendu, si une exception qui ne porte pas ce nom est levée, le programme plante.</p>
<p>Par exemple :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #808080; font-style: italic;"># i est définit plus haut</span>
    personnages <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #483d8b;">'iron'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'super'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'bat'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'clepto'</span><span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        resultat <span style="color: #66cc66;">=</span> personnages<span style="color: black;">&#91;</span>i<span style="color: black;">&#93;</span>
    <span style="color: #808080; font-style: italic;"># i est plus grand que la taille du tableau</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IndexError</span>:
        resultat <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Si <code>i</code> est plus grand que la taille de la liste, Python va lever une <code>IndexError</code>, qui sera attrapée. Le programme ne plantera pas, et <code>resultat</code> sera égal à <code>None</code>.</p>
<p>Si <code>i</code> est de type string, Python va lever une <code>TypeError</code>, et le programme va planter.</p>
<p>Cela suppose de savoir le nom de l&#8217;erreur qu&#8217;on veut gérer. Je recommande donc de tester le cas foireux dans le shell auparavant.</p>
<p>On peut gérer plusieurs exceptions avec un seul bloc :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span> / i<span style="color: black;">&#93;</span>
    <span style="color: #808080; font-style: italic;"># est exécuté pour ces deux exceptions</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">ZeroDivisionError</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span>
    <span style="color: #808080; font-style: italic;"># est exécuté pour cette exception</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">KeyError</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Qui est le bâtard qui a remplacé ma &quot;</span>
              <span style="color: #483d8b;">&quot;liste par un dico dans mon dos ?&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Hiérarchie des exceptions</h2>
<p>Les exceptions sont des classes. Et si vous avez lu notre <a href="../le-guide-ultime-et-definitif-sur-la-programmation-orientee-objet-en-python-a-lusage-des-debutants-qui-sont-rassures-par-les-textes-detailles-qui-prennent-le-temps-de-tout-expliquer-partie-1/index.html">dossier sur la POO</a>, vous savez que les classes peuvent hériter d&#8217;autres classes.</p>
<p>C&#8217;est le cas des exceptions. Celles intégrées à Python suivent la hiérarchie suivante :</p>
<pre>
BaseException
 +-- SystemExit
 +-- KeyboardInterrupt
 +-- GeneratorExit
 +-- Exception
      +-- StopIteration
      +-- ArithmeticError
      |    +-- FloatingPointError
      |    +-- OverflowError
      |    +-- ZeroDivisionError
      +-- AssertionError
      +-- AttributeError
      +-- BufferError
      +-- EnvironmentError
      |    +-- IOError
      |    +-- OSError
      |         +-- WindowsError (Windows)
      |         +-- VMSError (VMS)
      +-- EOFError
      +-- ImportError
      +-- LookupError
      |    +-- IndexError
      |    +-- KeyError
      +-- MemoryError
      +-- NameError
      |    +-- UnboundLocalError
      +-- ReferenceError
      +-- RuntimeError
      |    +-- NotImplementedError
      +-- SyntaxError
      |    +-- IndentationError
      |         +-- TabError
      +-- SystemError
      +-- TypeError
      +-- ValueError
      |    +-- UnicodeError
      |         +-- UnicodeDecodeError
      |         +-- UnicodeEncodeError
      |         +-- UnicodeTranslateError
      +-- Warning
           +-- DeprecationWarning
           +-- PendingDeprecationWarning
           +-- RuntimeWarning
           +-- SyntaxWarning
           +-- UserWarning
           +-- FutureWarning
           +-- ImportWarning
           +-- UnicodeWarning
           +-- BytesWarning
</pre>
<p>Par exemple, <code>IndexError</code> et <code>KeyError</code> héritent toutes les deux de <code>LookupError</code>.</p>
<p>Donc si vous faites :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span>i<span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">LookupError</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Vous attrapez à la fois les exceptions de type <code>IndexError</code> et <code>KeyError</code>.</p>
<p><code>LookupError</code> hérite de <code>Exception</code>, dont hérite la plupart des exceptions en Python. Donc si vous faites :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span> / i<span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">Exception</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Vous allez attraper <code>LookupError</code>, <code>IndexError</code>, <code>ZeroDivisionError</code> et probablement tout un tas de trucs auxquels vous n&#8217;avez pas pensé ce qui peut potentiellement un jour masquer un bug dans votre programme.</p>
<p>Donc <strong>gérez toujours l&#8217;erreur au plus proche de la logique de votre programme</strong>.</p>
<p>Il est d&#8217;ailleurs possible de dire à Python &#8220;tu m&#8217;attrapes tout&#8221; en omettant le nom de l&#8217;exception :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span> / i<span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>C&#8217;est généralement une mauvaise idée car si il arrive une erreur que vous n&#8217;avez pas prévue, la close <code>except</code> s&#8217;activera, masquant l&#8217;erreur, et ne vous donnera jamais la chance de découvrir le problème.</p>
<p>Sachez également que vous n&#8217;êtes pas limité à la hiérarchie offerte par Python. Vous pouvez créer vos propres exceptions en héritant d&#8217;une des exceptions existantes de Python :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">class</span> MonProjetError<span style="color: black;">&#40;</span><span style="color: #008000;">Exception</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">pass</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> MonTraitementError<span style="color: black;">&#40;</span>MonProjetError<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">pass</span></pre></td></tr></table></div>

<p>C&#8217;est généralement une bonne idée quand vous créez une lib et que vous voulez permettre aux utilisateurs de votre bibliothèque de pouvoir filtrer les exceptions levées par votre code uniquement.</p>
<p>Néanmoins, dans ce cas, choisissez intelligemment les parents de vos exceptions personnalisées. Chaque exception de Python est porteuse de sens. <code>TypeError</code> est levée pour une erreur de type, <code>IOError</code> pour une erreur d&#8217;entrée/sortie, etc. Il est logique qu&#8217;un développeur s&#8217;attende à pouvoir les attraper selon ce sens.</p>
<p>Heureusement, on peut hériter de plusieurs exceptions :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">class</span> MonProjetError<span style="color: black;">&#40;</span><span style="color: #008000;">Exception</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">pass</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> MonTraitementError<span style="color: black;">&#40;</span>MonProjetError<span style="color: #66cc66;">,</span> <span style="color: #008000;">TypeError</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">pass</span></pre></td></tr></table></div>

<p>Du coup, si quelqu&#8217;un essaye d&#8217;attraper <code>MonTraitementError</code> ou <code>TypeError</code> ou <code>MonProjetError</code> selon ce qu&#8217;il désire exprimer, ça marchera.</p>
<p>En effet, les exceptions sont une forme d&#8217;expression :</p>
<ul>
<li>Celui qui lève l&#8217;exception dit explicitement ce qui peut merder : quand on lit son code, on comprend les cas d&#8217;erreurs.</li>
<li>Celui qui l&#8217;attrape dit explicitement ce qu&#8217;il veut gérer : quand on lit son code, on comprend l&#8217;objectif.</li>
<li>Python dit explicitement ce qui a foiré. Quand on lit la stack trace, on comprend ce qui a merdé.</li>
</ul>
<p><strong>Vous communiquez en utilisant des exceptions entre développeurs et utilisateurs du code.</strong></p>
<h2>Finally et else</h2>
<p><code>try/except</code> peut être complété par deux autres mots clés : <code>finally</code> et <code>else</code>.</p>
<p><code>else</code> est le bloc exécuté si aucune exception n&#8217;est levée :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span> / i<span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">ZeroDivisionError</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">KeyError</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Qui est le bâtard qui a remplacé ma &quot;</span>
              <span style="color: #483d8b;">&quot;liste par un dico dans mon dos ?&quot;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">else</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Bon en fait tout va bien'</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p><code>finally</code> est un bloc qui est exécuté après que tous les autres blocs aient été exécutés, peu importe qu&#8217;il y ait eu une exception ou non, et <strong>même si le programme crash</strong>.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span> / i<span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">ZeroDivisionError</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">KeyError</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Qui est le bâtard qui a remplacé ma &quot;</span>
              <span style="color: #483d8b;">&quot;liste par un dico dans mon dos ?&quot;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">finally</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Rosebud !'</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Dans notre cas, peu importe ce qui se passe dans le bloc <code>try/except</code>, <code>Rosebud !</code> est toujours affiché.</p>
<p><code>finally</code> n&#8217;est pas à l&#8217;épreuve des balles, si on crash l’interpréteur violemment (ou que vous débranchez la prise du serveur :)), il ne vous sauvera pas. Mais il permet de gérer la plupart des cas extrêmes.</p>
<p>Ah, oui, au fait, si vous utilisez <code>finally</code>, <code>except</code> n&#8217;est pas obligatoire.</p>
<h2>Quand utiliser try, except, else et finally ?</h2>
<p>On utilisera <code>try/except</code> d&#8217;abord et avant tout pour gérer les erreurs sur laquelle on a pas de controle.</p>
<p>Par exemple, vous téléchargez une document depuis le Web :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">request</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> fichier_recu<span style="color: #66cc66;">,</span> headers <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">request</span>.<span style="color: black;">urlretrieve</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'http://www.sudinfo.be/sites/default/files/imagecache/pagallery_450x300/1365338424_B9765144Z.1_20121219124926_000_GOJDROM6.1-0.png'</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Ca va marcher la plupart du temps. Et puis un jour, le réseau va sauter, et ça va plus marcher :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> fichier_recu<span style="color: #66cc66;">,</span> headers <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">request</span>.<span style="color: black;">urlretrieve</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'http://www.sudinfo.be/sites/default/files/imagecache/pagallery_450x300/1365338424_B9765144Z.1_20121219124926_000_GOJDROM6.1-0.png'</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-10-0f41d15585f0&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    fichier_recu<span style="color: #66cc66;">,</span> headers <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">request</span>.<span style="color: black;">urlretrieve</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'http://www.sudinfo.be/sites/default/files/imagecache/pagallery_450x300/1365338424_B9765144Z.1_20121219124926_000_GOJDROM6.1-0.png'</span><span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">178</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> urlretrieve
    <span style="color: #ff7700;font-weight:bold;">with</span> contextlib.<span style="color: black;">closing</span><span style="color: black;">&#40;</span>urlopen<span style="color: black;">&#40;</span>url<span style="color: #66cc66;">,</span> data<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">as</span> fp:
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">153</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> urlopen
    <span style="color: #ff7700;font-weight:bold;">return</span> opener.<span style="color: #008000;">open</span><span style="color: black;">&#40;</span>url<span style="color: #66cc66;">,</span> data<span style="color: #66cc66;">,</span> timeout<span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">455</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">open</span>
    response <span style="color: #66cc66;">=</span> <span style="color: #008000;">self</span>._open<span style="color: black;">&#40;</span>req<span style="color: #66cc66;">,</span> data<span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">473</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> _open
    <span style="color: #483d8b;">'_open'</span><span style="color: #66cc66;">,</span> req<span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">433</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> _call_chain
    result <span style="color: #66cc66;">=</span> func<span style="color: black;">&#40;</span>*args<span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1258</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> http_open
    <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">self</span>.<span style="color: black;">do_open</span><span style="color: black;">&#40;</span>http.<span style="color: black;">client</span>.<span style="color: black;">HTTPConnection</span><span style="color: #66cc66;">,</span> req<span style="color: black;">&#41;</span>
  File <span style="color: #483d8b;">&quot;/usr/lib/python3.4/urllib/request.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1235</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> do_open
    <span style="color: #ff7700;font-weight:bold;">raise</span> URLError<span style="color: black;">&#40;</span>err<span style="color: black;">&#41;</span>
URLError: <span style="color: #66cc66;">&lt;</span>urlopen error <span style="color: black;">&#91;</span>Errno -<span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span> Name <span style="color: #ff7700;font-weight:bold;">or</span> service <span style="color: #ff7700;font-weight:bold;">not</span> known<span style="color: #66cc66;">&gt;</span></pre></td></tr></table></div>

<p>On va donc gérer l&#8217;exception (et beaucoup d&#8217;autres, le réseau ça foire tout le temps) :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
<span style="color: #ff7700;font-weight:bold;">try</span>:
    fichier_recu<span style="color: #66cc66;">,</span> headers <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">request</span>.<span style="color: black;">urlretrieve</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'http://www.sudinfo.be/sites/default/files/imagecache/pagallery_450x300/1365338424_B9765144Z.1_20121219124926_000_GOJDROM6.1-0.png'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">URLError</span>:
    <span style="color: #808080; font-style: italic;"># faire un truc</span></pre></td></tr></table></div>

<p>Parmi les choses à faire : réessayer plus tard, tenter de redémarrer la carte réseau, changer d&#8217;URL&#8230;</p>
<p>Un autre raison d&#8217;utiliser <code>try/except</code> est pour enregistrer une trace des erreurs.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
<span style="color: #ff7700;font-weight:bold;">try</span>:
    url <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'http://www.sudinfo.be/sites/default/files/imagecache/pagallery_450x300/1365338424_B9765144Z.1_20121219124926_000_GOJDROM6.1-0.png'</span>
    fichier_recu<span style="color: #66cc66;">,</span> headers <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">request</span>.<span style="color: black;">urlretrieve</span><span style="color: black;">&#40;</span>url<span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #dc143c;">urllib</span>.<span style="color: black;">URLError</span>:
    <span style="color: #ff7700;font-weight:bold;">with</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp/errors.log'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'a'</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">as</span> f:
        f.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;L'URL '%s' est inacessible&quot;</span> % url<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>On peut le faire avec le module <code>logging</code>, ou envoyer un mail ou un SMS d&#8217;alerte&#8230;</p>
<p>Proposer un comportement par défaut est aussi très courant.</p>
<p>Par exemple, vous voulez récupérer le premier élément d&#8217;une liste, mais si la liste est vide, récupérer <code>None</code> :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    resultat <span style="color: #66cc66;">=</span> liste<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IndexError</span>:
    resultat <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Ce cas d&#8217;usage est typique de Python. Dans d&#8217;autres langage, on regarderait si le tableau est vide :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> liste:
    resultat <span style="color: #66cc66;">=</span> liste<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">else</span>:
    resultat <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>C&#8217;est typiquement la philosophie Java : &#8220;Watch before you leap&#8221; (WBYL). Soit &#8220;Regardez où vous mettez les pieds&#8221;.</p>
<p>En Python, la philosophie est &#8220;It&#8217;s easier to ask for forgiveness than permission&#8221; (EAFP). Soit &#8220;il est plus facile de demander pardon que la permission&#8221;.</p>
<p>La raison est que les exceptions sont très rapides en Python, et permettent de gérer plein de cas d&#8217;un coup.</p>
<p>Par exemple, dans le cas :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> conteneur:
    resultat <span style="color: #66cc66;">=</span> conteneur<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">else</span>:
    resultat <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Que se passe-t-il si conteneur peut être un dictionnaire ou une liste ? C&#8217;est possible en Python du fait du <a href="../quest-ce-que-le-duck-typing-et-a-quoi-ca-sert/index.html">duck typing</a>.</p>
<p>Il faut tester deux cas :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> conteneur <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #ff4500;">0</span> <span style="color: #ff7700;font-weight:bold;">in</span> conteneur:
    resultat <span style="color: #66cc66;">=</span> conteneur<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">else</span>:
    resultat <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Avec une exception, on teste un seul cas :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    resultat <span style="color: #66cc66;">=</span> conteneur<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">LookupError</span>:
    resultat <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Là c&#8217;est un cas simple, mais sur des cas complexes comme les fichiers, c&#8217;est très utile :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    fichier <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp/fichier'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IOError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">OSError</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># gérer l'erreur</span></pre></td></tr></table></div>

<p>Si je devais faire ça avec des <code>if</code>, il faudrait :</p>
<ul>
<li>Vérifier que le fichier existe.</li>
<li>Vérifier que le fichier est un fichier et non un dossier.</li>
<li>Vérifier que j&#8217;ai les permissions d&#8217;écrire sur le fichier.</li>
<li>Vérifier que j&#8217;ai les permissions de traverser les dossiers parents.</li>
<li>Vérifier que personne n&#8217;a ouvert le fichier en écriture avant.</li>
</ul>
<p>C&#8217;est relou. Mais en prime, entre chaque vérification du <code>if</code> s&#8217;écoule quelques nanosecondes durant lequelles l&#8217;état de mon fichier a pu changer. Un autre programme a pu changer les permissions, créer un fichier avec le même nom, etc. Arrivé à la fin du <code>if</code>, on n&#8217;a pas la garantie que les vérifications du début du <code>if</code> sont toujours d&#8217;actualité.</p>
<p><code>try/except</code> évite ce problème qu&#8217;on appelle des &#8220;race conditions&#8221; : on essaye d&#8217;abord, et ensuite si ça foire, on analyse pourquoi. Comme en drague.</p>
<p>Enfin on va utiliser <code>finally</code> pour faire du nettoyage : fermer un fichier, fermer une connexion à une base de données, une socket, supprimer un fichier temporaire. Bref, tout ce qu&#8217;on veut qui arrive, même si notre code se vautre.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    fichier <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp/fichier'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IOError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">OSError</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># gérer l'erreur</span>
<span style="color: #ff7700;font-weight:bold;">else</span>:
    <span style="color: #808080; font-style: italic;"># faire un truc avec le fichier</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># on essaye toujours de fermer notre fichier</span>
<span style="color: #ff7700;font-weight:bold;">finally</span>:
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        fichier.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># le fichier n'a jamais été ouvert et</span>
    <span style="color: #808080; font-style: italic;"># la variable n'existe pas</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">NameError</span>:
        <span style="color: #ff7700;font-weight:bold;">pass</span></pre></td></tr></table></div>

<h2>with</h2>
<p>Comme vous avez pu le constater, gérer proprement les erreurs, ça peut devenir vite chiant. Pour cette raison, beaucoup de <a href="../les-context-managers-et-le-mot-cle-with-en-python/index.html">context managers</a> servent à gérer les cas les plus courants.</p>
<p>Typiquement :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    fichier <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp/fichier'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IOError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">OSError</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># gérer l'erreur</span>
<span style="color: #ff7700;font-weight:bold;">else</span>:
    <span style="color: #808080; font-style: italic;"># faire un truc avec le fichier</span>
<span style="color: #ff7700;font-weight:bold;">finally</span>:
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        fichier.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">NameError</span>:
        <span style="color: #ff7700;font-weight:bold;">pass</span></pre></td></tr></table></div>

<p>Peut être remplacé par :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    <span style="color: #ff7700;font-weight:bold;">with</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp/fichier'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">as</span> fichier:
        <span style="color: #808080; font-style: italic;"># faire un truc avec le fichier</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IOError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">OSError</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># gérer l'erreur</span></pre></td></tr></table></div>

<p>Ou même en Python 3:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    <span style="color: #ff7700;font-weight:bold;">with</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/tmp/fichier'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'w'</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">as</span> fichier:
        <span style="color: #808080; font-style: italic;"># faire un truc avec le fichier</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">EnvironmentError</span>:
    <span style="color: #808080; font-style: italic;"># gérer l'erreur</span></pre></td></tr></table></div>

<p>Ce qui est quand même vachement plus court. Le context manager va s&#8217;occuper de la fermeture du fichier pour nous proprement. Cet article est déjà long, donc je ne vais pas rentrer en détail sur <code>with</code>, mais sachez que beaucoup d&#8217;objets qui demandent une fermeture peuvent être traités comme ça.</p>
<h2>Bubbling</h2>
<p>Une chose qui échappe généralement aux débutants quand ils commencent à utiliser les exceptions, c&#8217;est qu&#8217;elles bubblent, c&#8217;est à dire qu&#8217;elles remontent comme une bulle, de bloc en bloc, jusqu&#8217;à la racine du programme.</p>
<p>Si j&#8217;ai :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> truc:
    <span style="color: #ff7700;font-weight:bold;">if</span> machin:
        <span style="color: #ff7700;font-weight:bold;">for</span> bidule <span style="color: #ff7700;font-weight:bold;">in</span> chose:
            <span style="color: #ff7700;font-weight:bold;">raise</span> MaisAieuuuuuError<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Ca fait mal t'es con&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Mon programme ne va PAS planter à la ligne <code>raise MaisAieuuuuuError("Ca fait mal t'es con")</code>.</p>
<p>A la place, l&#8217;erreur va remonter en dehors de la boucle. Si elle n&#8217;est pas attrapée, elle va remonter en dehors du premier <code>if</code>. Si elle n&#8217;est pas attrapée, elle va remonter en dehors du second <code>if</code>, et enfin, si elle vraiment, mais alors vraiment pas attrapée, Python va crasher, et montrer une belle stack trace.</p>
<p>Ça veut dire que vous pouvez arrêter l&#8217;exception à plusieurs endroits dans le programme :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> truc:
    <span style="color: #ff7700;font-weight:bold;">if</span> machin:
        <span style="color: #ff7700;font-weight:bold;">for</span> bidule <span style="color: #ff7700;font-weight:bold;">in</span> chose:
            <span style="color: #ff7700;font-weight:bold;">try</span>:
                <span style="color: #ff7700;font-weight:bold;">raise</span> MaisAieuuuuuError<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Ca fait mal t'es con&quot;</span><span style="color: black;">&#41;</span>
            <span style="color: #ff7700;font-weight:bold;">except</span> MaisAieuuuuuError:
                <span style="color: #808080; font-style: italic;"># faire un truc</span></pre></td></tr></table></div>

<p>Dans ce cas, la boucle va continuer à tourner après la première erreur, et faire un <code>try/except</code> à chaque tour de boucle.</p>
<p>Mais si vous faites :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> truc:
    <span style="color: #ff7700;font-weight:bold;">if</span> machin:
        <span style="color: #ff7700;font-weight:bold;">try</span>
            <span style="color: #ff7700;font-weight:bold;">for</span> bidule <span style="color: #ff7700;font-weight:bold;">in</span> chose:
                <span style="color: #ff7700;font-weight:bold;">raise</span> MaisAieuuuuuError<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Ca fait mal t'es con&quot;</span><span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">except</span> MaisAieuuuuuError:
            <span style="color: #808080; font-style: italic;"># faire un truc</span></pre></td></tr></table></div>

<p>A la première erreur, la boucle est interrompue définitivement. Par contre la condition <code>if machin</code> va continuer sa route.</p>
<p>Mais si vous faites :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">if</span> truc:
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">if</span> machin:
            <span style="color: #ff7700;font-weight:bold;">for</span> bidule <span style="color: #ff7700;font-weight:bold;">in</span> chose:
                <span style="color: #ff7700;font-weight:bold;">raise</span> MaisAieuuuuuError<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Ca fait mal t'es con&quot;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> MaisAieuuuuuError:
        <span style="color: #808080; font-style: italic;"># faire un truc</span></pre></td></tr></table></div>

<p>La condition <code>if machin</code> est définitivement interrompue.</p>
<p>Et si vous faites :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> truc:
        <span style="color: #ff7700;font-weight:bold;">if</span> machin:
            <span style="color: #ff7700;font-weight:bold;">for</span> bidule <span style="color: #ff7700;font-weight:bold;">in</span> chose:
                <span style="color: #ff7700;font-weight:bold;">raise</span> MaisAieuuuuuError<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Ca fait mal t'es con&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> MaisAieuuuuuError:
    <span style="color: #808080; font-style: italic;"># faire un truc</span></pre></td></tr></table></div>

<p>Là, tout le programme est interrompu. Ca ne plantera pas, mais ça ne fera plus rien.</p>
<p>Il faut donc choisir soigneusement où attraper l&#8217;exception selon la partie du programme qu&#8217;on souhaite interrompre.</p>
<h2>Manipuler l&#8217;exception attrapée</h2>
<p>Les exceptions sont des objets complets. On peut les récupérer avec le mot clés <code>as</code> et analyser leur contenu.</p>
<p>Exemple :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    f <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;nawak&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IOError</span> <span style="color: #ff7700;font-weight:bold;">as</span> e:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;args: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">args</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;errno: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: #dc143c;">errno</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;filename: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">filename</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;strerror: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">strerror</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #808080; font-style: italic;">## args:  (2, 'No such file or directory')</span>
<span style="color: #808080; font-style: italic;">## errno:  2</span>
<span style="color: #808080; font-style: italic;">## filename:  nawak</span>
<span style="color: #808080; font-style: italic;">## strerror:  No such file or directory</span></pre></td></tr></table></div>

<p>Il est même possible de les lever à nouveau après :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    f <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;nawak&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IOError</span> <span style="color: #ff7700;font-weight:bold;">as</span> e:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;args: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">args</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;errno: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: #dc143c;">errno</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;filename: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">filename</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;strerror: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">strerror</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">raise</span> e</pre></td></tr></table></div>

<p><code>raise</code> appelé sans argument lève de toute façon automatiquement l&#8217;exception en cours. Mais il est possible de lever une autre exception :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    f <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;nawak&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IOError</span> <span style="color: #ff7700;font-weight:bold;">as</span> e:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;args: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">args</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;errno: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: #dc143c;">errno</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;filename: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">filename</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;strerror: &quot;</span><span style="color: #66cc66;">,</span> e.<span style="color: black;">strerror</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">raise</span> MonError<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;T'as encore oublie ton classeur Man&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Erreur à la sortie de l&#8217;interpréteur</h2>
<p>Il est possible d&#8217;attraper n&#8217;importe quelle exception non gérée juste avant qu&#8217;elle fasse crasher le programme, sans avoir à mettre tout son code dans un gros <code>try/except</code>.</p>
<p>Il faut définir une fonction qui accepte 3 arguments que sont la classe de l&#8217;exception, l&#8217;instance de l&#8217;exception et l&#8217;objet traceback :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> attrapez_les_tous<span style="color: black;">&#40;</span><span style="color: #008000;">type</span><span style="color: #66cc66;">,</span> value<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">traceback</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Pokemon !&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Ensuite il faut l&#8217;attacher au module <code>sys</code> avec le bon nom :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
<span style="color: #dc143c;">sys</span>.<span style="color: black;">excepthook</span> <span style="color: #66cc66;">=</span> attrapez_les_tous</pre></td></tr></table></div>

<p>Et hop :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff4500;">1</span> / <span style="color: #ff4500;">0</span>
Pokemon <span style="color: #66cc66;">!</span></pre></td></tr></table></div>

<p>Alors, c&#8217;est certain que si vous faites ça, vous avez intérêt à savoir ce que vous branlez car vous pouver tuer le debuggage. Ou alors créer un super moyen de logger toute erreur sur un process séparé qui vous le présente dans une belle interface Web. Au choix.</p>
<h2>Les exceptions en dehors des erreurs</h2>
<p>Les exceptions sont la pour gérer des cas exceptionnels, et pas forcément une erreur. Par exemple, la boucle <code>for</code> utilise les exceptions pour savoir quand s&#8217;arrêter. En effet elle attend que l&#8217;itérateur qu&#8217;elle utilise lève <code>StopIteration</code> :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> iterateur <span style="color: #66cc66;">=</span> <span style="color: #008000;">iter</span><span style="color: black;">&#40;</span><span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> next<span style="color: black;">&#40;</span>iterateur<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> next<span style="color: black;">&#40;</span>iterateur<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">1</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> next<span style="color: black;">&#40;</span>iterateur<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> next<span style="color: black;">&#40;</span>iterateur<span style="color: black;">&#41;</span>
---------------------------------------------------------------------------
<span style="color: #008000;">StopIteration</span>                             Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span>ipython-input-<span style="color: #ff4500;">11</span>-d90e1e04a685<span style="color: #66cc66;">&gt;</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
----<span style="color: #66cc66;">&gt;</span> <span style="color: #ff4500;">1</span> next<span style="color: black;">&#40;</span>iterateur<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #008000;">StopIteration</span>:</pre></td></tr></table></div>

<p>Donc quand on fait ça :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>x<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>En fait, la boucle fait un truc comme ça :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">iterateur <span style="color: #66cc66;">=</span> <span style="color: #008000;">iter</span><span style="color: black;">&#40;</span><span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">while</span> <span style="color: #008000;">True</span>:
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>next<span style="color: black;">&#40;</span>iterateur<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">StopIteration</span>:
        <span style="color: #ff7700;font-weight:bold;">break</span></pre></td></tr></table></div>

<p>Les exceptions en Python, c&#8217;est une grande histoire d&#8217;amour.</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Partager:</h3><div class="sd-content"><ul><li class="share-twitter"><div class="twitter_button"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url=http%3A%2F%2Fsametmax.com%2Fgestion-des-erreurs-en-python%2F&#038;counturl=http%3A%2F%2Fsametmax.com%2Fgestion-des-erreurs-en-python%2F&#038;count=horizontal&#038;text=Gestion%20des%20erreurs%20en%20Python%3A" style="width:101px; height:20px;"></iframe></div></li><li class="share-facebook"><div class="like_button"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fsametmax.com%2Fgestion-des-erreurs-en-python%2F&amp;layout=button_count&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;height=21&amp;locale=en_US&amp;width=90" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:96px; height:21px;" allowTransparency="true"></iframe></div></li><li class="share-google-plus-1"><div class="googleplus1_button"><div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://sametmax.com/gestion-des-erreurs-en-python/"></div></div></li><li class="share-email"><a rel="nofollow" data-shared="" class="share-email sd-button" href="index.html%3Fshare=email.html" title="Click to email this to a friend"><span>Email</span></a></li><li><a href="index.html%3Fshare=email.html#" class="sharing-anchor sd-button share-more"><span>More</span></a></li><li class="share-end"></li></ul><div class="sharing-hidden"><div class="inner" style="display: none;"><ul><li class="share-reddit"><div class="reddit_button"><iframe src="http://www.reddit.com/static/button/button1.html?width=120&amp;url=http%3A%2F%2Fsametmax.com%2Fgestion-des-erreurs-en-python%2F&amp;title=Gestion%20des%20erreurs%20en%20Python" height="22" width="120" scrolling="no" frameborder="0"></iframe></div></li><li class="share-pinterest"><div class="pinterest_button"><a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fsametmax.com%2Fgestion-des-erreurs-en-python%2F&#038;description=Gestion%20des%20erreurs%20en%20Python" data-pin-do="buttonBookmark" data-pin-config="beside"><img src="http://assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a></div></li><li class="share-end"></li><li class="share-tumblr"><a target="" href="http://www.tumblr.com/share/link/?url=http%3A%2F%2Fsametmax.com%2Fgestion-des-erreurs-en-python%2F&name=Gestion%20des%20erreurs%20en%20Python" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:62px; height:20px; background:url('http://platform.tumblr.com/v1/share_2.png') top left no-repeat transparent;">Share on Tumblr</a></li><li class="share-pocket"><div class="pocket_button"><a href="https://getpocket.com/save" class="pocket-btn" data-lang="en" data-save-url="http://sametmax.com/gestion-des-erreurs-en-python/" data-pocket-count="horizontal" >Pocket</a></div></li><li class="share-end"></li><li class="share-end"></li></ul></div></div></div></div></div>                        </section><!-- .entry-content -->

        <footer class="entry-meta"><hr class="featurette-divider"><div class="author-info"><div class="row-fluid"><div class="comment-avatar author-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=100&amp;d=retro&amp;r=X' class='avatar avatar-100 photo' height='100' width='100' /></div> <div class="author-description span10"><h3>About Sam</h3><p>Waf !</p><div class="author-link"><a href="../author/sam/index.html" rel="author">View all posts by Sam <span class="meta-nav">&rarr;</span></a></div></div></div></div></footer>                                    </article>
                                
                            
                        
                    
<div id="comments" class="comments-area" >
	<h2 id="tc-comment-title" class="comments-title">12 thoughts on &ldquo;<span>Gestion des erreurs en Python</span>&rdquo;</h2>              <ul class="commentlist">
                        <li class="comment even thread-even depth-1" id="li-comment-154157">
          
            <article id="comment-154157" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/bb9beb8ba94257434211bfe3ba022879?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">topic  </cite> <a class="comment-date" href="index.html#comment-154157"><time datetime="2015-01-20T19:54:31+00:00">20/01/2015 at 19:54</time></a></header>  <section class="comment-content comment"><p>J&#8217;aime bien ce truc pour faire taire une exception de manière explicite</p>
<p><code></p>
<p>from contextlib import suppress</p>
<p>with suppress(ZeroDivisionError):</p>
<p>print(1/0)</p>
<p></code></p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-154158">
          
            <article id="comment-154158" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/9528317dd210ce108e7c4855e01a4cdd?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Pouetpouet  </cite> <a class="comment-date" href="index.html#comment-154158"><time datetime="2015-01-20T20:11:13+00:00">20/01/2015 at 20:11</time></a></header>  <section class="comment-content comment"><p><cite>Il est d’ailleurs possible de dire à Python “tu m’attrapes tout” en omettant le nom de l’exception :</p>
<p>C’est généralement une mauvaise idée car si il arrive une erreur que vous n’avez pas prévue, la close except s’activera, masquant l’erreur, et ne vous donnera jamais la chance de découvrir le problème.</cite></p>
<p>Il suffit de mettre un &#8220;raise&#8221; dans le bloc de gestion de l&#8217;exception pour que celle-ci soit remontée un niveau plus haut.</p>
<p>(oui je sais, c&#8217;est dis, plus loin, mais pas dans le même contexte)</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-154193">
          
            <article id="comment-154193" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/73b1f9919446ef37cdb98edd698d8925?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Blef  </cite> <a class="comment-date" href="index.html#comment-154193"><time datetime="2015-01-21T07:51:54+00:00">21/01/2015 at 07:51</time></a></header>  <section class="comment-content comment"><p>Super article !</p>
<p>De mon côté il y a un truc que je ne sais pas faire correctement je pense. Il peut arriver qu&#8217;un ValueError par exemple soit levé avec un message <em>A</em> ou avec un message <em>B</em>. Et dans certains cas je veux que le message <em>A</em> soit attrapé et non bloquant et le message B je veux qu&#8217;il ne le soit pas. Donc ce que je fais en général c&#8217;est un :</p>
<p><code></p>
<p>try:</p>
<p>pass</p>
<p>except ValueError, e:</p>
<p>if e.message == 'A':</p>
<p>OK</p>
<p>else:</p>
<p>raise</p>
<p></code></p>
<p>Sauf que j&#8217;ai vu, je ne sais plus où qu&#8217;il ne faut pas utiliser le e.message. Du coup il faut utiliser le e.errno ? Ou il y a un autre moyen plus conseillé ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-154200">
          
            <article id="comment-154200" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="index.html#comment-154200"><time datetime="2015-01-21T09:17:33+00:00">21/01/2015 at 09:17</time></a></header>  <section class="comment-content comment"><p>Ca va dépendre de l&#8217;exception. Pour ValueError, y pas de raison d&#8217;attraper un message plutôt qu&#8217;un autre. Si tu dois faire ça, c&#8217;est probablement que le try est mal positionné.</p>
<p>Pour IOError par contre, c&#8217;est plus compliqué : en 2.7, oui tu dois checker e.errno. En Python 3, le problème a été résolu en ajouter de nouvelles exceptions : <a href="https://docs.python.org/3/library/exceptions.html#os-exceptions" rel="nofollow">https://docs.python.org/3/library/exceptions.html#os-exceptions</a></p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-154209">
          
            <article id="comment-154209" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/61697297628b27f04756a0fcd83e98f4?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">cendrieR  </cite> <a class="comment-date" href="index.html#comment-154209"><time datetime="2015-01-21T12:16:36+00:00">21/01/2015 at 12:16</time></a></header>  <section class="comment-content comment"><p>Merci pour la piqure de rappel.</p>
<p>Je plaide coupable pour : 1. Attraper systématiquement Exception (et logger.exception(e)) ; 2. Préférer checker mes données avec des if plutôt que d&#8217; &#8220;abuser&#8221; des exceptions, je trouve pas ça naturel.</p>
<p>Je vais essayer de me redresser productivement.</p>
<p>Je connaissais pas sys.excepthook, je vais essayer d&#8217;utiliser ça pour mes sorties webs. Jusqu&#8217;à présent j&#8217;utilisais timidement cgi.enable.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-154214">
          
            <article id="comment-154214" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/c4825da112287158f6b0ac9ef3ac1f04?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Furankun  </cite> <a class="comment-date" href="index.html#comment-154214"><time datetime="2015-01-21T14:45:16+00:00">21/01/2015 at 14:45</time></a></header>  <section class="comment-content comment"><p><span class="merci"></span>Super article, merci!</p>
<p>Quelques typos:</p>
<p>un motif récurant -&gt; un motif récurrent</p>
<p>Quand vous attraper -&gt; Quand vous attrapez</p>
<p>le bloc [&#8230;] est appelée -&gt; le bloc [&#8230;] est appelé</p>
<p>gérer toujours l’erreur -&gt; gérez toujours l’erreur (pas sûr pour celle-là, ça dépend de ce que tu veux dire)</p>
<p>quand vous créé -&gt; quand vous créez</p>
<p>on a pas la garantie -&gt; on n&#8217;a pas la garantie</p>
<p>ce que vous branler -&gt;  ce que vous branlez</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment even thread-even depth-1" id="li-comment-155116">
          
            <article id="comment-155116" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/71120e525a8b177bbe690caf54464425?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Raito Bezarius  </cite> <a class="comment-date" href="index.html#comment-155116"><time datetime="2015-02-02T20:06:32+00:00">02/02/2015 at 20:06</time></a></header>  <section class="comment-content comment"><p>Article génial, je connaissais pas le trick du sys.excepthook.</p>
<p>Sinon, y&#8217;a un joli moyen de tuer le concept d&#8217;exceptions en Python (pour le fuuuun) : FuckIt.py (<a href="https://github.com/ajalt/fuckitpy" rel="nofollow">https://github.com/ajalt/fuckitpy</a>)</p>
<p>Il me semble qu&#8217;il parse l&#8217;AST pour silencer tous les exceptions (deal with 0/0 now). Enfin, c&#8217;est drôle.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-155357">
          
            <article id="comment-155357" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/96c4c9f7aea391d719783a270c471397?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Vayel  </cite> <a class="comment-date" href="index.html#comment-155357"><time datetime="2015-02-06T20:14:27+00:00">06/02/2015 at 20:14</time></a></header>  <section class="comment-content comment"><p>Merci pour cet éclairage !</p>
<p>Au niveau des exceptions personnalisées, comment faire ça clairement ? Faut-il créer une exception par message ? Par classe ? Par type (<code>MyValueError</code>, <code>MyIOError</code>&#8230;) ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-even depth-1" id="li-comment-155359">
          
            <article id="comment-155359" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="index.html#comment-155359"><time datetime="2015-02-06T22:39:43+00:00">06/02/2015 at 22:39</time></a></header>  <section class="comment-content comment"><p>Il n&#8217;y a pas de réponse toute faite. Tu créés tes exceptions en fonction de la manière dont tu veux que ton utilisateur puisse les filtrer. Le seul moyen de faire ça, c&#8217;est d&#8217;utiliser ta propre lib et de voir ce qui est pratique.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-164870">
          
            <article id="comment-164870" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/48ad6beafb60a60f4768ab679dee53f6?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Uggla  </cite> <a class="comment-date" href="index.html#comment-164870"><time datetime="2015-10-15T21:21:34+00:00">15/10/2015 at 21:21</time></a></header>  <section class="comment-content comment"><p>Bonjour,</p>
<p>Je crois qu&#8217;il y a une petite coquille :</p>
<p>On peut gérer plusieurs exceptions avec un seul bloc :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> personnages<span style="color: black;">&#91;</span><span style="color: #ff4500;">100</span> / i<span style="color: black;">&#93;</span>
        <span style="color: #808080; font-style: italic;"># est exécuté pour ces deux exceptions</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">ZeroDivisionError</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>La ligne :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">ZeroDivisionError</span>:</pre></td></tr></table></div>

<p>devrait être :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">ZeroDivisionError</span><span style="color: black;">&#41;</span>:</pre></td></tr></table></div>

<p>D’après la doc ici <a href="https://docs.python.org/2/tutorial/errors.html#handling-exceptions" rel="nofollow">https://docs.python.org/2/tutorial/errors.html#handling-exceptions</a> :</p>
<p>A try statement may have more than one except clause, to specify handlers for different exceptions. At most one handler will be executed. Handlers only handle exceptions that occur in the corresponding try clause, not in other handlers of the same try statement. An except clause may name multiple exceptions as a parenthesized tuple, for example:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">... <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">RuntimeError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">TypeError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">NameError</span><span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">pass</span></pre></td></tr></table></div>

<p>Ou j&#8217;ai loupé un truc ?</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment byuser comment-author-sam bypostauthor even thread-even depth-1" id="li-comment-164877">
          
            <article id="comment-164877" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://1.gravatar.com/avatar/bf9ecde8f5e286de6ce5c80206cf9dd6?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Sam <span> Post author</span> </cite> <a class="comment-date" href="index.html#comment-164877"><time datetime="2015-10-16T12:57:56+00:00">16/10/2015 at 12:57</time></a></header>  <section class="comment-content comment"><p>Non, tu as parfaitement raison, ma syntaxe n&#8217;est plus valide depuis 2.6 il me semble.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-164878">
          
            <article id="comment-164878" class="comment"><div class="row-fluid"><div class="comment-avatar span2"><img alt='' src='http://0.gravatar.com/avatar/48ad6beafb60a60f4768ab679dee53f6?s=80&amp;d=retro&amp;r=X' class='avatar avatar-80 photo' height='80' width='80' /></div><div class="span10"> <header class="comment-meta comment-author vcard"><cite class="fn">Uggla  </cite> <a class="comment-date" href="index.html#comment-164878"><time datetime="2015-10-16T15:52:54+00:00">16/10/2015 at 15:52</time></a></header>  <section class="comment-content comment"><p>Oh !</p>
<p>Trop la classe, j&#8217;ai mon poste sur le site et j&#8217;ai trouvé une coquille de maitre SAM ! :)</p>
<p>Comment je suis fier !</p>
<p>Je vais bien souler mes collègues avec ça et m&#8217;inspirer de cet article de référence <a href="../le-bon-coup-de-pute-du-jeudi/index.html#tc-comment-title" rel="nofollow">http://sametmax.com/le-bon-coup-de-pute-du-jeudi/#tc-comment-title</a> pour communiquer ma joie.</p>
<p>Plus sérieusement, j&#8217;en profite pour vous remercier, super site avec plein de contenu intéressant et avec un un ton pas prise de tête.</p>
<p>J&#8217;ai appris plein de trucs grâce à ce site.</p>
</section></div></div></article>          <!-- #comment-## -->
        </li><!-- #comment-## -->
              </ul><!-- .commentlist -->
            								<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="index.html%3Fshare=email.html#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://sametmax.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																			<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" aria-describedby="email-notes" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment-69005804924c5ba04" cols="45" rows="8" aria-describedby="form-allowed-tags" aria-required="true"></textarea><textarea name="comment" rows="1" cols="1" style="display:none"></textarea></p><input type="hidden" name="comment-replaced" value="true" />						<p class="form-allowed-tags" id="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;pre&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" class="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='15786' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="8bfc52f508" /></p><script src="../index.html%3Flive-comment-preview.js" type="text/javascript"></script><div id="commentPreview"></div><p style="display:none;"><input type="text" name="nxts" value="1446911728" /><input type="text" name="nxts_signed" value="2854d0ce514f46c5895a8c66e70115bc7a627b85" /><input type="text" name="3391944b2f16b5" value="" /><input type="text" name="60b0898998b38feb005f" value="1384821080ddbd3ad8d04e611" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="198"/></p>					</form>
							</div><!-- #respond -->
			</div><!-- #comments .comments-area -->


<div class="ie-comment">
Des questions Python sans rapport avec l'article ? Posez-les sur <a href="http://indexerror.net">IndexError</a>.

</div>
        
          <hr class="featurette-divider __after_loop">
          <nav id="nav-below" class="navigation" role="navigation">

              <h3 class="assistive-text">
                Post navigation              </h3>

              <ul class="pager">
                                  <li class="previous">
                    <span class="nav-previous">
                      <a href="../le-don-du-mois-mozilla/index.html" rel="prev"><span class="meta-nav">&larr;</span> Le don du mois : Mozilla</a>                    </span>
                  </li>
                                                  <li class="next">
                    <span class="nav-next">
                        <a href="../utiliser-requests-de-maniere-non-bloquante-facilement/index.html" rel="next">Utiliser requests de manière non bloquante facilement <span class="meta-nav">&rarr;</span></a>                    </span>
                  </li>
                              </ul>

          </nav><!-- #nav-below .navigation -->

        
        
                </div><!--.article-container -->

                    
        <div class="span3 right tc-sidebar">
           <div id="right" class="widget-area" role="complementary">
                                                      <aside id="text-9" class="widget widget_text">			<div class="textwidget"><p style="font-size:1.3em"><a href="../mais-ou-je-suis-tombee-la/index.html">Mais où je suis tombé(e) là ?</a></p></div>
		</aside><aside id="text-7" class="widget widget_text">			<div class="textwidget"><img src="http://www.adobe.com/images/pdficon_small.png" width="16" height="16"/> <a href="http://pdfcrowd.com/url_to_pdf/">Télécharger cette page en PDF</a> </div>
		</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget"><br><br><a href="../appel-a-contributeurs-impertinents/index.html"><img src="../wp-content/uploads/2012/07/contributeur.png" width="288px" style="vertical-align: middle;margin-top:-40px;margin-bottom:10px;"></a> </div>
		</aside><aside id="blog_subscription-4" class="widget jetpack_subscription_widget"><h3 class="widget-title"><label for="subscribe-field">Souscrire à nos conneries</label></h3>
		<form action="index.html%3Fshare=email.html#" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-4">
			<div id="subscribe-text"><p>Entrez votre adresse mail et vous recevrez une notification à chaque nouvel article.</p>
</div><p>Join 646 other subscribers</p>

			<p id="subscribe-email">
				<label id="jetpack-subscribe-label" for="subscribe-field">
					Email Address				</label>
				<input type="email" name="email" value="Email Address" id="subscribe-field" placeholder="Email Address" />
			</p>

			<p id="subscribe-submit">
				<input type="hidden" name="action" value="subscribe" />
				<input type="hidden" name="source" value="http://sametmax.com/gestion-des-erreurs-en-python/?shared=email&#038;msg=fail" />
				<input type="hidden" name="sub-type" value="widget" />
				<input type="hidden" name="redirect_fragment" value="blog_subscription-4" />
								<input type="submit" value="J&#039;adhère, bon dieu !" name="jetpack_subscriptions_widget" />
			</p>
		</form>

		<script>
			( function( d ) {
				if ( ( 'placeholder' in d.createElement( 'input' ) ) ) {
					var label = d.getElementById( 'jetpack-subscribe-label' );
 					label.style.clip 	 = 'rect(1px, 1px, 1px, 1px)';
 					label.style.position = 'absolute';
 					label.style.height   = '1px';
 					label.style.width    = '1px';
 					label.style.overflow = 'hidden';
				}
			} ) ( document );
		</script>

		
</aside><aside id="tag_cloud-3" class="widget widget_tag_cloud"><h3 class="widget-title">TagCloud</h3><div class="tagcloud"><a href='../tag/0bin/index.html' class='tag-link-148' title='9 topics' style='font-size: 8.8092485549133pt;'>0bin</a>
<a href='../tag/angularjs/index.html' class='tag-link-443' title='9 topics' style='font-size: 8.8092485549133pt;'>angularjs</a>
<a href='../tag/autobahn/index.html' class='tag-link-979' title='9 topics' style='font-size: 8.8092485549133pt;'>autobahn</a>
<a href='../tag/bash/index.html' class='tag-link-14' title='16 topics' style='font-size: 10.670520231214pt;'>bash</a>
<a href='../tag/bitcoin/index.html' class='tag-link-320' title='7 topics' style='font-size: 8pt;'>bitcoin</a>
<a href='../tag/blog/index.html' class='tag-link-107' title='26 topics' style='font-size: 12.28901734104pt;'>blog</a>
<a href='../tag/cache/index.html' class='tag-link-333' title='10 topics' style='font-size: 9.1329479768786pt;'>cache</a>
<a href='../tag/comprehension-lists/index.html' class='tag-link-20' title='8 topics' style='font-size: 8.4046242774566pt;'>comprehension-lists</a>
<a href='../tag/crossbar/index.html' class='tag-link-1046' title='8 topics' style='font-size: 8.4046242774566pt;'>crossbar</a>
<a href='../tag/css/index.html' class='tag-link-188' title='9 topics' style='font-size: 8.8092485549133pt;'>css</a>
<a href='../tag/cul-2/index.html' class='tag-link-33' title='11 topics' style='font-size: 9.4566473988439pt;'>cul</a>
<a href='../tag/decorator/index.html' class='tag-link-265' title='7 topics' style='font-size: 8pt;'>decorator</a>
<a href='../tag/django/index.html' class='tag-link-28' title='81 topics' style='font-size: 16.173410404624pt;'>django</a>
<a href='../tag/don/index.html' class='tag-link-1210' title='10 topics' style='font-size: 9.1329479768786pt;'>don</a>
<a href='../tag/encoding/index.html' class='tag-link-54' title='8 topics' style='font-size: 8.4046242774566pt;'>encoding</a>
<a href='../tag/git/index.html' class='tag-link-18' title='34 topics' style='font-size: 13.179190751445pt;'>git</a>
<a href='../tag/http/index.html' class='tag-link-204' title='13 topics' style='font-size: 10.023121387283pt;'>http</a>
<a href='../tag/import/index.html' class='tag-link-215' title='9 topics' style='font-size: 8.8092485549133pt;'>import</a>
<a href='../tag/ipython/index.html' class='tag-link-164' title='10 topics' style='font-size: 9.1329479768786pt;'>ipython</a>
<a href='../tag/iterable/index.html' class='tag-link-217' title='14 topics' style='font-size: 10.265895953757pt;'>iterable</a>
<a href='../tag/javascript/index.html' class='tag-link-96' title='44 topics' style='font-size: 14.06936416185pt;'>javascript</a>
<a href='../tag/jquery/index.html' class='tag-link-112' title='8 topics' style='font-size: 8.4046242774566pt;'>jquery</a>
<a href='../tag/lambda/index.html' class='tag-link-292' title='7 topics' style='font-size: 8pt;'>lambda</a>
<a href='../tag/linux/index.html' class='tag-link-238' title='10 topics' style='font-size: 9.1329479768786pt;'>linux</a>
<a href='../tag/meta/index.html' class='tag-link-102' title='127 topics' style='font-size: 17.791907514451pt;'>meta</a>
<a href='../tag/mysql/index.html' class='tag-link-82' title='8 topics' style='font-size: 8.4046242774566pt;'>mysql</a>
<a href='../tag/nginx/index.html' class='tag-link-183' title='14 topics' style='font-size: 10.265895953757pt;'>nginx</a>
<a href='../tag/nsfw/index.html' class='tag-link-319' title='14 topics' style='font-size: 10.265895953757pt;'>nsfw</a>
<a href='../tag/pip/index.html' class='tag-link-344' title='7 topics' style='font-size: 8pt;'>pip</a>
<a href='../tag/poo/index.html' class='tag-link-549' title='14 topics' style='font-size: 10.265895953757pt;'>poo</a>
<a href='../tag/python/index.html' class='tag-link-4' title='429 topics' style='font-size: 22pt;'>python</a>
<a href='../tag/python-3/index.html' class='tag-link-365' title='8 topics' style='font-size: 8.4046242774566pt;'>python 3</a>
<a href='../tag/redis/index.html' class='tag-link-196' title='10 topics' style='font-size: 9.1329479768786pt;'>redis</a>
<a href='../tag/ruby/index.html' class='tag-link-325' title='8 topics' style='font-size: 8.4046242774566pt;'>ruby</a>
<a href='../tag/server/index.html' class='tag-link-185' title='7 topics' style='font-size: 8pt;'>server</a>
<a href='../tag/shell/index.html' class='tag-link-202' title='9 topics' style='font-size: 8.8092485549133pt;'>shell</a>
<a href='../tag/ssh/index.html' class='tag-link-206' title='7 topics' style='font-size: 8pt;'>ssh</a>
<a href='../tag/sublime-text/index.html' class='tag-link-76' title='9 topics' style='font-size: 8.8092485549133pt;'>sublime text</a>
<a href='../tag/ubuntu/index.html' class='tag-link-255' title='15 topics' style='font-size: 10.42774566474pt;'>ubuntu</a>
<a href='../tag/unicode/index.html' class='tag-link-53' title='7 topics' style='font-size: 8pt;'>unicode</a>
<a href='../tag/unit-tests/index.html' class='tag-link-302' title='8 topics' style='font-size: 8.4046242774566pt;'>unit tests</a>
<a href='../tag/unpacking/index.html' class='tag-link-180' title='8 topics' style='font-size: 8.4046242774566pt;'>unpacking</a>
<a href='../tag/virtualenv/index.html' class='tag-link-259' title='8 topics' style='font-size: 8.4046242774566pt;'>virtualenv</a>
<a href='../tag/wamp/index.html' class='tag-link-1039' title='14 topics' style='font-size: 10.265895953757pt;'>wamp</a>
<a href='../tag/yield/index.html' class='tag-link-287' title='9 topics' style='font-size: 8.8092485549133pt;'>yield</a></div>
</aside><aside id="text-5" class="widget widget_text"><h3 class="widget-title"> Envoyez des sioux</h3>			<div class="textwidget"><p><img src="../wp-content/uploads/2013/07/bitcoin.png" width="16" height="16"/> On adooooore les bitcoins :</p>

<p>

<a href="bitcoin:19zAHPPuce4BAhsdy9KaFwVLurEJXMhMAn?amount=1X8&label=SamEtMax">19zAHPPuce4BAhsdy9KaFwVLurEJXMhMAn</a>

</p></div>
		</aside><aside id="nav_menu-3" class="widget widget_nav_menu"><h3 class="widget-title">Nos projets</h3><div class="menu-nos-projets-container"><ul id="menu-nos-projets" class="menu"><li id="menu-item-15841" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15841"><a href="http://multiboards.net/">Multiboards &#8211; l&#8217;actu geek fr en une page</a></li>
<li id="menu-item-15837" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15837"><a href="http://0bin.net">0bin &#8211; le pastebin chiffré</a></li>
<li id="menu-item-15838" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15838"><a href="http://allthatcounts.net">All that counts &#8211; compteur pour jeux</a></li>
<li id="menu-item-15839" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15839"><a href="https://github.com/sametmax/django-quicky">Django quicky &#8211; quick views for Django</a></li>
<li id="menu-item-15840" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15840"><a href="https://github.com/sametmax/VizHash.js">VizHash.js &#8211; Hash visuels</a></li>
<li id="menu-item-15842" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15842"><a href="https://github.com/sametmax/codes-des-articles">Code des articles du blog</a></li>
</ul></div></aside>                                              </div><!-- #left or #right-->
        </div><!--.tc-sidebar -->

        
        </div><!--.row -->
    </div><!-- .container role: main -->

    
</div><!--#main-wrapper"-->

		<!-- FOOTER -->
		<footer id="footer" class="">
		 					<div class="container footer-widgets ">
					<div class="row widget-area" role="complementary">
												
							<div id="footer_one" class="span4">
																
										<aside id="nav_menu-2" class="widget widget_nav_menu"><h3 class="widget-title">Hors du blog</h3><div class="menu-bottom-menu-container"><ul id="menu-bottom-menu" class="menu"><li id="menu-item-2391" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2391"><a href="../contactez-nous/index.html">Page de contact</a></li>
<li id="menu-item-12230" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12230"><a href="http://twitter.com/sam_et_max">@sam_et_max sur tweeter</a></li>
<li id="menu-item-12285" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12285"><a href="http://bridge.suumitsu.eu/?action=display&#038;bridge=TwitterBridge&#038;u=sam_et_max&#038;format=AtomFormat">Nos tweets en RSS</a></li>
<li id="menu-item-12231" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12231"><a href="https://github.com/sametmax/">Fork me, I&#8217;m famous (github)</a></li>
</ul></div></aside>
																							</div><!-- .{$key}_widget_class -->

						
							<div id="footer_two" class="span4">
																
										<aside id="text-8" class="widget widget_text">			<div class="textwidget">Tous les textes de ce blog, sauf signalement contraire, sont sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.</div>
		</aside>
																							</div><!-- .{$key}_widget_class -->

						
							<div id="footer_three" class="span4">
																
										<aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Toi aussi, trouve un article obsolète sur notre blog</h3>		<ul>
	<li><a href='../2015/11/index.html'>November 2015</a>&nbsp;(5)</li>
	<li><a href='../2015/10/index.html'>October 2015</a>&nbsp;(2)</li>
	<li><a href='../2015/09/index.html'>September 2015</a>&nbsp;(6)</li>
	<li><a href='../2015/08/index.html'>August 2015</a>&nbsp;(10)</li>
	<li><a href='../2015/07/index.html'>July 2015</a>&nbsp;(18)</li>
	<li><a href='../2015/06/index.html'>June 2015</a>&nbsp;(13)</li>
	<li><a href='../2015/05/index.html'>May 2015</a>&nbsp;(12)</li>
	<li><a href='../2015/04/index.html'>April 2015</a>&nbsp;(13)</li>
	<li><a href='../2015/03/index.html'>March 2015</a>&nbsp;(8)</li>
	<li><a href='../2015/02/index.html'>February 2015</a>&nbsp;(4)</li>
	<li><a href='../2015/01/index.html'>January 2015</a>&nbsp;(21)</li>
	<li><a href='../2014/12/index.html'>December 2014</a>&nbsp;(24)</li>
	<li><a href='../2014/11/index.html'>November 2014</a>&nbsp;(6)</li>
	<li><a href='../2014/10/index.html'>October 2014</a>&nbsp;(18)</li>
	<li><a href='../2014/09/index.html'>September 2014</a>&nbsp;(10)</li>
	<li><a href='../2014/08/index.html'>August 2014</a>&nbsp;(5)</li>
	<li><a href='../2014/07/index.html'>July 2014</a>&nbsp;(11)</li>
	<li><a href='../2014/06/index.html'>June 2014</a>&nbsp;(25)</li>
	<li><a href='../2014/05/index.html'>May 2014</a>&nbsp;(14)</li>
	<li><a href='../2014/04/index.html'>April 2014</a>&nbsp;(10)</li>
	<li><a href='../2014/03/index.html'>March 2014</a>&nbsp;(23)</li>
	<li><a href='../2014/02/index.html'>February 2014</a>&nbsp;(27)</li>
	<li><a href='../2014/01/index.html'>January 2014</a>&nbsp;(17)</li>
	<li><a href='../2013/12/index.html'>December 2013</a>&nbsp;(27)</li>
	<li><a href='../2013/11/index.html'>November 2013</a>&nbsp;(25)</li>
	<li><a href='../2013/10/index.html'>October 2013</a>&nbsp;(27)</li>
	<li><a href='../2013/09/index.html'>September 2013</a>&nbsp;(1)</li>
	<li><a href='../2013/08/index.html'>August 2013</a>&nbsp;(31)</li>
	<li><a href='../2013/07/index.html'>July 2013</a>&nbsp;(32)</li>
	<li><a href='../2013/06/index.html'>June 2013</a>&nbsp;(24)</li>
	<li><a href='../2013/05/index.html'>May 2013</a>&nbsp;(30)</li>
	<li><a href='../2013/04/index.html'>April 2013</a>&nbsp;(31)</li>
	<li><a href='../2013/03/index.html'>March 2013</a>&nbsp;(33)</li>
	<li><a href='../2013/02/index.html'>February 2013</a>&nbsp;(29)</li>
	<li><a href='../2013/01/index.html'>January 2013</a>&nbsp;(34)</li>
	<li><a href='../2012/12/index.html'>December 2012</a>&nbsp;(32)</li>
	<li><a href='../2012/11/index.html'>November 2012</a>&nbsp;(36)</li>
	<li><a href='../2012/10/index.html'>October 2012</a>&nbsp;(35)</li>
	<li><a href='../2012/09/index.html'>September 2012</a>&nbsp;(36)</li>
	<li><a href='../2012/08/index.html'>August 2012</a>&nbsp;(37)</li>
	<li><a href='../2012/07/index.html'>July 2012</a>&nbsp;(33)</li>
	<li><a href='../2012/06/index.html'>June 2012</a>&nbsp;(24)</li>
	<li><a href='../2012/05/index.html'>May 2012</a>&nbsp;(31)</li>
	<li><a href='../2012/04/index.html'>April 2012</a>&nbsp;(20)</li>
	<li><a href='../2012/03/index.html'>March 2012</a>&nbsp;(10)</li>
	<li><a href='../2012/02/index.html'>February 2012</a>&nbsp;(14)</li>
		</ul>
</aside>
																							</div><!-- .{$key}_widget_class -->

																	</div><!-- .row.widget-area -->
				</div><!--.footer-widgets -->
				    				 <div class="colophon">
			 	<div class="container">
			 		<div class="row-fluid">
					    <div class="span4 social-block pull-left"><span class="tc-footer-social-links-wrapper" ><a class="social-icon icon-feed" href="../feed/rss/index.html" title="Subscribe to my rss feed"  ></a></span></div><div class="span4 credits"><p>&middot; &copy; 2015 <a href="../index.html" title="Sam &amp; Max" rel="bookmark">Sam &amp; Max</a> &middot; Designed by <a href="http://themesandco.com/">Themes &amp; Co</a> &middot;</p></div><div class="span4 backtop"><p class="pull-right"><a class="back-to-top" href="index.html%3Fshare=email.html#">Back to top</a></p></div>	      			</div><!-- .row-fluid -->
	      		</div><!-- .container -->
	      	</div><!-- .colophon -->
	    			</footer>
			<div style="display:none">
	<div class="grofile-hash-map-bf9ecde8f5e286de6ce5c80206cf9dd6">
	</div>
	<div class="grofile-hash-map-bb9beb8ba94257434211bfe3ba022879">
	</div>
	<div class="grofile-hash-map-9528317dd210ce108e7c4855e01a4cdd">
	</div>
	<div class="grofile-hash-map-73b1f9919446ef37cdb98edd698d8925">
	</div>
	<div class="grofile-hash-map-bf9ecde8f5e286de6ce5c80206cf9dd6">
	</div>
	<div class="grofile-hash-map-61697297628b27f04756a0fcd83e98f4">
	</div>
	<div class="grofile-hash-map-c4825da112287158f6b0ac9ef3ac1f04">
	</div>
	<div class="grofile-hash-map-71120e525a8b177bbe690caf54464425">
	</div>
	<div class="grofile-hash-map-96c4c9f7aea391d719783a270c471397">
	</div>
	<div class="grofile-hash-map-48ad6beafb60a60f4768ab679dee53f6">
	</div>
	</div>
		<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
					<script type="text/javascript">
			  (function() {
			    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
			    po.src = 'https://apis.google.com/js/plusone.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			  })();
			</script>
				<div id="sharing_email" style="display: none;">
		<form action="index.html%3Fshare=email.html" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

			
			
			<img style="float: right; display: none" class="loading" src="../wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a href="index.html%3Fshare=email.html#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
					<script type="text/javascript">
				// Pinterest shared resources
				var s = document.createElement("script");
				s.type = "text/javascript";
				s.async = true;
				s.src = window.location.protocol + "//assets.pinterest.com/js/pinit.js";
				var x = document.getElementsByTagName("script")[0];
				x.parentNode.insertBefore(s, x);
				// if 'Pin it' button has 'counts' make container wider
				jQuery(window).load( function(){ jQuery( 'li.share-pinterest a span:visible' ).closest( '.share-pinterest' ).width( '80px' ); } );
			</script>
		<script type="text/javascript" src="http://platform.tumblr.com/v1/share.js"></script>		<script>
		// Don't use Pocket's default JS as it we need to force init new Pocket share buttons loaded via JS.
		function jetpack_sharing_pocket_init() {
			jQuery.getScript( 'https://widgets.getpocket.com/v1/j/btn.js?v=1' );
		}
		jQuery( document ).on( 'ready', jetpack_sharing_pocket_init );
		jQuery( document.body ).on( 'post-load', jetpack_sharing_pocket_init );
		</script>
		<script type='text/javascript' src='../wp-content/plugins/akismet/_inc/form.js%3Fver=3.1.2'></script>
<script type='text/javascript' src='../wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js%3Fver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/sametmax.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ..."};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/contact-form-7/includes/js/scripts.js%3Fver=4.0.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var pollsL10n = {"ajax_url":"http:\/\/sametmax.com\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/wp-polls/polls-js.js%3Fver=2.68'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201545'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2015Novaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/wpgroho.js%3Fver=4.1'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/ui/core.min.js%3Fver=1.11.2'></script>
<script type='text/javascript' src='../wp-content/themes/customizr/inc/assets/js/modernizr.min.js%3Fver=3.2.10'></script>
<script type='text/javascript' src='../wp-content/themes/customizr/inc/assets/js/retina.min.js%3Fver=3.2.10'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/sharedaddy/sharing.js%3Fver=20140920'></script>

	<script src="http://stats.wp.com/e-201545.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:3.3',blog:'32490438',post:'15786',tz:'0'});
	var load_cmc = function(){linktracker_init(32490438,15786,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><div class="tc-btt-wrapper"><i class="btt-arrow" style="color:#394143"></i></div>	</body>
	</html>