<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="fr-FR" >
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>  Décorateur de trace | Sam &amp; Max: Python, Django, Git et du cul</title>
<meta http-equiv="Content-Language" content="fr" />

<link rel="shortcut icon" href="../wp-content/uploads/2012/05/favicon.ico">

<link rel="stylesheet" href="../wp-content/themes/Minimal/style.css%3F238.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max: Python, Django, Git et du cul RSS Feed" href="../feed/index.html" />
<link rel="alternate" type="application/atom+xml" title="Sam &amp; Max: Python, Django, Git et du cul Atom Feed" href="../feed/atom/index.html" />
<link rel="pingback" href="../xmlrpc.php" />


<!--[if lt IE 7]>
	<link rel="stylesheet" type="text/css" href="http://sametmax.com/wp-content/themes/Minimal/css/ie6style.css" />
	<script type="text/javascript" src="http://sametmax.com/wp-content/themes/Minimal/js/DD_belatedPNG_0.0.8a-min.js"></script>
	<script type="text/javascript">DD_belatedPNG.fix('img#logo, #header #search-form, #slogan, a#left_arrow, a#right_arrow, div.slide img.thumb, div#controllers a, a.readmore, a.readmore span, #services .one-third, #services .one-third.first img.icon, #services img.icon, div.sidebar-block .widget ul li');</script>
<![endif]-->
<!--[if IE 7]>
	<link rel="stylesheet" type="text/css" href="http://sametmax.com/wp-content/themes/Minimal/css/ie7style.css" />
<![endif]-->

<script type="text/javascript">
	document.documentElement.className = 'js';
</script>

<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max: Python, Django, Git et du cul &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max: Python, Django, Git et du cul &raquo; Comments Feed" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Sam &amp; Max: Python, Django, Git et du cul &raquo; Décorateur de trace Comments Feed" href="feed/index.html" />
<meta content="Minimal v.3.3" name="generator"/><link media="screen" type="text/css" href="../wp-content/themes/Minimal/epanel/page_templates/js/fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" />
<link media="screen" type="text/css" href="../wp-content/themes/Minimal/epanel/page_templates/page_templates.css" rel="stylesheet" /><link rel='stylesheet' id='contact-form-7-css'  href='../wp-content/plugins/contact-form-7/includes/css/styles.css%3Fver=3.3.css' type='text/css' media='all' />
<link rel='stylesheet' id='et-shortcodes-css-css'  href='../wp-content/themes/Minimal/epanel/shortcodes/shortcodes.css%3Fver=1.8.css' type='text/css' media='all' />
<link rel='stylesheet' id='sharedaddy-css'  href='../wp-content/plugins/jetpack/modules/sharedaddy/sharing.css%3Fver=3.3.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='cfq-css'  href='../wp-content/plugins/comment-form-quicktags/style.css%3Fver=20110712.css' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jquery.js%3Fver=1.7.1'></script>
<script type='text/javascript' src='../wp-includes/js/comment-reply.js%3Fver=20090102'></script>
<script type='text/javascript' src='../wp-content/themes/Minimal/epanel/shortcodes/js/et_shortcodes_frontend.js%3Fver=1.8'></script>
<script type='text/javascript' src='../wp-content/plugins/comment-form-quicktags/quicktags.php%3Fver=20121011'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Appeler une fonction fabric, hors d&#8217;un fichier fabfile' href='../appeler-une-fonction-fabric-hors-dun-fichier-fabfile/index.html' />
<link rel='next' title='Hic' href='../hic/index.html' />
<meta name="generator" content="WordPress 3.3.1" />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='http://wp.me/p2ckfk-1ts' />
<link rel="payment" type="text/html" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fdecorateur-de-trace%2F&amp;language=en_GB&amp;category=text&amp;title=D%C3%A9corateur+de+trace&amp;description=%28Ceci+est+un+post+invit%C3%A9+de+xonop+sous+licence+creative+common+3.0+unported.%29+Suite+aux+superbes+articles+sur+les+d%C3%A9corateurs+et+sur+l%26%238217%3B%C3%A9criture+des+logs+en+python+j%26%238217%3Bai+voulu+mettre...&amp;tags=decorateur%2Cinspect%2Cintrospection%2Clog%2Cblog" />

<link rel="stylesheet" href="../wp-content/plugins/wp-syntax/wp-syntax.css" type="text/css" media="screen" />
<style type="text/css" media="all">
/* <![CDATA[ */
@import url("../wp-content/plugins/wp-table-reloaded/css/plugin.css%3Fver=1.9.3.css");
@import url("../wp-content/plugins/wp-table-reloaded/css/datatables.css%3Fver=1.9.3.css");
/* ]]> */
</style>	<style type="text/css">
		#et_pt_portfolio_gallery { margin-left: -11px; }
		.et_pt_portfolio_item { margin-left: 23px; }
		.et_portfolio_small { margin-left: -39px !important; }
		.et_portfolio_small .et_pt_portfolio_item { margin-left: 35px !important; }
		.et_portfolio_large { margin-left: -20px !important; }
		.et_portfolio_large .et_pt_portfolio_item { margin-left: 14px !important; }
	</style>

</head>
<body>
	<div id="page-wrap">
			
		<div id="header">
			<!-- Start Logo -->
				<a href="../index.html">					<img src="../wp-content/uploads/2012/04/logo1.png" alt="Logo" id="logo"/></a>
				
				<p id="slogan">Deux développeurs en vadrouille qui se sortent les doigts du code</p>
					
			<!-- End Logo -->
					
			<!-- Start Searchbox -->
				<div id="search-form">
					<form method="get" id="searchform1" action="../index.html">
						<input type="text" value="search this site..." name="s" id="searchinput" />
					</form>
				</div>
								
			<!-- End Searchbox -->
				
				<div class="clear"></div>
				
				<ul id="menu-top-menu" class="superfish nav clearfix"><li id="menu-item-1702" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1702"><a href="../category/programmation/index.html">Programmation</a></li>
<li id="menu-item-1703" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1703"><a href="../category/administration-system/index.html">Admin System</a></li>
<li id="menu-item-1704" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1704"><a href="../category/philo-et-culture/index.html">Philo et culture</a></li>
<li id="menu-item-1706" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1706"><a href="../category/cul/index.html">Cul</a></li>
<li id="menu-item-3340" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3340"><a href="../cours-et-tutos/index.html">Cours et tutos</a></li>
<li id="menu-item-2610" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2610"><a href="../nos-tweets/index.html">Nos tweets SANS twitter :-)</a></li>
<li id="menu-item-1707" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1707"><a title="Les meilleurs blogs du Web" href="http://multiboards.net/">Multiboards</a></li>
<li id="menu-item-7439" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7439"><a href="https://github.com/sametmax/">Nos githuberies</a></li>
</ul>									
		</div> <!-- end #header -->

		<div id="breadcrumbs">
		
					<a href="../index.html">Home</a> &raquo;
				
									<a href="../category/programmation/index.html">Programmation</a> &raquo; Décorateur de trace					
</div> <!-- end #breadcrumbs -->		
	
	<div id="content" class="clearfix">
		<div id="content-area">
					<div class="entry clearfix">
				<h1 class="title">Décorateur de trace</h1>
					<p class="post-meta">
		Posted  by <a href="../author/xonop/index.html" title="Posts by xonop" rel="author">xonop</a> on 15 Apr 2013 in <a href="../category/programmation/index.html" title="View all posts in Programmation" rel="category tag">Programmation</a> | <a href="index.html#comments" title="Comment on Décorateur de trace">14 comments</a>	</p>
				
							
									
						
								
				<p><em>(Ceci est un post invité de <a href="../author/xonop/index.html">xonop</a> sous licence creative common 3.0 unported.)</em></p>
<p>Suite aux superbes articles sur les <a href="../comprendre-les-decorateurs-python-pas-a-pas-partie-1.1.html">décorateurs</a> et sur l&#8217;écriture des <a href="../ecrire-des-logs-en-python/index.html">logs en python</a> j&#8217;ai voulu mettre en pratique dans mon projet.<br />
C&#8217;est là que les ennuis ont commencé !<br />
<span id="more-5670"></span></p>
<p><strong>Objectif :</strong></p>
<p>Créer un décorateur qui me permette de tracer le passage dans certaines méthodes.<br />
Celui-ci doit :</p>
<ul>
<li>Être débrayable facilement.</li>
<li>Récupérer automatiquement le nom de la méthode, sa classe et son module.</li>
</ul>
<p><strong>Première étape : le logger</strong></p>
<p>Avant toute chose mettons en place l&#8217;environnement pour pouvoir tracer en utilisant le module logging.<br />
Pour simplifier les exemples, nous associons un seul <em>handler</em> de type <em>terminal</em>.<br />
La fonction <code>log_debug</code> permet de faire appel au logger pour tracer une information.</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> functools
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">logging</span>
&nbsp;
__DECO_ACTIVATED = <span style="color: #008000;">True</span>
__logger = <span style="color: #008000;">None</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> init_logger<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">global</span> __logger
    __logger = <span style="color: #dc143c;">logging</span>.<span style="color: black;">getLogger</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    __logger.<span style="color: black;">setLevel</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">logging</span>.<span style="color: black;">DEBUG</span><span style="color: black;">&#41;</span>
    terminalHandler = <span style="color: #dc143c;">logging</span>.<span style="color: black;">StreamHandler</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    terminalHandler.<span style="color: black;">setLevel</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">logging</span>.<span style="color: black;">DEBUG</span><span style="color: black;">&#41;</span>
    __logger.<span style="color: black;">addHandler</span><span style="color: black;">&#40;</span>terminalHandler<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> log_debug<span style="color: black;">&#40;</span>text<span style="color: black;">&#41;</span>:
    __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span>text<span style="color: black;">&#41;</span></pre></div></div>

<p><strong>Deuxième étape : le décorateur, version basique</strong></p>
<p>Pour commencer, le décorateur débrayable :</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> log_decorator<span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> __DECO_ACTIVATED:
        <span style="color: #ff7700;font-weight:bold;">return</span> func
&nbsp;
    @functools.<span style="color: black;">wraps</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> wrapped<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>:
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;BEGIN&quot;</span><span style="color: black;">&#41;</span>
        data = func<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;END&quot;</span><span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> data
    <span style="color: #ff7700;font-weight:bold;">return</span> wrapped</pre></div></div>

<p><strong>Remarques :</strong></p>
<ul>
<li>La fonction est décorée selon la valeur de la variable <code>__DECO_ACTIVATED</code>.</li>
<li>La fonction <a href="http://docs.python.org/3/library/functools.html#functools.wraps">wraps</a> du module <a href="http://docs.python.org/3/library/functools.html">functools</a> reporte les attributs de la fonction originale sur la version <em>wrappée</em> (dont les docstrings).</li>
</ul>
<p>Et maintenant un module pour tester ça :</p>
<p><code>main.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> logger
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> Generic<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    @logger.<span style="color: black;">log_decorator</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> do_it<span style="color: black;">&#40;</span><span style="color: #008000;">self</span>, arg1<span style="color: black;">&#41;</span>:
        logger.<span style="color: black;">log_debug</span><span style="color: black;">&#40;</span>arg1<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> __name__ == <span style="color: #483d8b;">&quot;__main__&quot;</span>:
    logger.<span style="color: black;">init_logger</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    generic = Generic<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    generic.<span style="color: black;">do_it</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;NOW&quot;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Et voilà le résultat :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN
NOW
END</pre></div></div>

<p><strong>Troisième étape : les noms de module et de fonction</strong></p>
<p>Ces informations se récupèrent facilement, voici la nouvelle version du décorateur :</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> log_decorator<span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> __DECO_ACTIVATED:
        <span style="color: #ff7700;font-weight:bold;">return</span> func
<span style="display:block;background-color: #ffc;">    module_name = func.__module__</span><span style="display:block;background-color: #ffc;">    func_name = func.__name__</span>&nbsp;
    @functools.<span style="color: black;">wraps</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> wrapped<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>:
<span style="display:block;background-color: #ffc;">        msg = <span style="color: #483d8b;">&quot;Module={} Function={}&quot;</span>.<span style="color: black;">format</span><span style="color: black;">&#40;</span>module_name, func_name<span style="color: black;">&#41;</span></span>        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;BEGIN &quot;</span> + msg<span style="color: black;">&#41;</span>
        data = func<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;END &quot;</span> + msg<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> data
    <span style="color: #ff7700;font-weight:bold;">return</span> wrapped</pre></div></div>

<p>Et maintenant le résultat :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN Module=<span style="color: #dc143c;">__main__</span> Function=do_it
NOW
END Module=<span style="color: #dc143c;">__main__</span> Function=do_it</pre></div></div>

<p>Jusqu&#8217;ici tout va bien.</p>
<p><strong>Quatrième étape : le nom de la classe</strong></p>
<p>Et c&#8217;est maintenant que les choses se corsent !<br />
Tout d&#8217;abord, l&#8217;objet <code>func</code> que nous manipulons est une fonction et non une méthode de classe :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&lt;</span>function Generic.<span style="color: black;">do_it</span> at 0x00C70348<span style="color: #66cc66;">&gt;</span></pre></div></div>

<p>En effet lors de l&#8217;exécution du décorateur, la classe en tant qu&#8217;objet n&#8217;existe pas encore.<br />
Il n&#8217;y a pas de lien direct entre la fonction et sa future classe.</p>
<p>Bon nombre de développeurs bien intentionnés nous conseillent d&#8217;utiliser <code>self</code> pour déterminer sa classe.</p>
<p><strong>Oui mais</strong> :</p>
<ul>
<li>Si la fonction n&#8217;est pas une méthode, pas de <code>self</code> !</li>
<li>La classe n&#8217;est pas obligatoirement celle de la méthode. Il peut s&#8217;agir d&#8217;une classe héritée.</li>
</ul>
<p>Pour s&#8217;en convaincre, voici le nouveau décorateur :</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> log_decorator<span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> __DECO_ACTIVATED:
        <span style="color: #ff7700;font-weight:bold;">return</span> func
    module_name = func.__module__
    func_name = func.__name__
&nbsp;
    @functools.<span style="color: black;">wraps</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> wrapped<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>:
<span style="display:block;background-color: #ffc;">        <span style="color: #ff7700;font-weight:bold;">try</span>:</span><span style="display:block;background-color: #ffc;">            class_name = args<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>.__class__.__name__</span><span style="display:block;background-color: #ffc;">        <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IndexError</span>:</span><span style="display:block;background-color: #ffc;">            class_name = <span style="color: #483d8b;">&quot;&quot;</span></span><span style="display:block;background-color: #ffc;">        msg = <span style="color: #483d8b;">&quot;Module={} Class={} Function={}&quot;</span>.<span style="color: black;">format</span><span style="color: black;">&#40;</span></span><span style="display:block;background-color: #ffc;">            module_name, class_name, func_name<span style="color: black;">&#41;</span></span>        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;BEGIN &quot;</span> + msg<span style="color: black;">&#41;</span>
        data = func<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;END &quot;</span> + msg<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> data
    <span style="color: #ff7700;font-weight:bold;">return</span> wrapped</pre></div></div>

<p>Et maintenant le module de tests :</p>
<p><code>main.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> logger
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> Generic<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    @logger.<span style="color: black;">log_decorator</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> do_it<span style="color: black;">&#40;</span><span style="color: #008000;">self</span>, arg1<span style="color: black;">&#41;</span>:
        logger.<span style="color: black;">log_debug</span><span style="color: black;">&#40;</span>arg1<span style="color: black;">&#41;</span>
&nbsp;
<span style="display:block;background-color: #ffc;"><span style="color: #ff7700;font-weight:bold;">class</span> Specific<span style="color: black;">&#40;</span>Generic<span style="color: black;">&#41;</span>:</span><span style="display:block;background-color: #ffc;">    @logger.<span style="color: black;">log_decorator</span></span><span style="display:block;background-color: #ffc;">    <span style="color: #ff7700;font-weight:bold;">def</span> do_it<span style="color: black;">&#40;</span><span style="color: #008000;">self</span>, arg1<span style="color: black;">&#41;</span>:</span><span style="display:block;background-color: #ffc;">        <span style="color: #008000;">super</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">do_it</span><span style="color: black;">&#40;</span>arg1<span style="color: black;">&#41;</span></span>&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> __name__ == <span style="color: #483d8b;">&quot;__main__&quot;</span>:
    logger.<span style="color: black;">init_logger</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="display:block;background-color: #ffc;">    specific = Specific<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></span><span style="display:block;background-color: #ffc;">    specific.<span style="color: black;">do_it</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;NOW&quot;</span><span style="color: black;">&#41;</span></span></pre></div></div>

<p>Et le résultat tant attendu :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=Specific Function=do_it
BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=Specific Function=do_it
NOW
END Module=<span style="color: #dc143c;">__main__</span> Class=Specific Function=do_it
END Module=<span style="color: #dc143c;">__main__</span> Class=Specific Function=do_it</pre></div></div>

<p>Et là c&#8217;est le drâme, on a perdu la classe <code>Generic</code> ! Mais analysons plutôt l&#8217;exécution :</p>
<ul>
<li>Appel de la méthode <code>Specific.do_it()</code> vu que l&#8217;objet <code>generic</code> est une instance de cette classe.</li>
<li>Appel de la méthode <code>Generic.do_it()</code> par le biais de l&#8217;instruction <code>super().do_it()</code></li>
</ul>
<p>Comme prévu, la classe de l&#8217;objet <code>self</code> ne change pas que l&#8217;on soit dans une méthode de la classe ou de l&#8217;une de ses super-classes.</p>
<p><strong>Quatrième étape : autre approche</strong></p>
<p>Ne pouvant déterminer directement la classe d&#8217;appartenance de la fonction, essayons de la chercher dans le module.<br />
Pour commencer il nous faut l&#8217;objet <code>module</code> alors que nous ne connaissons que son nom.<br />
Le module <a href="http://docs.python.org/3/library/inspect.html">inspect</a> propose justement ce service grâce à <a href="http://docs.python.org/3/library/inspect.html#inspect.getmodule">getmodule</a>.<br />
Voici le décorateur modifié :</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">inspect</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> log_decorator<span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> __DECO_ACTIVATED:
        <span style="color: #ff7700;font-weight:bold;">return</span> func
    module_name = func.__module__
<span style="display:block;background-color: #ffc;">    module_obj = <span style="color: #dc143c;">inspect</span>.<span style="color: black;">getmodule</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span></span><span style="display:block;background-color: #ffc;">    class_name = <span style="color: #483d8b;">&quot;UNKNOWN&quot;</span></span><span style="display:block;background-color: #ffc;">    <span style="color: #ff7700;font-weight:bold;">for</span> key, obj <span style="color: #ff7700;font-weight:bold;">in</span> module_obj.<span style="color: #0000cd;">__dict__</span>.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:</span><span style="display:block;background-color: #ffc;">        <span style="color: #ff7700;font-weight:bold;">try</span>:</span><span style="display:block;background-color: #ffc;">            members = obj.<span style="color: #0000cd;">__dict__</span></span><span style="display:block;background-color: #ffc;">            method = members<span style="color: black;">&#91;</span>func.__name__<span style="color: black;">&#93;</span></span><span style="display:block;background-color: #ffc;">            <span style="color: #ff7700;font-weight:bold;">if</span> method == func:</span><span style="display:block;background-color: #ffc;">                class_name = key</span><span style="display:block;background-color: #ffc;">                <span style="color: #ff7700;font-weight:bold;">break</span></span><span style="display:block;background-color: #ffc;">        <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">KeyError</span>, <span style="color: #008000;">AttributeError</span><span style="color: black;">&#41;</span>:</span><span style="display:block;background-color: #ffc;">            <span style="color: #ff7700;font-weight:bold;">pass</span></span>    func_name = func.__name__
&nbsp;
    @functools.<span style="color: black;">wraps</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> wrapped<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>:
        msg = <span style="color: #483d8b;">&quot;Module={} Class={} Function={}&quot;</span>.<span style="color: black;">format</span><span style="color: black;">&#40;</span>
            module_name, class_name, func_name<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;BEGIN &quot;</span> + msg<span style="color: black;">&#41;</span>
        data = func<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;END &quot;</span> + msg<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> data
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> wrapped</pre></div></div>

<p>Pour rechercher la fonction, le décorateur doit :</p>
<ul>
<li>Lister les objets du module.</li>
<li>Rechercher pour chaque objet le nom de la fonction dans les attributs de celui-ci. Si l&#8217;attribut correspond à notre fonction, c&#8217;est gagné !</li>
</ul>
<p>Nous obtenons alors :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it
BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it
NOW
END Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it
END Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it</pre></div></div>

<p>Pas glop ça marche pas !<br />
Regardons le contenu du module avant la recherche :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>module_obj.<span style="color: #0000cd;">__dict__</span>.<span style="color: black;">keys</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
dict_keys<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'__builtins__'</span>, <span style="color: #483d8b;">'__name__'</span>, <span style="color: #483d8b;">'__file__'</span>, <span style="color: #483d8b;">'__doc__'</span>, <span style="color: #483d8b;">'__loader__'</span>,
           <span style="color: #483d8b;">'__cached__'</span>, <span style="color: #483d8b;">'logger'</span>, <span style="color: #483d8b;">'__package__'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Curieusement les classes n&#8217;apparaissent pas, mais c&#8217;est tout à fait normal.<br />
Comme vu précédemment, lors de l&#8217;exécution du décorateur la classe est en instance de création.<br />
Il faut donc faire cette recherche lors de l&#8217;exécution de la fonction <em>wrappée</em>.</p>
<p>Le décorateur devient donc :</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> log_decorator<span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> __DECO_ACTIVATED:
        <span style="color: #ff7700;font-weight:bold;">return</span> func
    module_name = func.__module__
    module_obj = <span style="color: #dc143c;">inspect</span>.<span style="color: black;">getmodule</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    func_name = func.__name__
&nbsp;
    @functools.<span style="color: black;">wraps</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> wrapped<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>:
<span style="display:block;background-color: #ffc;">        class_name = <span style="color: #483d8b;">&quot;UNKNOWN&quot;</span></span><span style="display:block;background-color: #ffc;">        <span style="color: #ff7700;font-weight:bold;">for</span> key, obj <span style="color: #ff7700;font-weight:bold;">in</span> module_obj.<span style="color: #0000cd;">__dict__</span>.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:</span><span style="display:block;background-color: #ffc;">            <span style="color: #ff7700;font-weight:bold;">try</span>:</span><span style="display:block;background-color: #ffc;">                members = obj.<span style="color: #0000cd;">__dict__</span></span><span style="display:block;background-color: #ffc;">                method = members<span style="color: black;">&#91;</span>func.__name__<span style="color: black;">&#93;</span></span><span style="display:block;background-color: #ffc;">                <span style="color: #ff7700;font-weight:bold;">if</span> method == func:</span><span style="display:block;background-color: #ffc;">                    class_name = key</span><span style="display:block;background-color: #ffc;">                    <span style="color: #ff7700;font-weight:bold;">break</span></span><span style="display:block;background-color: #ffc;">            <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">KeyError</span>, <span style="color: #008000;">AttributeError</span><span style="color: black;">&#41;</span>:</span><span style="display:block;background-color: #ffc;">                <span style="color: #ff7700;font-weight:bold;">pass</span></span><span style="display:block;background-color: #ffc;">        msg = <span style="color: #483d8b;">&quot;Module={} Class={} Function={}&quot;</span>.<span style="color: black;">format</span><span style="color: black;">&#40;</span></span><span style="display:block;background-color: #ffc;">            module_name, class_name, func_name<span style="color: black;">&#41;</span></span>        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;BEGIN &quot;</span> + msg<span style="color: black;">&#41;</span>
        data = func<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;END &quot;</span> + msg<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> data
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> wrapped</pre></div></div>

<p>Et le résultat :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it
BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it
NOW
END Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it
END Module=<span style="color: #dc143c;">__main__</span> Class=UNKNOWN Function=do_it</pre></div></div>

<p>Pas glop 2 le retour !<br />
Faisons appel au débogueur suprême : <code>print</code></p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">key    = Generic
method = <span style="color: #66cc66;">&lt;</span>function Generic.<span style="color: black;">do_it</span> at 0x00D07C90<span style="color: #66cc66;">&gt;</span>
func   = <span style="color: #66cc66;">&lt;</span>function Specific.<span style="color: black;">do_it</span> at 0x00D07CD8<span style="color: #66cc66;">&gt;</span>
&nbsp;
key    = Specific
method = <span style="color: #66cc66;">&lt;</span>function Specific.<span style="color: black;">do_it</span> at 0x00D07D20<span style="color: #66cc66;">&gt;</span>
func   = <span style="color: #66cc66;">&lt;</span>function Specific.<span style="color: black;">do_it</span> at 0x00D07CD8<span style="color: #66cc66;">&gt;</span></pre></div></div>

<p>Effectivement les références ne correspondent pas, et encore une fois, rien de plus normal.<br />
La fonction d&#8217;origine a été <em>wrappée</em> donc celle présente dans le module n&#8217;est plus celle d&#8217;origine.<br />
Qu&#8217;à cela ne tienne, recherchons-là !</p>
<p>Après la déclaration de la fonction <code>wrapped</code>, le décorateur la mémorise dans la variable <code>wrapped_function</code>.<br />
Elle sera utilisée à l&#8217;exécution de la fonction.</p>
<p><code>logger.py</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> log_decorator<span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> __DECO_ACTIVATED:
        <span style="color: #ff7700;font-weight:bold;">return</span> func
    module_name = func.__module__
    module_obj = <span style="color: #dc143c;">inspect</span>.<span style="color: black;">getmodule</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    func_name = func.__name__
&nbsp;
    @functools.<span style="color: black;">wraps</span><span style="color: black;">&#40;</span>func<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> wrapped<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>:
        class_name = <span style="color: #483d8b;">&quot;UNKNOWN&quot;</span>
        <span style="color: #ff7700;font-weight:bold;">for</span> key, obj <span style="color: #ff7700;font-weight:bold;">in</span> module_obj.<span style="color: #0000cd;">__dict__</span>.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
            <span style="color: #ff7700;font-weight:bold;">try</span>:
                members = obj.<span style="color: #0000cd;">__dict__</span>
                method = members<span style="color: black;">&#91;</span>func.__name__<span style="color: black;">&#93;</span>
<span style="display:block;background-color: #ffc;">                <span style="color: #ff7700;font-weight:bold;">if</span> method == wrapped_function:</span>                    class_name = key
                    <span style="color: #ff7700;font-weight:bold;">break</span>
            <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">KeyError</span>, <span style="color: #008000;">AttributeError</span><span style="color: black;">&#41;</span>:
                <span style="color: #ff7700;font-weight:bold;">pass</span>
        msg = <span style="color: #483d8b;">&quot;Module={} Class={} Function={}&quot;</span>.<span style="color: black;">format</span><span style="color: black;">&#40;</span>
            module_name, class_name, func_name<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;BEGIN &quot;</span> + msg<span style="color: black;">&#41;</span>
        data = func<span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>args, <span style="color: #66cc66;">**</span>kwargs<span style="color: black;">&#41;</span>
        __logger.<span style="color: black;">debug</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;END &quot;</span> + msg<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> data
&nbsp;
<span style="display:block;background-color: #ffc;">    wrapped_function = wrapped</span>    <span style="color: #ff7700;font-weight:bold;">return</span> wrapped</pre></div></div>

<p>Et maintenant le résultat :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=Specific Function=do_it
BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=Generic Function=do_it
NOW
END Module=<span style="color: #dc143c;">__main__</span> Class=Generic Function=do_it
END Module=<span style="color: #dc143c;">__main__</span> Class=Specific Function=do_it</pre></div></div>

<p>Ouf ! Ca marche !</p>
<p>Au menu du prochain épisode : logger la valeur de certains paramètres passés à la fonction décorée.</p>
<p><em>Xavier O. avec l&#8217;aide précieuse de Laurent B.</em></p>
<div class="snap_nopreview sharing robots-nocontent"><ul><li class="sharing_label">Partager:</li><li class="share-facebook share-regular"><div class="like_button"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fsametmax.com%2Fdecorateur-de-trace%2F&amp;layout=button_count&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;height=21&amp;width=90" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:96px; height:21px;" allowTransparency="true"></iframe></div></li><li class="share-twitter share-regular"><div class="twitter_button"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url=http%3A%2F%2Fsametmax.com%2Fdecorateur-de-trace%2F&amp;counturl=http%3A%2F%2Fsametmax.com%2Fdecorateur-de-trace%2F&amp;count=horizontal&amp;text=D%C3%A9corateur%20de%20trace: " style="width:97px; height:20px;"></iframe></div></li><li class="share-reddit share-regular"><div class="reddit_button"><iframe src="http://www.reddit.com/static/button/button1.html?width=120&amp;url=http%3A%2F%2Fsametmax.com%2Fdecorateur-de-trace%2F&amp;title=D%C3%A9corateur%20de%20trace" height="22" width="120" scrolling="no" frameborder="0"></iframe></div></li><li class="share-google-plus-1 share-regular"><div class="googleplus1_button"><g:plusone size="small" callback="sharing_plusone" href="http://sametmax.com/decorateur-de-trace/"></g:plusone></div></li><li class="share-email share-regular"><a rel="nofollow" class="share-email share-icon no-text" href="index.html%3Fshare=email.html" target="_blank" title="Click to email this to a friend"></a></li><li class="share-end"></li></ul><div class="sharing-clear"></div></div><p>Articles similaires:</p><ol>
<li><a href='../log-des-requetes-sql-faites-par-lorm-django-en-temps-reel/index.html' rel='bookmark' title='Log des requêtes SQL faites par l&#8217;ORM Django en temps réel'>Log des requêtes SQL faites par l&#8217;ORM Django en temps réel</a></li>
<li><a href='../comprendre-les-decorateur-python-pas-a-pas-partie-2/index.html' rel='bookmark' title='Comprendre les décorateurs Python pas à pas (partie 2)'>Comprendre les décorateurs Python pas à pas (partie 2)</a></li>
<li><a href='../typeerror-error-when-calling-the-metaclass-bases-function-argument-1-must-be-code-not-str/index.html' rel='bookmark' title='TypeError: Error when calling the metaclass bases function() argument 1 must be code, not str'>TypeError: Error when calling the metaclass bases function() argument 1 must be code, not str</a></li>
<li><a href='../le-pattern-observer-en-utilisant-des-decorateurs.1.html' rel='bookmark' title='Le pattern observer en utilisant des décorateurs'>Le pattern observer en utilisant des décorateurs</a></li>
<li><a href='../comprendre-les-decorateurs-python-pas-a-pas-partie-1.1.html' rel='bookmark' title='Comprendre les décorateurs Python pas à pas (partie 1)'>Comprendre les décorateurs Python pas à pas (partie 1)</a></li>
</ol><p class="wp-flattr-button"><a href="../index.html%3Fflattrss_redirect&amp;id=5670&amp;md5=ed725fc730fad3935f341c888770c289.html" title="Flattr" target="_blank"><img src="../wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>											</div> <!-- end .entry -->
			
					
						
			<!-- You can start editing here. -->

	<div id="comment-section" class="clearfix">
		<h3 id="comments">14 comments</h3>
		
		
			<ol class="commentlist clearfix">
			   <li class="comment even thread-even depth-1" id="li-comment-8095">
		<div class="bottom_bg">
		   <div id="comment-8095" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://0.gravatar.com/avatar/437805955e9381e69429143c0fc40f6e?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">foxmask</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8095">16/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>un peu dur à suivre (ou alors je ne suis pas reveillé). Peut-etre qu&#8217;une mise en évidence des lignes de code qui ont changé entre chaque étape aurait aidé.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8099">
		<div class="bottom_bg">
		   <div id="comment-8099" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://1.gravatar.com/avatar/337428a6e34734f07be5de0c8ae454cb?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Etienne</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8099">16/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Merci, très intéressant comme challenge. Je viens de passer deux heures à décortiquer tout ça et j&#8217;ai appris plein de chose.</p>
<p>Cela dit je suis d&#8217;accord avec foxmax: c&#8217;est dur à suivre. Trop de rebondissements. Et aussi beaucoup de sujets différents abordés. Mais bon, rien n&#8217;est parfait en ce bas monde.</p>
<p>Pour clarifier un peu le truc, déjà, je préciserais que ton décorateur est dans un module appelé &#8220;logger&#8221;. Ensuite, personnellement, j&#8217;enlèverais les double &#8220;__&#8221; dans logger: ça fait mal aux yeux et ça sert à rien (je trouve).</p>
<p>Plus important, j&#8217;utiliserais une &#8220;new style class&#8221; en héritant de <code>object</code>, et je me passerais du</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #008000;">super</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">do_it</span><span style="color: black;">&#40;</span>arg<span style="color: black;">&#41;</span></pre></div></div>

<p> dans la classe <code>Specific</code>. Ce qui donnerait quelque chose comme ça:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">class</span> Generic<span style="color: black;">&#40;</span><span style="color: #008000;">object</span><span style="color: black;">&#41;</span>:
    @logger.<span style="color: black;">log_decorator</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> do_it<span style="color: black;">&#40;</span><span style="color: #008000;">self</span>, arg1<span style="color: black;">&#41;</span>:
        logger.<span style="color: black;">log_debug</span><span style="color: black;">&#40;</span>arg1<span style="color: black;">&#41;</span>
&nbsp;
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> Specific<span style="color: black;">&#40;</span>Generic<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">pass</span></pre></div></div>

<p>&#8230; qui correspond plus à ce qu&#8217;on fait dans la vie réelle et est plus clair à lire.</p>
<p>Incidemment, hériter de <code>object</code> dans <code>Generic</code> permet d&#8217;accéder à &#8220;l&#8217;arbre généalogique&#8221; de la classe par le biais de <code>args[0].__class__.__mro__</code> dans la fonction <code>wrapped</code> de <code>log_decorator</code>, ce qui renvoie quelque chose comme ça:<br />
<code>(class '__main__.Specific', class '__main__.Generic', type 'object')</code>.<br />
On a donc pas besoin de <code>inspect</code>. Il suffit, comme tu le propose, de voir si <code>func.__name__</code> fait partie des méthodes des classes de la liste, et t&#8217;as la classe &#8220;d&#8217;origine&#8221; de la méthode:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">for</span> klass <span style="color: #ff7700;font-weight:bold;">in</span> args<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>.__class__.__mro__:
    <span style="color: #ff7700;font-weight:bold;">if</span> func.__name__ <span style="color: #ff7700;font-weight:bold;">in</span> klass.<span style="color: #0000cd;">__dict__</span>:
        orig_class = klass.__name__</pre></div></div>

<p>Ce qui allège considérablement le code.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-xonop bypostauthor even thread-even depth-1" id="li-comment-8105">
		<div class="bottom_bg">
		   <div id="comment-8105" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='xonop' src='../wp-content/uploads/2013/04/xonop_avatar.jpeg' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">xonop</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8105">16/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p><b>@foxmask :</b><br />
Excellente remarque. Dès que je trouve comment modifier mon article, j&#8217;ajoute quelques surbrillances bien senties.</p>
<p><b>@Etienne :</b><br />
Bien vu, je vais ajouter une phrase pour préciser que mes fonctions de log sont placées dans le module <code>logger</code>.</p>
<p>Le &#8220;<code>__</code>&#8221; en préfixe est une convention que j&#8217;utilise pour bien préciser que la variable a une portée limitée au module.</p>
<p>Sinon concernant ta proposition de modification, bonne suggestion mais en en fait non.<br />
Si la fonction n&#8217;est pas une méthode, pas de <code>self</code>.<br />
Par ailleurs, mon exemple permet de présenter le cas où une méthode est définie simultanément dans une classe et dans sa super-classe (cas assez fréquent s&#8217;il en est).<br />
Et dans ce cas précis, la fonction retourne le même nom de classe que l&#8217;on se trouve dans la méthode de la classe ou celle de la super-classe.<br />
La preuve en image :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=Generic Function=do_it
BEGIN Module=<span style="color: #dc143c;">__main__</span> Class=Generic Function=do_it
NOW
END Module=<span style="color: #dc143c;">__main__</span> Class=Generic Function=do_it
END Module=<span style="color: #dc143c;">__main__</span> Class=Generic Function=do_it</pre></div></div>

<p>Cela dit, ta méthode est intéressante puisqu&#8217;elle permet de limiter le champ de recherche de ma fonction aux seules classes appartenant à l&#8217;arbre d&#8217;héritage.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8106">
		<div class="bottom_bg">
		   <div id="comment-8106" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://1.gravatar.com/avatar/337428a6e34734f07be5de0c8ae454cb?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Etienne</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8106">16/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><blockquote><p>Par ailleurs, mon exemple permet de présenter le cas où une méthode est définie simultanément dans une classe et dans sa super-classe (cas assez fréquent s’il en est).</p></blockquote>
<p>Juste. Il faut rajouter un <code>break</code> je pense:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">for</span> klass <span style="color: #ff7700;font-weight:bold;">in</span> args<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>.__class__.__mro__:
    <span style="color: #ff7700;font-weight:bold;">if</span> func.__name__ <span style="color: #ff7700;font-weight:bold;">in</span> klass.<span style="color: #0000cd;">__dict__</span>:
        orig_class = klass.__name__
        <span style="color: #ff7700;font-weight:bold;">break</span></pre></div></div>

<p>C&#8217;est là que je remarque que tu testes l&#8217;égalité des objets fonction, et pas de leur nom. C&#8217;est malin, je retiens.</p>
<blockquote><p>Si la fonction n’est pas une méthode, pas de self.</p></blockquote>
<p>On teste l&#8217;existence d&#8217;une instance de classe. Si pas de self, c&#8217;est pas une méthode. Et on traite la fonction en conséquence (déterminer le module ou elle a été définie)</p>
<p>Mais bon, je pense que tout ça n&#8217;est pas tellement important. Ton code le fait c&#8217;est ça qui compte.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-sam even thread-even depth-1" id="li-comment-8130">
		<div class="bottom_bg">
		   <div id="comment-8130" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='Sam' src='../wp-content/uploads/2012/02/Sam_avatar.jpg' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Sam</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8130">17/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Je tiens juste à préciser combien Max et moi on apprécie d&#8217;avoir des réactions aussi constructives sur le site :</p>
<p>- les comments sont pertinents<br />
- ils sont polis<br />
- ils sont suivis de réactions positives et utiles par l&#8217;auteur<br />
- et ensuite le débat continue cordialement avec une vraie valeur ajoutée</p>
<p>Pour un site de troll Python et de cul, on a une super communauté \o/</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8135">
		<div class="bottom_bg">
		   <div id="comment-8135" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://0.gravatar.com/avatar/437805955e9381e69429143c0fc40f6e?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">foxmask</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8135">17/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>ça se relâche a bon escient:)</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment even thread-even depth-1" id="li-comment-8140">
		<div class="bottom_bg">
		   <div id="comment-8140" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://1.gravatar.com/avatar/337428a6e34734f07be5de0c8ae454cb?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Etienne</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8140">17/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Je pense que vous y êtes pour beaucoup tous les deux.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-kontre odd alt thread-odd thread-alt depth-1" id="li-comment-8149">
		<div class="bottom_bg">
		   <div id="comment-8149" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://1.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">kontre</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8149">17/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>+1 Etienne<br />
J&#8217;ai lu rapidos la réponse que tu (Sam) as faite au pavé sur l&#8217;article des salopes, je ne suis pas forcément d&#8217;accord avec toi mais je n&#8217;ai jamais vu quelqu&#8217;un répondre à un commentaire sur un sujet de ce type de manière aussi calme, raisonnée et construite. Ce n&#8217;est qu&#8217;un exemple, mais ça aide à créer une ambiance générale. Merci.</p>
<p>Par contre j&#8217;avoue que pour cet article je n&#8217;ai pas encore eu la motivation de comprendre à fond. Il faudra que je potasse les décorateurs un jour.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-sam even thread-even depth-1" id="li-comment-8153">
		<div class="bottom_bg">
		   <div id="comment-8153" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='Sam' src='../wp-content/uploads/2012/02/Sam_avatar.jpg' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Sam</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8153">17/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Tout le monde peut être en désacord, tant que c&#8217;est un désacord cordial.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-xonop bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-8195">
		<div class="bottom_bg">
		   <div id="comment-8195" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='xonop' src='../wp-content/uploads/2013/04/xonop_avatar.jpeg' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">xonop</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8195">19/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Petite mise à jour de l&#8217;article, pour chaque source :</p>
<p>- Ajout du nom de fichier.<br />
- Mise en évidence des modifications.</p>
<p>Bonne lecture !</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-sam even thread-even depth-1" id="li-comment-8196">
		<div class="bottom_bg">
		   <div id="comment-8196" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='Sam' src='../wp-content/uploads/2012/02/Sam_avatar.jpg' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Sam</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8196">19/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Ah putain j&#8217;ai oublié de répondre à ta question sur comment mettre en avant une partie du code, sorry. En plus je savais pas comment faire :-p</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-kontre odd alt thread-odd thread-alt depth-1" id="li-comment-8198">
		<div class="bottom_bg">
		   <div id="comment-8198" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://1.gravatar.com/avatar/b93cc4fb6413bbe5c837530662bee9b4?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">kontre</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8198">19/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>Classe la mise en évidence !</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment even thread-even depth-1" id="li-comment-8298">
		<div class="bottom_bg">
		   <div id="comment-8298" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='' src='http://1.gravatar.com/avatar/d350fdfb31a3ecb1a9686ceb7da0b385?s=60&amp;d=retro&amp;r=X' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">1138</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8298">22/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p><code>Suite aux superbes articles sur les <a href="http://comprendre-les-decorateurs-python-pas-a-pas-partie-1" rel="nofollow">décorateurs</a> et sur l’écriture des <a href="http://ecrire-des-logs-en-python/" rel="nofollow">logs en python</a> j’ai voulu mettre en pratique dans mon projet.</code><br />
Ah ben bravo, les liens ! ;-)</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
   <li class="comment byuser comment-author-sam odd alt thread-odd thread-alt depth-1" id="li-comment-8304">
		<div class="bottom_bg">
		   <div id="comment-8304" class="comment-body clearfix">
				<div class="alignleft authordata">
					<img alt='Sam' src='../wp-content/uploads/2012/02/Sam_avatar.jpg' class='avatar avatar-60 photo' height='60' width='60' />					
					<div class="clear"></div>
					<div class="comment-author vcard">
						<span class="fn">Sam</span><br/>
						<div class="comment-meta commentmetadata"><a href="index.html#comment-8304">22/04/2013		</a></div>
					</div>
				</div>
				
				<div class="comment-wrap">
					
										
					<div class="comment-content"><p>ouuuuuuuuups. Corrigé.</p>
</div> <!-- end comment-content-->
									</div> <!-- end comment-wrap-->  
			</div> <!-- end comment-body-->
		</div> <!-- end .bottom_bg-->
</li>
		</ol>
		
			
		
<div>
<p class="rss-comments">
<a href="feed/index.html" title="Flux RSS des commentaires">Flux RSS des commentaires</a>
</p>
</div>
									<div id="respond">
				<h3 id="reply-title"><span>Leave a Reply</span> <small><a rel="nofollow" id="cancel-comment-reply-link" href="index.html#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://sametmax.com/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label><script type="text/javascript">var edInserted; if (!edInserted) {edToolbar(); edInserted = true;}</script>
<textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea>
<script type="text/javascript">var edCanvas = document.getElementById('comment');</script></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre lang=&quot;&quot; line=&quot;&quot; escaped=&quot;&quot; highlight=&quot;&quot;&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Submit Comment" />
							<input type='hidden' name='comment_post_ID' value='5670' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="7835d4be95" /></p><script src="../index.html%3Flive-comment-preview.js" type="text/javascript"></script><div id="commentPreview"></div><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p>					</form>
							</div><!-- #respond -->
						</div> <!-- end comment-section -->

<div>
<p><a href="index.html#" id="playmario">Jouer à mario en attendant que les autres répondent</a></p>





<script type="text/javascript">
    if (typeof jQuery !== 'undefined'){
        jQuery('#playmario').click(function(e){
            jQuery(this).replaceWith('<iframe src="http://www.florian-rappl.de/html5/projects/SuperMario/" style="width:500px;height:450px;overflow:hidden"></iframe><p>En HTML5 canvas :-) http://www.codeproject.com/Articles/396959/Mario5</p>');
            e.preventDefault()
        });
    }
</script>
</div>				</div> <!-- end #content-area -->	
	
<div id="sidebar" class="clearfix">
	<div id="widget-readability-buttons-id-2" class="widget sidebar-block widget-readability-buttons"><!-- This file is used to markup the public facing widget. -->
<h3 class="widgettitle">Une lecture plus fastoche ?</h3><p class="readability-wrapper"> 
  <div
    class="rdbWrapper"
    data-show-read="1"
    data-show-send-to-kindle="0"
    data-show-print="1"
    data-show-email="0"
    data-orientation="0"
    data-version="1"
    data-text-color="#"
    data-bg-color="#">
  </div>
  <script>(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script>
</p></div> <!-- end .widget --><div id="text-4" class="widget sidebar-block widget_text"><h3 class="widgettitle"> </h3>			<div class="textwidget"><a href="../appel-a-contributeurs-impertinents/index.html"><img src="../wp-content/uploads/2012/07/contributeur.png" width="288px" style="vertical-align: middle;margin-top:-40px;margin-bottom:10px;"></a> </div>
		</div> <!-- end .widget --><div id="text-3" class="widget sidebar-block widget_text"><h3 class="widgettitle"> </h3>			<div class="textwidget"><a href="http://twitter.com/#!/sam_et_max"><img src="../wp-content/uploads/2012/05/twitter_icon.png" width="70px" style="vertical-align: middle;margin-top:-40px;"></a>&nbsp;Follow us <a href="http://twitter.com/sam_et_max">@sam_et_max</a></div>
		</div> <!-- end .widget --><div id="blog_subscription-3" class="widget sidebar-block jetpack_subscription_widget"><h3 class="widgettitle"><label for="subscribe-field">Souscrire à nos conneries</label></h3>
		<a name="subscribe-blog"></a>
		<form action="index.html" method="post" accept-charset="utf-8" id="subscribe-blog">
			<p>Entrez votre adresse mail et vous recevrez une notification à chaque nouvel article.</p><p>Join 208 other subscribers</p>

			<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" value="Email Address" id="subscribe-field" onclick="if ( this.value == 'Email Address' ) { this.value = ''; }" onblur="if ( this.value == '' ) { this.value = 'Email Address'; }" /></p>

			<p>
				<input type="hidden" name="action" value="subscribe" />
				<input type="hidden" name="source" value="http://sametmax.com/decorateur-de-trace/" />
				<input type="hidden" name="sub-type" value="widget" />
				<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
				<input type="hidden" id="_wpnonce" name="_wpnonce" value="f6feefd33d" />				<input type="submit" value="J&#039;adhère bon dieu!" name="jetpack_subscriptions_widget" />
			</p>
		</form>

		
</div> <!-- end .widget --><div id="categories-2" class="widget sidebar-block widget_categories"><h3 class="widgettitle">Catégories</h3>		<ul>
	<li class="cat-item cat-item-7"><a href="../category/administration-system/index.html" title="View all posts filed under Administration System">Administration System</a> (99)
</li>
	<li class="cat-item cat-item-11"><a href="../category/cul/index.html" title="View all posts filed under Cul">Cul</a> (52)
</li>
	<li class="cat-item cat-item-12"><a href="../category/gadget/index.html" title="View all posts filed under Gadget">Gadget</a> (5)
</li>
	<li class="cat-item cat-item-855"><a href="../category/gadgets/index.html" title="View all posts filed under Gadgets">Gadgets</a> (2)
</li>
	<li class="cat-item cat-item-38"><a href="../category/philo-et-culture/index.html" title="View all posts filed under Philo et culture">Philo et culture</a> (136)
</li>
	<li class="cat-item cat-item-3"><a href="../category/programmation/index.html" title="View all posts filed under Programmation">Programmation</a> (341)
</li>
	<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html" title="View all posts filed under Uncategorized">Uncategorized</a> (6)
</li>
	<li class="cat-item cat-item-15"><a href="../category/web/index.html" title="View all posts filed under Web">Web</a> (40)
</li>
		</ul>
</div> <!-- end .widget -->		<div id="recent-posts-3" class="widget sidebar-block widget_recent_entries">		<h3 class="widgettitle">Posts récents</h3>		<ul>
				<li><a href="../pour-vos-thumbnails-imagemagick-a-la-rescousse/index.html" title="Pour vos thumbnails, ImageMagick à la rescousse">Pour vos thumbnails, ImageMagick à la rescousse</a></li>
				<li><a href="../changer-le-mot-de-passe-du-super-utilisateur-django-en-ligne-de-commande/index.html" title="Changer le mot de passe du super utilisateur django en ligne de commande">Changer le mot de passe du super utilisateur django en ligne de commande</a></li>
				<li><a href="../le-deuil-dune-idee/index.html" title="Le deuil d&#8217;une idée">Le deuil d&#8217;une idée</a></li>
				<li><a href="../quest-ce-quun-namespace/index.html" title="Qu&#8217;est-ce qu&#8217;un namespace ?">Qu&#8217;est-ce qu&#8217;un namespace ?</a></li>
				<li><a href="../astuces-de-recherche/index.html" title="Astuces de recherche">Astuces de recherche</a></li>
				<li><a href="../cest-pour-des-trucs-comme-ca-que-jadore-python/index.html" title="C&#8217;est pour des trucs comme ça que j&#8217;adore Python&#8230;">C&#8217;est pour des trucs comme ça que j&#8217;adore Python&#8230;</a></li>
				<li><a href="../pourquoi-il-faut-eviter-import-en-python/index.html" title="Pourquoi il faut éviter &lt;code&gt;import *&lt;/code&gt; en Python">Pourquoi il faut éviter <code>import *</code> en Python</a></li>
				<li><a href="../quitter-son-pays/index.html" title="Quitter son pays">Quitter son pays</a></li>
				</ul>
		</div> <!-- end .widget --> 

	<div id="popular-tabbed" class="widget"> 
		<h3 class="widgettitle">Posts Populaires</h3>
		<ul>
																						<li><a href="../on-a-un-nouveau-projet-et-on-a-besoin-dune-info-sur-vous/index.html">On a un nouveau projet et on a besoin d&#8217;UNE info sur vous</a> (251)</li>																														<li><a href="../entreprendre-en-france-autopsie-dun-echec/index.html">Entreprendre en France, Autopsie d&#8217;un échec.</a> (111)</li>																														<li><a href="../fizzbuzz-en-python/index.html">FizzBuzz en Python</a> (94)</li>																														<li><a href="../fetons-le-depart-de-max/index.html">Fêtons le départ de Max</a> (87)</li>																														<li><a href="../une-journee-dans-un-fkk-maison-close-allemande/index.html">Une journée dans un FKK (maison close Allemande)</a> (84)</li>																														<li><a href="../on-est-en-2013-on-a-marche-sur-la-lune-mais-on-a-toujours-pas/index.html">On est en 2013, on a marché sur la lune, mais on a toujours pas&#8230;</a> (82)</li>																														<li><a href="../il-ne-faut-pas-prendre-des-gens-pour-des-cons-mais-ne-jamais-oublier-quils-en-sont/index.html">Il ne faut pas prendre les gens pour des cons mais ne jamais oublier qu&#8217;ils en sont</a> (82)</li>																														<li><a href="../lun-de-vous-a-un-cadeau-de-noel-qui-lattend-au-pied-du-sapin/index.html">L&#8217;un de vous a un cadeau de Noël qui l&#8217;attend au pied du sapin&#8230;</a> (80)</li>													</ul>
	</div> <!-- end #recent-tabbed -->
	 
<div id="tag_cloud-3" class="widget sidebar-block widget_tag_cloud"><h3 class="widgettitle">TagCloud</h3><div class="tagcloud"><a href='../tag/bash/index.html' class='tag-link-14' title='14 topics' style='font-size: 11.456790123457pt;'>bash</a>
<a href='../tag/blog/index.html' class='tag-link-107' title='11 topics' style='font-size: 10.592592592593pt;'>blog</a>
<a href='../tag/bottle/index.html' class='tag-link-307' title='6 topics' style='font-size: 8.6049382716049pt;'>bottle</a>
<a href='../tag/cache/index.html' class='tag-link-333' title='8 topics' style='font-size: 9.4691358024691pt;'>cache</a>
<a href='../tag/comprehension-lists/index.html' class='tag-link-20' title='6 topics' style='font-size: 8.6049382716049pt;'>comprehension-lists</a>
<a href='../tag/css/index.html' class='tag-link-188' title='8 topics' style='font-size: 9.4691358024691pt;'>css</a>
<a href='../tag/cul-2/index.html' class='tag-link-33' title='9 topics' style='font-size: 9.9012345679012pt;'>cul</a>
<a href='../tag/decorator/index.html' class='tag-link-265' title='7 topics' style='font-size: 9.037037037037pt;'>decorator</a>
<a href='../tag/django/index.html' class='tag-link-28' title='63 topics' style='font-size: 16.901234567901pt;'>django</a>
<a href='../tag/email/index.html' class='tag-link-37' title='6 topics' style='font-size: 8.6049382716049pt;'>email</a>
<a href='../tag/encoding/index.html' class='tag-link-54' title='5 topics' style='font-size: 8pt;'>encoding</a>
<a href='../tag/error/index.html' class='tag-link-213' title='6 topics' style='font-size: 8.6049382716049pt;'>error</a>
<a href='../tag/ffmpeg/index.html' class='tag-link-64' title='5 topics' style='font-size: 8pt;'>ffmpeg</a>
<a href='../tag/fun/index.html' class='tag-link-44' title='6 topics' style='font-size: 8.6049382716049pt;'>fun</a>
<a href='../tag/git/index.html' class='tag-link-18' title='28 topics' style='font-size: 13.876543209877pt;'>git</a>
<a href='../tag/html/index.html' class='tag-link-486' title='6 topics' style='font-size: 8.6049382716049pt;'>html</a>
<a href='../tag/humour/index.html' class='tag-link-266' title='5 topics' style='font-size: 8pt;'>humour</a>
<a href='../tag/import/index.html' class='tag-link-215' title='7 topics' style='font-size: 9.037037037037pt;'>import</a>
<a href='../tag/ipython/index.html' class='tag-link-164' title='8 topics' style='font-size: 9.4691358024691pt;'>ipython</a>
<a href='../tag/iterable/index.html' class='tag-link-217' title='9 topics' style='font-size: 9.9012345679012pt;'>iterable</a>
<a href='../tag/javascript/index.html' class='tag-link-96' title='25 topics' style='font-size: 13.444444444444pt;'>javascript</a>
<a href='../tag/jquery/index.html' class='tag-link-112' title='6 topics' style='font-size: 8.6049382716049pt;'>jquery</a>
<a href='../tag/lambda/index.html' class='tag-link-292' title='7 topics' style='font-size: 9.037037037037pt;'>lambda</a>
<a href='../tag/linux/index.html' class='tag-link-238' title='5 topics' style='font-size: 8pt;'>linux</a>
<a href='../tag/mail/index.html' class='tag-link-624' title='6 topics' style='font-size: 8.6049382716049pt;'>mail</a>
<a href='../tag/meta/index.html' class='tag-link-102' title='78 topics' style='font-size: 17.679012345679pt;'>meta</a>
<a href='../tag/mysql/index.html' class='tag-link-82' title='5 topics' style='font-size: 8pt;'>mysql</a>
<a href='../tag/nginx/index.html' class='tag-link-183' title='12 topics' style='font-size: 10.851851851852pt;'>nginx</a>
<a href='../tag/nsfw/index.html' class='tag-link-319' title='13 topics' style='font-size: 11.197530864198pt;'>nsfw</a>
<a href='../tag/orm/index.html' class='tag-link-43' title='5 topics' style='font-size: 8pt;'>orm</a>
<a href='../tag/php/index.html' class='tag-link-199' title='5 topics' style='font-size: 8pt;'>php</a>
<a href='../tag/poo/index.html' class='tag-link-549' title='9 topics' style='font-size: 9.9012345679012pt;'>poo</a>
<a href='../tag/process/index.html' class='tag-link-87' title='5 topics' style='font-size: 8pt;'>process</a>
<a href='../tag/python/index.html' class='tag-link-4' title='251 topics' style='font-size: 22pt;'>python</a>
<a href='../tag/redis/index.html' class='tag-link-196' title='6 topics' style='font-size: 8.6049382716049pt;'>redis</a>
<a href='../tag/ruby/index.html' class='tag-link-325' title='6 topics' style='font-size: 8.6049382716049pt;'>ruby</a>
<a href='../tag/server/index.html' class='tag-link-185' title='6 topics' style='font-size: 8.6049382716049pt;'>server</a>
<a href='../tag/sexe/index.html' class='tag-link-175' title='5 topics' style='font-size: 8pt;'>sexe</a>
<a href='../tag/shell/index.html' class='tag-link-202' title='7 topics' style='font-size: 9.037037037037pt;'>shell</a>
<a href='../tag/ssh/index.html' class='tag-link-206' title='6 topics' style='font-size: 8.6049382716049pt;'>ssh</a>
<a href='../tag/sublime-text/index.html' class='tag-link-76' title='6 topics' style='font-size: 8.6049382716049pt;'>sublime text</a>
<a href='../tag/twitter/index.html' class='tag-link-371' title='6 topics' style='font-size: 8.6049382716049pt;'>twitter</a>
<a href='../tag/ubuntu/index.html' class='tag-link-255' title='13 topics' style='font-size: 11.197530864198pt;'>ubuntu</a>
<a href='../tag/virtualenv/index.html' class='tag-link-259' title='6 topics' style='font-size: 8.6049382716049pt;'>virtualenv</a>
<a href='../tag/yield/index.html' class='tag-link-287' title='7 topics' style='font-size: 9.037037037037pt;'>yield</a></div>
</div> <!-- end .widget --><div id="archives-2" class="widget sidebar-block widget_archive"><h3 class="widgettitle">Archives</h3>		<ul>
			<li><a href='../2013/12/index.html' title='December 2013'>December 2013</a>&nbsp;(2)</li>
	<li><a href='../2013/11/index.html' title='November 2013'>November 2013</a>&nbsp;(25)</li>
	<li><a href='../2013/10/index.html' title='October 2013'>October 2013</a>&nbsp;(27)</li>
	<li><a href='../2013/09/index.html' title='September 2013'>September 2013</a>&nbsp;(1)</li>
	<li><a href='../2013/08/index.html' title='August 2013'>August 2013</a>&nbsp;(31)</li>
	<li><a href='../2013/07/index.html' title='July 2013'>July 2013</a>&nbsp;(32)</li>
	<li><a href='../2013/06/index.html' title='June 2013'>June 2013</a>&nbsp;(24)</li>
	<li><a href='../2013/05/index.html' title='May 2013'>May 2013</a>&nbsp;(30)</li>
	<li><a href='../2013/04/index.html' title='April 2013'>April 2013</a>&nbsp;(31)</li>
	<li><a href='../2013/03/index.html' title='March 2013'>March 2013</a>&nbsp;(33)</li>
	<li><a href='../2013/02/index.html' title='February 2013'>February 2013</a>&nbsp;(29)</li>
	<li><a href='../2013/01/index.html' title='January 2013'>January 2013</a>&nbsp;(34)</li>
	<li><a href='../2012/12/index.html' title='December 2012'>December 2012</a>&nbsp;(32)</li>
	<li><a href='../2012/11/index.html' title='November 2012'>November 2012</a>&nbsp;(36)</li>
	<li><a href='../2012/10/index.html' title='October 2012'>October 2012</a>&nbsp;(35)</li>
	<li><a href='../2012/09/index.html' title='September 2012'>September 2012</a>&nbsp;(36)</li>
	<li><a href='../2012/08/index.html' title='August 2012'>August 2012</a>&nbsp;(37)</li>
	<li><a href='../2012/07/index.html' title='July 2012'>July 2012</a>&nbsp;(33)</li>
	<li><a href='../2012/06/index.html' title='June 2012'>June 2012</a>&nbsp;(24)</li>
	<li><a href='../2012/05/index.html' title='May 2012'>May 2012</a>&nbsp;(31)</li>
	<li><a href='../2012/04/index.html' title='April 2012'>April 2012</a>&nbsp;(20)</li>
	<li><a href='../2012/03/index.html' title='March 2012'>March 2012</a>&nbsp;(10)</li>
	<li><a href='../2012/02/index.html' title='February 2012'>February 2012</a>&nbsp;(14)</li>
		</ul>
</div> <!-- end .widget --><div id="rss_links-2" class="widget sidebar-block widget_rss_links"><h3 class="widgettitle">Flux RSS</h3><p><a href="../feed/index.html" title="Subscribe to Posts"><img src="../wp-content/plugins/jetpack/_inc/images/rss/green-small.png" alt="RSS Feed" /></a>&nbsp;<a href="../feed/index.html" title="Subscribe to Posts">RSS - Posts</a></p>
</div> <!-- end .widget --><div id="text-5" class="widget sidebar-block widget_text"><h3 class="widgettitle"> Envoyez des sioux</h3>			<div class="textwidget"><p><img src="../wp-content/uploads/2013/07/bitcoin.png" width="16" height="16"/> On adooooore les bitcoins :</p>

<p>

<a href="bitcoin:19zAHPPuce4BAhsdy9KaFwVLurEJXMhMAn?amount=1X8&label=SamEtMax">19zAHPPuce4BAhsdy9KaFwVLurEJXMhMAn</a>

</p></div>
		</div> <!-- end .widget --></div> <!-- end sidebar -->	</div> <!-- end #content --> 
	
	 <div id="footer" >
		<div id="footer-content">
			
								
				<ul id="menu-bottom-menu" class="bottom-menu"><li id="menu-item-2391" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2391"><a href="../contactez-nous/index.html">Contactez-nous</a></li>
</ul>			
			<p id="copyright">Designed by  <a href="http://www.elegantthemes.com" title="Elegant Themes">Elegant WordPress Themes</a></p>
		</div> <!-- end #footer-content -->
	</div> <!-- end #footer -->
</div> <!-- end #page-wrap -->
	 
				
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../wp-content/themes/Minimal/js/jquery.cycle.all.min.js"></script> 
	<script type="text/javascript" src="../wp-content/themes/Minimal/js/jquery.easing.1.3.js"></script>	
	<script type="text/javascript" src="../wp-content/themes/Minimal/js/superfish.js"></script>	
	<script type="text/javascript">
	//<![CDATA[
		jQuery.noConflict();
	
		jQuery('ul.superfish').superfish({ 
			delay:       200,                            // one second delay on mouseout 
			animation:   {opacity:'show',height:'show'},  // fade-in and slide-down animation 
			speed:       'fast',                          // faster animation speed 
			autoArrows:  true,                           // disable generation of arrow mark-up 
			dropShadows: false                            // disable drop shadows 
		}).find("> li > ul > li:last-child, > li > ul > li > ul > li:last-child, > li > ul > li > ul > li > ul > li:last-child").addClass("last-nav-element");
		
		jQuery(".js #featured, .js div#tabbed").css("display","block");

				
		var $featured_content = jQuery('#featured_content'),
			$tabbed_area = jQuery('div#tabbed'),
			$controllers = jQuery('div#controllers'),
			$comments = jQuery('ol.commentlist');
		
		et_search_bar();
		
		if ($featured_content.length) {
			$featured_content.cycle({
									timeout: 3000				,
				speed: 300,
				cleartypeNoBg: true,
				prev:   'a#left_arrow', 
				next:   'a#right_arrow',
				pager:  'div#controllers',
				fx: 'fade'
			});
			
			var controllersWidth = $controllers.width(),
				controllersLeft = Math.round((960 - controllersWidth) / 2);
			if (controllersWidth < 960) $controllers.css('padding-left',controllersLeft);
		};
		
		if ($tabbed_area.length) {
			$tabbed_area.tabs({ fx: { opacity: 'toggle' } });
		};
		
		if ($comments.length) {
			$comments.find(">li").after('<span class="bottom_bg"></span>');
		};
		

		<!---- Random tag line ---->		

var tagLine = function(){
    var tagLines =  [
        'Deux programmeurs qui se sortent les doigts du code',
        '10 ko de js rien que pour charger ce message',
        'Des articles pour geeks qui mettent les points sur les G',
        "Aucun hipster n'a été violenté à l'écriture de ce blog",
        'La programmation avec un grand C',
        'Ornithorynque fuchsia hydrophobe',
        'Python, Django, Git, et du Cul',
        'Nous croisons les effluves',
        'CMB DTC IRL CQFD',
        'Tuent des chatons depuis 1997',
        'Reticulating splines',
        'Error: unexpected end of stupid tag line',
        'Les bikinis et les ordinateurs épargnent les spéculations',
        'F5',
        '<3 (oYo)',
        'Rien que des obsédés du serpent !',
        "Je sers la science et c'est ma joie",
        'On peut tout génie génétiquer!',
        "Réparateurs d'harmonicas, professeurs de plongée",
        "Il faut mettre d'urgence un frein à l'immobilisme!",
        'Ho mon dieu! Ils ont tué Sam, enfoirés!',
        "L'étincelle qui fait déborder le vase",
        'A poil les putes !',
        'Bannis de Reddit !',
        "Bannis de l'AFPY !",
        'Bannis de Claire Chazal!',
        'Bannis de Jean-Pierre Pernaud !',
        'Bannis de Norton !',
        'Et si on faisait des camps pour que les gens puissent se concentrer?',
        'Article.objects.create(type=random.choice(("dev", "cul")))',
        'Le choc des mots, le poids des algos',
        'Kedzalcoilt, le serpent à poil'
    ];
    return tagLines[Math.ceil(Math.random() * 1000000000) % tagLines.length];
};

jQuery('#slogan').show().text(tagLine());

// forcer la redirection faire l'image en full size au click
jQuery('.wp-post-image').click(function(e){e.preventDefault(); window.location.href = jQuery(e.target).attr('src')});

// mettre clippy sur les comments

jQuery(function(){
    var message = "";
    var $comment = jQuery('#comment');
    topagent = null;

    $comment.keyup(function(){

        var content = jQuery(this).val();

        if (content.search(/(^|\s+)(php|vim|emacs|windows|pas?\s*libre)([.!?]|\s+)/i) != -1){
            message = "Il semble que vous teniez de propos trollesques. Attention, nous avons des tampons, et nous n'hésiterons pas à nous en servir !"
        }

        if (content.search(/(^|\s+)(me (tuer|suicider|tirer une balle|pendre|flinguer))([.!?]|\s+)/i) != -1){
            message = "Il semble que vous teniez de propos suicidaires. Sam & Max défendent la liberté d'expression. Allez aux bouts de vos idées !"
        }

        if (content.search(/(^|\s+)(connards?|enculés?|enfoirés?|fils? de pute?)([.!?]|\s+)/i) != -1){
            message = "Il semble que vous teniez des propos injurieux. Ne voulez-vous pas plutôt écrire une lettre d'insultes directement aux auteurs, via le formulaire de contact ?"
        }

        if (content.search(/(^|\s+)(culs?|nichons?|bite|chatte|sodomie|levrette|sexe)([.!?]|\s+)/i) != -1){
            message = "Il semble que vous teniez des propos graveleux. Pourriez-vous donner plus de détails ?"
        }

        if (content.search(/\>\>\>/i) != -1){
            message = "Le triple chevron ne passe pas dans les comments. Désolé :-( Utilisez »» à la place."
        }

        if (content.length > 2000){
            message = "Il semble que vous écriviez un roman. Vous réalisez que ceux qui vont répondre ne l'auront pas lu jusqu'au bout ?"
        }

        if (message){
            $comment.unbind();

            jQuery("<link/>", {
               rel: "stylesheet",
               type: "text/css",
               href: "http://sametmax.com/wp-content/uploads/2012/07/clippy.css"
            }).appendTo("head").one('load ready', function(){
                jQuery.getScript("http://sametmax.com/wp-content/uploads/2012/07/clippy.min_1.js", function(){
                    clippy.load('Clippy', function(agent) {
                        agent.show();
                        var offset = $comment.offset();
                        var left = offset.left + $comment.width() + 10;
                        var top = offset.top;

                        jQuery('.clippy').css({position:'absolute',
                                               display:'block',
                                               left: left, top: top})

                        jQuery('.clippy-balloon').css({position:'absolute',
                                                       display:'block',
                                                       left: left,
                                                       top: top - 50})

                        agent.speak(message);
                        setInterval(function(){agent.stop(); agent.animate()}, 20000);
                    });

                });

            });

        }

    });
});


		<!---- Search Bar Improvements ---->
		function et_search_bar(){
			var $searchform = jQuery('#header div#search-form'),
				$searchinput = $searchform.find("input#searchinput"),
				searchvalue = $searchinput.val();
				
			$searchinput.focus(function(){
				if (jQuery(this).val() === searchvalue) jQuery(this).val("");
			}).blur(function(){
				if (jQuery(this).val() === "") jQuery(this).val(searchvalue);
			});
		};
		
	//]]>	




<!-- Piwik -->

var pkBaseURL = (("https:" == document.location.protocol) ? "https://88.191.153.127:7777/" : "http://88.191.153.127:7777/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}



	</script>
<noscript>
<img src="http://88.191.153.127:7777/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>
	<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?aa&#038;ver=3.3.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/wpgroho.js%3Fver=3.3.1'></script>
	<div style="display:none">
	<div class="grofile-hash-map-437805955e9381e69429143c0fc40f6e">
	</div>
	<div class="grofile-hash-map-337428a6e34734f07be5de0c8ae454cb">
	</div>
	<div class="grofile-hash-map-bcc404e8ab0f0a708d5275aa69633d20">
	</div>
	<div class="grofile-hash-map-bf9ecde8f5e286de6ce5c80206cf9dd6">
	</div>
	<div class="grofile-hash-map-b93cc4fb6413bbe5c837530662bee9b4">
	</div>
	<div class="grofile-hash-map-d350fdfb31a3ecb1a9686ceb7da0b385">
	</div>
	</div>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/sharedaddy/sharing.js%3Fver=0.1'></script>
	<script type="text/javascript" charset="utf-8">
	function sharing_plusone( obj ) { 
		jQuery.ajax( {
			url: 'http://sametmax.com/decorateur-de-trace/?share=google-plus-1',
			type: 'POST',
			data: obj
		} );
	}
	</script>
	<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
	<div id="sharing_email" style="display: none;">
		<form action="index.html" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="text" name="target_email" id="target_email" value="" />
			
			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />
				
				<label for="source_email">Your Email Address</label>
				<input type="text" name="source_email" id="source_email" value="" />

						
			
			<img style="float: right; display: none" class="loading" src="../wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a href="index.html#cancel" class="sharing_cancel">Cancel</a>
			
			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>
			
			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
<script type='text/javascript' src='../wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js%3Fver=3.15'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/sametmax.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ..."};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/contact-form-7/includes/js/scripts.js%3Fver=3.3'></script>
<script type='text/javascript' src='../wp-content/themes/Minimal/epanel/page_templates/js/fancybox/jquery.easing-1.3.pack.js%3Fver=1.3.4'></script>
<script type='text/javascript' src='../wp-content/themes/Minimal/epanel/page_templates/js/fancybox/jquery.fancybox-1.3.4.pack.js%3Fver=1.3.4'></script>
<script type='text/javascript' src='../wp-content/themes/Minimal/epanel/page_templates/js/et-ptemplates-frontend.js%3Fver=1.1'></script>

	<script src="http://stats.wordpress.com/e-201349.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:1.2.2',blog:'32490438',post:'5670'});
	var load_cmc = function(){linktracker_init(32490438,5670,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script>	
</body>
</html>