<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
		>
<channel>
	<title>Comments on: L&#8217;encoding en Python, une bonne fois pour toute</title>
	<atom:link href="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 12:15:31 +0000</lastBuildDate>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<item>
		<title>By: Réchèr</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-18744</link>
		<dc:creator>Réchèr</dc:creator>
		<pubDate>Tue, 21 Jan 2014 08:47:13 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-18744</guid>
		<description>Cela va sans dire, mais je précise que dans mon code précédent, j&#039;ai bien évidemment mis le &quot;from __future__ import unicode_literals&quot; au début de mes fichiers.

Du coup la chaîne &quot;é mon cul cé du poulé&quot; est de l&#039;unicode.

Et ça marche, je vois mes accents, aussi bien dans la console DOS que dans la console Sublime Text.</description>
		<content:encoded><![CDATA[<p>Cela va sans dire, mais je précise que dans mon code précédent, j&#8217;ai bien évidemment mis le &#8220;from __future__ import unicode_literals&#8221; au début de mes fichiers.</p>
<p>Du coup la chaîne &#8220;é mon cul cé du poulé&#8221; est de l&#8217;unicode.</p>
<p>Et ça marche, je vois mes accents, aussi bien dans la console DOS que dans la console Sublime Text.</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Réchèr</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-18737</link>
		<dc:creator>Réchèr</dc:creator>
		<pubDate>Mon, 20 Jan 2014 23:01:08 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-18737</guid>
		<description>Article auquel je me réfère régulièrement, car à chaque fois que je résout mes problèmes d&#039;encodage, je ne me souviens plus comment je les ais résolus et je dois refaire le raisonnement dans mon cerveau.

Juste pour info : y&#039;a des fois, syt.stdout.encoding renvoie None.

Je suis en python 2.7 sous Windows (oui, je sais), quand j&#039;exécute mon script dans la console, j&#039;ai &quot;cp850&quot;. Quand je l&#039;exécute avec Ctrl-B dans Sublime Text, j&#039;ai None.

Du coup, je fais le bourrin comme ça pour écrire sur stdout :

&lt;pre lang=&quot;python&quot;&gt;
# récupération de l&#039;encodage de la sortie standard.
encoding_out = sys.stdout.encoding
if encoding_out is None:
    encoding_out = &quot;utf-8&quot;

def pri(whatever):
    unicode_string = unicode(whatever)
    print unicode_string.encode(encoding_out, &quot;replace&quot;)

pri(&quot;é mon cul cé du poulé.&quot;)
&lt;/pre&gt;</description>
		<content:encoded><![CDATA[<p>Article auquel je me réfère régulièrement, car à chaque fois que je résout mes problèmes d&#8217;encodage, je ne me souviens plus comment je les ais résolus et je dois refaire le raisonnement dans mon cerveau.</p>
<p>Juste pour info : y&#8217;a des fois, syt.stdout.encoding renvoie None.</p>
<p>Je suis en python 2.7 sous Windows (oui, je sais), quand j&#8217;exécute mon script dans la console, j&#8217;ai &#8220;cp850&#8243;. Quand je l&#8217;exécute avec Ctrl-B dans Sublime Text, j&#8217;ai None.</p>
<p>Du coup, je fais le bourrin comme ça pour écrire sur stdout :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># récupération de l'encodage de la sortie standard.</span>
encoding_out = <span style="color: #dc143c;">sys</span>.<span style="color: black;">stdout</span>.<span style="color: black;">encoding</span>
<span style="color: #ff7700;font-weight:bold;">if</span> encoding_out <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #008000;">None</span>:
    encoding_out = <span style="color: #483d8b;">&quot;utf-8&quot;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> pri<span style="color: black;">&#40;</span>whatever<span style="color: black;">&#41;</span>:
    unicode_string = <span style="color: #008000;">unicode</span><span style="color: black;">&#40;</span>whatever<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span> unicode_string.<span style="color: black;">encode</span><span style="color: black;">&#40;</span>encoding_out, <span style="color: #483d8b;">&quot;replace&quot;</span><span style="color: black;">&#41;</span>
&nbsp;
pri<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;é mon cul cé du poulé.&quot;</span><span style="color: black;">&#41;</span></pre></div></div>

]]></content:encoded>
	</item>
	<item>
		<title>By: Bromway</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-17557</link>
		<dc:creator>Bromway</dc:creator>
		<pubDate>Thu, 26 Dec 2013 22:43:53 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-17557</guid>
		<description>Juste au Top!
Un super cadeau de Noel qui vient de m&#039;offrir une ou deux nuit planche de moins</description>
		<content:encoded><![CDATA[<p>Juste au Top!<br />
Un super cadeau de Noel qui vient de m&#8217;offrir une ou deux nuit planche de moins</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Adrien</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-15398</link>
		<dc:creator>Adrien</dc:creator>
		<pubDate>Mon, 04 Nov 2013 14:41:52 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-15398</guid>
		<description>Un grand merci, enfin un tuto qui va à l&#039;essentiel. J&#039;ai enfin compris comment ça fonctionne.</description>
		<content:encoded><![CDATA[<p>Un grand merci, enfin un tuto qui va à l&#8217;essentiel. J&#8217;ai enfin compris comment ça fonctionne.</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Guts</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-14882</link>
		<dc:creator>Guts</dc:creator>
		<pubDate>Wed, 16 Oct 2013 10:29:48 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-14882</guid>
		<description>Merci pour l&#039;article qui m&#039;a bien aidé sur certains points de blocage mais il y a toujours quelque chose que je ne parviens pas à résoudre : le parsing (avec os.walk) de fichiers qui contiennent des accents. Ce qui me déroute surtout c&#039;est la différence entre Windows et Ubuntu.

Dans mon &lt;a href=&quot;https://github.com/Guts/Metadator&quot; rel=&quot;nofollow&quot;&gt;programme&lt;/a&gt; j&#039;ai une fonction (li_geofiles()) chargée de lister les fichiers compatibles (selon leur extension et l&#039;existence de leurs dépendances) contenus dans une arborescence à partir d&#039;un dossier indiqué par l&#039;utilisateur (foldertarget retourné via tkMessageBox.askdirectory) et qui bloque sur les noms de fichiers qui contiennent un accent...mais seulement sur Ubuntu ! Ça fait 2 jours que je me flagelle là-dessus et j&#039;ai essayé qqls solutions :
- un try/except sur le nom de fichier et réencodage à la volée (solution choisie) mais qui a le (gros) défaut de ne pas lister les fichiers avec accents (os.path.isfile ne les reconnaît pas...)
- passer foldertarget en unicode mais ça marche pô (idem avec path.normpath(foldertarget)


Voici la fonction en question :

&lt;pre lang=&quot;python&quot;&gt;
for root, dirs, files in walk(foldertarget):
    self.num_folders = self.num_folders + len(dirs)
        for f in files:
            try:
                unicode(path.join(root, f))
                full_path = path.join(root, f)
            except UnicodeDecodeError, e:
                full_path = path.join(root, f.decode(&#039;latin1&#039;).encode(&#039;utf8&#039;))
                self.logger.error(&quot;%s:%s&quot; % (e, f.decode(&#039;utf-8&#039;)))
            # Looping on files contained
            if path.splitext(full_path.lower())[1] == &#039;.shp&#039; and \
                path.isfile(&#039;%s.dbf&#039;.lower() % full_path[:-4]) and \
                path.isfile(&#039;%s.shx&#039;.lower() % full_path[:-4]) and \
                path.isfile(&#039;%s.prj&#039;.lower() % full_path[:-4]):
                    # add complete path of shapefile
                    self.li_shp.append(full_path)
            elif path.splitext(full_path.lower())[1] == &#039;.tab&#039; and \
                path.isfile(full_path[:-4]+ &#039;.dat&#039;.lower()) and \
                path.isfile(full_path[:-4]+ &#039;.map&#039;.lower()) and \
                path.isfile(full_path[:-4]+ &#039;.id&#039;.lower()):
                    # add complete path of MapInfo file
                    self.li_tab.append(full_path)
&lt;/pre&gt;
Si quelqu&#039;un voit le problème...et surtout la solution !

PS : je suis géographe à la base donc pas vraiment un développeur... #indulgence</description>
		<content:encoded><![CDATA[<p>Merci pour l&#8217;article qui m&#8217;a bien aidé sur certains points de blocage mais il y a toujours quelque chose que je ne parviens pas à résoudre : le parsing (avec os.walk) de fichiers qui contiennent des accents. Ce qui me déroute surtout c&#8217;est la différence entre Windows et Ubuntu.</p>
<p>Dans mon <a href="https://github.com/Guts/Metadator" rel="nofollow">programme</a> j&#8217;ai une fonction (li_geofiles()) chargée de lister les fichiers compatibles (selon leur extension et l&#8217;existence de leurs dépendances) contenus dans une arborescence à partir d&#8217;un dossier indiqué par l&#8217;utilisateur (foldertarget retourné via tkMessageBox.askdirectory) et qui bloque sur les noms de fichiers qui contiennent un accent&#8230;mais seulement sur Ubuntu ! Ça fait 2 jours que je me flagelle là-dessus et j&#8217;ai essayé qqls solutions :<br />
- un try/except sur le nom de fichier et réencodage à la volée (solution choisie) mais qui a le (gros) défaut de ne pas lister les fichiers avec accents (os.path.isfile ne les reconnaît pas&#8230;)<br />
- passer foldertarget en unicode mais ça marche pô (idem avec path.normpath(foldertarget)</p>
<p>Voici la fonction en question :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">for</span> root, dirs, files <span style="color: #ff7700;font-weight:bold;">in</span> walk<span style="color: black;">&#40;</span>foldertarget<span style="color: black;">&#41;</span>:
    <span style="color: #008000;">self</span>.<span style="color: black;">num_folders</span> = <span style="color: #008000;">self</span>.<span style="color: black;">num_folders</span> + <span style="color: #008000;">len</span><span style="color: black;">&#40;</span>dirs<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">for</span> f <span style="color: #ff7700;font-weight:bold;">in</span> files:
            <span style="color: #ff7700;font-weight:bold;">try</span>:
                <span style="color: #008000;">unicode</span><span style="color: black;">&#40;</span>path.<span style="color: black;">join</span><span style="color: black;">&#40;</span>root, f<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
                full_path = path.<span style="color: black;">join</span><span style="color: black;">&#40;</span>root, f<span style="color: black;">&#41;</span>
            <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">UnicodeDecodeError</span>, e:
                full_path = path.<span style="color: black;">join</span><span style="color: black;">&#40;</span>root, f.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'latin1'</span><span style="color: black;">&#41;</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
                <span style="color: #008000;">self</span>.<span style="color: black;">logger</span>.<span style="color: black;">error</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;%s:%s&quot;</span> <span style="color: #66cc66;">%</span> <span style="color: black;">&#40;</span>e, f.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf-8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
            <span style="color: #808080; font-style: italic;"># Looping on files contained</span>
            <span style="color: #ff7700;font-weight:bold;">if</span> path.<span style="color: black;">splitext</span><span style="color: black;">&#40;</span>full_path.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span> == <span style="color: #483d8b;">'.shp'</span> <span style="color: #ff7700;font-weight:bold;">and</span> \
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s.dbf'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #66cc66;">%</span> full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> \
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s.shx'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #66cc66;">%</span> full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> \
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s.prj'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #66cc66;">%</span> full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>:
                    <span style="color: #808080; font-style: italic;"># add complete path of shapefile</span>
                    <span style="color: #008000;">self</span>.<span style="color: black;">li_shp</span>.<span style="color: black;">append</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#41;</span>
            <span style="color: #ff7700;font-weight:bold;">elif</span> path.<span style="color: black;">splitext</span><span style="color: black;">&#40;</span>full_path.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span> == <span style="color: #483d8b;">'.tab'</span> <span style="color: #ff7700;font-weight:bold;">and</span> \
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>+ <span style="color: #483d8b;">'.dat'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> \
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>+ <span style="color: #483d8b;">'.map'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">and</span> \
                path.<span style="color: black;">isfile</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>+ <span style="color: #483d8b;">'.id'</span>.<span style="color: black;">lower</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>:
                    <span style="color: #808080; font-style: italic;"># add complete path of MapInfo file</span>
                    <span style="color: #008000;">self</span>.<span style="color: black;">li_tab</span>.<span style="color: black;">append</span><span style="color: black;">&#40;</span>full_path<span style="color: black;">&#41;</span></pre></div></div>

<p>Si quelqu&#8217;un voit le problème&#8230;et surtout la solution !</p>
<p>PS : je suis géographe à la base donc pas vraiment un développeur&#8230; #indulgence</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Max</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-14444</link>
		<dc:creator>Max</dc:creator>
		<pubDate>Tue, 01 Oct 2013 10:27:52 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-14444</guid>
		<description>C&#039;est laborieux chez leaseweb :/
Ensuite ça a été un probleme de varnish qui s&#039;est bien lancé quand leaseweb a reboot les VPS mais qui pour une raison mystérieuse ne voulait rien savoir :/</description>
		<content:encoded><![CDATA[<p>C&#8217;est laborieux chez leaseweb :/<br />
Ensuite ça a été un probleme de varnish qui s&#8217;est bien lancé quand leaseweb a reboot les VPS mais qui pour une raison mystérieuse ne voulait rien savoir :/</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: A_Vgyle</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-14435</link>
		<dc:creator>A_Vgyle</dc:creator>
		<pubDate>Fri, 27 Sep 2013 20:25:02 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-14435</guid>
		<description>Merci grandement!
2 jours que je plante sur ces %?!/%££!! d&#039;encoding, et en 15 minutes... Réglé
Thanx
Continue!!!</description>
		<content:encoded><![CDATA[<p>Merci grandement!<br />
2 jours que je plante sur ces %?!/%££!! d&#8217;encoding, et en 15 minutes&#8230; Réglé<br />
Thanx<br />
Continue!!!</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: yuiio</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-12441</link>
		<dc:creator>yuiio</dc:creator>
		<pubDate>Mon, 05 Aug 2013 14:26:15 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-12441</guid>
		<description>Juste merci</description>
		<content:encoded><![CDATA[<p>Juste merci</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Kyoku57</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-8678</link>
		<dc:creator>Kyoku57</dc:creator>
		<pubDate>Sun, 05 May 2013 10:42:26 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-8678</guid>
		<description>Alors là, très bon article !

Quelque soit le langage, le problème le plus récurrent est toujours celui de la manipulation des différents types d&#039;encoding.

Je ne te parle pas de ceux qui développent sous Windows avec un CP-1252 par défaut dans tous les logiciels et qui même avec un réglage de l&#039;IDE finit un jour où l&#039;autre par te ressortir l&#039;encoding par défaut genre .. à la réouverture.

Bref, éternel problème que tu as très bien mis en évidence. Tout le problème est d&#039;origine interface chaise-clavier. Il faut se sortir les doigts du boule pour faire du propre.</description>
		<content:encoded><![CDATA[<p>Alors là, très bon article !</p>
<p>Quelque soit le langage, le problème le plus récurrent est toujours celui de la manipulation des différents types d&#8217;encoding.</p>
<p>Je ne te parle pas de ceux qui développent sous Windows avec un CP-1252 par défaut dans tous les logiciels et qui même avec un réglage de l&#8217;IDE finit un jour où l&#8217;autre par te ressortir l&#8217;encoding par défaut genre .. à la réouverture.</p>
<p>Bref, éternel problème que tu as très bien mis en évidence. Tout le problème est d&#8217;origine interface chaise-clavier. Il faut se sortir les doigts du boule pour faire du propre.</p>
]]></content:encoded>
	</item>
	<item>
		<title>By: Sam</title>
		<link>http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/#comment-8397</link>
		<dc:creator>Sam</dc:creator>
		<pubDate>Tue, 23 Apr 2013 21:38:03 +0000</pubDate>
		<guid isPermaLink="false">http://sametmax.com/?p=5824#comment-8397</guid>
		<description>C&#039;est l&#039;acceng, c&#039;est pour ça.</description>
		<content:encoded><![CDATA[<p>C&#8217;est l&#8217;acceng, c&#8217;est pour ça.</p>
]]></content:encoded>
	</item>
</channel>
</rss>
