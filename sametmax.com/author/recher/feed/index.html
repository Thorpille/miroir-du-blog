<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; recher</title>
	<atom:link href="http://sametmax.com/author/recher/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 14:20:37 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>Télécharger les vidéos de Youtube</title>
		<link>http://sametmax.com/telecharger-les-videos-de-youtube/</link>
		<comments>http://sametmax.com/telecharger-les-videos-de-youtube/#comments</comments>
		<pubDate>Wed, 02 Oct 2013 07:51:58 +0000</pubDate>
		<dc:creator>recher</dc:creator>
				<category><![CDATA[Cul]]></category>
		<category><![CDATA[Web]]></category>
		<category><![CDATA[patcholle]]></category>
		<category><![CDATA[ssyoutube]]></category>
		<category><![CDATA[télécharger]]></category>
		<category><![CDATA[url]]></category>
		<category><![CDATA[vidéos]]></category>
		<category><![CDATA[youtube]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7251</guid>
		<description><![CDATA[Il existe une vidéo sur youtube... Si vous la regardez... Au bout de 7 jours, vous mourrez. (Sauf si vous la regardez sur un smartphone, auquel cas l'écran sera trop petit pour faire passer la fille chelou).]]></description>
			<content:encoded><![CDATA[<blockquote><p>
Ceci est un post invité de <a href="http://recher.wordpress.com/">Recher</a> posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.
</p></blockquote>
<p> &#8211; Assistance informatique, bonjour.</p>
<p> &#8211; Salut les moines bouddhistes. Comment je fais pour aller sur Youtube ? Votre stupide filtre à puceaux me bloque l&#8217;accès ! </p>
<p> &#8211; C&#8217;est lié à la politique de l&#8217;entreprise. Le site est totalement interdit.</p>
<p> &#8211; Mais bordel, c&#8217;est la pause de midi ! Je suis toute seule dans mon service, et je suis excitée ! Pas un seul stagiaire à me mettre sous la dent ! J&#8217;ai besoin de mes vidéos pornos ! Et quand je dis &#8220;besoin&#8221;, c&#8217;est VRAIMENT besoin !</p>
<p> &#8211; Veuillez m&#8217;excuser Madame, mais je ne peux rien pour vous. </p>
<p> &#8211; J&#8217;ai la patcholle qui palpite à la vitesse d&#8217;une levrette au galop ! C&#8217;est urgent !</p>
<p> &#8211; La patcholle ? Mais enfin Madame, ce mot n&#8217;existe même pas !</p>
<p> &#8211; Le mot n&#8217;existe peut-être pas, mais ma patcholle, elle, elle existe ! Et elle est pas loin de la combustion spontanée ! </p>
<p> &#8211; La seule solution serait que vous achetiez des DVD, et que vous les rameniez à votre bureau. On ne contrôle que ce que vous faites sur internet, pas ce que vous visionnez en local.</p>
<p> &#8211; Merci pour le conseil, mon p&#8217;tit chou, j&#8217;ai tout ce qu&#8217;il faut à la maison. Mais là, c&#8217;est d&#8217;une vidéo spécifique dont j&#8217;ai envie. Celle avec le nain et les ballons de baudruche. Et elle n&#8217;est que sur Youtube !</p>
<p> &#8211; Vous pouvez la télécharger. Changez l&#8217;URL, ajoutez les lettres &#8220;ss&#8221; devant le mot &#8220;youtube&#8221;, sélectionnez ensuite la qualité parmi celles disponibles, et vous récupérerez le fichier sur votre disque. Par exemple : <a href="http://www.ssyoutube.com/watch?v=uSGnmCTkIfE">http://www.ssyoutube.com/watch?v=uSGnmCTkIfE</a>. Avec un peu de chance, l&#8217;accès par la connexion de l&#8217;entreprise n&#8217;est même pas bloqué. </p>
<p> &#8211; Attendez j&#8217;essaye. Je connais l&#8217;adresse de ma vidéo par cœur. &#8230; Oh putain, ça marche ! Et ça passe même le filtre à puceaux de Youtube ! Ooouiiiii !! Va y avoir de la cyprine plein les murs !</p>
<p> &#8211; Cela m&#8217;a fait plaisir d&#8217;avoir pu vous aider, Madame.</p>
<p> &#8211; De même. Dites, pendant que ça télécharge, vous voulez pas venir me rendre visite ? On se trouverait bien quelques corpuscules de Krause avec lesquels s&#8217;occuper. </p>
<p> &#8211; Merci Madame, mais ça ne m&#8217;intéresse pas.</p>
<p> &#8211; Je vous propose du sexe gratuit et vous n&#8217;en voulez pas ? Ah d&#8217;accord, vous êtes homosexuel. J&#8217;aurais dû m&#8217;en douter, à votre petite voix fluette. De toutes façons, ils sont tous pédés dans l&#8217;informatique.</p>
<p> &#8211; Au contraire Madame, je suis hétérosexuelle. En revanche, je suis une femme. Bon après-midi à vous.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/09/sofia-rose-07.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/09/sofia-rose-07.jpg" alt="Sofia the Rose en secrétaire sexy" title="Sofia the Rose en secrétaire sexy" width="400" height="600" class="alignnone size-full wp-image-7253" /></a> </p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7251&amp;md5=20945b0d8d47817be5eba9ebf13498d4" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/telecharger-les-videos-de-youtube/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Ftelecharger-les-videos-de-youtube%2F&amp;language=en_GB&amp;category=text&amp;title=T%C3%A9l%C3%A9charger+les+vid%C3%A9os+de+Youtube&amp;description=Ceci+est+un+post+invit%C3%A9+de+Recher+post%C3%A9+sous+licence+creative+common+3.0+unported.+%26%238211%3B+Assistance+informatique%2C+bonjour.+%26%238211%3B+Salut+les+moines+bouddhistes.+Comment+je+fais+pour+aller+sur+Youtube...&amp;tags=patcholle%2Cssyoutube%2Ct%C3%A9l%C3%A9charger%2Curl%2Cvid%C3%A9os%2Cyoutube%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/09/ring_cosplay.jpg" length="70271" type="image/jpg" />	</item>
		<item>
		<title>Comment le Revenu de Base Inconditionnel pourrait maximiser le bonheur.</title>
		<link>http://sametmax.com/comment-le-revenu-de-base-inconditionnel-pourrait-maximiser-le-bonheur/</link>
		<comments>http://sametmax.com/comment-le-revenu-de-base-inconditionnel-pourrait-maximiser-le-bonheur/#comments</comments>
		<pubDate>Fri, 10 May 2013 11:31:50 +0000</pubDate>
		<dc:creator>recher</dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[argent]]></category>
		<category><![CDATA[bonheur]]></category>
		<category><![CDATA[humains]]></category>
		<category><![CDATA[Initiative Citoyenne Européenne]]></category>
		<category><![CDATA[interdépendance]]></category>
		<category><![CDATA[Revenu de Base Inconditionnel]]></category>
		<category><![CDATA[viande de mammouth]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6028</guid>
		<description><![CDATA[Réflexion sur le bonheur, l'interdépendance entre humains et l'argent. Cette réflexion nuagesque aboutit à une proposition pour débugger le système monétaire actuel, et optimiser le bonheur global. Featuring Albert Jacquard.]]></description>
			<content:encoded><![CDATA[<blockquote><p>
Ceci est un post invité de <a href="http://sametmax.com/author/recher/">Recher</a> posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.</p>
<p>Recher est un des premiers lecteurs (et soutient) du blog, donc nous avons choisi de le laisser exprimer des idées qui lui sont chères. Notez que ce n&#8217;est PAS la marque d&#8217;un changement de ligne éditoriale du blog et que ce n&#8217;est PAS l&#8217;annonce de plus d&#8217;articles sur des thèmes politiques sur Sam et Max.</p>
<p>Ceci dit, un de temps en temps ne fait pas de mal. Ne vous battez pas trop en comments :-)
</p></blockquote>
<h2>Quelques faits amusants concernant les humains</h2>
<h3>La viande, c&#8217;est la force</h3>
<p>Lorsque les hommes préhistoriques tuaient une grosse bestiole, ils ne pouvaient ni manger toute la viande d&#8217;un coup, ni la conserver. La meilleure solution qu&#8217;ils ont trouvé a été de donner cette viande à d&#8217;autres hommes préhistoriques, qui se sentaient alors redevable, et qui partageraient la viande de leurs chasses futures.</p>
<p>Le placement bancaire de l&#8217;homme préhistorique, c&#8217;était l&#8217;estomac des autres. </p>
<p>D&#8217;ailleurs, selon de nombreux scientifiques, ce qui a fait que l&#8217;homo sapiens soit devenu ce que nous sommes aujourd’hui, c’est que pour survivre, ils s’échangeaient leur savoir. Sans cela, on aurait certainement très vite disparu. Comparé aux autres espèces, l&#8217;homo sapiens est une pauvre lopette qui n&#8217;a rien pour lui.</p>
<p><a href="http://web.archive.org/web/20060627055742/http://culturelibre.net/article.php3?id_article=247">Source approximative (webarchivée, et qui elle-même ne cite pas ses sources)</a></p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/geico_caveman.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/05/geico_caveman.jpg" alt="Le cours du tigre à dents de sabre a chuté de 3 points. Groumf !" title="Le cours du tigre à dents de sabre a chuté de 3 points. Groumf !" width="250" height="125" class="alignnone size-full wp-image-6038" /></a></p>
<h3>Une expérience un peu glauque du 13ème siècle</h3>
<p>Frédéric 2, Suprême Tôlier du Saint-Empire romain germanique, voulait savoir quelle serait la langue que parlerait naturellement un homme n&#8217;ayant pas reçu d&#8217;influences extérieures. Il prit plusieurs bébés, et demanda à des nourrices de s&#8217;en occuper avec beaucoup de soin, mais sans jamais leur parler. Il s&#8217;attendait à ce qu&#8217;ils finissent par parler grec ou latin. </p>
<p>Ça a méchamment échoué. Les bébés ont dépéris et ils sont tous morts.</p>
<h3>Géant vert, nain jaune, etc.</h3>
<p>Il y a une expression à la mode, qui dit : &#8220;Nous sommes des nains sur des épaules de géants&#8221;. Les géants représentent nos ancêtres, qui ont accumulé des connaissances et construit des trucs pour que les générations suivantes vivent mieux. Les nains représentent les humains actuels, qui contribuent eux aussi à améliorer la condition humaine, pas autant que les géants, mais un peu quand même. L&#8217;ensemble géant + nain étant plus haut que le géant tout seul.</p>
<h3>Les pensées d&#8217;un philosophe-généticien-mathématicien-humaniste</h3>
<p>Albert Jacquard dit : &#8220;je suis les liens que je tisse avec d&#8217;autres&#8221;.</p>
<p>C&#8217;est une phrase bizarre. Ce n&#8217;est pas : &#8220;les liens que je tisse avec d&#8217;autres révèlent ma nature profonde&#8221;. C&#8217;est : &#8220;ma nature profonde, ce sont les liens&#8221;.</p>
<p>Ça veut dire qu&#8217;on construit sa personnalité par les relations qu&#8217;on a avec les autres. Ça ressemble à une idée hippie-new-age-cucul-la-praline, mais en fait non. Si on a des relations de merde et qu&#8217;on insulte tous le monde, on se construit une personnalité de merde. On fait ce qu&#8217;on veut de soi-même.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/albert_jacquard-03.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/05/albert_jacquard-03.jpg" alt="C&#039;est lui Albert Jacquard. Il peut créer un seau rempli de chromosomes par la seule force de sa volonté." title="C&#039;est lui Albert Jacquard. Il peut créer un seau rempli de chromosomes par la seule force de sa volonté." width="373" height="501" class="alignnone size-full wp-image-6039" /></a></p>
<h2>Le fonctionnement de l&#8217;humanité.</h2>
<p>À partir de ces quelques faits amusants, il me semble être possible de déduire deux principes globaux :</p>
<p><b>Les humains sont interdépendants avec leurs contemporains, ainsi qu&#8217;avec les générations passées et futures.</b></p>
<p>Cette interdépendance est inévitable. Vous n&#8217;avez pas le choix, à moins d&#8217;être un ermite habitant une grotte et chassant pour se nourrir. Et si vous décidez de vivre comme ça, surtout, ne partagez pas votre viande de mammouth, vous reprendriez votre interdépendance.</p>
<p>Même quelqu&#8217;un de très riche est interdépendant, car il a besoin d&#8217;un pool d&#8217;humain &#8220;de bonne qualité&#8221;, à qui il pourra acheter des biens et services de bonnes qualités : un bon comptable, un bon cuisinier, un bon chauffeur, un bon constructeur de piscine, un bon médecin, un bon chirurgien esthétique&#8230; Ce riche quelqu&#8217;un ne pourra pas former son pool d&#8217;humain par lui-même. Ça nécessite beaucoup de temps, plus que le temps d&#8217;une seule vie, fût-elle de riche.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/interdependance.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/05/interdependance.jpg" alt="Interdépendance des gens riches entre eux-même. Source : http://www.cairn.info/revue-societes-contemporaines-2007-4-page-105.htm (tl;dnr)" title="Interdépendance des gens riches entre eux-même. Source : http://www.cairn.info/revue-societes-contemporaines-2007-4-page-105.htm (tl;dnr)" width="500" height="331" class="alignnone size-full wp-image-6040" /></a></p>
<p><b>Plus on développe des liens de bonne qualité avec les autres, plus on est heureux.</b></p>
<p>Voici un graphique exprimant le bonheur d&#8217;une personne en fonction de son argent</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/fonction_argent_bonheur.png"><img src="http://sametmax.com/wp-content/uploads/2013/05/fonction_argent_bonheur.png" alt="Des courbes comme ça mériteraient clairement un petit coup de xkcdify." title="Des courbes comme ça mériteraient clairement un petit coup de xkcdify." width="467" height="333" class="alignnone size-full wp-image-6041" /></a></p>
<p>Et un autre exprimant le bonheur d&#8217;une personne en fonction de la qualité et de la quantité de liens qu&#8217;elle a tissé avec d&#8217;autres.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/fonction_argent_liens.png"><img src="http://sametmax.com/wp-content/uploads/2013/05/fonction_argent_liens.png" alt="Mais j&#039;avais la flemme et je sais pas me servir de xkcdify, désolé !" title="Mais j&#039;avais la flemme et je sais pas me servir de xkcdify, désolé !" width="544" height="388" class="alignnone size-full wp-image-6042" /></a></p>
<p>Le bonheur total d&#8217;une personne étant, à peu de choses près, la somme de ces deux bonheurs.</p>
<p>Cette théorie rejoint plus ou moins celle de la pyramide de Maslow. Sauf que le grand Wikipedia dit que des tas de gens ont invalidé la pyramide de Maslow. Je vais donc pas trop m&#8217;attarder dessus, et faire comme si on n&#8217;était pas au courant. (Un peu de mauvaise foi, ça aide toujours les argumentations).</p>
<p>À partir de ces 2 graphiques, mon conseil en tant que coach du sens de la vie, est le suivant :</p>
<p>Si vous êtes vraiment pauvres, essayez d&#8217;abord de récupérez de l&#8217;argent, plutôt que de vous faire des amis. Ça vous rendra heureux plus vite. Une fois que vous avez atteint un seuil de revenu suffisamment satisfaisant et régulier, ce sera devenu moins rentable, en terme de bonheur, de chercher à gagner encore plus. À partir de là, essayez de vous faire des amis et de créer des liens. </p>
<p>Au passage, cela me permet de rappeler <a href="http://sametmax.com/deux-conneries-a-la-seconde/">qu&#8217;il faut conserver la neutralité d&#8217;internet</a>, car c&#8217;est une formidable machine à fabriquer des liens.</p>
<p>Et au passage bis, je ne pense pas que l&#8217;être humain soit &#8220;naturellement bon&#8221;. Les concepts &#8220;bon&#8221; et &#8220;mauvais&#8221; me semblent trop compliqués pour qu&#8217;ils puissent être implémentés dans la nature.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/le-bien-et-le-mal.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/05/le-bien-et-le-mal.jpg" alt="J&#039;ai hésité entre ça et une image de South Park épisode 10 saison 1. Et je me suis dit que South Park, c&#039;était tellement conventionnel." title="J&#039;ai hésité entre ça et une image de South Park épisode 10 saison 1. Et je me suis dit que South Park, c&#039;était tellement conventionnel." width="550" height="330" class="alignnone size-full wp-image-6044" /></a></p>
<p>En fait, l&#8217;humain cherche à maximiser son bonheur personnel, sans forcément se soucier des autres. Mais en plus de ça, une bonne partie des humains a pris conscience du graphique &#8220;liens tissés -> bonheur&#8221;, ce qui va les amener à vouloir développer des liens de bonne qualité avec les autres : rendre service, discuter, échanger des idées, &#8230; Ça donne l&#8217;impression qu&#8217;ils sont naturellement bon, alors qu&#8217;en fait, ils cherchent juste à être heureux eux-même, le plus efficacement possible.</p>
<p>Toute la question est de savoir comment faire prendre conscience aux humains de la relation entre le bonheur et les liens tissés. Je n&#8217;ai pas de réponse précise (éducation ? liens initiaux ?)</p>
<h2>Où veux-je donc en venir ?</h2>
<p>Il vaut mieux pour vous-même que les humains proches de vous soient pas trop cons, pas trop pauvres et un minimum heureux. Ceci pour 2 raisons :</p>
<ul>
<li>
Afin de maximiser votre bonheur personnel, vous devez développer des liens de bonne qualité. Or c&#8217;est plus facile à faire avec des gens &#8220;de bonne qualité&#8221;.
</li>
<p><br/></p>
<li>
Dans &#8220;interdépendance inévitable&#8221; il y a &#8220;dépendance inévitable&#8221;. C&#8217;est moins inquiétant d&#8217;être dépendant de gens de bonne qualité, plutôt que d&#8217;un ramassis de crève-la-faim dépressifs qui ne savent rien faire.
</li>
<p><br/></ul>
<p>Il existe un moyen simple pour s&#8217;assurer que tous les humains autour de vous soient un minimum heureux, et aient la possibilité matérielle d&#8217;être d&#8217;une qualité minimale : le graphique &#8220;argent -> bonheur&#8221;.</p>
<p>Si on s&#8217;assure que tout le monde a la possibilité de s&#8217;avancer un peu dans ce graphique, afin d&#8217;arriver à peu près au point &#8220;Appartement&#8221;, on augmentera énormément le bonheur de beaucoup de gens, à peu de frais.</p>
<p>Si on s&#8217;assure que tout le mode peut s&#8217;avancer encore plus dans le graphique (par exemple, jusqu&#8217;au point &#8220;Rolex&#8221;), ce sera moins rentable. Il faudrait beaucoup plus d&#8217;argent, pour une augmentation de bonheur plutôt faible. Autant donc rester dans des sommes raisonnables.</p>
<p>L&#8217;idée qui en résulte s&#8217;appelle le Revenu de Base Inconditionnel.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/ban_bart.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/05/ban_bart.jpg" alt="J&#039;ai jamais compris comment Kurt Cobain pouvait chanter sous l&#039;eau." title="J&#039;ai jamais compris comment Kurt Cobain pouvait chanter sous l&#039;eau." width="450" height="225" class="alignnone size-full wp-image-6045" /></a></p>
<h3>Explication du Revenu de Base Inconditionnel en un paragraphe </h3>
<p>Cela consiste à donner la même somme d&#8217;argent, tous les mois, à toutes les personnes d&#8217;un pays ou d&#8217;une région. Ce Revenu continue d&#8217;être perçu même lorsqu&#8217;on commence à travailler, et quel que soit le type de contrat de travail. La somme donnée est calculée de façon à ce que chaque personne puisse vivre &#8220;dignement&#8221;, c&#8217;est à dire : bouffer, se loger et éventuellement acquérir certains biens culturels de base.</p>
<p>Cette idée (pas si nouvelle que ça) est actuellement en train de susciter des réflexions ici et là. C&#8217;est alors que des gens se sont dit que ce serait bien de lancer une Initiative Citoyenne Européenne, pour également faire réflexionner les gens qui nous gouvernent.</p>
<h3>Explication de l&#8217;Initiative Citoyenne Européenne (ICE) en un paragraphe, avec mes propres termes, donc simplifiée à outrance</h3>
<p>Une ICE est créée par un petit groupe de gens, qui demandent que soit mis en place un &#8220;truc dans la loi&#8221; (Ça peut être un peu tout, mais pas complètement n&#8217;importe quoi). Les citoyens de l&#8217;Union Européenne qui sont d&#8217;accord avec le truc en question signent une pétition. Si au bout d&#8217;un an, un million de signature est récupéré, la Commission Européenne est obligée de venir écouter le groupe initiateur de l&#8217;ICE, de réfléchir au truc et de donner un avis. La Commission Européenne peut répondre &#8220;on ne fera pas votre truc, GTFO LOL&#8221;, mais cela doit être accompagné d&#8217;arguments détaillés.</p>
<p>C&#8217;est là où je voulais en venir. Je vous invite à signer l&#8217;ICE pour le Revenu de Base Inconditionnel, afin de réfléchir à cette technique d&#8217;optimisation du bonheur humain. Pour en savoir plus, pour des infos pratiques et concrètes, et pour finalement signer en ligne, ça se passe par ici : <a href="http://revenudebase.info/initiative-citoyenne-europeenne/">http://revenudebase.info/initiative-citoyenne-europeenne/</a></p>
<h3>Si vous pensez que c&#8217;est une idée de merde parce que &lt;pleins de raisons&gt;.</h3>
<p>Le Revenu de Base Inconditionnel modifierait en profondeur notre façon de nous comporter en société, en modifiant notre rapport à l&#8217;argent, au travail et aux autres. C&#8217;est pourquoi, il suscite beaucoup de réactions, parfois assez fortes, de refus ou d&#8217;acceptation.</p>
<p>Les raisons de refuser cette idée sont assez diverses, mais on retombe souvent sur les mêmes. Des gens les ont alors rassemblées, et y ont opposés des arguments pour refuser ce refus. Je vous laisse quelques liens à ce sujet. Rassurez-vous, le propos y est bien plus concret que la réflexion nuagesque que j&#8217;ai faite en début d&#8217;article.</p>
<p>&#8220;Les chômeurs vont jouer à la Playstation&#8221;<br />
<a href="http://revenudebase.info/2013/04/revenu-base-pas-outil-lutte-contre-chomage/">http://revenudebase.info/2013/04/revenu-base-pas-outil-lutte-contre-chomage/</a></p>
<p>&#8220;C&#8217;est une idée libérale / de communiste&#8221;<br />
&#8220;Cela poussera les gens à l’oisiveté&#8221;<br />
&#8220;Plus personne ne voudra effectuer les tâches ingrates&#8221;<br />
&#8220;Le revenu de base va provoquer de l’inflation&#8221;<br />
&#8220;C’est une idée utopiste&#8221;<br />
&#8220;C’est impossible à financer&#8221;<br />
&#8220;L’état est déjà très généreux en France, ça ne va rien changer&#8221;<br />
&#8220;L’immigration va encore plus augmenter&#8221;<br />
&#8220;La société n’est pas prête, il faut d’abord réformer le système&#8221;<br />
<a href="http://www.tetedequenelle.fr/2011/04/mauvaises-raisons-revenu-de-vie/">http://www.tetedequenelle.fr/2011/04/mauvaises-raisons-revenu-de-vie/</a></p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/05/Trialsale-10pcs-magic-tricks-money-printer-hotsale-magic-paper-make-real-money-toy-free-shipping.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/05/Trialsale-10pcs-magic-tricks-money-printer-hotsale-magic-paper-make-real-money-toy-free-shipping.jpg" alt="It prints money !" title="It prints money !" width="310" height="310" class="alignnone size-full wp-image-6046" /></a></p>
<h3>Si vous pensez toujours que c&#8217;est une idée de merde.</h3>
<p>C&#8217;est votre droit. Et si ça se trouve, c&#8217;est vous qui avez raison.</p>
<p>Mais même dans ce cas, je vous invite à signer l&#8217;ICE. Celle-ci n&#8217;oblige pas l&#8217;Europe à instaurer le Revenu de Base. Elle oblige <strong>à réfléchir</strong> à l&#8217;idée du Revenu de Base. </p>
<p>Si c&#8217;est une idée de merde, les gens de la Commission Européenne auront tôt fait de s&#8217;en apercevoir, car ils sont certainement plus calés que moi en économie, géopolitique, psychohistoire et autres. Ils pourront alors expliquer à tout le monde, et avec des arguments valables, en quoi c&#8217;est de la merde. Si c&#8217;est le cas, je promets de ne plus embêter personne avec cette idée. Une toute petite signature en échange de votre tranquilité future, ça vaut le coup non ?</p>
<p>Le bonheur vaincra !</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=6028&amp;md5=2053126202f75ac856da2a8129ac41a1" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/comment-le-revenu-de-base-inconditionnel-pourrait-maximiser-le-bonheur/feed/</wfw:commentRss>
		<slash:comments>42</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fcomment-le-revenu-de-base-inconditionnel-pourrait-maximiser-le-bonheur%2F&amp;language=en_GB&amp;category=text&amp;title=Comment+le+Revenu+de+Base+Inconditionnel+pourrait+maximiser+le+bonheur.&amp;description=Ceci+est+un+post+invit%C3%A9+de+Recher+post%C3%A9+sous+licence+creative+common+3.0+unported.+Recher+est+un+des+premiers+lecteurs+%28et+soutient%29+du+blog%2C+donc+nous+avons+choisi+de+le...&amp;tags=argent%2Cbonheur%2Chumains%2CInitiative+Citoyenne+Europ%C3%A9enne%2Cinterd%C3%A9pendance%2CRevenu+de+Base+Inconditionnel%2Cviande+de+mammouth%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/money.jpg" length="32660" type="image/jpg" />	</item>
		<item>
		<title>Union d&#8217;un ensemble d&#8217;intervalles</title>
		<link>http://sametmax.com/union-dun-ensemble-dintervalles/</link>
		<comments>http://sametmax.com/union-dun-ensemble-dintervalles/#comments</comments>
		<pubDate>Sun, 17 Feb 2013 06:42:43 +0000</pubDate>
		<dc:creator>recher</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[algorithme]]></category>
		<category><![CDATA[bonhomme sur un mur]]></category>
		<category><![CDATA[bourrin]]></category>
		<category><![CDATA[intersection]]></category>
		<category><![CDATA[intervalle]]></category>
		<category><![CDATA[jeux de plate-forme]]></category>
		<category><![CDATA[matheux]]></category>
		<category><![CDATA[optimisation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[sort]]></category>
		<category><![CDATA[sperme]]></category>
		<category><![CDATA[tri]]></category>
		<category><![CDATA[union]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=4572</guid>
		<description><![CDATA[Un algo simple et classe pour fusionner et classer des intervalles qui se chevauchent, s'intersectionnent, etc.]]></description>
			<content:encoded><![CDATA[<blockquote><p>Ceci est un post invité de <a href="http://recher.wordpress.com" target="_blank">Réchèr</a> posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">creative common 3.0 unported.</a></p></blockquote>
<p>Kikoo amis matheux ou pas. Aujourd&#8217;hui, on va se faire un petit algo de derrière les fagots. Vous n&#8217;en aurez peut-être jamais besoin dans le monde réel, mais, qui a dit qu&#8217;on allait se contenter uniquement de ce dont on a besoin ? De plus, je présenterais, à la fin, une astuce générique d&#8217;algorithmiciens.</p>
<h2>Pré-requis</h2>
<ul>
<li>Connaître très vaguement la notion des O(n²), O(truc), &#8230; qui définissent le temps d&#8217;exécution d&#8217;un algorithme en fonction de la quantité de données à traiter. (Si ça vous parle pas c&#8217;est pas grave).
</li>
<li>Savoir que le pluriel d&#8217;intervalle n&#8217;est pas &#8220;intervaux&#8221;.</li>
</ul>
<p>Petite précision : pour définir des intervalles d&#8217;entiers, j&#8217;emploierais la convention pythonienne : le dernier élément n&#8217;est pas inclus. C&#8217;est à dire que [2, 7] correspond à 5 éléments : 2, 3, 4, 5, 6. </p>
<h2>Énoncé</h2>
<p>Soit une liste de couple de nombres, représentant des intervalles. Ils sont tout en vrac, y&#8217;en a qui se chevauchent, d&#8217;autres qui s&#8217;inclusent, etc. Bref, l&#8217;ensemble fait penser à une partouse animale multi-espèces. </p>
<p>exemple : [ [2, 7], [3, 7], [1, 5], [9, 10], [8, 9] ]<br />
<a href="http://sametmax.com/wp-content/uploads/2013/02/intervalle-1.png"><img src="http://sametmax.com/wp-content/uploads/2013/02/intervalle-1.png" alt="Les crochets d&#039;intervalles ont une tronche bizarre. C&#039;est pour bien montrer que le dernier élément n&#039;est pas inclus." title="Les crochets d&#039;intervalles ont une tronche bizarre. C&#039;est pour bien montrer que le dernier élément n&#039;est pas inclus." width="455" height="255" class="alignnone size-full wp-image-4575" /></a></p>
<p>Vous voulez une méthode pour rassembler tout ça, et obtenir une liste d&#8217;intervalles, triée, sans chevauchement, correspondant à la fusion de tous les intervalles de départ. En maths, on appelle cette opération une union. En partouse animale multi-espèces, on appelle aussi ça une union, mais ce n&#8217;est pas le sujet.</p>
<p>résultat souhaité : [ [1, 7], [8, 10] ]<br />
<a href="http://sametmax.com/wp-content/uploads/2013/02/intervalle-2.png"><img src="http://sametmax.com/wp-content/uploads/2013/02/intervalle-2.png" alt="Toujours cet éternel problème de nombre de poteaux versus nombre d&#039;intervalles. Je suis sûr que si on était dans un univers non-eucliden on serait pas emmerdé avec ce genre de détail à la con." title="Toujours cet éternel problème de nombre de poteaux versus nombre d&#039;intervalles. Je suis sûr que si on était dans un univers non-eucliden on serait pas emmerdé avec ce genre de détail à la con." width="449" height="160" class="alignnone size-full wp-image-4577" /></a></p>
<h2>Solutions auxquelles on pense en premier</h2>
<h3>Le bourrin pas-à-pas</h3>
<p>On récupère le début d&#8217;intervalle le plus à gauche, et la fin la plus à droite. On boucle entre ces deux valeurs. À chaque itération, on effectue le traitement suivant : </p>
<ul>
<li>Vérifier si la valeur courante est dans au moins un intervalle. </li>
<li>Si oui, et que juste avant on était dans aucun intervalle, alors on marque cette valeur comme un début d&#8217;intervalle.
</li>
<li>Si non, et que juste avant on était dans au moins un intervalle, alors on marque cette valeur comme une fin d&#8217;intervalle.</li>
</ul>
<h4>Désavantages</h4>
<p>Si, au départ, on a deux intervalles très éloignés, par exemple [0, 2] et [1000000, 1000002] on va faire une boucle de 1000002 itérations. Pour traiter 2 intervalles, c&#8217;est un peu lourd.</p>
<p>Ça ne marche qu&#8217;avec des entiers. Si on a des intervalles de réels, on itère comment ? En avançant de 0.0000000001 en 0.0000000001 ? Même problème avec des intervalles de date-heure.</p>
<h3>Le bourrin cumulatif</h3>
<p>On crée une liste géante de booléens, tous à False, qui s&#8217;étend du premier début d&#8217;intervalle à la fin du dernier. Chaque booléen indiquera si le nombre correspondant se trouve dans au moins un intervalle. On met les bons booléens à True en parcourant les intervalles de la liste initiale. Puis, on construit la liste finale d&#8217;intervalles, en se basant sur les booléens.</p>
<h4>Désavantages</h4>
<p>Si on a en entrée un million de fois l&#8217;intervalle [10, 210], on va mettre un million de fois à True la même suite de 200 booléens. 200 millions d&#8217;opérations pour ressortir un unique intervalle [10, 210].</p>
<p>Même problème que précédemment. Ça ne marche qu&#8217;avec des nombres entiers.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/02/881911164.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/02/881911164.jpg" alt="Du bourrin et du cumulatif : serait-ce l&#039;occasion d&#039;invoquer une grand-mère à moustache ?" title="Du bourrin et du cumulatif : serait-ce l&#039;occasion d&#039;invoquer une grand-mère à moustache ?" width="210" height="300" class="alignnone size-full wp-image-4579" /></a></p>
<h3>L&#8217;enfileur de perles</h3>
<p>On a d&#8217;un côté la liste finale des intervalles (initialisée à vide), et de l&#8217;autre, la liste initiale, en bordel. On passe les intervalles d&#8217;une liste à l&#8217;autre, un par un, en testant les cas suivants :</p>
<ul>
<li>Le début et la fin de l&#8217;intervalle en cours n&#8217;est dans aucun intervalle final -> ça fait un nouvel intervalle final.
</li>
<li>Le début est dans un intervalle final, mais pas la fin -> ça rallonge l&#8217;interval final existant.</li>
<li>La fin est dans un intervalle final, mais pas le début -> ça rallonge l&#8217;intervalle final existant, mais par l&#8217;autre côté.</li>
<li>La fin et le début sont dans le même intervalle final -> l&#8217;intervalle en cours ne sert à rien.</li>
<li>La fin et le début sont dans deux intervalles finaux différents. -> il faut fusionner les deux intervalles finaux.</li>
</ul>
<p>Et en plus de tout ça, il faut également tester s&#8217;il n&#8217;y a pas des intervalles finaux entièrement inclus dans l&#8217;intervalle en cours. Auquel cas, ils ne servent plus à rien, et doivent être enlevé de la liste.</p>
<h4>Désavantages</h4>
<p>Une bonne grosse prise de tête à coder tous les cas possibles, sans rien oublier, sans bug. </p>
<p>Le fait de chercher si un nombre se trouve dans une liste d&#8217;intervalles, fut-elle triée, est une opération qui prend un certain temps. Ça peut s&#8217;optimiser avec de la dichotomie ou des trucs du genre, mais quand même. </p>
<p>Par contre, cette algo marche avec des nombres réels et des date-heure. Youpi.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/02/JB333.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/02/JB333.jpg" alt="Je pige même pas comment ce jouet est censé fonctionner. Faut mettre les perles dans le trou de la machine ? Comment le trou de perle se met en face du fil ? Est-ce que ça serait pas encore plus galère qu&#039;à la main ?" title="Je pige même pas comment ce jouet est censé fonctionner. Faut mettre les perles dans le trou de la machine ? Comment le trou de perle se met en face du fil ? Est-ce que ça serait pas encore plus galère qu&#039;à la main ?" width="359" height="275" class="alignnone size-full wp-image-4581" /></a></p>
<h2>Et si on arrêtait les conneries ?</h2>
<p>Dans ces premières solutions, on considère les intervalles comme des objets immuables. Il faut en traiter un entièrement avant de passer au suivant. Mais on peut aussi les voir comme deux événements distincts (un début et une fin), que l&#8217;on peut dissocier totalement, et traiter dans leur ordre d&#8217;arrivée. On ne sera plus capable de retrouver quel début correspond à quelle fin, mais ça on s&#8217;en fout, y&#8217;a rien qui ressemble plus à un intervalle qu&#8217;un autre intervalle.</p>
<p>Imaginez un petit bonhomme (ou une petite bonne femme, respectons la parité). Au départ, il est au niveau du sol. Il avance vers la droite. Quand il rencontre un début d&#8217;intervalle, il monte sur un mur d&#8217;un étage. Quand il rencontre une fin, il descend d&#8217;un étage. Il peut être sur plusieurs étages superposés. Au fur et à mesure qu&#8217;il se déplace, on note les endroits où il se retrouve sur le sol. Ces endroits correspondent à des zones sans aucun intervalle. </p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/02/jill-of-the-jungle_3crop.png"><img src="http://sametmax.com/wp-content/uploads/2013/02/jill-of-the-jungle_3crop.png" alt="Je vous laisse retrouver de quel jeu vidéo est tiré ce screenshot. Je l&#039;avais beaucoup aimé. Je trouvais l&#039;univers très onirique, et très &quot;compte de fée mais pas cucul, parce que y&#039;a quand même dedans des aventures qui poutrent de la rascasse particulaire avec un chandelier dans la véranda.&quot;" title="Je vous laisse retrouver de quel jeu vidéo est tiré ce screenshot. Je l&#039;avais beaucoup aimé. Je trouvais l&#039;univers très onirique, et très &quot;compte de fée mais pas cucul, parce que y&#039;a quand même dedans des aventures qui poutrent de la rascasse particulaire avec un chandelier dans la véranda.&quot;" width="258" height="138" class="alignnone size-full wp-image-4582" /></a></p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/02/gfs_29955_2_14_mid.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/02/gfs_29955_2_14_mid.jpg" alt="Mes parents n&#039;arrêtaient pas de me dire que mes jeux se ressemblaient tous. Puis ils m&#039;emmenaient visiter des églises et des châteaux qui se ressemblaient tous. Bizarre..." title="Mes parents n&#039;arrêtaient pas de me dire que mes jeux se ressemblaient tous. Puis ils m&#039;emmenaient visiter des églises et des châteaux qui se ressemblaient tous. Bizarre..." width="270" height="169" class="alignnone size-full wp-image-4583" /></a></p>
<h3>Le code</h3>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> tri_bonhomme_sur_un_mur<span style="color: black;">&#40;</span>list_intervalle_en_bordel<span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot; Effectue une union de tous les intervalles indiqués en paramètre.
&nbsp;
    Données d'entrée : une liste de liste de deux éléments, représentant
    des intervalles.
     - Le type des éléments n'est pas imposé. Il faut juste qu'on puisse 
       les ordonner et les trier. 
     - Dans chaque liste de deux éléments, le premier doit être plus 
       petit que le second. 
    La fonction ne vérifie pas ces contraintes. Si elles ne sont pas 
    respectées, le comportement est indéterminé. Ça peut planter, 
    ça peut renvoyer un résultat faux sans avertissement, etc.
&nbsp;
    Sortie : une liste de liste de deux éléments, unionnisée et triée
    comme il faut.
    &quot;&quot;&quot;</span>
    <span style="color: #808080; font-style: italic;"># On extrait tous les débuts d'intervalles, et toutes les fins.</span>
    list_debut = <span style="color: black;">&#91;</span> interv<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span> <span style="color: #ff7700;font-weight:bold;">for</span> interv <span style="color: #ff7700;font-weight:bold;">in</span> list_intervalle_en_bordel <span style="color: black;">&#93;</span>
    list_fin = <span style="color: black;">&#91;</span> interv<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span> <span style="color: #ff7700;font-weight:bold;">for</span> interv <span style="color: #ff7700;font-weight:bold;">in</span> list_intervalle_en_bordel <span style="color: black;">&#93;</span>
    <span style="color: #808080; font-style: italic;"># On les trie, pour pouvoir les traiter de gauche à droite.</span>
    list_debut.<span style="color: black;">sort</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    list_fin.<span style="color: black;">sort</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;"># Cette liste contiendra les intervalles unionnisés et triés.</span>
    list_intervalle_final = <span style="color: black;">&#91;</span><span style="color: black;">&#93;</span>
    <span style="color: #808080; font-style: italic;"># indique le nombre d'invervalle superposés dans lesquels on se trouve</span>
    <span style="color: #808080; font-style: italic;"># actuellement. (C'est à dire : le nombre d'étages sur lequel</span>
    <span style="color: #808080; font-style: italic;"># marche le bonhomme).</span>
    nb_superposition = <span style="color: #ff4500;">0</span>
    <span style="color: #808080; font-style: italic;"># Lorsqu'on est dans un ou plusieurs intervalles superposés, on doit</span>
    <span style="color: #808080; font-style: italic;"># se souvenir à quelle position on est entré dans le premier.</span>
    <span style="color: #808080; font-style: italic;"># Cela permettra de créer l'intervalle final, lorsqu'on sera </span>
    <span style="color: #808080; font-style: italic;"># complètement sorti de la superposition en cours.</span>
    debut_intervalle_courant = <span style="color: #ff4500;">0</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># C'est parti ! Le petit bonhomme avance. On lui fait traiter les</span>
    <span style="color: #808080; font-style: italic;"># événements d'entrée et de sortie d'intervalle au fur et à mesure </span>
    <span style="color: #808080; font-style: italic;"># qu'ils arrivent.</span>
    <span style="color: #ff7700;font-weight:bold;">while</span> list_debut:
        <span style="color: #808080; font-style: italic;"># Le premier élément de list_debut, c'est le premier début </span>
        <span style="color: #808080; font-style: italic;"># d'intervalle qu'on rencontrera. Le premier élément de list_fin,</span>
        <span style="color: #808080; font-style: italic;"># c'est la première fin d'intervalle qu'on rencontrera. On </span>
        <span style="color: #808080; font-style: italic;"># détermine, parmi ces deux événements, lequel on rencontrera en </span>
        <span style="color: #808080; font-style: italic;"># tout premier.</span>
        <span style="color: #808080; font-style: italic;">#</span>
        <span style="color: #808080; font-style: italic;"># La fonction cmp renvoie -1, 0, ou 1, selon la comparaison </span>
        <span style="color: #808080; font-style: italic;"># effectuée entre les deux valeurs passées en paramètre.</span>
        <span style="color: #808080; font-style: italic;"># Faire un petit help(cmp) pour connaître les détails.</span>
        ordre_debut_fin = <span style="color: #008000;">cmp</span><span style="color: black;">&#40;</span>list_debut<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>, list_fin<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> ordre_debut_fin == -<span style="color: #ff4500;">1</span>:
            <span style="color: #808080; font-style: italic;"># L'événement rencontré est un début d'intervalle.</span>
            <span style="color: #808080; font-style: italic;"># On enlève l'événement de la liste, puisqu'on va le traiter,</span>
            <span style="color: #808080; font-style: italic;"># là, tout de suite.</span>
            pos_debut = list_debut.<span style="color: black;">pop</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>
            <span style="color: #ff7700;font-weight:bold;">if</span> nb_superposition == <span style="color: #ff4500;">0</span>:
                <span style="color: #808080; font-style: italic;"># On était dans aucun intervalle, et on vient d'en </span>
                <span style="color: #808080; font-style: italic;"># rencontrer un. Dans la liste finale d'intervalles, </span>
                <span style="color: #808080; font-style: italic;"># ça va donc compter comme un début. On retient </span>
                <span style="color: #808080; font-style: italic;"># cette info.</span>
                debut_intervalle_courant = pos_debut
            <span style="color: #808080; font-style: italic;"># Dans tous les cas, on ajoute une superposition d'intervalle</span>
            <span style="color: #808080; font-style: italic;"># (le bonhomme monte d'un étage).</span>
            nb_superposition += <span style="color: #ff4500;">1</span>
        <span style="color: #ff7700;font-weight:bold;">elif</span> ordre_debut_fin == +<span style="color: #ff4500;">1</span>:
            <span style="color: #808080; font-style: italic;"># L'événement rencontré est une fin d'intervalle.</span>
            <span style="color: #808080; font-style: italic;"># On l'enlève de la liste.</span>
            pos_fin = list_fin.<span style="color: black;">pop</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>
            <span style="color: #808080; font-style: italic;"># On enlève une superposition d'intervalle.</span>
            nb_superposition -= <span style="color: #ff4500;">1</span>
            <span style="color: #ff7700;font-weight:bold;">if</span> nb_superposition == <span style="color: #ff4500;">0</span>:
                <span style="color: #808080; font-style: italic;"># Après avoir enlevé la superposition, on se retrouve</span>
                <span style="color: #808080; font-style: italic;"># avec 0 intervalle superposé. </span>
                <span style="color: #808080; font-style: italic;"># (Le bonhomme est redescendu jusqu'au niveau du sol).</span>
                <span style="color: #808080; font-style: italic;"># Il faut donc enregistrer ça comme une fin d'intervalle </span>
                <span style="color: #808080; font-style: italic;"># final. Tant qu'on y est, on crée tout de suite ce nouvel</span>
                <span style="color: #808080; font-style: italic;"># intervalle final et on le met dans la liste.</span>
                nouvel_intervalle = <span style="color: black;">&#40;</span>debut_intervalle_courant, pos_fin<span style="color: black;">&#41;</span>
                list_intervalle_final.<span style="color: black;">append</span><span style="color: black;">&#40;</span>nouvel_intervalle<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            <span style="color: #808080; font-style: italic;"># On rencontre à la fois un début et une fin d'intervalle.</span>
            <span style="color: #808080; font-style: italic;"># Rien de spécial à faire. Faut juste virer les 2 événements </span>
            <span style="color: #808080; font-style: italic;"># traités de leur liste respectives.</span>
            list_debut.<span style="color: black;">pop</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>
            list_fin.<span style="color: black;">pop</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># Durant toute cette boucle, la variable nb_superposition augmente</span>
        <span style="color: #808080; font-style: italic;"># et diminue. Mais elle n'est jamais censée devenir négative.</span>
        <span style="color: #808080; font-style: italic;"># Si ça arrive, c'est que les données d'entrées sont mal foutues.</span>
        <span style="color: #808080; font-style: italic;"># On entre dans un cas d'indétermination. </span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># Arrivé à la fin de la boucle, il peut rester, ou pas des éléments</span>
    <span style="color: #808080; font-style: italic;"># dans list_fin. Ce qui est sûr, c'est que list_debut se vide</span>
    <span style="color: #808080; font-style: italic;"># avant list_fin. Si ce n'est pas le cas, c'est encore un cas</span>
    <span style="color: #808080; font-style: italic;"># d'indétermination.</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">if</span> list_fin:
        <span style="color: #808080; font-style: italic;"># On a passé tous les débuts d'intervalle, mais il reste des</span>
        <span style="color: #808080; font-style: italic;"># fins. Ça veut dire qu'on est encore dans un ou plusieurs</span>
        <span style="color: #808080; font-style: italic;"># intervalles. On devrait normalement avoir :</span>
        <span style="color: #808080; font-style: italic;"># len(list_fin) == nb_superposition. Si c'est pas le cas, c'est</span>
        <span style="color: #808080; font-style: italic;"># un cas d'indétermination.</span>
        <span style="color: #808080; font-style: italic;">#</span>
        <span style="color: #808080; font-style: italic;"># On pourrait traiter les événements de fin d'intervalle un par un,</span>
        <span style="color: #808080; font-style: italic;"># et diminuer progressivement nb_superposition. Mais on s'en fout,</span>
        <span style="color: #808080; font-style: italic;"># c'est pas nécessaire. On prend juste la fin d'intervalle qui </span>
        <span style="color: #808080; font-style: italic;"># supprimera la dernière superposition (c'est à dire la dernière</span>
        <span style="color: #808080; font-style: italic;"># fin d'intervalle), et on construit un dernier intervalle final</span>
        <span style="color: #808080; font-style: italic;"># avec ça.</span>
        pos_fin = list_fin<span style="color: black;">&#91;</span>-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
        nouvel_intervalle = <span style="color: black;">&#40;</span>debut_intervalle_courant, pos_fin<span style="color: black;">&#41;</span>
        list_intervalle_final.<span style="color: black;">append</span><span style="color: black;">&#40;</span>nouvel_intervalle<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> list_intervalle_final</pre></div></div>

<h3>Les avantages (parce que y&#8217;a aucun désavantages)</h3>
<p>Ça marche avec des réels, des dates, et de manière générale, <a href="http://sametmax.com/ordonner-en-python/" target="_blank">tout ce qu&#8217;on peut trier</a>.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span>tri_bonhomme_sur_un_mur<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">7</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span><span style="color: #ff4500;">3</span>, <span style="color: #ff4500;">7</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">5</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span><span style="color: #ff4500;">9</span>, <span style="color: #ff4500;">10</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span><span style="color: #ff4500;">8</span>, <span style="color: #ff4500;">9</span><span style="color: black;">&#93;</span> <span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">7</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#40;</span><span style="color: #ff4500;">8</span>, <span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># Testez pas ça chez vous ! Ça prend trois plombes ! Mettez juste 1000.</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span>tri_bonhomme_sur_un_mur<span style="color: black;">&#40;</span> <span style="color: black;">&#91;</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">10</span>, <span style="color: #ff4500;">210</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#93;</span> <span style="color: #66cc66;">*</span> <span style="color: #ff4500;">1000000</span> <span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">10</span>, <span style="color: #ff4500;">210</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># Voyons voir ce que ça donne avec des réels </span>
<span style="color: #808080; font-style: italic;"># (dont certains sont négatifs, tant qu'à faire).</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span>tri_bonhomme_sur_un_mur<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span> 
    <span style="color: black;">&#91;</span>-<span style="color: #ff4500;">7.2</span>, -<span style="color: #ff4500;">6.9</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span>-<span style="color: #ff4500;">8.4</span>, -<span style="color: #ff4500;">5.3</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span>-<span style="color: #ff4500;">10.5</span>, -<span style="color: #ff4500;">5.25</span><span style="color: black;">&#93;</span>, 
    <span style="color: black;">&#91;</span>-<span style="color: #ff4500;">1.7</span>, <span style="color: #ff4500;">0.01</span><span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span><span style="color: #ff4500;">0.0</span>, <span style="color: #ff4500;">4.0</span><span style="color: black;">&#93;</span>, 
    <span style="color: black;">&#91;</span><span style="color: #ff4500;">12.125</span>, <span style="color: #ff4500;">13.9</span>, <span style="color: black;">&#93;</span>, <span style="color: black;">&#91;</span><span style="color: #ff4500;">13.9</span>, <span style="color: #ff4500;">15.0</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#40;</span>-<span style="color: #ff4500;">10.5</span>, -<span style="color: #ff4500;">5.25</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#40;</span>-<span style="color: #ff4500;">1.7</span>, <span style="color: #ff4500;">4.0</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#40;</span><span style="color: #ff4500;">12.125</span>, <span style="color: #ff4500;">15.0</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>    
&nbsp;
<span style="color: #808080; font-style: italic;"># et avec des dates</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span>from <span style="color: #dc143c;">datetime</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">datetime</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span>tri_bonhomme_sur_un_mur<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span>
    <span style="color: black;">&#91;</span><span style="color: #dc143c;">datetime</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2012</span>, <span style="color: #ff4500;">12</span>, <span style="color: #ff4500;">21</span>, <span style="color: #ff4500;">16</span>, <span style="color: #ff4500;">54</span><span style="color: black;">&#41;</span>, 
     <span style="color: #dc143c;">datetime</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2013</span>, 02, <span style="color: #ff4500;">16</span>, <span style="color: #ff4500;">12</span>, <span style="color: #ff4500;">59</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>, 
    <span style="color: black;">&#91;</span><span style="color: #dc143c;">datetime</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2013</span>, 02, <span style="color: #ff4500;">14</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>, 
     <span style="color: #dc143c;">datetime</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2069</span>, 01, 01, <span style="color: #ff4500;">13</span>, <span style="color: #ff4500;">37</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#93;</span> <span style="color: black;">&#93;</span> <span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">datetime</span>.<span style="color: #dc143c;">datetime</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2012</span>, <span style="color: #ff4500;">12</span>, <span style="color: #ff4500;">21</span>, <span style="color: #ff4500;">16</span>, <span style="color: #ff4500;">54</span><span style="color: black;">&#41;</span>,
  <span style="color: #dc143c;">datetime</span>.<span style="color: #dc143c;">datetime</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2069</span>, <span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">13</span>, <span style="color: #ff4500;">37</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span></pre></div></div>

<p>En ajoutant à peine 2-3 lignes de code à la fonction, on peut récupérer le nombre maximal d&#8217;intervalles superposés.</p>
<p>En re-ajoutant quelques autres lignes, on peut récupérer les zones dans lesquelles ce maximum est atteint. Ce qui pourrait servir pour effectuer l&#8217;opération mathématique d&#8217;intersection. (Je vous laisse chercher ça par vous mêmes).</p>
<p>L&#8217;algorithme est principalement constitué d&#8217;une bi-boucle, c&#8217;est à dire une boucle unique, qui avance dans deux listes différentes (je viens d&#8217;inventer ce terme, ne m&#8217;embêtez pas). C&#8217;est encore plus simple que deux boucles imbriquées. Le nombre d&#8217;itérations à effectuer est égal au nombre d&#8217;intervalle multiplié par deux, c&#8217;est tout. Dans tous les cas limites présentés ci-dessus, ça fait une solution acceptable, demandant un temps d&#8217;exécution peu pharaonique.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2013/02/resize.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/02/resize.jpg" alt="Exemple de deux bi-boucles imbriquées au niveau de la vis. Cette image vous a été offerte par les Scissor Sisters." title="Exemple de deux bi-boucles imbriquées au niveau de la vis. Cette image vous a été offerte par les Scissor Sisters." width="370" height="370" class="alignnone size-full wp-image-4587" /></a></p>
<h2>Mais ou est passé la complexité ?</h2>
<p>Les premières solutions avaient l&#8217;air de demander énormément de temps d&#8217;exécution, surtout avec beaucoup d&#8217;intervalles en entrée. Ça ne semble pas être le cas pour la solution du &#8220;bonhomme sur un mur&#8221;. Pourtant, la complexité d&#8217;une tâche, ça ne disparaît pas comme par magie. Y&#8217;aurait-il une entourloupe quelque part ?</p>
<p>Il y en a une. Ce sont les deux opérations de tri effectuées au début de la fonction. Un tri, ce n&#8217;est pas anodin, et son temps d&#8217;exécution peut augmenter très beaucoup et très vite. La complexité n&#8217;a pas disparue, on n&#8217;a fait que la déplacer vers des tris. Alors finalement, ma solution n&#8217;est pas si bien que ça ?</p>
<p>Eh bien si. Parce que le tri, même s&#8217;il reste coûteux en temps et en ressource, est un problème archi-connu, archi-réglé, et archi-optimisé. Le python, comme beaucoup d&#8217;autres langages, profite pleinement du travail réalisé par des centaines de matheux algorithmologues, qui se sont masturbés l&#8217;esprit sur des centaines de méthodes de tri différentes.</p>
<div id="attachment_4589" class="wp-caption alignnone" style="width: 510px"><a href="http://sametmax.com/wp-content/uploads/2013/02/P1060165-resize1.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/02/P1060165-resize1.jpg" alt="Y&#039;a des fois, on sait que l&#039;image dont on a besoin ne sera pas trouvable sur l&#039;internet. Alors on est obligé de la créer soi-même. (Mais je me suis fait aider)." title="Y&#039;a des fois, on sait que l&#039;image dont on a besoin ne sera pas trouvable sur l&#039;internet. Alors on est obligé de la créer soi-même. (Mais je me suis fait aider)." width="500" height="375" class="size-full wp-image-4589" /></a><p class="wp-caption-text">Photo prise dans le bureau d&#039;un chercheur en algorithmologie.</p></div>
<p>C&#8217;est ça l&#8217;astuce générique dont je vous parlais au début. Face à un nouveau problème, le matheux <del datetime="2013-02-17T02:34:17+00:00">sort son zguègue</del> tente de trouver des équivalents à un ou plusieurs problèmes connus, que lui et ses amis matheux ont déjà réglés. C&#8217;est souvent bien plus simple que de tenter de régler le problème directement, en partant de rien. </p>
<p><em>&#8220;Un nain éjacule bien plus loin lorsqu&#8217;il est perché sur les épaules d&#8217;un géant.&#8221;</em> Et pour respecter la parité, j&#8217;ajouterais qu&#8217;une naine femme-fontainise bien plus loin lorqu&#8217;elle est perchée sur les épaules d&#8217;une géante.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=4572&amp;md5=480b1322728e3af4fe96d5ab208a3186" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/union-dun-ensemble-dintervalles/feed/</wfw:commentRss>
		<slash:comments>14</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Funion-dun-ensemble-dintervalles%2F&amp;language=en_GB&amp;category=text&amp;title=Union+d%26%238217%3Bun+ensemble+d%26%238217%3Bintervalles&amp;description=Ceci+est+un+post+invit%C3%A9+de+R%C3%A9ch%C3%A8r+post%C3%A9+sous+licence+creative+common+3.0+unported.+Kikoo+amis+matheux+ou+pas.+Aujourd%26%238217%3Bhui%2C+on+va+se+faire+un+petit+algo+de+derri%C3%A8re+les...&amp;tags=algorithme%2Cbonhomme+sur+un+mur%2Cbourrin%2Cintersection%2Cintervalle%2Cjeux+de+plate-forme%2Cmatheux%2Coptimisation%2Cpython%2Csort%2Csperme%2Ctri%2Cunion%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/02/intervillesinternational_06.jpg" length="52807" type="image/jpg" />	</item>
		<item>
		<title>Faire des enums en python</title>
		<link>http://sametmax.com/faire-des-enums-en-python/</link>
		<comments>http://sametmax.com/faire-des-enums-en-python/#comments</comments>
		<pubDate>Wed, 19 Dec 2012 17:41:10 +0000</pubDate>
		<dc:creator>recher</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[animaux zoophiles]]></category>
		<category><![CDATA[bbw]]></category>
		<category><![CDATA[enum]]></category>
		<category><![CDATA[fesses]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[seins]]></category>
		<category><![CDATA[type]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3741</guid>
		<description><![CDATA[Dans le C++, il existe quelque chose que j'avais trouvé bien sympa : les enums. Nous allons voir dans cet article comment créer des variables de ce type en python. Cet article comporte des nichons, des feux rouges et des chanteurs pas encore morts.]]></description>
			<content:encoded><![CDATA[<blockquote><p>Ceci est un post invité de <a href="http://recher.wordpress.com/" target="_blank">Réchèr </a>posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">creative common 3.0 unported</a>.</p></blockquote>
<p><em>&#8220;Moi, je viens du C++&#8221;</em></p>
<p>Voilà un propos qui fait classe. Ça donne un air de vieux de la vieille, à qui on ne la fait pas, et qui connaît des langages que c&#8217;est pas des langages de taffioles. &#8220;<em>De mon temps, fallait savoir ce qu&#8217;on faisait, sinon tout plantait. On ciselait notre code à la main dans des blocs de granit. Vous les gosses de maintenant, vous connaissez plus rien. Eh ! Sale jeune, au lieu d&#8217;importer des lib de feignasses, vient donc me changer ma poche à urine.</em>&#8221;</p>
<p>Ça aurait été encore plus classe de dire que je viens de l&#8217;Assembleur, mais je suis pas assez vieux pour ça. Et de toutes façons, en vrai, je viens du Pascal. Bref, passons.</p>
<p>Tout ça pour dire que dans le C++, il existe quelque chose que j&#8217;avais trouvé bien sympa : les enums.</p>
<h3>Comment ça marche ?</h3>
<p>Un enum est un type de variables ayant un domaine de valeur fixe et prédéfini, que l&#8217;on spécifie lors de la déclaration du type.</p>

<div class="wp_syntax"><div class="code"><pre class="c" style="font-family:monospace;"><span style="color: #993333;">typedef</span> <span style="color: #000000; font-weight: bold;">enum</span>
<span style="color: #009900;">&#123;</span>
     Pique<span style="color: #339933;">,</span>
     Coeur<span style="color: #339933;">,</span>
     Trefle<span style="color: #339933;">,</span>
     Carreau
<span style="color: #009900;">&#125;</span> ECouleursCartes<span style="color: #339933;">;</span></pre></div></div>

<p>Ensuite, on peut déclarer une variable de ce type, et lui affecter l&#8217;une des valeurs autorisées.</p>

<div class="wp_syntax"><div class="code"><pre class="c" style="font-family:monospace;">ECouleursCartes vMaCouleurCarte<span style="color: #339933;">;</span>
vMaCouleurCarte <span style="color: #339933;">=</span> Trefle<span style="color: #339933;">;</span></pre></div></div>

<p>Concrètement, chaque valeur correspond à un entier. Le compilateur fait les correspondances tout seul comme un grand.</p>
<h3>À quoi ça sert ?</h3>
<p>À avoir du code plus parlant quand on veut représenter des notions concrètes de la vraie vie, ou quand on implémente une machine à état. </p>
<p>Par exemple, vous créez une classe <code>FeuCirculation</code>. Vous avez besoin d&#8217;une variable renseignant sa couleur. Vous pouvez utiliser un int à l&#8217;arrache, et noter en commentaire quelque part : &#8220;0 c&#8217;est rouge, 1 c&#8217;est vert, 2 c&#8217;est orange.&#8221;. Mais c&#8217;est chiant. Il faut toujours garder en tête les correspondances. On risque d&#8217;attribuer des valeurs non documentées. Bref, y&#8217;a n&#8217;importe quoi dedans et ça pue, (un peu comme une poche à urine).</p>
<p>Avec un enum, tout est plus clair, aussi bien dans le code définissant la classe <code>FeuCirculation</code>, que dans le code qui l&#8217;utilise. Et c&#8217;est plus robuste.</p>
<p>L&#8217;exemple qui est donné très souvent dans les tutoriaux, c&#8217;est un enum <code>Animal</code>, contenant les valeurs <code>chien, chat, bœuf musqué, ...</code> Ça fonctionne, mais personnellement cet exemple me gêne un peu. Chaque animal est un objet à part entière. Dans ce cas, il vaudrait mieux créer une classe générique <code>Animal</code>, et la faire hériter. Ce qui permettra ensuite de créer des méthodes telles que <code>manger(), crier(), péter(), ...</code></p>
<p><a href="http://sametmax.com/faire-des-enums-en-python/fuck-a-duck/" rel="attachment wp-att-3744"><img src="http://sametmax.com/wp-content/uploads/2012/12/fuck-a-duck.jpg" alt="If it quacks like a duck, it may have noticed you are fucking it." title="If it quacks like a duck, it may have noticed you are fucking it." width="320" height="240" class="alignnone size-full wp-image-3744" /></a></p>
<p>Pour décrire plusieurs objets, utilisez des classes. Pour décrire les différents états d&#8217;un même objet, utilisez un enum. Pour décrire plusieurs objets simples, utilisez l&#8217;un ou l&#8217;autre, c&#8217;est à vous de choisir.</p>
<h3>Comment faire un enum en python ?</h3>
<p>Il n&#8217;y a, à ma connaissance, pas de structure syntaxique dédiée. Mais c&#8217;est pas grave, on va bien trouver quelque chose.</p>
<p>Le plus simple, pour commencer, c&#8217;est de garder l&#8217;idée de la correspondance avec des entiers. Ça offre plein d&#8217;avantages :</p>
<ul>
<li>On sait exactement comment ça marche à l&#8217;intérieur.</li>
<li>On peut très facilement enregistrer des enums dans un fichier ou une base de donnée, puisque ce ne sont que des nombres.</li>
<li>On peut ordonner les valeurs. À utiliser avec prudence, car ça n&#8217;a pas toujours de sens. (Dire que l&#8217;état &#8220;feu rouge&#8221; est inférieur à l&#8217;état &#8220;feu vert&#8221;, qu&#8217;est-ce que cela signifie exactement ?)</li>
</ul>
<p>La première idée qui vient à l&#8217;esprit, c&#8217;est de créer une classe avec les valeurs dedans, et de ne plus jamais les changer par la suite.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># On l'appelle FeuCirculation et non pas FeuRouge. </span>
<span style="color: #808080; font-style: italic;"># Parce qu'un feu n'est pas forcément rouge.</span>
<span style="color: #808080; font-style: italic;"># (Putain de langue française à la con qui fait n'importe quoi).</span>
<span style="color: #ff7700;font-weight:bold;">class</span> FeuCirculation:
    ROUGE = <span style="color: #ff4500;">0</span>
    ORANGE = <span style="color: #ff4500;">1</span>
    VERT = <span style="color: #ff4500;">2</span>
    ORANGE_CLIGNOTANT = <span style="color: #ff4500;">3</span>
    TOUT_ETEINT = <span style="color: #ff4500;">4</span>
&nbsp;
feuActuel = FeuCirculation.<span style="color: black;">ORANGE</span></pre></div></div>

<p>C&#8217;est bien, mais chiant à maintenir. Si on veut ajouter un autre état (par exemple, <code>FLECHE_DROITE_ORANGE_CLIGNOTANTE</code>), et qu&#8217;on se plante dans les valeurs numériques, il y a un risque d&#8217;avoir des doublons, et ça fiche tout en l&#8217;air.</p>
<p>Voici un petit peu mieux :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">class</span> FeuCirculation:
    <span style="color: black;">&#40;</span>ROUGE,
     ORANGE,
     VERT,
     ORANGE_CLIGNOTANT,
     TOUT_ETEINT,
    <span style="color: black;">&#41;</span> = <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span></pre></div></div>

<p><code>range(5)</code> renvoie un tuple (0, 1, 2, 3, 4). Des entiers différents sont attribués aux valeurs de l&#8217;enum. Si on veut en rajouter une et qu&#8217;on oublie de remplacer <code>range(5)</code> par <code>range(6)</code>, ça va balancer une exception. Tout va bien.</p>
<p>Au cas où vous demanderiez : &#8220;qu&#8217;est-ce qui m&#8217;empêche de redéfinir l&#8217;une des valeurs, à un autre endroit du code, et de foutre le bordel ?&#8221;, je répondrais <em>&#8220;We are all consenting adults here&#8221;</em>. (Se référer à la philosophie du python. Si besoin, ce sera l&#8217;occasion d&#8217;un autre article).</p>
<p><a href="http://sametmax.com/wp-content/uploads/2012/12/Lexxxi_Luxe_Sapphire_Cotton_Candi_2394hsp_10.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/Lexxxi_Luxe_Sapphire_Cotton_Candi_2394hsp_10.jpg" alt="Some consenting adults. (Je peux venir ?)" title="Some consenting adults. (Je peux venir ?)" width="375" height="250" class="alignnone size-full wp-image-3765" /></a></p>
<h3>Le code est beau, mais pour débugger ?</h3>
<p>C&#8217;est un peu lourdingue. Lorsqu&#8217;on fait <code>print feuActuel</code> (ou lorsqu&#8217;on tape directement <code>feuActuel</code> dans <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/" target="_blank">une console pdb</a>), c&#8217;est une valeur numérique pas claire qui va s&#8217;afficher, au lieu d&#8217;un joli &#8220;ORANGE&#8221;, &#8220;ROUGE&#8221;, &#8230;</p>
<p>Un petit dictionnaire de correspondance &#8220;valeur numérique&#8221; -> &#8220;nom à afficher&#8221; serait de bon aloi. Quelque chose de ce genre, à placer dans la définiton de la classe <code>FeuCirculation </code>:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">    dictReverse = <span style="color: black;">&#123;</span>
        ROUGE : <span style="color: #483d8b;">&quot;ROUGE&quot;</span>,
        ORANGE : <span style="color: #483d8b;">&quot;ORANGE&quot;</span>,
        VERT : <span style="color: #483d8b;">&quot;VERT&quot;</span>,
        ORANGE_CLIGNOTANT : <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span>,
        TOUT_ETEINT : <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span>,
    <span style="color: black;">&#125;</span></pre></div></div>

<p>Fort bien. Mais n&#8217;est-ce pas un peu casse-couille ? Eh si. Des répétitions à la pelle, et dictReverse doit rester synchro avec les définitions des valeurs. C&#8217;est redevenu chiant à maintenir.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2012/12/dick_rivers2.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/dick_rivers2.jpg" alt="Hey, je suis Dict-Reverse, et je suis chiant à maintenir. bi-boppe eu loulaaaa." title="Hey, je suis Dict-Reverse, et je suis chiant à maintenir. bi-boppe eu loulaaaa." width="240" height="333" class="alignnone size-full wp-image-3766" /></a></p>
<h3>Définition dynamique de nouveaux types</h3>
<p>Soyons franc, j&#8217;ai piqué cette astuce ici :<br />
<a href="http://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python" target="_blank">http://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python</a></p>
<p>Vous connaissez certainement déjà la fonction native <code>type()</code>. Elle renvoie le type du truc passé en paramètre. Youpi.</p>
<p>Mais saviez-vous qu&#8217;elle permet également de créer de nouveaux types ? Pour ce faire, il faut l&#8217;appeler avec 3 paramètres : </p>
<ul>
<li>Le nom.</li>
<li>Une liste indiquant les types de base (dans le cas où on veut que le type soit hérité).</li>
<li>Un dictionnaire contenant les attributs. Les clés sont des chaînes de caractère, et correspondront aux noms des attributs.</li>
</ul>
<p>La création de l&#8217;enum <code>FeuCirculation </code>pourrait donc se faire de cette manière :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">FeuCirculation = <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>
    <span style="color: #483d8b;">&quot;FeuCirculation&quot;</span>,
    <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>,
    <span style="color: black;">&#123;</span>
        <span style="color: #483d8b;">&quot;ROUGE&quot;</span> : <span style="color: #ff4500;">0</span>, 
        <span style="color: #483d8b;">&quot;ORANGE&quot;</span> : <span style="color: #ff4500;">1</span>, 
        <span style="color: #483d8b;">&quot;VERT&quot;</span> : <span style="color: #ff4500;">2</span>, 
        <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span> : <span style="color: #ff4500;">3</span>, 
        <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span> : <span style="color: #ff4500;">4</span>
    <span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation
<span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'__main__.FeuCirculation'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation.<span style="color: black;">VERT</span>
<span style="color: #ff4500;">2</span></pre></div></div>

<p>On peut également ajouter le dictReverse dans le dictionnaire des attributs. (Ça fait un dictionnaire dans un dictionnaire, c&#8217;est lol).</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">FeuCirculation = <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>
    <span style="color: #483d8b;">&quot;FeuCirculation&quot;</span>,
    <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>,
    <span style="color: black;">&#123;</span>
        <span style="color: #483d8b;">&quot;ROUGE&quot;</span> : <span style="color: #ff4500;">0</span>,
        <span style="color: #483d8b;">&quot;ORANGE&quot;</span> : <span style="color: #ff4500;">1</span>,
        <span style="color: #483d8b;">&quot;VERT&quot;</span> : <span style="color: #ff4500;">2</span>,
        <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span> : <span style="color: #ff4500;">3</span>,
        <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span> : <span style="color: #ff4500;">4</span>,
        <span style="color: #483d8b;">&quot;dictReverse&quot;</span> : <span style="color: black;">&#123;</span>
            <span style="color: #ff4500;">0</span> : <span style="color: #483d8b;">&quot;ROUGE&quot;</span>,
            <span style="color: #ff4500;">1</span> : <span style="color: #483d8b;">&quot;ORANGE&quot;</span>,
            <span style="color: #ff4500;">2</span> : <span style="color: #483d8b;">&quot;VERT&quot;</span>,
            <span style="color: #ff4500;">3</span> : <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span>,
            <span style="color: #ff4500;">4</span> : <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span><span style="color: black;">&#125;</span>
    <span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation
<span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'__main__.FeuCirculation'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> feuxActuel = FeuCirculation.<span style="color: black;">VERT</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> feuxActuel
<span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation.<span style="color: black;">dictReverse</span><span style="color: black;">&#91;</span>feuxActuel<span style="color: black;">&#93;</span>
<span style="color: #483d8b;">'VERT'</span></pre></div></div>

<p>Et maintenant y&#8217;a plus qu&#8217;à coder une petite fonction qui fait tout ça génériquement.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> enum<span style="color: black;">&#40;</span>enumName, <span style="color: #66cc66;">*</span>listValueNames<span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># Une suite d'entiers, on en crée autant</span>
    <span style="color: #808080; font-style: italic;"># qu'il y a de valeurs dans l'enum.</span>
    listValueNumbers = <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #008000;">len</span><span style="color: black;">&#40;</span>listValueNames<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;"># création du dictionaire des attributs.</span>
    <span style="color: #808080; font-style: italic;"># Remplissage initial avec les correspondances : valeur d'enum -&gt; entier</span>
    dictAttrib = <span style="color: #008000;">dict</span><span style="color: black;">&#40;</span> <span style="color: #008000;">zip</span><span style="color: black;">&#40;</span>listValueNames, listValueNumbers<span style="color: black;">&#41;</span> <span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;"># création du dictionnaire inverse. entier -&gt; valeur d'enum</span>
    dictReverse = <span style="color: #008000;">dict</span><span style="color: black;">&#40;</span> <span style="color: #008000;">zip</span><span style="color: black;">&#40;</span>listValueNumbers, listValueNames<span style="color: black;">&#41;</span> <span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;"># ajout du dictionnaire inverse dans les attributs</span>
    dictAttrib<span style="color: black;">&#91;</span><span style="color: #483d8b;">&quot;dictReverse&quot;</span><span style="color: black;">&#93;</span> = dictReverse
    <span style="color: #808080; font-style: italic;"># création et renvoyage du type</span>
    mainType = <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>enumName, <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>, dictAttrib<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> mainType
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation = enum<span style="color: black;">&#40;</span>
        <span style="color: #483d8b;">&quot;FeuCirculation&quot;</span>,
        <span style="color: #483d8b;">&quot;ROUGE&quot;</span>, <span style="color: #483d8b;">&quot;ORANGE&quot;</span>, <span style="color: #483d8b;">&quot;VERT&quot;</span>,
        <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span>, <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation.<span style="color: black;">TOUT_ETEINT</span>
<span style="color: #ff4500;">4</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation.<span style="color: black;">dictReverse</span><span style="color: black;">&#91;</span>FeuCirculation.<span style="color: black;">TOUT_ETEINT</span><span style="color: black;">&#93;</span>
<span style="color: #483d8b;">'TOUT_ETEINT'</span></pre></div></div>

<p>Une petite précision : d&#8217;habitude, quand on crée des classes ou des types, c&#8217;est pour les instancier. Là on ne le fait pas, on se contente d&#8217;utiliser des valeurs statiques contenues dans le type. Vous pourriez faire <code>feuDuCarrefour = FeuCirculation()</code>. Ça va fonctionner, mais ça ne vous servira à rien.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2012/12/weird_stuff_cool_crazy_offbeat_traffic-light-tree-06_200907241442222897.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/weird_stuff_cool_crazy_offbeat_traffic-light-tree-06_200907241442222897.jpg" alt="Le code de la route a parfois besoin de refactoring" title="Le code de la route a parfois besoin de refactoring" width="400" height="300" class="alignnone size-full wp-image-3767" /></a></p>
<h3>Mais si on mélange les enums ?</h3>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation = enum<span style="color: black;">&#40;</span>
        <span style="color: #483d8b;">&quot;FeuCirculation&quot;</span>,
        <span style="color: #483d8b;">&quot;ROUGE&quot;</span>, <span style="color: #483d8b;">&quot;ORANGE&quot;</span>, <span style="color: #483d8b;">&quot;VERT&quot;</span>,
        <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span>, <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> etatMatiere = enum<span style="color: black;">&#40;</span>
        <span style="color: #483d8b;">&quot;etatMatiere&quot;</span>, 
        <span style="color: #483d8b;">&quot;SOLIDE&quot;</span>, <span style="color: #483d8b;">&quot;LIQUIDE&quot;</span>, <span style="color: #483d8b;">&quot;GAZEUX&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> etatMatiere.<span style="color: black;">dictReverse</span><span style="color: black;">&#91;</span>FeuCirculation.<span style="color: black;">VERT</span><span style="color: black;">&#93;</span>
<span style="color: #483d8b;">'GAZEUX'</span></pre></div></div>

<p>Mince alors. Ça fait n&#8217;importe quoi, sans signaler aucune erreur. C&#8217;est normal. D&#8217;un enum à l&#8217;autre, on ne fait que manipuler des entiers, qui restent les mêmes. Les correspondances se font joyeusement, même si ça n&#8217;a aucun sens. Dans le même ordre d&#8217;idée : <code>FeuCirculation.ROUGE == etatMatiere.SOLIDE</code> renverra <code>True</code>, ce qui ne veut rien dire. Comment régler ce problème ?</p>
<p><a href="http://sametmax.com/wp-content/uploads/2012/12/iced_traffic_lights.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/iced_traffic_lights.jpg" alt="Better have traffic ice than traffic jam." title="Better have traffic ice than traffic jam." width="426" height="284" class="alignnone size-full wp-image-3772" /></a></p>
<h3>Solution 1 : ne pas régler le problème</h3>
<p><em>&#8220;We are all consenting adults here&#8221;</em>, on ne va donc pas compliquer le code en rajoutant des sécurités de partout, sous prétexte d&#8217;empêcher des erreurs. Le seule moyen valable de se prémunir de faire n&#8217;importe quoi quand on code, c&#8217;est tout bêtement de rester concentré et de faire gaffe à ce qu&#8217;on fait.</p>
<p>Honnêtement, ça ne m&#8217;est jamais arrivé de mélanger des enums entre eux. Pourtant, je n&#8217;ai pas la prétention de tout faire juste et sans bugs du premier coup. Parmi mes bourdes préférées : copier-coller la ligne du dessus et ne pas faire les bons remplacements (les &#8220;x&#8221; par des &#8220;y&#8221;, les &#8220;1&#8243; par des &#8220;2&#8243;, etc.), ou encore : déclarer une fonction, lui faire renvoyer un résultat bidon parce que je préfère la coder plus tard, et oublier que je ne l&#8217;ai pas codé.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> calculDist<span style="color: black;">&#40;</span>point1, point2<span style="color: black;">&#41;</span>:
    distX = point1.<span style="color: black;">x</span> - point1.<span style="color: black;">x</span>
    distY = point2.<span style="color: black;">x</span> - point2.<span style="color: black;">x</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #dc143c;">math</span>.<span style="color: black;">sqrt</span><span style="color: black;">&#40;</span>distX <span style="color: #66cc66;">*</span> distX + distY <span style="color: #66cc66;">*</span> distY<span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;"># ami lecteur, sauras-tu trouver tous les fails</span>
    <span style="color: #808080; font-style: italic;"># présents dans cette fonction ?</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> RemoveDoubleLetters<span style="color: black;">&#40;</span>strValue<span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># TODO : coder le truc. Mais là, j'ai la flemme.</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> strValue</pre></div></div>

<p><a href="http://sametmax.com/wp-content/uploads/2012/12/bsod.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/bsod.jpg" alt="BSOD !!" title="BSOD !!" width="351" height="461" class="alignnone size-full wp-image-3773" /></a></p>
<p>Pour limiter les risques de mélange, voici quelques conseils :</p>
<ul>
<li>Préfixez les variables contenant une valeur d&#8217;enum : <code>feu</code> pour <code>FeuCirculation</code>, <code>emat</code> pour <code>etatMatiere</code>, etc. De cette manière, les erreurs de code sautent aux yeux. (<a href="http://www.joelonsoftware.com/articles/Wrong.html" target="_blank">making wrong code look wrong</a>, tout ça&#8230;)
</li>
<li>Il est important de ne pas polluer inutilement l&#8217;espace de nommage. Dans un fichier donné, n&#8217;importez pas les enums dont vous n&#8217;avez pas besoin. De cette manière, une erreur sera renvoyée si jamais vous utilisez une valeur d&#8217;enum imprévue. Je doute que vous ayez besoin, dans un même fichier de code, de renseigner des états de feux rouge et des états de matière.
</li>
<li>Si vous faites exprès de mélanger des enums, en pensant que vous n&#8217;avez aucun moyen de faire autrement, c&#8217;est qu&#8217;il y a, dès l&#8217;origine, un problème de conception dans votre code.</li>
</ul>
<p><a href="http://sametmax.com/wp-content/uploads/2012/12/cabrel.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/cabrel.jpg" alt="Vieng fayre toi-même leu mélainge des enums, sur les muuuurs deu la cabaneu du côdeur. Vieng t&#039;assouar." title="Vieng fayre toi-même leu mélainge des enums, sur les muuuurs deu la cabaneu du côdeur. Vieng t&#039;assouar." width="350" height="238" class="alignnone size-full wp-image-3774" /></a></p>
<h3>Solution 2 : des enums fortement typés.</h3>
<p>Au lieu que les valeurs internes des enums soient de simples entiers, on crée un type pour chacune d&#8217;elle. Comme ça, on est sûr que ça renverra une erreur si on se confusionne. Par contre, on perd en simplicité, et ce n&#8217;est plus aussi simple pour la sérialisation.</p>
<p>Soyons fous, et voyons ce que ça donne !</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> strongTypedEnum<span style="color: black;">&#40;</span>enumName, <span style="color: #66cc66;">*</span>listValueNames<span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># création d'une liste de type. sans attribut, sans héritage.</span>
    <span style="color: #808080; font-style: italic;"># le nom du type est composé du nom de l'enum et du nom de la valeur,</span>
    <span style="color: #808080; font-style: italic;"># séparés par un point.</span>
    listValueTyped = <span style="color: black;">&#91;</span> <span style="color: #008000;">type</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;.&quot;</span>.<span style="color: black;">join</span><span style="color: black;">&#40;</span><span style="color: black;">&#40;</span>enumName, nameValue<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>
                       <span style="color: #ff7700;font-weight:bold;">for</span> nameValue <span style="color: #ff7700;font-weight:bold;">in</span> listValueNames <span style="color: black;">&#93;</span>
    <span style="color: #808080; font-style: italic;"># Ensuite, c'est tout pareil que la fonction d'avant.</span>
    dictAttrib = <span style="color: #008000;">dict</span><span style="color: black;">&#40;</span> <span style="color: #008000;">zip</span><span style="color: black;">&#40;</span>listValueNames, listValueTyped<span style="color: black;">&#41;</span> <span style="color: black;">&#41;</span>
    dictReverse = <span style="color: #008000;">dict</span><span style="color: black;">&#40;</span> <span style="color: #008000;">zip</span><span style="color: black;">&#40;</span>listValueTyped, listValueNames<span style="color: black;">&#41;</span> <span style="color: black;">&#41;</span>
    dictAttrib<span style="color: black;">&#91;</span><span style="color: #483d8b;">&quot;dictReverse&quot;</span><span style="color: black;">&#93;</span> = dictReverse
    mainType = <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>enumName, <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>, dictAttrib<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> mainType
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> FeuCirculation = strongTypedEnum<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;FeuCirculation&quot;</span>,
        <span style="color: #483d8b;">&quot;ROUGE&quot;</span>, <span style="color: #483d8b;">&quot;ORANGE&quot;</span>, <span style="color: #483d8b;">&quot;VERT&quot;</span>,
        <span style="color: #483d8b;">&quot;ORANGE_CLIGNOTANT&quot;</span>, <span style="color: #483d8b;">&quot;TOUT_ETEINT&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> etatMatiere = strongTypedEnum<span style="color: black;">&#40;</span>
        <span style="color: #483d8b;">&quot;etatMatiere&quot;</span>, 
        <span style="color: #483d8b;">&quot;SOLIDE&quot;</span>, <span style="color: #483d8b;">&quot;LIQUIDE&quot;</span>, <span style="color: #483d8b;">&quot;GAZEUX&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> etatMatiere.<span style="color: black;">LIQUIDE</span>
<span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'__main__.etatMatiere.LIQUIDE'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> etatMatiere.<span style="color: black;">dictReverse</span><span style="color: black;">&#91;</span>FeuCirculation.<span style="color: black;">ROUGE</span><span style="color: black;">&#93;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;pyshell#20&gt;&quot;</span>, line <span style="color: #ff4500;">1</span>, <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    etatMatiere.<span style="color: black;">dictReverse</span><span style="color: black;">&#91;</span>FeuCirculation.<span style="color: black;">ROUGE</span><span style="color: black;">&#93;</span>
<span style="color: #008000;">KeyError</span>: <span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'__main__.FeuCirculation.ROUGE'</span><span style="color: #66cc66;">&gt;</span></pre></div></div>

<p>Mais est-ce bien nécessaire ?</p>
<h3>Y&#8217;a une lib pour ça</h3>
<p>Comme toujours, avec cette foutue prolifération de code libre, dès que quelque chose de cool peut potentiellement exister, un connard de geek l&#8217;a déjà fait, vous privant de l&#8217;occasion de le faire vous-même et de retirer la gloire qui en décombe. <a href="http://packages.python.org/flufl.enum/README.html" target="_blank">La lib flufl.enum</a> permet donc de créer et manipuler des enums, avec autant et même plus de fonctionnalités que ce que je viens de décrire ici. (Connards de geeks qui viennent manger le pain des français).</p>
<p>Par contre, j&#8217;ai regardé le code, et j&#8217;ai pas pigé comment ça fonctionnait à l&#8217;intérieur. Ça fera peut-être l&#8217;objet d&#8217;un autre article, si j&#8217;ai le courage de me plonger dedans, et que je trouve ça intéressant et rigolo.</p>
<p>De toutes façons, les libs c&#8217;est chiant, ça ajoute des dépendances, <a href="http://sametmax.com/vous-en-pensez-quoi-de-cette-idee/" target="_blank">il vaut mieux tout coder à la main</a>.</p>
<h3>Disgression 1 : quelle classe ce type !</h3>
<p>Déclarer un type avec la fonction <code>type()</code>, et déclarer une classe, ça ne fait pas exactement la même chose.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">class</span> MaClasse:
	<span style="color: #ff7700;font-weight:bold;">pass</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> MaClasse
<span style="color: #66cc66;">&lt;</span>class <span style="color: #dc143c;">__main__</span>.<span style="color: black;">MaClasse</span> at 0x011CB270<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> instanceClasse = MaClasse<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> instanceClasse
<span style="color: #66cc66;">&lt;</span>__main__.<span style="color: black;">MaClasse</span> instance at 0x011C8BC0<span style="color: #66cc66;">&gt;</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> MonType = <span style="color: #008000;">type</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Le_Nom_De_Mon_Type&quot;</span>, <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>, <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> MonType
<span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'__main__.Le_Nom_De_Mon_Type'</span><span style="color: #66cc66;">&gt;</span>
<span style="color: #808080; font-style: italic;"># Hey ! Le nom est dans une string, et y'a pas d'adresse mémoire !</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> instanceType = MonType<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> instanceType
<span style="color: #66cc66;">&lt;</span>__main__.<span style="color: black;">Le_Nom_De_Mon_Type</span> <span style="color: #008000;">object</span> at 0x011C1B30<span style="color: #66cc66;">&gt;</span>
<span style="color: #808080; font-style: italic;"># Hey ! C'est un object, et pas une instance !</span></pre></div></div>

<p>Ça a peut-être quelque chose à voir avec une histoire de old-style class et new-style class. J&#8217;ai pas cherché plus loin pour l&#8217;instant. Ça fera peut-être l&#8217;objet d&#8217;un autre-autre article, si j&#8217;ai le courage de me plonger dedans, et que je trouve ça intéressant et rigolo.</p>
<h3>Disgression 2 : Restons dans les règles</h3>
<p>J&#8217;avais trouvé un autre exemple de machine à état, plus rigolo que des feux de circulation ou de la matière. Je ne m&#8217;en suis pas servi durant mes explications, parce que ça aurait distrait le lecteur / la lectrice (<a href="http://sametmax.com/bien-expliquer-quelque-chose-les-regles-de-base/" target="_blank">charge cérébrale</a>, tout ça&#8230;). Mais ce serait vraiment dommage de ne pas vous en faire profiter. Le voici donc :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> PhaseCycleUterin = enum<span style="color: black;">&#40;</span>
        <span style="color: #483d8b;">&quot;PhaseCycleUterin&quot;</span>,
        <span style="color: #483d8b;">&quot;PREPUBERE&quot;</span>, <span style="color: #483d8b;">&quot;MENSTRUELLE&quot;</span>, 
        <span style="color: #483d8b;">&quot;OVULATION&quot;</span>, <span style="color: #483d8b;">&quot;PROLIPERATIVE&quot;</span>, <span style="color: #483d8b;">&quot;SECRETRICE&quot;</span>
        <span style="color: #483d8b;">&quot;ENCEINTE&quot;</span>, <span style="color: #483d8b;">&quot;MENOPAUSE&quot;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #66cc66;">&gt;&gt;&gt;</span> etatMatiere.<span style="color: black;">dictReverse</span><span style="color: black;">&#91;</span>PhaseCycleUterin.<span style="color: black;">MENSTRUELLE</span><span style="color: black;">&#93;</span>
<span style="color: #483d8b;">'LIQUIDE'</span></pre></div></div>

<p>Voilà, ce sera tout pour aujourd&#8217;hui. La prochaine fois, nous redéfinirons le type &#8220;object&#8221; en utilisant uniquement les picots du langage Braille.</p>
<p><a href="http://sametmax.com/wp-content/uploads/2012/12/femme_avec_regles.jpg"><img src="http://sametmax.com/wp-content/uploads/2012/12/femme_avec_regles.jpg" alt="Une femme qui a ses règles." title="Une femme qui a ses règles." width="470" height="671" class="alignnone size-full wp-image-3775" /></a></p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3741&amp;md5=0f21d7fb9927073b79b0fa9ace215748" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/faire-des-enums-en-python/feed/</wfw:commentRss>
		<slash:comments>58</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Ffaire-des-enums-en-python%2F&amp;language=en_GB&amp;category=text&amp;title=Faire+des+enums+en+python&amp;description=Ceci+est+un+post+invit%C3%A9+de+R%C3%A9ch%C3%A8r+post%C3%A9+sous+licence+creative+common+3.0+unported.+%26%238220%3BMoi%2C+je+viens+du+C%2B%2B%26%238221%3B+Voil%C3%A0+un+propos+qui+fait+classe.+%C3%87a+donne+un+air+de...&amp;tags=animaux+zoophiles%2Cbbw%2Cenum%2Cfesses%2Cpython%2Cseins%2Ctype%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/numismate.jpg" length="48256" type="image/jpg" />	</item>
		<item>
		<title>id(), None et bidouilleries mémoire en python.</title>
		<link>http://sametmax.com/id-none-et-bidouilleries-memoire-en-python/</link>
		<comments>http://sametmax.com/id-none-et-bidouilleries-memoire-en-python/#comments</comments>
		<pubDate>Sat, 10 Nov 2012 17:37:54 +0000</pubDate>
		<dc:creator>recher</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[fesse]]></category>
		<category><![CDATA[id]]></category>
		<category><![CDATA[is]]></category>
		<category><![CDATA[None]]></category>
		<category><![CDATA[nsfw]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=2947</guid>
		<description><![CDATA[Mon maître-ninja python, entre deux riffs sur sa contrebasse électrique, m'avait un jour dit : "il ne faut pas écrire if a == None:, mais if a is None:". Il m'avait ensuite donné une justification pertinente, que je n'ai pas retenue, car j'étais en train de penser à des nichons. Puis il avait conclu par "on n'est pas égal au vide. On EST le vide."

Rien que pour vous, ainsi que pour m'auto-déculpabiliser de penser souvent à des nichons, j'ai parcouru l'internet entier à dos de souris et j'ai retrouvé la justification. Mais avant de vous la livrer, quelques explications préliminaires.]]></description>
			<content:encoded><![CDATA[<blockquote><p><em>Ceci est un post invité de <a href="http://recher.wordpress.com" target="_blank">Réchèr</a> posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.</em></p></blockquote>
<p>Mon maître-ninja python, entre deux riffs sur sa contrebasse électrique, m&#8217;avait un jour dit : &#8220;il ne faut pas écrire <code>if a == None:</code>, mais <code>if a is None:</code>&#8220;. Il m&#8217;avait ensuite donné une justification pertinente, que je n&#8217;ai pas retenue, car j&#8217;étais en train de penser à des nichons. Puis il avait conclu par &#8220;on n&#8217;est pas égal au vide. On <em>EST</em> le vide.&#8221;</p>
<p>Rien que pour vous, ainsi que pour m&#8217;auto-déculpabiliser de penser souvent à des nichons, j&#8217;ai parcouru l&#8217;internet entier à dos de souris et j&#8217;ai retrouvé la justification. Mais avant de vous la livrer, quelques explications préliminaires.</p>
<h3>On n&#8217;a pas de pétrole, mais on a des id()</h3>
<p><a title="Et quand on n'a pas d'id, on a des fix !" href="http://sametmax.com/wp-content/uploads/2012/11/idfix2.jpg"><img class="size-full wp-image-2968" src="http://sametmax.com/wp-content/uploads/2012/11/idfix2.jpg" alt="Et quand on n'a pas d'id, on a des fix !" width="124" height="150" /></a></p>
<p>La fonction <code>id()</code>, présente dans <code>__builtins__</code>, renvoie un entier, représentant l&#8217;identifiant interne de n&#8217;importe quel objet, quel que soit son type. Concrètement, il s&#8217;agit de l&#8217;adresse mémoire dans laquelle il est stocké. Jouons un peu avec.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» a = <span style="color: #ff4500;">1</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>a<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19846928</span>
»» b = <span style="color: #483d8b;">&quot;plop&quot;</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>b<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">33984800</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19846916</span></pre></div></div>

<p>Si vous faites cela chez vous, vous n&#8217;obtiendrez certainement pas les mêmes nombres. Ce qui est important à repérer, c&#8217;est que dans ce premier exemple, tous les id sont différents. Au passage, vous remarquerez que même les constantes ont un id. Je ne sais pas exactement comment cela fonctionne en interne, mais je suppose que lorsqu&#8217;on écrit le chiffre 2, on oblige le python à stocker cette valeur dans une sorte de monde magique contenant tout ce qui a été utilisé depuis le début de l&#8217;exécution, même si certaines de ces valeurs ne sont plus référencées nul part.</p>
<p>Il est parfois intéressant de vérifier que deux id sont égaux ou différents. Mais vous ne pouvez pas faire grand chose de plus. Les caractères de la chaîne &#8220;plop&#8221; sont, à priori, stockés les uns à la suite des autres, dans une seule zone mémoire (tous les langages de programmation gèrent les strings de cette manière), mais vous ne pouvez pas mettre ce fait en évidence.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>b<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19483368</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>b<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19989736</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>b<span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19989760</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>b<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span>:<span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">31983736</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>b<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>:<span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">31983424</span></pre></div></div>

<p>Les adresses ne se suivent pas, et ne sont même pas rangées dans l&#8217;ordre croissant. Ce n&#8217;est pas vraiment exploitable. En revanche, il y a quelque chose de rigolo à constater :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» c = <span style="color: #483d8b;">&quot;pouet&quot;</span>
»» d = <span style="color: #483d8b;">&quot;pouet&quot;</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>c<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">33984768</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>d<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">33984768</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;pouet&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">33984768</span></pre></div></div>

<p>On a deux variables différentes, contenant la même chose, et elles pointent sur la même adresse mémoire. Mais alors, si je modifie c, ça va aussi modifier d ! Ohlala, Comment le python va faire ? Rassurez-vous, il s&#8217;en sort.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» c += <span style="color: #483d8b;">&quot;a&quot;</span>
»» c
<span style="color: #483d8b;">'poueta'</span>
»» d
<span style="color: #483d8b;">'pouet'</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>c<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">33855904</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>d<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">33984768</span></pre></div></div>

<p>Le type string est immutable (ndm aussi: &#8220;immuable&#8221;). Cela signifie que vous ne pouvez rien changer dedans. Tout ce que vous pouvez faire, c&#8217;est réaffecter des variables (à une autre string, à n&#8217;importe quoi, &#8230;). Dans cet exemple, la réaffectation de c l&#8217;a fait pointer sur une autre zone de la mémoire. Mais sinon, la variable d n&#8217;a pas changé, ni son pointage, ni le contenu de ce qui est pointé. Ouf !!</p>
<p><a title="Je te fais &quot;pouet-pouet&quot;, tu me fais &quot;pouet-pouet&quot; ..." href="http://sametmax.com/wp-content/uploads/2012/11/schema1.png"><img class="alignnone  wp-image-2995" src="http://sametmax.com/wp-content/uploads/2012/11/schema1.png" alt="Je te fais &quot;pouet-pouet&quot;, tu me fais &quot;pouet-pouet&quot; ..." width="160" height="296" /></a></p>
<p>Au passage, je rappelle que toutes les fonctions de traitement de chaîne de caractères (replace(), upper(), strip(), &#8230;) ne font jamais la modification &#8220;sur place&#8221;. Elles renvoient la valeur sous forme d&#8217;une nouvelle string. Si vous voulez modifier sur place, vous êtes obligés de faire une réaffectation explicite. Quelque chose comme : <code>c = c.upper()</code></p>
<h3>Bidouilleries optimisatoires internes</h3>
<p><a title="Je sens que vous redemandez encore du jeu de mots pourri. So, here comze da None !" href="http://sametmax.com/wp-content/uploads/2012/11/danone1742762776.jpg"><img class="alignnone  wp-image-2974" src="http://sametmax.com/wp-content/uploads/2012/11/danone1742762776.jpg" alt="Je sens que vous redemandez encore du jeu de mots pourri. So, here comze da None !" width="281" height="180" /></a></p>
<p>Le fait qu&#8217;un objet soit immutable n&#8217;oblige pas le python à créer une seule zone mémoire par valeur. Dans l&#8217;exemple précédent, lorsque j&#8217;ai affecté les variables c et d à &#8220;pouet&#8221;, leurs id auraient pu être différentes dès le départ, et les zones mémoires pointées auraient toutes les deux contenues &#8220;pouet&#8221;. Il se trouve que le python les a mises en commun, par souci d&#8217;optimisation. Cependant, je ne suis pas sûr que cette technique soit appliquée par tous les interpréteurs, toutes les versions, et dans tous les contextes. Mais &#8220;chez moi, ça marche&#8221;.</p>
<p>Cette optimisation est également effectuée pour les valeurs booléennes et les valeurs numériques entières. Mais pas pour les floats, alors qu&#8217;à ma connaissance, ils sont eux aussi immutables.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">505281316</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">505281316</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #008000;">False</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">505280988</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #008000;">False</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">505280988</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19846820</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19846820</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">10.0</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">19879104</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">10.0</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">31338664</span>
<span style="color: #808080; font-style: italic;"># Refaites des id(10.0), et vous aurez encore d'autres valeurs différentes.</span>
<span style="color: #808080; font-style: italic;"># Mais peut-être pas à chaque fois. On ne peut pas le prévoir.</span></pre></div></div>

<p>En revanche, l&#8217;optimisation de la valeur None est garantie, quel que soit votre python et son contexte. <strong>Il n&#8217;y a toujours qu&#8217;une et une seule instance de None dans une exécution de python.</strong> Je n&#8217;ai pas trouvé d&#8217;annonce officielle concernant cette garantie, mais ça se dit un peu partout sur les forums. (Et si c&#8217;est sur internet, c&#8217;est forcément vrai).</p>
<p>Jouons un peu avec la singletonitude du None.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: #008000;">None</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">505255972</span>
»» z = <span style="color: #008000;">None</span>
»» <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>z<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">505255972</span>
»» zzzz = <span style="color: black;">&#91;</span><span style="color: #008000;">None</span>, <span style="color: black;">&#93;</span> <span style="color: #66cc66;">*</span> <span style="color: #ff4500;">30</span>
»» zzzz
<span style="color: black;">&#91;</span><span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>,
<span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>,
<span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span>, <span style="color: #008000;">None</span><span style="color: black;">&#93;</span>
»» <span style="color: black;">&#91;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>elem<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> elem <span style="color: #ff7700;font-weight:bold;">in</span> zzzz <span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>,
<span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>,
<span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>,
<span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span>,
<span style="color: #ff4500;">505255972</span>, <span style="color: #ff4500;">505255972</span><span style="color: black;">&#93;</span></pre></div></div>

<p>Disgression : les mot-clés True et False peuvent être réaffectés. Mais pas le mot-clé None. Mais je m&#8217;égare. Revenons à nos agneaux, comme dirait Hannibal Lecter.</p>
<h3>noir is noir. (Il n&#8217;y a plus d&#8217;ayspouuaaaarr).</h3>
<p><a title="&quot;Mmmmppff... psshhhh...&quot; (#000000 Vador)" href="http://sametmax.com/wp-content/uploads/2012/11/joy-toy-2248596-star-wars.jpg"><img class="alignnone size-full wp-image-2975" src="http://sametmax.com/wp-content/uploads/2012/11/joy-toy-2248596-star-wars.jpg" alt="&quot;Mmmmppff... psshhhh...&quot; (#000000 Vador)" width="110" height="110" /></a></p>
<p>Laissez-moi maintenant vous introduire (schlorrp) l&#8217;opérateur <code>is</code>. Il est présent nativement dans le python, et permet de comparer les id de deux objets. <code>A is B</code> renvoie un booléen, le même que celui que renverrait <code>id(A) == id(B)</code>.</p>
<p>A quoi cela pourrait-il donc servir ? Eh bien &#8230; De même que la fonction <code>id</code> ne sert pas à grand chose, <code>is</code> est, lui aussi, d&#8217;une utilité discutable. Mais attendez, ne partez pas tout de suite.</p>
<p>L&#8217;opérateur <code>is</code> est vraiment tout simple. Il ne peut pas être surchargé, et fait toujours la même chose quel que soit les opérandes : une comparaison d&#8217;id.</p>
<p>L&#8217;opérateur <code>==</code> a l&#8217;air tout bête, vu comme ça, mais il peut être surchargé, et il effectue une suite d&#8217;actions pas forcément triviales. Il appelle la fonction <code>__eq__</code> si elle existe, sinon il essaie avec la fonction <code>__cmp__</code>, et peut-être encore d&#8217;autres choses que je ne détaillerai pas ici, parce que je ne me suis pas renseigné en détail sur le sujet. (Faut que je conserve une partie de mon temps pour le pensage à des nichons, vous comprenez bien).</p>
<p>En règle générale, dès que c&#8217;est possible, il vaut mieux utiliser un truc simple plutôt qu&#8217;un truc compliqué. Malheureusement, comme on ne maîtrise pas vraiment la façon dont les id sont gérés et optimisés, l&#8217;utilisation du <code>is</code> serait trop risquée. Sauf dans un cas bien identifié. Devinez lequel ?</p>
<p>Le None, qui n&#8217;a toujours qu&#8217;une et une seule id ! Joie ! Noël !</p>
<p>Au fait, pendant qu&#8217;on y est, ne pourrait-on pas utiliser <code>is</code> avec les valeurs True et False ? A priori, ces deux valeurs sont gérées de la même manière que le None ?</p>
<p>Certes, mais pour les booléens, on a encore plus simple. Au lieu de tester <code>if A is True:</code> ou <code>if A == True:</code>, on peut directement tester <code>if A:</code>. Pour False, on teste <code>if not A:</code>. Voili voilà.</p>
<h3>Le béni oui-oui</h3>
<p><a title="Un béni oui-oui !" href="http://sametmax.com/wp-content/uploads/2012/11/beni-oui-oui.jpg"><img class="alignnone  wp-image-2976" src="http://sametmax.com/wp-content/uploads/2012/11/beni-oui-oui.jpg" alt="Un béni oui-oui !" width="222" height="202" /></a></p>
<p>Pour finir, une petite justification supplémentaire, que je n&#8217;ai jamais rencontré dans la vraie vie, mais on va faire comme si.</p>
<p>Alors voilà, vous êtes quelqu&#8217;un de bizarre, et vous avez besoin d&#8217;une classe qui est égale à tout. Donc vous surchargez la fonction <code>__eq__</code>.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #ff7700;font-weight:bold;">class</span> BeniOuiOui:
    <span style="color: #ff7700;font-weight:bold;">def</span> <span style="color: #0000cd;">__eq__</span><span style="color: black;">&#40;</span><span style="color: #008000;">self</span>, other<span style="color: black;">&#41;</span>:
        <span style="color: #808080; font-style: italic;"># Je suis une classe magique, qui est égale à tout ce qui existe !</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">True</span>
»» beniOuiOui = BeniOuiOui<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Un peu plus loin dans le code, vous avez une variable, récupérée d&#8217;on ne sait trop où, et vous voulez savoir si c&#8217;est None, ou si c&#8217;est une instance de béni-oui-oui. Pour faire cela, vous êtes obligés d&#8217;utiliser <code>is</code>, car <code>==</code> vous répondrait systématiquement True.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» beniOuiOui == <span style="color: #ff4500;">2</span>
<span style="color: #008000;">True</span>
»» beniOuiOui == <span style="color: #483d8b;">&quot;n'importe quoi&quot;</span>
<span style="color: #008000;">True</span>
»» beniOuiOui == <span style="color: #008000;">None</span>
<span style="color: #008000;">True</span>
»» beniOuiOui <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #008000;">None</span>
<span style="color: #008000;">False</span></pre></div></div>

<h3>this (is not) une pipe</h3>
<p><a title="Ce serait même plutôt le contraire." href="http://sametmax.com/wp-content/uploads/2012/11/cuni0024405_004b.jpg"><img class="alignnone  wp-image-2977" src="http://sametmax.com/wp-content/uploads/2012/11/cuni0024405_004b.jpg" alt="Ce serait même plutôt le contraire." width="259" height="194" /></a></p>
<p>Comment fait-on pour vérifier que quelque chose n&#8217;est pas None ? La première réponse qui vient à l&#8217;esprit, c&#8217;est <code>not A is None</code>. Mais on peut aussi utiliser <code>A is not None</code>. C&#8217;est chouette, ça ressemble à du langage naturel.</p>
<p>Oh, mais, attendez &#8230; Est-ce que cette écriture n&#8217;est pas un peu dangereuse ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span>
<span style="color: #008000;">True</span></pre></div></div>

<p><code>not None</code> renvoie True. Pourquoi pas. C&#8217;est ce qui semble le plus logique.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #ff4500;">1</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #008000;">True</span>
<span style="color: #008000;">False</span></pre></div></div>

<p><code>1 is True</code> est faux. Ca semble correct aussi. La valeur numérique 1 et la valeur booléenne True sont égales, mais ce ne <em>SONT</em> pas les mêmes objets.</p>
<p>Mais alors, si j&#8217;écris <code>1 is not None</code>, le python va transformer le <code>not None</code> en <code>True</code>, ça va faire <code>1 is True</code>, et ça va renvoyer faux. Ce n&#8217;est pas ce que je veux ! La valeur numérique 1, ce n&#8217;est pas None. Moi je veux que <code>1 is not None</code> me renvoie vrai.</p>
<p>Arrggh ! Pleurons mes amis ! Et regardons avec horreur le python se désintégrer tout seul dans une bouffée de logique !</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #ff4500;">1</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span>
<span style="color: #008000;">True</span></pre></div></div>

<p>Ah tiens non. Hmmm&#8230; Attendez voir&#8230;</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">»» <span style="color: #ff4500;">1</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: black;">&#40;</span><span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">False</span></pre></div></div>

<p>Qu&#8217;est-ce donc que cela ? Figurez-vous que <code>is not</code> est un opérateur. Il compare les id, et renvoie True s&#8217;ils sont différents. Je vous laisse confirmer cela en consultant la doc du python, ou en faisant un petit <code>help("is")</code> dans la console.</p>
<p>Voilà, j&#8217;espère que ça vous a plu. La prochaine fois, nous essaierons de déceler dans le langage Brainfuck des éléments de la thèse existentialiste selon Jean-Paul Sartre.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=2947&amp;md5=c7fd2c93302a95cacdd6c80378235f8c" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/id-none-et-bidouilleries-memoire-en-python/feed/</wfw:commentRss>
		<slash:comments>20</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fid-none-et-bidouilleries-memoire-en-python%2F&amp;language=en_GB&amp;category=text&amp;title=id%28%29%2C+None+et+bidouilleries+m%C3%A9moire+en+python.&amp;description=Ceci+est+un+post+invit%C3%A9+de+R%C3%A9ch%C3%A8r+post%C3%A9+sous+licence+creative+common+3.0+unported.+Mon+ma%C3%AEtre-ninja+python%2C+entre+deux+riffs+sur+sa+contrebasse+%C3%A9lectrique%2C+m%26%238217%3Bavait+un+jour+dit+%3A+%26%238220%3Bil...&amp;tags=fesse%2Cid%2Cis%2CNone%2Cnsfw%2Cpython%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/11/nonne_redim.jpg" length="11757" type="image/jpg" />	</item>
	</channel>
</rss>
