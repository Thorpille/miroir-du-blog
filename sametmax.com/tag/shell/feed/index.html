<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; shell</title>
	<atom:link href="http://sametmax.com/tag/shell/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 14:20:37 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>Profiter du notebook de IPython</title>
		<link>http://sametmax.com/profiter-du-notebook-de-ipython/</link>
		<comments>http://sametmax.com/profiter-du-notebook-de-ipython/#comments</comments>
		<pubDate>Wed, 23 Oct 2013 13:53:15 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7507</guid>
		<description><![CDATA[IPython est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec tellement d&#8217;astuces intégrées que ça donne envie de vomir des arc-en-ciel. Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : le notebook. Si vous êtes [...]]]></description>
			<content:encoded><![CDATA[<p><a href="http://ipython.org">IPython</a> est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec <a href="http://sametmax.com/tag/ipython/">tellement d&#8217;astuces intégrées</a> que ça donne envie de vomir des arc-en-ciel.</p>
<p>Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : <a href="http://ipython.org/notebook.html">le notebook</a>.</p>
<p>Si vous êtes scientifique ou manipulez pas mal de graphiques et de données numériques, <a href="http://www.randalolson.com/2012/05/12/a-short-demo-on-how-to-use-ipython-notebook-as-a-research-notebook/">c&#8217;est un must have</a>. Mais personnellement je trouve que c&#8217;est aussi un fantastique outil d&#8217;éducation, c&#8217;est génial pour les cours, les démos, et expérimenter avec du code inconnu.</p>
<p>Ça se présente sous la forme d&#8217;un shell IPython intégré dans une page Web, mais que l&#8217;on peut avoir sur son desktop, pas besoin d&#8217;avoir un serveur distant. Si vous avez un peu de temps, voici une vidéo de démo (avec un musique horrible) :</p>

<!-- iframe plugin v:2.3 - wordpress.org/extend/plugins/iframe/ -->
<iframe width="420" height="315" src="//www.youtube.com/embed/H6dLGQw9yFQ" frameborder="0" scrolling="no" class="iframe-class"></iframe>
<p>L&#8217;installation sous Ubuntu, c&#8217;est juste :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> ipython-notebook</pre></div></div>

<p>Pour Windows, il me semble, de mémoire, que c&#8217;est intégré dans l&#8217;exe. Pour Mac, je ne sais pas.</p>
<p>Et derrière il suffit de lancer la commande :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">ipython notebook</pre></div></div>

<p>Et il va vous ouvrir votre navigateur avec un onglet sur votre notebook.</p>
<p>L’intérêt principal du notebook est que TOUT le code est coloré et est modifiable comme sur dans fichier mais TOUT le code est exécutable (et affiche son résultat juste après chaque ligne) comme dans un shell iPython, avec completion du code. Le meilleur des deux mondes quoi.</p>
<p>En prime on peut embeder du <a href="http://daringfireball.net/projects/markdown/syntax">markdown</a> (et donc des liens, des images, etc) dans le même notebook, sauvegarder ça pour plus tard, le partager, etc.</p>
<p>Personnellement, j&#8217;ai ceci dans mon .bashrc :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">notebook <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #007800;">processes</span>=$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">ps</span> aux <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-i</span> <span style="color: #660033;">-P</span> <span style="color: #ff0000;">&quot;ipython notebook&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">wc</span> -l<span style="color: #7a0874; font-weight: bold;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$processes</span> <span style="color: #660033;">-lt</span> <span style="color: #000000;">2</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>
    <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">pushd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp
        <span style="color: #c20cb9; font-weight: bold;">nohup</span> ipython notebook <span style="color: #660033;">--port</span> <span style="color: #000000;">8889</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">&amp;</span>
        <span style="color: #7a0874; font-weight: bold;">popd</span>
    <span style="color: #000000; font-weight: bold;">else</span>
        firefox http:<span style="color: #000000; font-weight: bold;">//</span>127.0.0.1:<span style="color: #000000;">8889</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></div></div>

<p>Comme ça en une commande je lance le serveur du notebook sur le port que je veux si il ne tourne pas, et si il tourne, j&#8217;ouvre firefox et ouvre un onglet dessus.</p>
<p>Quelques autres options très utiles :</p>
<p><strong>&#8211;pylab </strong>: Charger plein de libs pour transformer IPython en un matlab killer.<br />
<strong>&#8211;gui=lib </strong> : permet d&#8217;intégrer l&#8217;event loop de QT, wx, gtk, etc.<br />
<strong>&#8211;ip=0.0.0.0</strong> : si on veut que d&#8217;autres puisse accéder à notre notebook.</p>
<p>Il existe un <a href="http://nbviewer.ipython.org/">espèce de pastebin</a> spécialement fait pour le notebook, qui permet de partager ses expérimentations.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7507&amp;md5=e3d5a0aacc62ee0e8ac80d4d60319d9e" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/profiter-du-notebook-de-ipython/feed/</wfw:commentRss>
		<slash:comments>21</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fprofiter-du-notebook-de-ipython%2F&amp;language=en_GB&amp;category=text&amp;title=Profiter+du+notebook+de+IPython&amp;description=IPython+est+un+des+outils+qui+me+font+trouver+la+programmation+Python+plus+agr%C3%A9able+que+dans+tous+les+autres+langages+%3A+un+shell+avec+tellement+d%26%238217%3Bastuces+int%C3%A9gr%C3%A9es+que+%C3%A7a+donne...&amp;tags=ipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/piNYkzq.jpg" length="97823" type="image/jpg" />	</item>
		<item>
		<title>Nouvelle config iPython</title>
		<link>http://sametmax.com/nouvelle-config-ipython/</link>
		<comments>http://sametmax.com/nouvelle-config-ipython/#comments</comments>
		<pubDate>Sun, 19 May 2013 17:24:44 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6158</guid>
		<description><![CDATA[J'ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.

Voici ce que j'ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>...]]></description>
			<content:encoded><![CDATA[<p>J&#8217;ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.</p>
<p>Voici ce que j&#8217;ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> = <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'doctest_mode on'</span>,
<span style="color: #483d8b;">'from __future__ import unicode_literals, absolute_import, division'</span>,
<span style="color: #483d8b;">'import sys'</span>,
<span style="color: #483d8b;">'import os'</span>,
<span style="color: #483d8b;">'import re'</span>,
<span style="color: #483d8b;">'import json'</span>,
<span style="color: #483d8b;">'import base64'</span>,
<span style="color: #483d8b;">'import calendar'</span>,
<span style="color: #483d8b;">'import csv'</span>,
<span style="color: #483d8b;">'import datetime'</span>,
<span style="color: #483d8b;">'import itertools'</span>,
<span style="color: #483d8b;">'import random'</span>,
<span style="color: #483d8b;">'import hashlib'</span>,
<span style="color: #483d8b;">'import tempfile'</span>,
<span style="color: #483d8b;">'import argparse'</span>,
<span style="color: #483d8b;">'import math'</span>,
<span style="color: #483d8b;">'import random'</span>,
<span style="color: #483d8b;">'import subprocess'</span>,
<span style="color: #483d8b;">'from glob import glob'</span>,
<span style="color: #483d8b;">'from uuid import uuid4'</span>,
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span>,
<span style="color: #483d8b;">'from collections import Counter, OrderedDict'</span>,
<span style="color: #483d8b;">&quot;&quot;&quot;
def initial_imports():
&nbsp;
    # ne faites pas ça dans un code de prod :-)
    global path, relativedelta, requests 
&nbsp;
    print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nImported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
&nbsp;
    try:
        from path import path
        print('Imported : &quot;path&quot;')
    except ImportError:
        print(&quot;'path' is not available&quot;)
&nbsp;
    try:
        from dateutil import relativedelta
        print('Imported : &quot;relativedelta&quot;')
    except ImportError:
        print(&quot;'dateutil' is not available&quot;)
&nbsp;
    try:
        import requests
        print('Imported : &quot;requests&quot;')
    except ImportError:
        print(&quot;'requests' is not available&quot;)
&nbsp;
    try:
        env = os.environ['VIRTUAL_ENV']
        print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nENV '{}'. You can import:<span style="color: #000099; font-weight: bold;">\\</span>n&quot;.format(os.path.basename(env)))
        cmd = subprocess.check_output([env + &quot;/bin/pip&quot;, &quot;freeze&quot;],
                                      stderr=subprocess.STDOUT).strip().split(&quot;<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
        p = re.compile(r'(^.*<span style="color: #000099; font-weight: bold;">\:</span><span style="color: #000099; font-weight: bold;">\s</span>)|((#|@).*$)|(==.*$)')
        print(&quot;'&quot; + &quot;', '&quot;.join(sorted(set(os.path.basename(p.sub('', f)) for f in cmd))) + &quot;'&quot;)
    except KeyError:
        pass
&nbsp;
    print('')
&quot;&quot;&quot;</span>,
<span style="color: #483d8b;">&quot;initial_imports()&quot;</span>
<span style="color: black;">&#93;</span></pre></div></div>

<p>Du coup, au démarrage d&#8217;iPython j&#8217;ai les bénéfices suivant :</p>
<ul>
<li>Comportement de Python 3 pour l&#8217;unicode, les imports et la division. Ils sont plus sains et facile à manipuler (plus besoin de préfixer de &#8216;u&#8217; les chaînes par exemple).</li>
<li>J&#8217;ai tout de suite sous la main une tonne de modules que j&#8217;utilise souvent sans avoir à les importer (os, datetime, random, etc).</li>
<li>J&#8217;importe aussi des modules optionnels (path, requests&#8230;).</li>
<li>Je sais si je suis dans un environnement virtuel, et si oui, ce qu&#8217;il y a installé dedans.</li>
</ul>
<p>Je vire aussi la bannière de démarrage :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> = <span style="color: #008000;">False</span></pre></div></div>

<p>Et hop, mon affichage au démarrage ressemble à ça :</p>
<pre>$ ipython
Exception reporting mode: Plain
Doctest mode is: ON

Imported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'

'path' is not available
'dateutil' is not available
Imported : "requests"

ENV 'my_env'. You can import:

'BeautifulSoup', 'Django', 'Fabric', 'Jinja2', 'Pillow', 'Pygments', 'Sphinx', 'URLObject', 'Werkzeug', 'argparse', 'beautifulsoup4', 'colorlog', 'distribute', 'django-appconf', 'django-bootstrap-pagination', 'django-bootstrap-toolkit', 'django-compressor', 'django-debug-toolbar', 'django-extensions', 'django-guardian', 'django-loginas', 'django-model-utils', 'django-pdb', 'django-pytest', 'django-rest-framework.git', 'django-template-repl', 'docutils', 'easy-thumbnails', 'feedparser', 'gunicor
</pre>
<p>Ça fait un gros bloc visuellement, mais ça ne s&#8217;affiche qu&#8217;une fois, et le délai est acceptable.</p>
<p>Si j&#8217;ai besoin de l&#8217;info à nouveau, je peux toujours appeler :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">initial_imports<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Que ce genre de choses soient possibles et faciles me font adorer Python. La force du langage, ce n&#8217;est pas seulement son core, c&#8217;est tout son environnement, ses libs, ses outils qui gravitent autour qui rendent l&#8217;expérience de dev fantastique.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=6158&amp;md5=6eff89bdb98100a1faaf0fa4efa6d050" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/nouvelle-config-ipython/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fnouvelle-config-ipython%2F&amp;language=en_GB&amp;category=text&amp;title=Nouvelle+config+iPython&amp;description=J%26%238217%3Bai+bricol%C3%A9+une+config+pour+iPython+derni%C3%A8rement.+Rappelez-vous%2C+on+peut+compl%C3%A8tement+customiser+ce+shell.+Voici+ce+que+j%26%238217%3Bai+dans+mon+.%2F.config%2Fipython%2Fprofile_default%2Fipython_config.py%3A+c.TerminalIPythonApp.exec_lines+%3D+%26%2391%3B+%27doctest_mode+on%27%2C+%27from+__future__+import+unicode_literals%2C...&amp;tags=ipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/5e4itlu.jpg" length="273612" type="image/jpg" />	</item>
		<item>
		<title>A l&#8217;intérieur de mon .bashrc</title>
		<link>http://sametmax.com/a-linterieur-de-mon-bashrc/</link>
		<comments>http://sametmax.com/a-linterieur-de-mon-bashrc/#comments</comments>
		<pubDate>Tue, 22 Jan 2013 10:26:44 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>
		<category><![CDATA[virtualenv]]></category>
		<category><![CDATA[virtualenvwrapper]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=4238</guid>
		<description><![CDATA[Généralement montrer son <em>.bashrc</em> donne rapidement lieu dans les comments à un concours de celui qui a la plus longue (jusqu'à ce qu'arrive un utilisateur de zsh, et alors commence le concours de celui qui pisse le plus loin). Mais bon, aujourd'hui j'ai la flemme d'écrire un article complet.]]></description>
			<content:encoded><![CDATA[<p>Généralement montrer son <em>.bashrc</em> donne rapidement lieu dans les comments à un concours de celui qui a la plus longue (jusqu&#8217;à ce qu&#8217;arrive un utilisateur de zsh, et alors commence le concours de celui qui pisse le plus loin). Mais bon, aujourd&#8217;hui j&#8217;ai la flemme d&#8217;écrire un article complet.</p>
<p>Rappel : le <em>.bashrc</em> c&#8217;est le fichier qui est automatiquement chargé au démarrage du shell bash, le shell par défaut sur la plupart des Unix incluant Mac et Ubuntu.</p>
<p>Donc si vous voulez avoir une expérience de travail personnalisée dans votre terminal, c&#8217;est dans ce fichier que ça se passe.</p>
<p>Personnellement, j&#8217;ai tout le bordel que met Ubuntu par défaut (notamment les trucs avec les autocomplétions de partout). En en prime je rajoute :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666; font-style: italic;"># un raccourcis pour lancer redis car je le met sur off par défaut met je le </span>
<span style="color: #666666; font-style: italic;"># lance souvent</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> redis <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #000000; font-weight: bold;">!</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">&quot;/var/run/redis/redis-server.pid&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> ; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #c20cb9; font-weight: bold;">sudo</span> service redis-server start
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># un tas de raccourcis type</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> projet_django <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    workon projet_django;
    <span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>Work<span style="color: #000000; font-weight: bold;">/</span>projet_django<span style="color: #000000; font-weight: bold;">/</span>repo<span style="color: #000000; font-weight: bold;">/</span>projet_django;
&nbsp;
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$#</span> <span style="color: #660033;">-ne</span> <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        .<span style="color: #000000; font-weight: bold;">/</span>manage.py $<span style="color: #000000; font-weight: bold;">@</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">sb</span>=<span style="color: #ff0000;">'projet_django'</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># CF: http://sametmax.com/un-alias-bash-pour-django-virtualenv-dont-je-ne-peux-plus-me-passer/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># fonction fétiche de bourrin</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> killbill <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #007800;">BAK</span>=<span style="color: #007800;">$IFS</span>
    <span style="color: #007800;">IFS</span>=$<span style="color: #ff0000;">'\n'</span>
    <span style="color: #000000; font-weight: bold;">for</span> <span style="color: #c20cb9; font-weight: bold;">id</span> <span style="color: #000000; font-weight: bold;">in</span> $<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">ps</span> aux <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-P</span> <span style="color: #660033;">-i</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-v</span> <span style="color: #ff0000;">&quot;grep&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">awk</span> <span style="color: #ff0000;">'{printf $2&quot; &quot;; for (i=11; i&lt;NF; i++) printf $i&quot; &quot;; print $NF}'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>; <span style="color: #000000; font-weight: bold;">do</span> 
        <span style="color: #007800;">service</span>=$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$id</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">cut</span> <span style="color: #660033;">-d</span> <span style="color: #ff0000;">&quot; &quot;</span> <span style="color: #660033;">-f</span> <span style="color: #000000;">1</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$2</span> == <span style="color: #ff0000;">&quot;-t&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
            <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$service</span> <span style="color: #000000; font-weight: bold;">\&quot;</span>$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$id</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">cut</span> <span style="color: #660033;">-d</span> <span style="color: #ff0000;">&quot; &quot;</span> <span style="color: #660033;">-f</span> <span style="color: #000000;">2</span>-<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">\&quot;</span> <span style="color: #ff0000;">&quot;would be killed&quot;</span>
        <span style="color: #000000; font-weight: bold;">else</span>
&nbsp;
            <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$service</span> <span style="color: #000000; font-weight: bold;">\&quot;</span>$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$id</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">cut</span> <span style="color: #660033;">-d</span> <span style="color: #ff0000;">&quot; &quot;</span> <span style="color: #660033;">-f</span> <span style="color: #000000;">2</span>-<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">\&quot;</span> <span style="color: #ff0000;">&quot;killed&quot;</span>
            <span style="color: #c20cb9; font-weight: bold;">kill</span> <span style="color: #660033;">-9</span> <span style="color: #007800;">$service</span>
        <span style="color: #000000; font-weight: bold;">fi</span>
    <span style="color: #000000; font-weight: bold;">done</span>
    <span style="color: #007800;">IFS</span>=<span style="color: #007800;">$BAK</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># que j'ai un peu amélioré depuis http://sametmax.com/tu-vas-crever-oui/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># une fonction pour commiter rapidement </span>
<span style="color: #000000; font-weight: bold;">function</span> commit <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #c20cb9; font-weight: bold;">git</span> commit <span style="color: #660033;">-m</span> <span style="color: #ff0000;">&quot;<span style="color: #780078;">`echo &quot;$*&quot; | sed -e 's/^./\U&amp;\E/g'`</span>&quot;</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">co</span>=commit;
&nbsp;
<span style="color: #666666; font-style: italic;"># en gros on tappe &quot;co message de commit&quot;. Sans guillement, sans rien.</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># des completions pour manage.py et git</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>.django_bash_completion
<span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>.git-completion.bash
&nbsp;
<span style="color: #666666; font-style: italic;"># activation du cache de pip pour éviter de télécharger 20 fois la même lib</span>
&nbsp;
<span style="color: #007800;">PIP_DOWNLOAD_CACHE</span>=<span style="color: #ff0000;">'/opt/pip-cache'</span>;
<span style="color: #7a0874; font-weight: bold;">export</span> PIP_DOWNLOAD_CACHE;
&nbsp;
<span style="color: #666666; font-style: italic;"># un super outil pour un git plus user friendly</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-s</span> <span style="color: #ff0000;">&quot;/home/sam/.scm_breeze/scm_breeze.sh&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #ff0000;">&quot;/home/sam/.scm_breeze/scm_breeze.sh&quot;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">c</span>=<span style="color: #ff0000;">&quot;git_index&quot;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># j'en avais parlé ici : http://sametmax.com/scm-breeze-facilite-la-selection-de-vos-fichiers-a-commiter-sous-git-avec/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># un prompt personalisé tout en couleur</span>
<span style="color: #666666; font-style: italic;"># formaté comme ça: [nom du virtualenv] sam ~/path (branche git) $</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">source</span> ~<span style="color: #000000; font-weight: bold;">/</span>.prompt.bash
&nbsp;
<span style="color: #666666; font-style: italic;"># le fichier ressemble à ça : http://0bin.net/paste/d103a91dc41818462da0c8468ddddf4141f2efd6#dKr6qWHfAVZsSnOQ7fA4pPQ3Dquhz0Oj1b2OF8xw6vA=</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># la configuration de virtualenv wrapper </span>
<span style="color: #7a0874; font-weight: bold;">export</span> <span style="color: #007800;">WORKON_HOME</span>=<span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>.virtualenvs
<span style="color: #c20cb9; font-weight: bold;">mkdir</span> <span style="color: #660033;">-p</span> <span style="color: #007800;">$WORKON_HOME</span>
<span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span>virtualenvwrapper.sh
&nbsp;
<span style="color: #666666; font-style: italic;"># plus de détails ici : http://sametmax.com/les-environnement-virtuels-python-virtualenv-et-virtualenvwrapper/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># j'ai récément succombé aux sirène du virtualenv automatique</span>
<span style="color: #666666; font-style: italic;"># j'avais beaucoup d'a priori (particulirement écraser la commande CD)</span>
<span style="color: #666666; font-style: italic;"># mais à l'usage, c'est pratique</span>
has_virtualenv<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-e</span> .venv <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        workon <span style="color: #000000; font-weight: bold;">`</span><span style="color: #c20cb9; font-weight: bold;">cat</span> .venv<span style="color: #000000; font-weight: bold;">`</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
venv_cd <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #7a0874; font-weight: bold;">builtin</span> <span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #ff0000;">&quot;$@&quot;</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> has_virtualenv
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">cd</span>=<span style="color: #ff0000;">&quot;venv_cd&quot;</span>
has_virtualenv
&nbsp;
<span style="color: #666666; font-style: italic;"># en gros ça m'active un virtualenv si il y a un fichier .venv avec un nom</span>
<span style="color: #666666; font-style: italic;"># de virtualenv dedans dans le dossier courrant</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># je vous en parlais récement (http://sametmax.com/configurer-votre-terminal-pour-quil-vous-notifie-de-la-fin-dune-commande-longue/)</span>
<span style="color: #666666; font-style: italic;"># c'est pour avoir une notifi à la fin des commandes longues </span>
notify_when_long_running_commands_finish_install
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># ca c'est un truc de feignasse car je me souviens jamais comment extraire </span>
<span style="color: #666666; font-style: italic;"># en ligne de commande tel ou tel format</span>
&nbsp;
extract <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-f</span> <span style="color: #007800;">$1</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>
    <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #000000; font-weight: bold;">case</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">in</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.7z<span style="color: #7a0874; font-weight: bold;">&#41;</span> 7z x <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.lzma<span style="color: #7a0874; font-weight: bold;">&#41;</span> unlzma <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.rar<span style="color: #7a0874; font-weight: bold;">&#41;</span> unrar x <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar.bz2<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvjf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.bz2<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">bunzip2</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar.gz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvzf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.gz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">gunzip</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar.xz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> Jxvf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.xz<span style="color: #7a0874; font-weight: bold;">&#41;</span> xz <span style="color: #660033;">-d</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tbz2<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvjf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tgz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvzf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.zip<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">unzip</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.Z<span style="color: #7a0874; font-weight: bold;">&#41;</span> uncompress <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;don't know how to extract '$1'...&quot;</span> <span style="color: #000000; font-weight: bold;">;;</span>
        <span style="color: #000000; font-weight: bold;">esac</span>
    <span style="color: #000000; font-weight: bold;">else</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;Error: '$1' is not a valid file!&quot;</span>
        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">0</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># ça date de http://sametmax.com/decompresser-sous-linux-en-ligne-de-commande/</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># et quelques alias pour des tâches de tous les jours</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">alias</span> ..=<span style="color: #ff0000;">'cd ..'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> ...=<span style="color: #ff0000;">'cd ../../'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> ....=<span style="color: #ff0000;">'cd ../../../'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> .....=<span style="color: #ff0000;">'cd ../../../../'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> ......=<span style="color: #ff0000;">'cd ../../../../../'</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">process</span>=<span style="color: #ff0000;">'ps aux | grep'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">serve</span>=<span style="color: #ff0000;">&quot;python -c 'import SimpleHTTPServer; SimpleHTTPServer.test()'&quot;</span></pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=4238&amp;md5=4bb33c1c0c1f4571ea35919f558f82f3" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/a-linterieur-de-mon-bashrc/feed/</wfw:commentRss>
		<slash:comments>20</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fa-linterieur-de-mon-bashrc%2F&amp;language=en_GB&amp;category=text&amp;title=A+l%26%238217%3Bint%C3%A9rieur+de+mon+.bashrc&amp;description=G%C3%A9n%C3%A9ralement+montrer+son+.bashrc+donne+rapidement+lieu+dans+les+comments+%C3%A0+un+concours+de+celui+qui+a+la+plus+longue+%28jusqu%26%238217%3B%C3%A0+ce+qu%26%238217%3Barrive+un+utilisateur+de+zsh%2C+et+alors+commence...&amp;tags=bash%2Cgit%2Cpython%2Cshell%2Cvirtualenv%2Cvirtualenvwrapper%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/01/23207079.jpg" length="22869" type="image/jpg" />	</item>
		<item>
		<title>Quelques bonnes raisons de plus d&#8217;utiliser iPython</title>
		<link>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/</link>
		<comments>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/#comments</comments>
		<pubDate>Sun, 23 Dec 2012 18:01:36 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[docstring]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3644</guid>
		<description><![CDATA[Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.]]></description>
			<content:encoded><![CDATA[<p>Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.</p>
<p>Voici quelques commandes qui vous donneront moult raisons de plus pour très vite installer ce shell alternatif.</p>
<h2>Autocall</h2>
<p>Taper des parenthèses et des guillemets, c&#8217;est sooooooo 1995.  iPython peut vous les rajouter automatiquement dans les appels de fonctions, il faut juste préfixer de &#8220;/&#8221;, &#8220;,&#8221; ou &#8220;;&#8221; votre appel de fonction pour qu&#8217;il fasse la conversion:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">/f <span style="color: #ff4500;">1</span>,<span style="color: #ff4500;">2</span> =<span style="color: #66cc66;">&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span>,<span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
,f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> =<span style="color: #66cc66;">&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1&quot;</span>,<span style="color: #483d8b;">&quot;2&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">;</span>f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> =<span style="color: #66cc66;">&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1 2&quot;</span><span style="color: black;">&#41;</span></pre></div></div>

<h2>Accès au shell système</h2>
<p>Préfixez votre commande d&#8217;un &#8220;!&#8221; bien couillu, et iPython va vous exécuter ça dans le shell système (par exemple bash) et vous retourner le résulat:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">!</span> cat /etc/fstab | grep <span style="color: #483d8b;">'ext4'</span>
UUID=e33c5b98-<span style="color: #ff4500;">1570</span>-44d6-a32f-5e7970e1e588 /               ext4    errors=remount-ro <span style="color: #ff4500;">0</span>       <span style="color: #ff4500;">1</span></pre></div></div>

<p>Oui, oui, on est dans un shell Python là. Ou comment bien faire chier la coloration syntaxique de votre blog.</p>
<p>Et on peut mettre tout ça dans une variable et le traiter en Python derrière:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> files = <span style="color: #66cc66;">!</span>ls
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span>f.<span style="color: black;">upper</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> f <span style="color: #ff7700;font-weight:bold;">in</span> files<span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #483d8b;">'BUREAU'</span>, <span style="color: #483d8b;">'DOCUMENTS'</span>, <span style="color: #483d8b;">'EXAMPLES.DESKTOP'</span>, <span style="color: #483d8b;">'IMAGES'</span>, <span style="color: #483d8b;">'MOD<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a8LES'</span>, <span style="color: #483d8b;">'MUSIQUE'</span>, <span style="color: #483d8b;">'PUBLIC'</span>, <span style="color: #483d8b;">'T<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9L<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9CHARGEMENTS'</span>, <span style="color: #483d8b;">'UBUNTU ONE'</span>, <span style="color: #483d8b;">'VID<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9OS'</span>,<span style="color: black;">&#93;</span></pre></div></div>

<p>A noter que tout est exécuté dans un autre process, ainsi <code>!cd</code> n&#8217;aura aucun effet. Mais tout est prévu: <code>%cd</code> et <code>%pwd</code> proxient tout ça vers <code>os.chdir</code> et <code>os.getcwd</code> :-)</p>
<h2>Debugger</h2>
<p>Entrez <code>%timeit</code> expression pour qu&#8217;il qu&#8217;iPython vous l&#8217;exécute 10000000 fois et vous donne sa performance.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">%</span><span style="color: #dc143c;">timeit</span> x=<span style="color: #ff4500;">2</span><span style="color: #66cc66;">**</span><span style="color: #ff4500;">100</span>
<span style="color: #ff4500;">10000000</span> loops, best of <span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">22.5</span> ns per loop</pre></div></div>

<p>Autre commande: <code>%pdb</code> vous lancera automatiquement votre <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">débuggeur favoris</a> si une exception se lève durant votre session.</p>
<h2>Se faciliter la vie</h2>
<p><code>%edit</code> ouvre un editeur (par défault VI sous nunux, mais c&#8217;est <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">configurable</a>), et si vous sauvegardez, le contenu tapé est récupéré et exécuté par iPython. Génial pour les bouts de code trop relou à taper sur le prompt.</p>
<p><code>%gui qt|wx|gtk</code> lance l&#8217;intégration de la main loop d&#8217;un des toolkits graphiques afin pour de pouvoir faire mumuse avec des widgets sans bloquer votre shell.</p>
<p>Vous étiez vous demandé pourquoi le prompt iPython était plein de <code>In</code> et de <code>Out</code>, et pas de <code>>>></code> ? Parce que tout l&#8217;historique est numéroté, et accessible:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: In<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: u<span style="color: #483d8b;">'1 + 1'</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span></pre></div></div>

<p>Mais vous pouvez aussi utiliser <code>%doctest_mode</code> qui donne à votre prompt un air de shell Python normal. L&#8217;avantage ? On peut copier le contenu d&#8217;un autre shell dedans (et donc d&#8217;une doctest) avec les chevrons !</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">49</span><span style="color: black;">&#93;</span>: <span style="color: #66cc66;">%</span>doctest_mode
<span style="color: #008000;">Exception</span> reporting mode: Plain
Doctest mode <span style="color: #ff7700;font-weight:bold;">is</span>: ON
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> pom <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'pom'</span>, <span style="color: #483d8b;">'pom'</span>, <span style="color: #483d8b;">'pom'</span>, <span style="color: #483d8b;">'pom'</span><span style="color: black;">&#41;</span>:
...     ...     <span style="color: #ff7700;font-weight:bold;">print</span> pom
...     ... 
<span style="color: black;">pom</span>
pom
pom
pom</pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3644&amp;md5=50b7961852b0af705abf2486fc538929" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fquelques-bonnes-raisons-de-plus-dutiliser-ipython%2F&amp;language=en_GB&amp;category=text&amp;title=Quelques+bonnes+raisons+de+plus+d%26%238217%3Butiliser+iPython&amp;description=Le+shell+Python+est+vraiment+pratique+pour+exp%C3%A9rimenter%2C+apprendre+le+langage%2C+tester+un+snippet+vitos+ou+administrer+son+site+%C3%A0+distance.+Mais+iPython%2C+ola%2C+iPython%2C+il+d%C3%A9chire+sa+g%C3%A9nitrice+avec...&amp;tags=docstring%2Cipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/277EB_mac-gyver.jpg" length="14600" type="image/jpg" />	</item>
		<item>
		<title>Personnalisez le démarrage d&#8217;iPython</title>
		<link>http://sametmax.com/personnalisez-le-demarrage-dipython/</link>
		<comments>http://sametmax.com/personnalisez-le-demarrage-dipython/#comments</comments>
		<pubDate>Sun, 16 Dec 2012 13:14:54 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[configuration]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3643</guid>
		<description><![CDATA[iPython, c'est bon. Et ça peut être encore meilleur.]]></description>
			<content:encoded><![CDATA[<p><a href="http://ipython.org/">iPython</a>, c&#8217;est bon. Et ça peut être encore meilleur.</p>
<p>Avant on ajoutait un peu de sel à notre super shell en éditant les fichiers <em>.ipython/ipythonrc</em> et <em>.ipython/ipy_user_conf.py</em>. Mais ça c&#8217;était avant.</p>
<p>Maintenant on fait :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">$ ipython profile create</pre></div></div>

<p>Ce qui va créer un fichier <code>~/.config/ipython/profile_default/ipython_config.py</code> (et <code>ipython_qtconsole_config.py</code> si vous avez installé la version qt).</p>
<p>Il ne vous reste plus qu&#8217;à éditer ce fichier pour personnaliser le démarrage de iPython.</p>
<h2>Executer du code au démarrage</h2>
<p>N&#8217;importe quelle ligne de code Python ou de commande magique (les trucs qui commencent pas &#8216;%&#8217; qui ne fonctionnent que dans iPython) !</p>
<p>Très utile pour les imports par exemple. Voici ce que je fais moi au démarrage :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> = <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'%doctest_mode'</span>,
<span style="color: #483d8b;">'import os, sys, re, json'</span>,
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span>,
<span style="color: #483d8b;">''</span><span style="color: #483d8b;">'
try:
    from path import path
except ImportError:
    pass
'</span><span style="color: #483d8b;">''</span>,
<span style="color: #483d8b;">''</span><span style="color: #483d8b;">'
try:
    import requests
except ImportError:
    pass
'</span><span style="color: #483d8b;">''</span>,
<span style="color: #483d8b;">''</span><span style="color: #483d8b;">'
try:
    from batbelt.structs import *
    from batbelt.objects import attr
    from batbelt.strings import slugify, normalize, json_dumps, json_loads
except ImportError:
    pass
'</span><span style="color: #483d8b;">''</span>
<span style="color: black;">&#93;</span></pre></div></div>

<p>Du coup j&#8217;ai quasiment jamais besoin d&#8217;importer un truc, car ce que j&#8217;utilise le plus est déjà là. <code>%doctest_mode</code> me permet de coller des docstrings sans me fouler.</p>
<h2>Programmation graphique</h2>
<p>iPython possède une boucle principale. Les toolkits graphiques aussi. Si vous faites vos essais du code du second dans le premier, ça va bloquer. Heureusement on peut demander à iPython d&#8217;intégrer la main loop d&#8217;un des toolkits graphiques les plus célèbres en choisissant parmi : &#8216;qt&#8217;, &#8216;wx&#8217;, &#8216;gtk&#8217;, &#8216;glut&#8217;, &#8216;pyglet&#8217; et &#8216;osx&#8217; et en settant :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">gui</span> = <span style="color: #483d8b;">'qt'</span></pre></div></div>

<h2>Virer le header</h2>
<p>Quand on lance le shell, il vous raconte sa vie. Pour lui dire de fermer sa gueule :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> = <span style="color: #008000;">False</span></pre></div></div>

<h2>Lancer un script complet</h2>
<p>Bon, ça c&#8217;est si vous avez de gros besoins&#8230;</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">file_to_run</span> = <span style="color: #483d8b;">'/path/to/script.py'</span></pre></div></div>

<h2>Sauter la confirmation à la fermeture</h2>
<p>Oui, je suis sûr te vouloir te fermer connard ! Tu crois que j&#8217;ai appuyé sur Ctrl + d par erreur en éternuant ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">confirm_exit</span> = <span style="color: #008000;">False</span></pre></div></div>

<h2>Choisir son éditeur externe</h2>
<p>Si vous tapez <code>%edit</code> dans iPython, il ouvre un éditeur. Vous tapez votre code, vous sauvegardez, vous fermez. Et iPython récupère le code et l&#8217;éxécute. Par défault il utilise VI. On peut faire mieux.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">editor</span> = <span style="color: #483d8b;">'/chemin/vers/sublime-text -w'</span></pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3643&amp;md5=22aa99cf8693fdd6e3352e54de918821" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/personnalisez-le-demarrage-dipython/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fpersonnalisez-le-demarrage-dipython%2F&amp;language=en_GB&amp;category=text&amp;title=Personnalisez+le+d%C3%A9marrage+d%26%238217%3BiPython&amp;description=iPython%2C+c%26%238217%3Best+bon.+Et+%C3%A7a+peut+%C3%AAtre+encore+meilleur.+Avant+on+ajoutait+un+peu+de+sel+%C3%A0+notre+super+shell+en+%C3%A9ditant+les+fichiers+.ipython%2Fipythonrc+et+.ipython%2Fipy_user_conf.py.+Mais+%C3%A7a+c%26%238217%3B%C3%A9tait...&amp;tags=configuration%2Cipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/6089448781_03743e140c_z.jpg" length="196127" type="image/jpg" />	</item>
		<item>
		<title>Le _ (underscore) dans le shell interactif Python</title>
		<link>http://sametmax.com/le-_-underscode-dans-le-shell-interactif-python/</link>
		<comments>http://sametmax.com/le-_-underscode-dans-le-shell-interactif-python/#comments</comments>
		<pubDate>Thu, 20 Sep 2012 19:51:30 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1186</guid>
		<description><![CDATA[C'est une fonctionnalité que peu de gens connaissent, pourtant très utile.]]></description>
			<content:encoded><![CDATA[<p>C&#8217;est une fonctionnalité que peu de gens connaissent, pourtant très utile.</p>
<p>Dans le shell Python, à chaque fois qu&#8217;on évalue une expression, le résultat affiché est référencé dans la variable <code>_</code>.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>
<span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> _
<span style="color: #ff4500;">2</span></pre></div></div>

<p>On peut évidement la réutiliser comme n&#8217;importe quelle variable:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span>, <span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">3</span>, <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span>x <span style="color: #66cc66;">*</span> <span style="color: #ff4500;">2</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> _<span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">4</span>, <span style="color: #ff4500;">6</span>, <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span></pre></div></div>

<p>Pour éviter d&#8217;effacer la variable trop souvent, quand le résultat retourné est <code>None</code>, <code>_</code> ne change pas, donc il ne change pas quand on <code>print</code> :-)</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff4500;">1</span> <span style="color: #66cc66;">&gt;</span> <span style="color: #ff4500;">2</span> <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">None</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> _
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">4</span>, <span style="color: #ff4500;">6</span>, <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">'a'</span>
a
<span style="color: #66cc66;">&gt;&gt;&gt;</span> _
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">4</span>, <span style="color: #ff4500;">6</span>, <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span></pre></div></div>

<p>Ça ne marche que dans le shell, pas dans un script.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=1186&amp;md5=8872fefecf333bb681ad5b4bc9b9ffc8" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/le-_-underscode-dans-le-shell-interactif-python/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fle-_-underscode-dans-le-shell-interactif-python%2F&amp;language=en_GB&amp;category=text&amp;title=Le+_+%28underscore%29+dans+le+shell+interactif+Python&amp;description=C%26%238217%3Best+une+fonctionnalit%C3%A9+que+peu+de+gens+connaissent%2C+pourtant+tr%C3%A8s+utile.+Dans+le+shell+Python%2C+%C3%A0+chaque+fois+qu%26%238217%3Bon+%C3%A9value+une+expression%2C+le+r%C3%A9sultat+affich%C3%A9+est+r%C3%A9f%C3%A9renc%C3%A9+dans+la+variable...&amp;tags=python%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/09/mamie-fume.jpg" length="41440" type="image/jpg" />	</item>
		<item>
		<title>Etre prévenu quand une longue commande a fini son éxécution sous Ubuntu et Mac</title>
		<link>http://sametmax.com/etre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac/</link>
		<comments>http://sametmax.com/etre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac/#comments</comments>
		<pubDate>Mon, 18 Jun 2012 18:19:24 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[alert]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=947</guid>
		<description><![CDATA[Quand on lance une commande qui tourne pendant un certain bout de temps (typiquement une migration ou un encodage en masse), on a pas envie d'avoir les yeux vissés sur le terminal pour savoir quand elle se termine.
]]></description>
			<content:encoded><![CDATA[<p>Quand on lance une commande qui tourne pendant un certain bout de temps (typiquement une migration ou un encodage en masse), on a pas envie d&#8217;avoir les yeux vissés sur le terminal pour savoir quand elle se termine.</p>
<h2>Alertes sous Ubuntu</h2>
<p>Entrez simplement:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">alert <span style="color: #ff0000;">&quot;Encore merci et bonne chance, nous sommes avec vous.&quot;</span></pre></div></div>

<p>Ceci va faire apparaitre une notification avec le message passé en paramètre.</p>
<p>Pour avoir l&#8217;alerte lancée une fois une commande terminée, il suffit de la mettre just après, derrière un point virgule:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sleep</span> <span style="color: #000000;">5</span>; alert</pre></div></div>

<p><em>Le message sera alors la commande précédente.</em></p>
<p>Pour ceux qui ne sont pas sous Ubuntu, on peut créer la commande manuellement (Ubuntu ne fait que mettre cette ligne par défaut dans le <em>.bashrc</em>):</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">alert</span>=<span style="color: #ff0000;">'notify-send --urgency=low -i &quot;$([ $? = 0 ] &amp;&amp; echo terminal || echo error)&quot; &quot;$(history|tail -n1|sed -e '</span><span style="color: #000000; font-weight: bold;">\'</span><span style="color: #ff0000;">'s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'</span><span style="color: #000000; font-weight: bold;">\'</span><span style="color: #ff0000;">')&quot;'</span></pre></div></div>

<p>Il faut bien entendu s&#8217;assurer que la commande &#8220;notify-send&#8221; soit installée.</p>
<h2>Alertes sous Mac</h2>
<p>Mac vient avec un synthétiseur vocal qui peut être utilisé de manière similaire:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">say <span style="color: #ff0000;">&quot;I just want to thank you both, we're all counting on you.&quot;</span></pre></div></div>

<p>Le Mac va alors vous lire la phrase à haute, hum&#8230; voix. Il faut bien sûr s&#8217;assurer que l&#8217;on a le volume réglé en conséquence sinon l&#8217;alerte risque de ne pas se passer comme prévu :-)</p>
<p>Un bon truc donc pour foutre la honte à votre collègue de bureau, mettez le sond à fond et lancez juste avant la pause déjeûner dans un onglet discretos:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sleep</span> <span style="color: #000000;">5000</span>; say <span style="color: #ff0000;">&quot;Oh yeah bitch, just like that, just like that. Suck it ! Suck it hard. Oh Yeaaaaaaaaaaaaaa!&quot;</span></pre></div></div>

<p>C&#8217;est particulièrement perturbant sur une voix de synthèse.</p>
<p>Cette commande fonctionne mieux avec des phrases en anglais.</p>
<p><strong>Attention</strong> cependant, ces deux astuces ne fonctionnent qu&#8217;en local, puisse qu&#8217;un ordinateur distant n&#8217;a pas accès au système de notification de votre desktop. Un défaut ennuyeux car on lance souvent des commandes longues via SSH.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=947&amp;md5=b681b6097c528f29c88b71724a6932d0" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/etre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fetre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac%2F&amp;language=en_GB&amp;category=text&amp;title=Etre+pr%C3%A9venu+quand+une+longue+commande+a+fini+son+%C3%A9x%C3%A9cution+sous+Ubuntu+et+Mac&amp;description=Quand+on+lance+une+commande+qui+tourne+pendant+un+certain+bout+de+temps+%28typiquement+une+migration+ou+un+encodage+en+masse%29%2C+on+a+pas+envie+d%26%238217%3Bavoir+les+yeux+viss%C3%A9s+sur...&amp;tags=alert%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/06/navi.jpg" length="37975" type="image/jpg" />	</item>
	</channel>
</rss>
