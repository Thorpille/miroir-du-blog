<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; cache</title>
	<atom:link href="http://sametmax.com/tag/cache/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Mon, 02 Dec 2013 10:02:45 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>Marre des mots de passe pour push sur git ?</title>
		<link>http://sametmax.com/marre-des-mots-de-passe-pour-push-sur-git/</link>
		<comments>http://sametmax.com/marre-des-mots-de-passe-pour-push-sur-git/#comments</comments>
		<pubDate>Tue, 19 Nov 2013 08:36:34 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[auth]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[git]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=8013</guid>
		<description><![CDATA[Vous êtes dans une situation où vous ne pouvez pas utiliser uniquement un clé pour vous authentifier, et il faut taper votre putain de mot de passe à chaque push.]]></description>
			<content:encoded><![CDATA[<p>Vous êtes dans une situation où vous ne pouvez pas utiliser uniquement une clé pour vous authentifier, et il faut taper votre putain de mot de passe à chaque push.</p>
<p><a href="http://sametmax.com/git-push-via-http-ou-comment-travailler-au-macdo/">Ça sent le vécu n&#8217;est-ce pas ?</a></p>
<p>Mais bien entendu git vient avec une option bien cachée au fond de son fion pour adresser ce problème :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">git</span> config credential.helper <span style="color: #ff0000;">'cache --timeout=3600'</span></pre></div></div>

<p>Et votre authentification sera gardée en mémoire pour une heure. Vous pouvez faire :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">git</span> config <span style="color: #660033;">--global</span> credential.helper <span style="color: #ff0000;">'cache --timeout=3600'</span></pre></div></div>

<p>Pour l&#8217;étendre à tous les repos de votre machine.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=8013&amp;md5=e4c62cc7ed21334f85fbfed045830fc7" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/marre-des-mots-de-passe-pour-push-sur-git/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fmarre-des-mots-de-passe-pour-push-sur-git%2F&amp;language=en_GB&amp;category=text&amp;title=Marre+des+mots+de+passe+pour+push+sur+git+%3F&amp;description=Vous+%C3%AAtes+dans+une+situation+o%C3%B9+vous+ne+pouvez+pas+utiliser+uniquement+une+cl%C3%A9+pour+vous+authentifier%2C+et+il+faut+taper+votre+putain+de+mot+de+passe+%C3%A0+chaque+push....&amp;tags=auth%2Ccache%2Cgit%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/11/cdempDI.jpg" length="51081" type="image/jpg" />	</item>
		<item>
		<title>Question d&#8217;un lecteur sur le cache et Django</title>
		<link>http://sametmax.com/question-dun-lecteur-sur-le-cache-et-django/</link>
		<comments>http://sametmax.com/question-dun-lecteur-sur-le-cache-et-django/#comments</comments>
		<pubDate>Sun, 04 Aug 2013 06:12:36 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[django]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7003</guid>
		<description><![CDATA[Encore un message du formulaire de contact auquel je n'arrive pas à répondre (delivery failure).]]></description>
			<content:encoded><![CDATA[<p>Encore un message du formulaire de contact auquel je n&#8217;arrive pas à répondre (delivery failure).</p>
<blockquote><p>
> Subject: Idée d&#8217;article/Question<br />
><br />
> Message Body:<br />
> Salut !<br />
><br />
> Merci pour vos articles décalés et ceux qui sont plus au centre.<br />
><br />
> J&#8217;ai une petite question sur Django :<br />
> Est-ce possible de mettre toutes les résultats de requetes de l&#8217;ORM de<br />
Django dans memcached, et de les récupérer / mettre à jour / supprimer ?<br />
> Pour moi ça bloque au niveau de la mise à jour / suppression.<br />
><br />
> Du coup je me suis dit que vous pourriez faire un article sur les<br />
différentes méthodes de mise en cache dans Django et ce que on peut<br />
faire avec.</p></blockquote>
<p>Hello,</p>
<p>Oui, c&#8217;est possible.</p>
<p>La mise à jour et la suppression du cache a toujours été une des choses<br />
les plus difficiles en programmation, donc c&#8217;est naturel de bloquer dessus.</p>
<p>Pour commencer, utilise <a href="https://github.com/jbalogh/django-cache-machine">django-cache-machine</a> ou <a href="http://pythonhosted.org/johnny-cache/">johnny-cache</a>, qui sont des<br />
surcouche à l&#8217;ORM Django avec cache automatique. Ensuite, tu apprendras<br />
à faire le reste à la main petit à petit.</p>
<p>Pour les pages complètes, des solutions qui n&#8217;ont rien à avoir avec<br />
Django, telles que Varnish, sont aussi des approches qui permettent de<br />
gagner pas mal en perfs.</p>
<p>Bref, je note ce truc dans la liste des articles à faire.</p>
<p>Sam</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7003&amp;md5=7d4f5cbd233cd9551739e8f155916c75" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/question-dun-lecteur-sur-le-cache-et-django/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fquestion-dun-lecteur-sur-le-cache-et-django%2F&amp;language=en_GB&amp;category=text&amp;title=Question+d%26%238217%3Bun+lecteur+sur+le+cache+et+Django&amp;description=Encore+un+message+du+formulaire+de+contact+auquel+je+n%26%238217%3Barrive+pas+%C3%A0+r%C3%A9pondre+%28delivery+failure%29.+%3E+Subject%3A+Id%C3%A9e+d%26%238217%3Barticle%2FQuestion+%3E+%3E+Message+Body%3A+%3E+Salut+%21+%3E+%3E+Merci+pour...&amp;tags=cache%2Cdjango%2Cpython%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/08/WUElaNy.jpg" length="175306" type="image/jpg" />	</item>
		<item>
		<title>Savoir si une page est en cache avec Varnish</title>
		<link>http://sametmax.com/savoir-si-une-page-est-en-cache-avec-varnish/</link>
		<comments>http://sametmax.com/savoir-si-une-page-est-en-cache-avec-varnish/#comments</comments>
		<pubDate>Wed, 01 May 2013 07:44:34 +0000</pubDate>
		<dc:creator>Max</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[hit]]></category>
		<category><![CDATA[miss]]></category>
		<category><![CDATA[varnish]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=5945</guid>
		<description><![CDATA[Petite astuce pour savoir si Varnish fait bien son boulot. L'affichage dans les Headers d'un debug permettant de savoir si votre page a bien été servit depuis le cache plutôt que le backend.]]></description>
			<content:encoded><![CDATA[<p>Pour savoir si cette feignasse de Varnish a bien fait son boulot voici une petite astuce pour afficher dans les HEADERS de son navigateur la provenance de la page, le cache ou le backend.<br />
Varnish propose dans son <a href="https://www.varnish-cache.org/trac/wiki/VCLExampleHitMissHeader">wiki</a> cette méthode.</p>
<p><strong><br />
dans le fichier de conf de Varnish:</strong></p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">vi</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>varnish<span style="color: #000000; font-weight: bold;">/</span>default.vcl</pre></div></div>

<p><b>et rajoutez ces quelques lignes:</b></p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">sub vcl_deliver <span style="color: #7a0874; font-weight: bold;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span>obj.hits <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000;">0</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
                <span style="color: #000000; font-weight: bold;">set</span> resp.http.X-Cache = <span style="color: #ff0000;">&quot;HIT&quot;</span>;
        <span style="color: #7a0874; font-weight: bold;">&#125;</span> <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
                <span style="color: #000000; font-weight: bold;">set</span> resp.http.X-Cache = <span style="color: #ff0000;">&quot;MISS&quot;</span>;
        <span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></div></div>

<p><b>On redemarre le service pour prendre en compte les changements:</b></p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">service varnishd restart</pre></div></div>

<p><b>Dans le navigateur:</b></p>
<p><img src="http://sametmax.com/wp-content/uploads/2013/04/varnish.png" alt="" title="ça devrait cristalliser..." width="300" height="329" class="aligncenter size-full wp-image-5949" /></p>
<p>Comme on le voit ici, la page a été servie par le backend, si ce n&#8217;était pas prévu il va falloir revoir vos règles.</p>
<p>ATTENTION: Pensez à bien rafraichir votre navigateur pour être sur que ce ne soit pas la page mise en cache par ce dernier qui soit affichée, personnellement j&#8217;utilise la version navigation privé de chrome.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=5945&amp;md5=be6785e27a7adbf7068ee14abcc3ccb5" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/savoir-si-une-page-est-en-cache-avec-varnish/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fsavoir-si-une-page-est-en-cache-avec-varnish%2F&amp;language=en_GB&amp;category=text&amp;title=Savoir+si+une+page+est+en+cache+avec+Varnish&amp;description=Pour+savoir+si+cette+feignasse+de+Varnish+a+bien+fait+son+boulot+voici+une+petite+astuce+pour+afficher+dans+les+HEADERS+de+son+navigateur+la+provenance+de+la+page%2C+le...&amp;tags=cache%2Chit%2Cmiss%2Cvarnish%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/04/1221965226fv47Eh.jpg" length="24506" type="image/jpg" />	</item>
		<item>
		<title>Changement du cache du blog</title>
		<link>http://sametmax.com/changement-du-cache-du-blog/</link>
		<comments>http://sametmax.com/changement-du-cache-du-blog/#comments</comments>
		<pubDate>Mon, 08 Apr 2013 13:06:22 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[meta]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=5641</guid>
		<description><![CDATA[Il se trouve que je suis tombé par hasard sur <a href="http://wordpress.org/extend/plugins/wordpress-varnish/">ce plugin Wordpres</a>s (ou alors quelqu'un me l'a recommandé, je sais plus) et j'ai trouvé la motivation pour l'installé ce matin.]]></description>
			<content:encoded><![CDATA[<p>Vu qu&#8217;on est des feignasses et qu&#8217;on a pas envie de tweaker le blog jusqu&#8217;à ce que performances s&#8217;en suivent, on a fait les bourrins en mettant un gros <a href="sametmax.com/initiation-a-varnish-accelerer-un-blog-wordpress/">varnish</a> en front.</p>
<p>On a reçu de nombreuses remarques comme quoi on ne voyait pas si les commentaires étaient postés et autres détails qui rendaient la consultation du blog fort confuse.</p>
<p>On est pas devenu moins fainéant entre temps, mais il se trouve que je suis tombé par hasard sur <a href="http://wordpress.org/extend/plugins/wordpress-varnish/">ce plugin WordPress</a> (ou alors quelqu&#8217;un me l&#8217;a recommandé, je sais plus) et j&#8217;ai trouvé la motivation pour l&#8217;installer ce matin.</p>
<p>Normalement il devrait invalider le cache à chaque fois qu&#8217;on met à jour un article ou que quelqu&#8217;un poste un commentaire.</p>
<p>À voir si ça plombe pas les perfs mais normalement ça devrait aller, on a eu à peine 4,758 comments depuis le lancement du blog, ça fait moins d&#8217;un comment à l&#8217;heure, on devrait survivre.</p>
<p>Si vous constatez que c&#8217;est mieux, faites le nous savoir, on aura au moins l&#8217;impression d&#8217;avoir fait notre BA.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=5641&amp;md5=2ade60002d8f7151d909eecf1ec22d07" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/changement-du-cache-du-blog/feed/</wfw:commentRss>
		<slash:comments>14</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fchangement-du-cache-du-blog%2F&amp;language=en_GB&amp;category=text&amp;title=Changement+du+cache+du+blog&amp;description=Vu+qu%26%238217%3Bon+est+des+feignasses+et+qu%26%238217%3Bon+a+pas+envie+de+tweaker+le+blog+jusqu%26%238217%3B%C3%A0+ce+que+performances+s%26%238217%3Ben+suivent%2C+on+a+fait+les+bourrins+en+mettant+un+gros+varnish...&amp;tags=cache%2Cmeta%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/04/RGB2qWQ.jpg" length="131923" type="image/jpg" />	</item>
		<item>
		<title>Firefox n&#8217;affiche plus les styles CSS ni les images</title>
		<link>http://sametmax.com/firefox-naffiche-plus-les-styles-css-ni-les-images/</link>
		<comments>http://sametmax.com/firefox-naffiche-plus-les-styles-css-ni-les-images/#comments</comments>
		<pubDate>Fri, 04 Jan 2013 12:15:30 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[css]]></category>
		<category><![CDATA[firefox]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3956</guid>
		<description><![CDATA[Après avoir vidé le cache, il peut arriver que notre panda roux n'affiche plus les styles CSS ou les images: il n'y a plus aucune mise en page, juste du texte noir sur une page blanche. Damned !]]></description>
			<content:encoded><![CDATA[<p>Après avoir vidé le cache, il peut arriver que notre panda roux n&#8217;affiche plus les styles CSS ou les images: il n&#8217;y a plus aucune mise en page, juste du texte noir sur une page blanche. Damned !</p>
<p>La solution est de forcer le refresh de la page et du cache avec <code>Ctrl + Shift + R</code>.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3956&amp;md5=1a33b3c36f90782ed0c159749a4f4d5e" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/firefox-naffiche-plus-les-styles-css-ni-les-images/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Ffirefox-naffiche-plus-les-styles-css-ni-les-images%2F&amp;language=en_GB&amp;category=text&amp;title=Firefox+n%26%238217%3Baffiche+plus+les+styles+CSS+ni+les+images&amp;description=Apr%C3%A8s+avoir+vid%C3%A9+le+cache%2C+il+peut+arriver+que+notre+panda+roux+n%26%238217%3Baffiche+plus+les+styles+CSS+ou+les+images%3A+il+n%26%238217%3By+a+plus+aucune+mise+en+page%2C+juste+du...&amp;tags=cache%2Ccss%2Cfirefox%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/220px-Ailurus_fulgens_RoterPanda_LesserPanda.jpg" length="14320" type="image/jpg" />	</item>
		<item>
		<title>Effacer le cache DNS sous Mac Os</title>
		<link>http://sametmax.com/effacer-le-cache-dns-sous-mac-os/</link>
		<comments>http://sametmax.com/effacer-le-cache-dns-sous-mac-os/#comments</comments>
		<pubDate>Thu, 22 Nov 2012 21:17:30 +0000</pubDate>
		<dc:creator>Max</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[dns]]></category>
		<category><![CDATA[flush]]></category>
		<category><![CDATA[mac]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3257</guid>
		<description><![CDATA[Effacer le cache dns de votre Mac si vous avez encore l'ancienne IP en pinguant un site.]]></description>
			<content:encoded><![CDATA[<p>Si vous avez encore l&#8217;ancienne IP lorsque vous faites un ping sur un site c&#8217;est que votre cache DNS l&#8217;a mémorisée. Il faut parfois le réinitialiser (si vous changez votre site de serveur ou que vous ne pouvez plus accéder à un site en particulier).</p>
<p><strong>Ouvrez un Terminal:</strong><br />
<em>Dans <strong>Applications > Utilitaires > Terminal </strong></em></p>
<p>et tapez:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">lookupd -flushcache</pre></div></div>

<p>Si ça ne marche pas  essayez (pour les Mac plus récents):</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">dscacheutil -flushcache</pre></div></div>

<p><strong>Rappel:</strong><br />
la commande ping est toujours utile, c&#8217;est un outil qui sert à tester la conneciton entre 2 IPs.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">ping yahoo.<span style="color: black;">com</span>
PING yahoo.<span style="color: black;">com</span> <span style="color: black;">&#40;</span>72.30.38.140<span style="color: black;">&#41;</span>: <span style="color: #ff4500;">56</span> data <span style="color: #dc143c;">bytes</span>
<span style="color: #ff4500;">64</span> <span style="color: #dc143c;">bytes</span> <span style="color: #ff7700;font-weight:bold;">from</span> 72.30.38.140: icmp_seq=<span style="color: #ff4500;">0</span> ttl=<span style="color: #ff4500;">42</span> <span style="color: #dc143c;">time</span>=<span style="color: #ff4500;">275.592</span> ms
<span style="color: #ff4500;">64</span> <span style="color: #dc143c;">bytes</span> <span style="color: #ff7700;font-weight:bold;">from</span> 72.30.38.140: icmp_seq=<span style="color: #ff4500;">1</span> ttl=<span style="color: #ff4500;">42</span> <span style="color: #dc143c;">time</span>=<span style="color: #ff4500;">212.991</span> ms
<span style="color: #ff4500;">64</span> <span style="color: #dc143c;">bytes</span> <span style="color: #ff7700;font-weight:bold;">from</span> 72.30.38.140: icmp_seq=<span style="color: #ff4500;">2</span> ttl=<span style="color: #ff4500;">42</span> <span style="color: #dc143c;">time</span>=<span style="color: #ff4500;">255.605</span> ms</pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3257&amp;md5=3b4664b2d94f46daf51c378e96af766e" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/effacer-le-cache-dns-sous-mac-os/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Feffacer-le-cache-dns-sous-mac-os%2F&amp;language=en_GB&amp;category=text&amp;title=Effacer+le+cache+DNS+sous+Mac+Os&amp;description=Si+vous+avez+encore+l%26%238217%3Bancienne+IP+lorsque+vous+faites+un+ping+sur+un+site+c%26%238217%3Best+que+votre+cache+DNS+l%26%238217%3Ba+m%C3%A9moris%C3%A9e.+Il+faut+parfois+le+r%C3%A9initialiser+%28si+vous+changez+votre...&amp;tags=cache%2Cdns%2Cflush%2Cmac%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/11/terminator-main.jpg" length="181338" type="image/jpg" />	</item>
		<item>
		<title>Django cache illimité sur filesystem &#8211; Overrider FileBasedCache</title>
		<link>http://sametmax.com/django-cache-illimite-sur-filesystem-overrider-filebasedcache/</link>
		<comments>http://sametmax.com/django-cache-illimite-sur-filesystem-overrider-filebasedcache/#comments</comments>
		<pubDate>Sat, 13 Oct 2012 14:00:01 +0000</pubDate>
		<dc:creator>Max</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[django]]></category>
		<category><![CDATA[filesystem]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=2569</guid>
		<description><![CDATA[Mettre son site en cache dans le filesystem avec django sans limite d'entrée. ]]></description>
			<content:encoded><![CDATA[<p>Django propose plusieurs façons de mettre de son <a href="https://docs.djangoproject.com/en/1.4/topics/cache/">site en <em>cache</em></a>.<br />
Un de nos site gourmant en pages commencait à saturer le cache en mémoire alors il a fallut le basculer sur le filesystem, oui mais Django et son backend filesystem par défaut autorise 300 entrées dans le cache, ensuite il va effacer les anciennes pour les remplacer par les nouvelles, etc&#8230;</p>
<p>On peut régler le nombre d&#8217;entrées avec l&#8217;option MAX_ENTRIES dans les settings mais que fait django derrière ?<br />
Il va scanner votre répertoire de <em>cache</em> et <strong>compter tous les fichiers !</strong> Niveau performance on a vu mieux !</p>
<p>Voici un petit patch qui consiste à bypasser le comptage des fichiers dans le cas où l&#8217;ont veut un cache &#8220;infini&#8221;, ce qui soulève un autre problème, ça va <em>cacher</em> jusqu&#8217;à qu&#8217;il n&#8217;y ait plus de pages à cacher ou que le disque sature :)</p>
<p>dans un fichier cache.py que vous mettez où vous voulez (moi dans libs par ex):</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">#!/usr/bin/env python</span>
<span style="color: #808080; font-style: italic;"># -*- coding: utf-8 -*-</span>
&nbsp;
<span style="color: #483d8b;">&quot;&quot;&quot;
    Override FileBasedCache to extend entries cache count.
    avoid scanning all cache dir to count entries.
&nbsp;
&quot;&quot;&quot;</span>
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">os</span>
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">core</span>.<span style="color: black;">cache</span>.<span style="color: black;">backends</span>.<span style="color: black;">filebased</span> <span style="color: #ff7700;font-weight:bold;">import</span> FileBasedCache
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> CustomFileBasedCache<span style="color: black;">&#40;</span>FileBasedCache<span style="color: black;">&#41;</span>:
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> _get_num_entries<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
       count = <span style="color: #ff4500;">0</span>
       <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #008000;">self</span>._max_entries == <span style="color: #ff4500;">9999</span>: <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #ff4500;">0</span>
       <span style="color: #ff7700;font-weight:bold;">for</span> _,_,files <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #dc143c;">os</span>.<span style="color: black;">walk</span><span style="color: black;">&#40;</span><span style="color: #008000;">self</span>._dir<span style="color: black;">&#41;</span>:
           count += <span style="color: #008000;">len</span><span style="color: black;">&#40;</span>files<span style="color: black;">&#41;</span>
       <span style="color: #ff7700;font-weight:bold;">return</span> count
    _num_entries = <span style="color: #008000;">property</span><span style="color: black;">&#40;</span>_get_num_entries<span style="color: black;">&#41;</span></pre></div></div>

<p>dans les settings rajoutez à votre backend filesystem le backend customisé &#8220;libs.cache.CustomFileBasedCache&#8221; et l&#8217;option MAX_ENTRIES à -1:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">CACHE_DEFAULT_SECONDS = <span style="color: #ff4500;">3600</span>
CACHES = <span style="color: black;">&#123;</span>
   <span style="color: #483d8b;">'default'</span>: <span style="color: black;">&#123;</span>
       <span style="color: #483d8b;">'BACKEND'</span>: <span style="color: #483d8b;">'redis_cache.RedisCache'</span>,
       <span style="color: #483d8b;">'LOCATION'</span>: <span style="color: #483d8b;">'localhost:6379'</span>,
       <span style="color: #483d8b;">'TIMEOUT'</span>: CACHE_DEFAULT_SECONDS,
   <span style="color: black;">&#125;</span>,
   <span style="color: #483d8b;">'filesystem'</span>: <span style="color: black;">&#123;</span>
       <span style="color: #483d8b;">'BACKEND'</span>: <span style="color: #483d8b;">'libs.cache.CustomFileBasedCache'</span>,
       <span style="color: #483d8b;">'LOCATION'</span>: <span style="color: #483d8b;">'/var/tmp/django'</span>,
       <span style="color: #483d8b;">'TIMEOUT'</span>: CACHE_DEFAULT_SECONDS,
       <span style="color: #483d8b;">'OPTIONS'</span>: <span style="color: black;">&#123;</span>
            <span style="color: #483d8b;">'MAX_ENTRIES'</span>: <span style="color: #ff4500;">9999</span> <span style="color: #808080; font-style: italic;"># Set 9999 for unlimited cache</span>
       <span style="color: black;">&#125;</span>
   <span style="color: black;">&#125;</span>
<span style="color: black;">&#125;</span></pre></div></div>

<p>On évite du coup le os.walk de la méthode _get_num_entries qui dans le cas d&#8217;un grand nombre de fichiers en cache pourrait faire du mal à votre serveur.</p>
<p>A utiliser avec précaution car ça cache, ça cache, ça cache&#8230; :)</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=2569&amp;md5=106b8f1f8b13f0e2575541d9b27c49b3" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/django-cache-illimite-sur-filesystem-overrider-filebasedcache/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fdjango-cache-illimite-sur-filesystem-overrider-filebasedcache%2F&amp;language=en_GB&amp;category=text&amp;title=Django+cache+illimit%C3%A9+sur+filesystem+%26%238211%3B+Overrider+FileBasedCache&amp;description=Django+propose+plusieurs+fa%C3%A7ons+de+mettre+de+son+site+en+cache.+Un+de+nos+site+gourmant+en+pages+commencait+%C3%A0+saturer+le+cache+en+m%C3%A9moire+alors+il+a+fallut+le...&amp;tags=cache%2Cdjango%2Cfilesystem%2Cpython%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/10/Gear-Diary-Burning_Hard_Drive.jpeg" length="211841" type="image/jpg" />	</item>
		<item>
		<title>Optimiser Mysql en mettant en cache les requetes SELECT avec query_cache_size + benchmark</title>
		<link>http://sametmax.com/optimiser-mysql-en-utilisant-le-cache-query_cache_size/</link>
		<comments>http://sametmax.com/optimiser-mysql-en-utilisant-le-cache-query_cache_size/#comments</comments>
		<pubDate>Tue, 28 Aug 2012 23:25:24 +0000</pubDate>
		<dc:creator>Max</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[benchmark]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[mysql]]></category>
		<category><![CDATA[query_cache_size]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1912</guid>
		<description><![CDATA[Petite astuce pour mettre en cache les requetes mysql à la lecture. Avantage: On a juste le fichier de conf mysql à éditer, pas besoin de toucher aux applications.]]></description>
			<content:encoded><![CDATA[<p>Voici une petite astuce pour mettre en cache les requetes mysql. Pour donner une idée du gain j&#8217;ai fait un petit script de benchmark, le gain à la lecture est plutôt convaincant. Je ne suis pas benchmarkeur de profession alors si il y en a dans la salle qui pensent que ce test n&#8217;est pas réaliste merci d&#8217;apporter votre contribution ;)</p>
<p><strong>Editer le fichier my.cnf pour activer le cache des requetes:</strong></p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">query_cache_type = <span style="color: #000000;">1</span>
query_cache_size = 256M</pre></div></div>

<p>query_cache_type est le type de cache que l&#8217;on va adopter:<br />
0 = pas de cache<br />
1 = met en cache toutes les requetes sauf celles qui ont le flag &#8220;SELECT S_NO_CACHE&#8221;<br />
2 = met en cache seulement les requetes qui comportent le flag &#8220;SELECT SQL_CACHE&#8221;</p>
<p><strong>Ci dessous le script pour tester les perfs:</strong></p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">#!/usr/bin/python</span>
<span style="color: #808080; font-style: italic;"># -*- coding: utf-8 -*-</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> MySQLdb <span style="color: #ff7700;font-weight:bold;">as</span> mdb
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">timeit</span> <span style="color: #ff7700;font-weight:bold;">import</span> Timer 
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> benchmark<span style="color: black;">&#40;</span>cur<span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot;
        execute query
    &quot;&quot;&quot;</span>
    cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;SELECT * FROM Writers&quot;</span><span style="color: black;">&#41;</span>
    rows = cur.<span style="color: black;">fetchall</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
    <span style="color: #808080; font-style: italic;">#     for row in rows:</span>
    <span style="color: #808080; font-style: italic;">#         print row</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> create_fixtures<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot;
        Create dummy datas for test
    &quot;&quot;&quot;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">with</span> con:
        cur = con.<span style="color: black;">cursor</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;DROP TABLE IF EXISTS Writers&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;CREATE TABLE IF NOT EXISTS Writers(Id INT PRIMARY KEY AUTO_INCREMENT, Name VARCHAR(25))&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Jack London')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Honore de Balzac')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Lion Feuchtwanger')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Emile Zola')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Adolf Hitler')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Ronald McDonalds')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Mamie Nova')&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;INSERT INTO Writers(Name) VALUES('Sam &amp;amp; Max')&quot;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> set_query_cache<span style="color: black;">&#40;</span>query_cache_type=<span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot;
        Set query cache
        0 : Don't cache results in or retrieve results from the query cache.
        1 : Cache all query results except for those that begin with SELECT S_NO_CACHE.
        2 : Cache results only for queries that begin with SELECT SQL_CACHE
    &quot;&quot;&quot;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">with</span> con:
        cur = con.<span style="color: black;">cursor</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;SET GLOBAL query_cache_size = 16777216&quot;</span><span style="color: black;">&#41;</span>
        cur.<span style="color: black;">execute</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;SET SESSION query_cache_type = %s&quot;</span> <span style="color: #66cc66;">%</span> <span style="color: #008000;">str</span><span style="color: black;">&#40;</span>query_cache_type<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> 
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> start_benchmark<span style="color: black;">&#40;</span>nb_queries=<span style="color: #ff4500;">1000</span>, cached_queries=<span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot;
&nbsp;
    &quot;&quot;&quot;</span>
    <span style="color: #808080; font-style: italic;"># use cached query benchmark</span>
    <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">&quot;Starting benchmark: %s reads - query cache type = %s&quot;</span> <span style="color: #66cc66;">%</span> <span style="color: black;">&#40;</span>nb_queries, cached_queries<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># set query cache</span>
    set_query_cache<span style="color: black;">&#40;</span>cached_queries<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># run the test</span>
    t = Timer<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;queries()&quot;</span>, <span style="color: #483d8b;">&quot;from __main__ import queries&quot;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span> t.<span style="color: #dc143c;">timeit</span><span style="color: black;">&#40;</span>number=nb_queries<span style="color: black;">&#41;</span> 
&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> __name__ == <span style="color: #483d8b;">'__main__'</span>:
&nbsp;
    <span style="color: #808080; font-style: italic;"># connect to db</span>
    con = mdb.<span style="color: black;">connect</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'localhost'</span>, <span style="color: #483d8b;">'root'</span>, <span style="color: #483d8b;">'12345'</span>, <span style="color: #483d8b;">'test'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># create dummy datas</span>
    create_fixtures<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">with</span> con:
        cur = con.<span style="color: black;">cursor</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
        queries = <span style="color: #ff7700;font-weight:bold;">lambda</span>: benchmark<span style="color: black;">&#40;</span>cur=cur<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># launch benchmark</span>
    start_benchmark<span style="color: black;">&#40;</span>nb_queries=<span style="color: #ff4500;">10000</span>, cached_queries=<span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
    start_benchmark<span style="color: black;">&#40;</span>nb_queries=<span style="color: #ff4500;">10000</span>, cached_queries=<span style="color: #ff4500;">0</span><span style="color: black;">&#41;</span>
&nbsp;
    con.<span style="color: black;">close</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p><strong>Ce qui me donne&#8230;</strong></p>

<div class="wp_syntax"><div class="code"><pre class="shell" style="font-family:monospace;">python mysql_tests.py
Starting benchmark: 10000 reads - query cache type = 1
1.47591710091
Starting benchmark: 10000 reads - query cache type = 0
1.96538686752</pre></div></div>

<p><strong>Conclusion:</strong><br />
Il semblerait qu&#8217;en effet le gain dû au cache est plutôt pas mal, en plus c&#8217;est juste 2 params à mettre dans son fichier de config.</p>
<p>Faites part de vos retours, ça peut toujours servir ;)</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=1912&amp;md5=3a783ea7d90b2dcd7daf572c764a210e" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/optimiser-mysql-en-utilisant-le-cache-query_cache_size/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Foptimiser-mysql-en-utilisant-le-cache-query_cache_size%2F&amp;language=en_GB&amp;category=text&amp;title=Optimiser+Mysql+en+mettant+en+cache+les+requetes+SELECT+avec+query_cache_size+%2B+benchmark&amp;description=Voici+une+petite+astuce+pour+mettre+en+cache+les+requetes+mysql.+Pour+donner+une+id%C3%A9e+du+gain+j%26%238217%3Bai+fait+un+petit+script+de+benchmark%2C+le+gain+%C3%A0+la+lecture+est...&amp;tags=benchmark%2Ccache%2Cmysql%2Cquery_cache_size%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/08/asian-slut-bound-in-metal-fucking-machine.jpeg" length="21315" type="image/jpg" />	</item>
	</channel>
</rss>
