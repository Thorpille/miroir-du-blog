<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; md5</title>
	<atom:link href="http://sametmax.com/tag/md5/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 14:20:37 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>MD5 en Bash, PHP, Python et Javascript</title>
		<link>http://sametmax.com/md5-en-bash-php-python-et-javascript/</link>
		<comments>http://sametmax.com/md5-en-bash-php-python-et-javascript/#comments</comments>
		<pubDate>Mon, 18 Jun 2012 17:33:17 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Web]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[md5]]></category>
		<category><![CDATA[php]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=936</guid>
		<description><![CDATA[Bien que pour tout ce qui touche à la sécurité (comme les mots de passe ou les signatures) il vaille mieux préférer des fonctions plus sécurisées comme SHA-2, MD5 reste très pratique pour vérifier l'intégrité d'un fichier ou pour éviter les doublons.]]></description>
			<content:encoded><![CDATA[<p>Bien que pour tout ce qui touche à la sécurité (comme les mots de passe ou les signatures) il vaille mieux préférer des fonctions plus sécurisées comme SHA-2, <a href="https://fr.wikipedia.org/wiki/Md5">MD5</a> reste très pratique pour vérifier l&#8217;intégrité d&#8217;un fichier ou pour éviter les doublons.</p>
<h2>Bash</h2>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-n</span> <span style="color: #ff0000;">&quot;chaine à hasher&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> md5sum</pre></div></div>

<p>(N&#8217;oubliez pas <code>-n</code> sinon vous aurez un saut de ligne ajouté à la chaîne.)</p>
<p>ou</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">md5sum <span style="color: #000000; font-weight: bold;">/</span>fichier<span style="color: #000000; font-weight: bold;">/</span>a<span style="color: #000000; font-weight: bold;">/</span>hasher</pre></div></div>

<h2>Python</h2>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> hashlib
<span style="color: #66cc66;">&gt;&gt;&gt;</span> hashlib.<span style="color: #dc143c;">md5</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'chaine à hasher'</span><span style="color: black;">&#41;</span>.<span style="color: black;">hexdigest</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>ou</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> hashlib
<span style="color: #66cc66;">&gt;&gt;&gt;</span> hashlib.<span style="color: #dc143c;">md5</span><span style="color: black;">&#40;</span><span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;/fichier/a/hasher&quot;</span><span style="color: black;">&#41;</span>.<span style="color: black;">read</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>.<span style="color: black;">hexdigest</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>La lib <code>hashlib</code> contient également des fonctions pour les hashs sha1, sha224, sha256, sha384 et sha512.</p>
<h2>PHP</h2>

<div class="wp_syntax"><div class="code"><pre class="php" style="font-family:monospace;"><span style="color: #b1b100;">echo</span> <span style="color: #990000;">md5</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;chaine a hasher&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>ou</p>

<div class="wp_syntax"><div class="code"><pre class="php" style="font-family:monospace;"><span style="color: #b1b100;">echo</span> <span style="color: #990000;">md5</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">fread</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">fopen</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'/fichier/a/hasher'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'r'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> TAILLE_DU_FICHIER<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>A noter que l&#8217;encodage du terminal et code jouent sur le résultat. Rappelez-vous aussi que PHP et Python n&#8217;utilisent pas UTF-8 par défaut.</p>
<h2>Javascript</h2>
<p>Il n&#8217;existe pas de fonction cross-browser qui permette de récuperer le hash MD5 d&#8217;une chaîne, mais on peut utiliser des bibliothèques externes. La plus connue est celle de <a href="http://pajhome.org.uk/crypt/md5 ">Paul Johnston</a> que nous utilisons pour créer les hashs visuels de <a href="http://sametmax.com/vizhash-js-notre-implementation-libre-de-hash-visuel-utilisant-html5-canvas/">Vizhash.js</a>, et donc dans <a href="http://sametmax.com/0bin-implementation-python-de-zerobin-pastebin-chiffre-cote-client/">0bin</a>.</p>
<p>On insère le code:</p>

<div class="wp_syntax"><div class="code"><pre class="hrml" style="font-family:monospace;">&lt;script type=&quot;text/javascript&quot; src=&quot;md5.js&quot;&gt;&lt;/script&gt;</pre></div></div>

<p>Puis:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #000066;">alert</span><span style="color: #009900;">&#40;</span>hex_md5<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'chaine a hasher'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div>

<p>Comme Javascript n&#8217;a pas normalement accès au système de fichiers, il n&#8217;y a pas de version qui permette de calculer la somme de contrôle d&#8217;un fichier directement.</p>
<p><strong>UPDATE</strong> après commantaires:</p>
<p>Pour éviter les problèmes liés à l&#8217;encoding, il vaut mieux ouvrir le fichier en mode binaire: <code>fopen('fichier', rb')</code> et <code>open('fichier', 'rb')</code> en PHP et Python.</p>
<p>Pour PHP, peut utiliser directement md5_<code>file</code> pour calculer le MD5 d&#8217;un fichier. </p>
<p>Pour Python, dans le cas de gros fichiers, utiliser read() charde tout le contenu en mémoire. On peut éviter ça en utilisant une appache par morceaux, telle que:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #008000;">hash</span> = <span style="color: #dc143c;">md5</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">with</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'fichier'</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">as</span> f:
    <span style="color: #ff7700;font-weight:bold;">for</span> <span style="color: #dc143c;">chunk</span> <span style="color: #ff7700;font-weight:bold;">in</span> f.<span style="color: black;">read</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">500</span><span style="color: black;">&#41;</span>:
        <span style="color: #008000;">hash</span>.<span style="color: black;">update</span><span style="color: black;">&#40;</span><span style="color: #dc143c;">chunk</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #008000;">hash</span>.<span style="color: black;">hexdigest</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=936&amp;md5=96dbc77bb450a014288579846ece2111" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/md5-en-bash-php-python-et-javascript/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fmd5-en-bash-php-python-et-javascript%2F&amp;language=en_GB&amp;category=text&amp;title=MD5+en+Bash%2C+PHP%2C+Python+et+Javascript&amp;description=Bien+que+pour+tout+ce+qui+touche+%C3%A0+la+s%C3%A9curit%C3%A9+%28comme+les+mots+de+passe+ou+les+signatures%29+il+vaille+mieux+pr%C3%A9f%C3%A9rer+des+fonctions+plus+s%C3%A9curis%C3%A9es+comme+SHA-2%2C+MD5+reste...&amp;tags=bash%2Cjavascript%2Cmd5%2Cphp%2Cpython%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/06/2737.jpg" length="96251" type="image/jpg" />	</item>
	</channel>
</rss>
