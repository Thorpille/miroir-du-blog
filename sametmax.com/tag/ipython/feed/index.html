<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; ipython</title>
	<atom:link href="http://sametmax.com/tag/ipython/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Mon, 02 Dec 2013 10:02:45 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>WARNING: File not found. Did you forget to save?</title>
		<link>http://sametmax.com/warning-file-not-found-did-you-forget-to-save/</link>
		<comments>http://sametmax.com/warning-file-not-found-did-you-forget-to-save/#comments</comments>
		<pubDate>Sat, 26 Oct 2013 07:58:23 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[sublime text]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7541</guid>
		<description><![CDATA[Un lecteur nous a <a href="http://sametmax.com/profiter-du-notebook-de-ipython/#comment-15166">rapporter ce problème</a> quand il utilisait la commande magique <code>%edit</code> dans IPython avec Sublime Text.]]></description>
			<content:encoded><![CDATA[<p>Un lecteur nous a <a href="http://sametmax.com/profiter-du-notebook-de-ipython/#comment-15166">rapporté ce problème</a> quand il utilisait la commande magique <code>%edit</code> dans IPython avec Sublime Text.</p>
<p>Magie d&#8217;internet, un autre lecteur lui a répondu en comment, mais je me dis que donner un peu de visibilité à la réponse peut pas faire de mal, vu que je n&#8217;ai pas trouvé facilement la solution via <del datetime="2013-10-25T12:40:42+00:00">Google</del> DuckDuckGo.</p>
<p>L&#8217;idée est tout simplement d&#8217;utiliser l&#8217;option <code>-w</code> dans la ligne de commande pour appeler l&#8217;éditeur. En effet, sans cela l&#8217;appel à ST est non bloquant, et IPython perd la référence au processus sans avoir de valeur de retour.</p>
<p>Par exemple, dans votre <em>ipython_config.py</em> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">editor</span> = <span style="color: #483d8b;">&quot;sublime_text -w&quot;</span></pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7541&amp;md5=efc6c9f7dc228a171ec901c5c3d892ef" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/warning-file-not-found-did-you-forget-to-save/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fwarning-file-not-found-did-you-forget-to-save%2F&amp;language=en_GB&amp;category=text&amp;title=WARNING%3A+File+not+found.+Did+you+forget+to+save%3F&amp;description=Un+lecteur+nous+a+rapport%C3%A9+ce+probl%C3%A8me+quand+il+utilisait+la+commande+magique+%25edit+dans+IPython+avec+Sublime+Text.+Magie+d%26%238217%3Binternet%2C+un+autre+lecteur+lui+a+r%C3%A9pondu+en+comment%2C+mais...&amp;tags=ipython%2Cpython%2Csublime+text%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/tumblr_mv0imm4izr1r539hzo1_500.jpg" length="48151" type="image/jpg" />	</item>
		<item>
		<title>Profiter du notebook de IPython</title>
		<link>http://sametmax.com/profiter-du-notebook-de-ipython/</link>
		<comments>http://sametmax.com/profiter-du-notebook-de-ipython/#comments</comments>
		<pubDate>Wed, 23 Oct 2013 13:53:15 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7507</guid>
		<description><![CDATA[IPython est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec tellement d&#8217;astuces intégrées que ça donne envie de vomir des arc-en-ciel. Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : le notebook. Si vous êtes [...]]]></description>
			<content:encoded><![CDATA[<p><a href="http://ipython.org">IPython</a> est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec <a href="http://sametmax.com/tag/ipython/">tellement d&#8217;astuces intégrées</a> que ça donne envie de vomir des arc-en-ciel.</p>
<p>Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : <a href="http://ipython.org/notebook.html">le notebook</a>.</p>
<p>Si vous êtes scientifique ou manipulez pas mal de graphiques et de données numériques, <a href="http://www.randalolson.com/2012/05/12/a-short-demo-on-how-to-use-ipython-notebook-as-a-research-notebook/">c&#8217;est un must have</a>. Mais personnellement je trouve que c&#8217;est aussi un fantastique outil d&#8217;éducation, c&#8217;est génial pour les cours, les démos, et expérimenter avec du code inconnu.</p>
<p>Ça se présente sous la forme d&#8217;un shell IPython intégré dans une page Web, mais que l&#8217;on peut avoir sur son desktop, pas besoin d&#8217;avoir un serveur distant. Si vous avez un peu de temps, voici une vidéo de démo (avec un musique horrible) :</p>

<!-- iframe plugin v:2.3 - wordpress.org/extend/plugins/iframe/ -->
<iframe width="420" height="315" src="//www.youtube.com/embed/H6dLGQw9yFQ" frameborder="0" scrolling="no" class="iframe-class"></iframe>
<p>L&#8217;installation sous Ubuntu, c&#8217;est juste :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> ipython-notebook</pre></div></div>

<p>Pour Windows, il me semble, de mémoire, que c&#8217;est intégré dans l&#8217;exe. Pour Mac, je ne sais pas.</p>
<p>Et derrière il suffit de lancer la commande :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">ipython notebook</pre></div></div>

<p>Et il va vous ouvrir votre navigateur avec un onglet sur votre notebook.</p>
<p>L’intérêt principal du notebook est que TOUT le code est coloré et est modifiable comme sur dans fichier mais TOUT le code est exécutable (et affiche son résultat juste après chaque ligne) comme dans un shell iPython, avec completion du code. Le meilleur des deux mondes quoi.</p>
<p>En prime on peut embeder du <a href="http://daringfireball.net/projects/markdown/syntax">markdown</a> (et donc des liens, des images, etc) dans le même notebook, sauvegarder ça pour plus tard, le partager, etc.</p>
<p>Personnellement, j&#8217;ai ceci dans mon .bashrc :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">notebook <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #007800;">processes</span>=$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">ps</span> aux <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-i</span> <span style="color: #660033;">-P</span> <span style="color: #ff0000;">&quot;ipython notebook&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">wc</span> -l<span style="color: #7a0874; font-weight: bold;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$processes</span> <span style="color: #660033;">-lt</span> <span style="color: #000000;">2</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>
    <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">pushd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp
        <span style="color: #c20cb9; font-weight: bold;">nohup</span> ipython notebook <span style="color: #660033;">--port</span> <span style="color: #000000;">8889</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">&amp;</span>
        <span style="color: #7a0874; font-weight: bold;">popd</span>
    <span style="color: #000000; font-weight: bold;">else</span>
        firefox http:<span style="color: #000000; font-weight: bold;">//</span>127.0.0.1:<span style="color: #000000;">8889</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></div></div>

<p>Comme ça en une commande je lance le serveur du notebook sur le port que je veux si il ne tourne pas, et si il tourne, j&#8217;ouvre firefox et ouvre un onglet dessus.</p>
<p>Quelques autres options très utiles :</p>
<p><strong>&#8211;pylab </strong>: Charger plein de libs pour transformer IPython en un matlab killer.<br />
<strong>&#8211;gui=lib </strong> : permet d&#8217;intégrer l&#8217;event loop de QT, wx, gtk, etc.<br />
<strong>&#8211;ip=0.0.0.0</strong> : si on veut que d&#8217;autres puisse accéder à notre notebook.</p>
<p>Il existe un <a href="http://nbviewer.ipython.org/">espèce de pastebin</a> spécialement fait pour le notebook, qui permet de partager ses expérimentations.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7507&amp;md5=e3d5a0aacc62ee0e8ac80d4d60319d9e" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/profiter-du-notebook-de-ipython/feed/</wfw:commentRss>
		<slash:comments>21</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fprofiter-du-notebook-de-ipython%2F&amp;language=en_GB&amp;category=text&amp;title=Profiter+du+notebook+de+IPython&amp;description=IPython+est+un+des+outils+qui+me+font+trouver+la+programmation+Python+plus+agr%C3%A9able+que+dans+tous+les+autres+langages+%3A+un+shell+avec+tellement+d%26%238217%3Bastuces+int%C3%A9gr%C3%A9es+que+%C3%A7a+donne...&amp;tags=ipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/piNYkzq.jpg" length="97823" type="image/jpg" />	</item>
		<item>
		<title>Nouvelle config iPython</title>
		<link>http://sametmax.com/nouvelle-config-ipython/</link>
		<comments>http://sametmax.com/nouvelle-config-ipython/#comments</comments>
		<pubDate>Sun, 19 May 2013 17:24:44 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6158</guid>
		<description><![CDATA[J'ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.

Voici ce que j'ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>...]]></description>
			<content:encoded><![CDATA[<p>J&#8217;ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.</p>
<p>Voici ce que j&#8217;ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> = <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'doctest_mode on'</span>,
<span style="color: #483d8b;">'from __future__ import unicode_literals, absolute_import, division'</span>,
<span style="color: #483d8b;">'import sys'</span>,
<span style="color: #483d8b;">'import os'</span>,
<span style="color: #483d8b;">'import re'</span>,
<span style="color: #483d8b;">'import json'</span>,
<span style="color: #483d8b;">'import base64'</span>,
<span style="color: #483d8b;">'import calendar'</span>,
<span style="color: #483d8b;">'import csv'</span>,
<span style="color: #483d8b;">'import datetime'</span>,
<span style="color: #483d8b;">'import itertools'</span>,
<span style="color: #483d8b;">'import random'</span>,
<span style="color: #483d8b;">'import hashlib'</span>,
<span style="color: #483d8b;">'import tempfile'</span>,
<span style="color: #483d8b;">'import argparse'</span>,
<span style="color: #483d8b;">'import math'</span>,
<span style="color: #483d8b;">'import random'</span>,
<span style="color: #483d8b;">'import subprocess'</span>,
<span style="color: #483d8b;">'from glob import glob'</span>,
<span style="color: #483d8b;">'from uuid import uuid4'</span>,
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span>,
<span style="color: #483d8b;">'from collections import Counter, OrderedDict'</span>,
<span style="color: #483d8b;">&quot;&quot;&quot;
def initial_imports():
&nbsp;
    # ne faites pas ça dans un code de prod :-)
    global path, relativedelta, requests 
&nbsp;
    print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nImported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
&nbsp;
    try:
        from path import path
        print('Imported : &quot;path&quot;')
    except ImportError:
        print(&quot;'path' is not available&quot;)
&nbsp;
    try:
        from dateutil import relativedelta
        print('Imported : &quot;relativedelta&quot;')
    except ImportError:
        print(&quot;'dateutil' is not available&quot;)
&nbsp;
    try:
        import requests
        print('Imported : &quot;requests&quot;')
    except ImportError:
        print(&quot;'requests' is not available&quot;)
&nbsp;
    try:
        env = os.environ['VIRTUAL_ENV']
        print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nENV '{}'. You can import:<span style="color: #000099; font-weight: bold;">\\</span>n&quot;.format(os.path.basename(env)))
        cmd = subprocess.check_output([env + &quot;/bin/pip&quot;, &quot;freeze&quot;],
                                      stderr=subprocess.STDOUT).strip().split(&quot;<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
        p = re.compile(r'(^.*<span style="color: #000099; font-weight: bold;">\:</span><span style="color: #000099; font-weight: bold;">\s</span>)|((#|@).*$)|(==.*$)')
        print(&quot;'&quot; + &quot;', '&quot;.join(sorted(set(os.path.basename(p.sub('', f)) for f in cmd))) + &quot;'&quot;)
    except KeyError:
        pass
&nbsp;
    print('')
&quot;&quot;&quot;</span>,
<span style="color: #483d8b;">&quot;initial_imports()&quot;</span>
<span style="color: black;">&#93;</span></pre></div></div>

<p>Du coup, au démarrage d&#8217;iPython j&#8217;ai les bénéfices suivant :</p>
<ul>
<li>Comportement de Python 3 pour l&#8217;unicode, les imports et la division. Ils sont plus sains et facile à manipuler (plus besoin de préfixer de &#8216;u&#8217; les chaînes par exemple).</li>
<li>J&#8217;ai tout de suite sous la main une tonne de modules que j&#8217;utilise souvent sans avoir à les importer (os, datetime, random, etc).</li>
<li>J&#8217;importe aussi des modules optionnels (path, requests&#8230;).</li>
<li>Je sais si je suis dans un environnement virtuel, et si oui, ce qu&#8217;il y a installé dedans.</li>
</ul>
<p>Je vire aussi la bannière de démarrage :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> = <span style="color: #008000;">False</span></pre></div></div>

<p>Et hop, mon affichage au démarrage ressemble à ça :</p>
<pre>$ ipython
Exception reporting mode: Plain
Doctest mode is: ON

Imported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'

'path' is not available
'dateutil' is not available
Imported : "requests"

ENV 'my_env'. You can import:

'BeautifulSoup', 'Django', 'Fabric', 'Jinja2', 'Pillow', 'Pygments', 'Sphinx', 'URLObject', 'Werkzeug', 'argparse', 'beautifulsoup4', 'colorlog', 'distribute', 'django-appconf', 'django-bootstrap-pagination', 'django-bootstrap-toolkit', 'django-compressor', 'django-debug-toolbar', 'django-extensions', 'django-guardian', 'django-loginas', 'django-model-utils', 'django-pdb', 'django-pytest', 'django-rest-framework.git', 'django-template-repl', 'docutils', 'easy-thumbnails', 'feedparser', 'gunicor
</pre>
<p>Ça fait un gros bloc visuellement, mais ça ne s&#8217;affiche qu&#8217;une fois, et le délai est acceptable.</p>
<p>Si j&#8217;ai besoin de l&#8217;info à nouveau, je peux toujours appeler :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">initial_imports<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Que ce genre de choses soient possibles et faciles me font adorer Python. La force du langage, ce n&#8217;est pas seulement son core, c&#8217;est tout son environnement, ses libs, ses outils qui gravitent autour qui rendent l&#8217;expérience de dev fantastique.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=6158&amp;md5=6eff89bdb98100a1faaf0fa4efa6d050" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/nouvelle-config-ipython/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fnouvelle-config-ipython%2F&amp;language=en_GB&amp;category=text&amp;title=Nouvelle+config+iPython&amp;description=J%26%238217%3Bai+bricol%C3%A9+une+config+pour+iPython+derni%C3%A8rement.+Rappelez-vous%2C+on+peut+compl%C3%A8tement+customiser+ce+shell.+Voici+ce+que+j%26%238217%3Bai+dans+mon+.%2F.config%2Fipython%2Fprofile_default%2Fipython_config.py%3A+c.TerminalIPythonApp.exec_lines+%3D+%26%2391%3B+%27doctest_mode+on%27%2C+%27from+__future__+import+unicode_literals%2C...&amp;tags=ipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/5e4itlu.jpg" length="273612" type="image/jpg" />	</item>
		<item>
		<title>Programmer confortablement en Python sous Windows</title>
		<link>http://sametmax.com/programmer-confortablement-en-python-sous-windows/</link>
		<comments>http://sametmax.com/programmer-confortablement-en-python-sous-windows/#comments</comments>
		<pubDate>Tue, 25 Dec 2012 19:05:46 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[windows]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3865</guid>
		<description><![CDATA[Python est un langage qui demande très peu pour programmer: pas d'IDE, de compilateur, de RAD ou autre. Juste un petit éditeur de texte (<a href="http://notepad-plus-plus.org/fr/">notepad++</a> fait très bien l'affaire) et la ligne de commande.

Problème, la ligne de commande est à chier sous Windows. Alors oui, vous pouvez coder dans ces conditions, mais franchement, pourquoi ne pas passer 30 minutes pour vous mettre à l'aise ?]]></description>
			<content:encoded><![CDATA[<p>Python est un langage qui demande très peu pour programmer: pas d&#8217;IDE, de compilateur, de RAD ou autre. Juste un petit éditeur de texte (<a href="http://notepad-plus-plus.org/fr/">notepad++</a> fait très bien l&#8217;affaire) et la ligne de commande.</p>
<p>Problème, la ligne de commande est à chier sous Windows. Alors oui, vous pouvez coder dans ces conditions, mais franchement, pourquoi ne pas passer 30 minutes pour vous mettre à l&#8217;aise ?</p>
<p>Max est sous Mac, et je suis sous Ubuntu, mais c&#8217;est pas pour ça qu&#8217;on oublie nos racines. On a tous les deux commencé sous Windows. Perso, j&#8217;ai fait mes premiers clics de souris sur 3.1 (avant j&#8217;avais pas de souris :-)). Alors suivez le guide.</p>
<h2>Avoir les commandes Python sous la main</h2>
<p>Les commandes installées par des scripts Python, parfois même la commande <code>python</code> elle-même, ne sont pas toujours accessibles depuis la console. Assurez-vous donc d&#8217;avoir bien &#8220;c:\Python27;c:\Python27\Scripts;&#8221; <a href="http://sametmax.com/ajouter-un-chemin-a-la-variable-denvironnement-path-sous-windows/">à la fin de votre System PATH</a>. </p>
<h2>Améliorer la console</h2>
<p>Une fois que vous avez <a href="http://www.python.org/download/releases/2.7.5/">installé Python</a> (toujours v2.7 en 32 bits. TOUJOURS), vous avez accès au shell. Premier constat, copier / coller dans un terminal cmd.exe est aussi plaisant qu&#8217;une coloscopie un lendemain de cuite (pour vous et le praticien).</p>
<p>Idéalement, il faut installer un terminal alternatif. Le logiciel opensource Console2 est parfait pour ça: on peut faire du copier / coller facilement, il a des onglets, on peut régler la taille de la fenêtre&#8230;</p>
<p>Pour l&#8217;installer suffit de <a href="http://sourceforge.net/projects/console/">télécharger le zip</a>, l&#8217;extraire dans &#8220;C:\Programmes Files&#8221; et faire un raccourci sur le bureau vers &#8220;C:\Program Files\Console2\Console.exe&#8221;.</p>
<h2>Améliorer le shell Python</h2>
<p>Le shell Python est fantastique, à l&#8217;exception de tous les autres. Donc votre premier réflexe, c&#8217;est bien entendu d&#8217;installer <a href="http://pypi.python.org/pypi/ipython">iPython</a>. Sauf que Windows n&#8217;a pas readline, du coup vous n&#8217;allez pas avoir la coloration du prompt ni la completion du code. Ca craint.</p>
<p>C&#8217;est là que <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> va encore une fois nous sauver la mise:</p>
<p><code>pip install pyreadline</code></p>
<p>Et votre shell iPython, lancé depuis Console2 est maintenant un outil presque aussi confortable à utiliser que sous Linux ou Mac avec historique, auto indent et tout le toutim. Presque, faut pas abuser non plus.</p>
<h2>Et pour quelques outils de plus</h2>
<p>Windows n&#8217;ayant pas de truc comme grep, installer <a href="http://sametmax.com/grin-le-grep-python-sous-steroid/">grin </a>va vous permettre de rapidement et confortablement chercher dans votre code. <code>Donc, pip install grin</code>.</p>
<p>Mais aller directement dans le dossier voulu depuis la ligne de commande à grand coup de <code>cd</code>, c&#8217;est relou. On va arranger ça.</p>
<p>Ouvre l&#8217;éditeur de registre (&#8220;Windows + R&#8221; puis regedit puis &#8220;enter&#8221;) et naviguez dans l&#8217;arboresence jusqu&#8217;à:</p>
<p><code>HKEY_CLASSES_ROOT\Directory\shell\</code></p>
<p>Cliquez droit dans le panel de droite, et faites &#8220;Nouveau > Clé&#8221; et appelez la clé &#8220;open_shell&#8221;. Puis cliquez sur le dossier ainsi créé, et dans le panel de droite, cliquez sur l&#8217;espèce d&#8217;icône &#8220;AB&#8221; intitulée &#8220;(Par défaut)&#8221;, et donnez lui la valeur &#8220;Ouvrir Console2 ici&#8221;.</p>
<p>Dans le dossier &#8220;open_shell&#8221;, créez un dossier &#8220;Command&#8221; (en faisant &#8220;Clic Droit > Nouveau > Clé&#8221;).</p>
<p>Donnez à &#8220;(Par défaut)&#8221; pour valeur le chemin vers Console2 suivit de &#8216;-d &#8220;%1&#8243;&#8216;, par exemple pour moi:</p>
<p><code>"C:\Program Files (x86)\Console2\Console.exe" -d "%1"</code></p>
<p>Fermer l&#8217;explorateur de fichiers, et réouvrez le. Hop ! Vous avez une nouvelle entrée dans le menu du clic droit qui permet d&#8217;ouvrir Console2 dans n&#8217;importe quel dossier.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3865&amp;md5=1cf514409dc060db194a6c96ee4c058c" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/programmer-confortablement-en-python-sous-windows/feed/</wfw:commentRss>
		<slash:comments>26</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fprogrammer-confortablement-en-python-sous-windows%2F&amp;language=en_GB&amp;category=text&amp;title=Programmer+confortablement+en+Python+sous+Windows&amp;description=Python+est+un+langage+qui+demande+tr%C3%A8s+peu+pour+programmer%3A+pas+d%26%238217%3BIDE%2C+de+compilateur%2C+de+RAD+ou+autre.+Juste+un+petit+%C3%A9diteur+de+texte+%28notepad%2B%2B+fait+tr%C3%A8s+bien+l%26%238217%3Baffaire%29+et...&amp;tags=ipython%2Cpython%2Cwindows%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/img_0203.jpg" length="141409" type="image/jpg" />	</item>
		<item>
		<title>Quelques bonnes raisons de plus d&#8217;utiliser iPython</title>
		<link>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/</link>
		<comments>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/#comments</comments>
		<pubDate>Sun, 23 Dec 2012 18:01:36 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[docstring]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3644</guid>
		<description><![CDATA[Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.]]></description>
			<content:encoded><![CDATA[<p>Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.</p>
<p>Voici quelques commandes qui vous donneront moult raisons de plus pour très vite installer ce shell alternatif.</p>
<h2>Autocall</h2>
<p>Taper des parenthèses et des guillemets, c&#8217;est sooooooo 1995.  iPython peut vous les rajouter automatiquement dans les appels de fonctions, il faut juste préfixer de &#8220;/&#8221;, &#8220;,&#8221; ou &#8220;;&#8221; votre appel de fonction pour qu&#8217;il fasse la conversion:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">/f <span style="color: #ff4500;">1</span>,<span style="color: #ff4500;">2</span> =<span style="color: #66cc66;">&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span>,<span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
,f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> =<span style="color: #66cc66;">&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1&quot;</span>,<span style="color: #483d8b;">&quot;2&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">;</span>f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> =<span style="color: #66cc66;">&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1 2&quot;</span><span style="color: black;">&#41;</span></pre></div></div>

<h2>Accès au shell système</h2>
<p>Préfixez votre commande d&#8217;un &#8220;!&#8221; bien couillu, et iPython va vous exécuter ça dans le shell système (par exemple bash) et vous retourner le résulat:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">!</span> cat /etc/fstab | grep <span style="color: #483d8b;">'ext4'</span>
UUID=e33c5b98-<span style="color: #ff4500;">1570</span>-44d6-a32f-5e7970e1e588 /               ext4    errors=remount-ro <span style="color: #ff4500;">0</span>       <span style="color: #ff4500;">1</span></pre></div></div>

<p>Oui, oui, on est dans un shell Python là. Ou comment bien faire chier la coloration syntaxique de votre blog.</p>
<p>Et on peut mettre tout ça dans une variable et le traiter en Python derrière:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> files = <span style="color: #66cc66;">!</span>ls
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span>f.<span style="color: black;">upper</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> f <span style="color: #ff7700;font-weight:bold;">in</span> files<span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #483d8b;">'BUREAU'</span>, <span style="color: #483d8b;">'DOCUMENTS'</span>, <span style="color: #483d8b;">'EXAMPLES.DESKTOP'</span>, <span style="color: #483d8b;">'IMAGES'</span>, <span style="color: #483d8b;">'MOD<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a8LES'</span>, <span style="color: #483d8b;">'MUSIQUE'</span>, <span style="color: #483d8b;">'PUBLIC'</span>, <span style="color: #483d8b;">'T<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9L<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9CHARGEMENTS'</span>, <span style="color: #483d8b;">'UBUNTU ONE'</span>, <span style="color: #483d8b;">'VID<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9OS'</span>,<span style="color: black;">&#93;</span></pre></div></div>

<p>A noter que tout est exécuté dans un autre process, ainsi <code>!cd</code> n&#8217;aura aucun effet. Mais tout est prévu: <code>%cd</code> et <code>%pwd</code> proxient tout ça vers <code>os.chdir</code> et <code>os.getcwd</code> :-)</p>
<h2>Debugger</h2>
<p>Entrez <code>%timeit</code> expression pour qu&#8217;il qu&#8217;iPython vous l&#8217;exécute 10000000 fois et vous donne sa performance.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">%</span><span style="color: #dc143c;">timeit</span> x=<span style="color: #ff4500;">2</span><span style="color: #66cc66;">**</span><span style="color: #ff4500;">100</span>
<span style="color: #ff4500;">10000000</span> loops, best of <span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">22.5</span> ns per loop</pre></div></div>

<p>Autre commande: <code>%pdb</code> vous lancera automatiquement votre <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">débuggeur favoris</a> si une exception se lève durant votre session.</p>
<h2>Se faciliter la vie</h2>
<p><code>%edit</code> ouvre un editeur (par défault VI sous nunux, mais c&#8217;est <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">configurable</a>), et si vous sauvegardez, le contenu tapé est récupéré et exécuté par iPython. Génial pour les bouts de code trop relou à taper sur le prompt.</p>
<p><code>%gui qt|wx|gtk</code> lance l&#8217;intégration de la main loop d&#8217;un des toolkits graphiques afin pour de pouvoir faire mumuse avec des widgets sans bloquer votre shell.</p>
<p>Vous étiez vous demandé pourquoi le prompt iPython était plein de <code>In</code> et de <code>Out</code>, et pas de <code>>>></code> ? Parce que tout l&#8217;historique est numéroté, et accessible:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: In<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: u<span style="color: #483d8b;">'1 + 1'</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span></pre></div></div>

<p>Mais vous pouvez aussi utiliser <code>%doctest_mode</code> qui donne à votre prompt un air de shell Python normal. L&#8217;avantage ? On peut copier le contenu d&#8217;un autre shell dedans (et donc d&#8217;une doctest) avec les chevrons !</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">49</span><span style="color: black;">&#93;</span>: <span style="color: #66cc66;">%</span>doctest_mode
<span style="color: #008000;">Exception</span> reporting mode: Plain
Doctest mode <span style="color: #ff7700;font-weight:bold;">is</span>: ON
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> pom <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'pom'</span>, <span style="color: #483d8b;">'pom'</span>, <span style="color: #483d8b;">'pom'</span>, <span style="color: #483d8b;">'pom'</span><span style="color: black;">&#41;</span>:
...     ...     <span style="color: #ff7700;font-weight:bold;">print</span> pom
...     ... 
<span style="color: black;">pom</span>
pom
pom
pom</pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3644&amp;md5=50b7961852b0af705abf2486fc538929" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fquelques-bonnes-raisons-de-plus-dutiliser-ipython%2F&amp;language=en_GB&amp;category=text&amp;title=Quelques+bonnes+raisons+de+plus+d%26%238217%3Butiliser+iPython&amp;description=Le+shell+Python+est+vraiment+pratique+pour+exp%C3%A9rimenter%2C+apprendre+le+langage%2C+tester+un+snippet+vitos+ou+administrer+son+site+%C3%A0+distance.+Mais+iPython%2C+ola%2C+iPython%2C+il+d%C3%A9chire+sa+g%C3%A9nitrice+avec...&amp;tags=docstring%2Cipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/277EB_mac-gyver.jpg" length="14600" type="image/jpg" />	</item>
		<item>
		<title>Personnalisez le démarrage d&#8217;iPython</title>
		<link>http://sametmax.com/personnalisez-le-demarrage-dipython/</link>
		<comments>http://sametmax.com/personnalisez-le-demarrage-dipython/#comments</comments>
		<pubDate>Sun, 16 Dec 2012 13:14:54 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[configuration]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3643</guid>
		<description><![CDATA[iPython, c'est bon. Et ça peut être encore meilleur.]]></description>
			<content:encoded><![CDATA[<p><a href="http://ipython.org/">iPython</a>, c&#8217;est bon. Et ça peut être encore meilleur.</p>
<p>Avant on ajoutait un peu de sel à notre super shell en éditant les fichiers <em>.ipython/ipythonrc</em> et <em>.ipython/ipy_user_conf.py</em>. Mais ça c&#8217;était avant.</p>
<p>Maintenant on fait :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">$ ipython profile create</pre></div></div>

<p>Ce qui va créer un fichier <code>~/.config/ipython/profile_default/ipython_config.py</code> (et <code>ipython_qtconsole_config.py</code> si vous avez installé la version qt).</p>
<p>Il ne vous reste plus qu&#8217;à éditer ce fichier pour personnaliser le démarrage de iPython.</p>
<h2>Executer du code au démarrage</h2>
<p>N&#8217;importe quelle ligne de code Python ou de commande magique (les trucs qui commencent pas &#8216;%&#8217; qui ne fonctionnent que dans iPython) !</p>
<p>Très utile pour les imports par exemple. Voici ce que je fais moi au démarrage :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> = <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'%doctest_mode'</span>,
<span style="color: #483d8b;">'import os, sys, re, json'</span>,
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span>,
<span style="color: #483d8b;">''</span><span style="color: #483d8b;">'
try:
    from path import path
except ImportError:
    pass
'</span><span style="color: #483d8b;">''</span>,
<span style="color: #483d8b;">''</span><span style="color: #483d8b;">'
try:
    import requests
except ImportError:
    pass
'</span><span style="color: #483d8b;">''</span>,
<span style="color: #483d8b;">''</span><span style="color: #483d8b;">'
try:
    from batbelt.structs import *
    from batbelt.objects import attr
    from batbelt.strings import slugify, normalize, json_dumps, json_loads
except ImportError:
    pass
'</span><span style="color: #483d8b;">''</span>
<span style="color: black;">&#93;</span></pre></div></div>

<p>Du coup j&#8217;ai quasiment jamais besoin d&#8217;importer un truc, car ce que j&#8217;utilise le plus est déjà là. <code>%doctest_mode</code> me permet de coller des docstrings sans me fouler.</p>
<h2>Programmation graphique</h2>
<p>iPython possède une boucle principale. Les toolkits graphiques aussi. Si vous faites vos essais du code du second dans le premier, ça va bloquer. Heureusement on peut demander à iPython d&#8217;intégrer la main loop d&#8217;un des toolkits graphiques les plus célèbres en choisissant parmi : &#8216;qt&#8217;, &#8216;wx&#8217;, &#8216;gtk&#8217;, &#8216;glut&#8217;, &#8216;pyglet&#8217; et &#8216;osx&#8217; et en settant :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">gui</span> = <span style="color: #483d8b;">'qt'</span></pre></div></div>

<h2>Virer le header</h2>
<p>Quand on lance le shell, il vous raconte sa vie. Pour lui dire de fermer sa gueule :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> = <span style="color: #008000;">False</span></pre></div></div>

<h2>Lancer un script complet</h2>
<p>Bon, ça c&#8217;est si vous avez de gros besoins&#8230;</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">file_to_run</span> = <span style="color: #483d8b;">'/path/to/script.py'</span></pre></div></div>

<h2>Sauter la confirmation à la fermeture</h2>
<p>Oui, je suis sûr te vouloir te fermer connard ! Tu crois que j&#8217;ai appuyé sur Ctrl + d par erreur en éternuant ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">confirm_exit</span> = <span style="color: #008000;">False</span></pre></div></div>

<h2>Choisir son éditeur externe</h2>
<p>Si vous tapez <code>%edit</code> dans iPython, il ouvre un éditeur. Vous tapez votre code, vous sauvegardez, vous fermez. Et iPython récupère le code et l&#8217;éxécute. Par défault il utilise VI. On peut faire mieux.</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">editor</span> = <span style="color: #483d8b;">'/chemin/vers/sublime-text -w'</span></pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3643&amp;md5=22aa99cf8693fdd6e3352e54de918821" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/personnalisez-le-demarrage-dipython/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fpersonnalisez-le-demarrage-dipython%2F&amp;language=en_GB&amp;category=text&amp;title=Personnalisez+le+d%C3%A9marrage+d%26%238217%3BiPython&amp;description=iPython%2C+c%26%238217%3Best+bon.+Et+%C3%A7a+peut+%C3%AAtre+encore+meilleur.+Avant+on+ajoutait+un+peu+de+sel+%C3%A0+notre+super+shell+en+%C3%A9ditant+les+fichiers+.ipython%2Fipythonrc+et+.ipython%2Fipy_user_conf.py.+Mais+%C3%A7a+c%26%238217%3B%C3%A9tait...&amp;tags=configuration%2Cipython%2Cpython%2Cshell%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/6089448781_03743e140c_z.jpg" length="196127" type="image/jpg" />	</item>
		<item>
		<title>Lancer automatiquement le debugger à la levée d&#8217;une exception Python</title>
		<link>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/</link>
		<comments>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/#comments</comments>
		<pubDate>Tue, 04 Sep 2012 14:26:55 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1996</guid>
		<description><![CDATA[Si vous avez bien lu <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">l'article sur pdb</a>, vous devez être accroc à <code>set_trace()</code> pour debugger vos programmes.

Oui mais quand votre programme plante, il faut lancer l'éditeur, trouver la ligne, faire un <code>try</code>/<code>except</code>, et en plus ramer si c'est dans une boucle.

On peut faire mieux.]]></description>
			<content:encoded><![CDATA[<p>Si vous avez bien lu <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">l&#8217;article sur pdb</a>, vous devez être accroc à <code>set_trace()</code> pour debugger vos programmes.</p>
<p>Oui mais quand votre programme plante, il faut lancer l&#8217;éditeur, trouver la ligne, faire un <code>try</code>/<code>except</code>, et en plus ramer si c&#8217;est dans une boucle.</p>
<p>On peut faire mieux. Si vous avez <code>ipdb</code> et <code>ipython</code> installés (et si ce n&#8217;est pas le cas, un <code><a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> install</code> les deux car on ne peut pas vivre sans), au lieu de lancer votre script ainsi:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">python script.py</pre></div></div>

<p>Lancez le ainsi:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">ipython <span style="color: #660033;">--pdb</span> script.py</pre></div></div>

<p>Et à la première exception, votre shell va directement s&#8217;ouvrir en mode debugger à la bonne ligne.</p>
<p>C&#8217;est pas merveilleux, ça ?</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=1996&amp;md5=4814f80923abad8d307f002b93b0deb6" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/lancer-automatiquement-le-debugger-a-la-lever-dune-exception-python/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Flancer-automatiquement-le-debugger-a-la-lever-dune-exception-python%2F&amp;language=en_GB&amp;category=text&amp;title=Lancer+automatiquement+le+debugger+%C3%A0+la+lev%C3%A9e+d%26%238217%3Bune+exception+Python&amp;description=Si+vous+avez+bien+lu+l%26%238217%3Barticle+sur+pdb%2C+vous+devez+%C3%AAtre+accroc+%C3%A0+set_trace%28%29+pour+debugger+vos+programmes.+Oui+mais+quand+votre+programme+plante%2C+il+faut+lancer+l%26%238217%3B%C3%A9diteur%2C+trouver+la...&amp;tags=ipython%2Cpdb%2Cpython%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/09/701512.jpg" length="7871" type="image/jpg" />	</item>
		<item>
		<title>Debugger en Python: les bases de pdb</title>
		<link>http://sametmax.com/debugger-en-python-les-bases-de-pdb/</link>
		<comments>http://sametmax.com/debugger-en-python-les-bases-de-pdb/#comments</comments>
		<pubDate>Sun, 27 May 2012 04:40:05 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[debug]]></category>
		<category><![CDATA[ipdb]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[pdb]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=750</guid>
		<description><![CDATA[Mettez vos prints de debug au placard, et apprenez à programmer debugger comme un homme, un vrai. Un homme qui n'a pas peur d'avoir un mug USB. Heu...]]></description>
			<content:encoded><![CDATA[<p>Mettre une série de <code>print</code> dans son programme a ses limites, et python possède nativement une excellente alternative.</p>
<p>Pour la plupart des langages, on utilise un debugger intégré dans un IDE ou un programme à part. Ou alors on se contente de fonctions telles que <code>var_dump</code> ou <code>print_r</code>. En Python, on utilise le module <code>pdb</code>.</p>
<p>Quand vous voulez savoir ce qui se passe à un endroit du programme, à la ligne précise où vous souhaitez explorer le problème, ajoutez à votre code :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">pdb</span><span style="color: #66cc66;">;</span> <span style="color: #dc143c;">pdb</span>.<span style="color: black;">set_trace</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Et relancez votre programme <strong>depuis une console</strong>.</p>
<p>L&#8217;exécution du programme va alors se figer, et dans la console vous aurez accès à un shell special:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: black;">&#40;</span>Pdb<span style="color: black;">&#41;</span></pre></div></div>

<h2>A quoi sert pdb</h2>
<p>Dans ce shell vous pouvez entrer deux choses:</p>
<ul>
<li>N&#8217;importe quelle expression Python qui tient sur une ligne.</li>
<li>Des commandes <code>pdb</code> speciales.</li>
</ul>
<p>Ce qui est génial, c&#8217;est que toute expression Python sera éxécutée dans le context de la ligne où le programme s&#8217;est arrêté.</p>
<p>Donc vous pouvez faire des <code>print</code>, des <code>if</code>, des <a href="http://sametmax.com/python-love-les-listes-en-intention-partie/">listes en intention</a>, bref, tous les tests que vous voulez, avec les variables du programme dans l&#8217;état où elles sont <strong>à ce moment là</strong>.</p>
<p>Vous avez accès à tout le code, y compris vos propres objets, classes et fonctions. En fait, vous avez même accès à l&#8217;import, et donc à toutes les librairies importables.</p>
<h2>L&#8217;essentiel des commandes</h2>
<p>En plus de pouvoir exécuter du Python, vous pouvez utiliser des commandes. Il y en a des nombreuses, mais vous pouvez tirer l&#8217;essentiel de <code>pdb</code> avec six d&#8217;entre elles:</p>
<ul>
<li> <code>l</code>: Liste quelques lignes de code avant et après là où vous vous trouver. Utile pour se resituer dans le contexte du programme. &#8216;l&#8217; pour &#8216;list&#8217;.</li>
<li> <code>n</code>: Exécute la ligne suivante. Vous pouvez ainsi continuer l&#8217;exécution du programme de bout en bout, ligne par ligne, et le tester en entier. &#8216;n&#8217; pour &#8216;next&#8217;.</li>
<li> <code>s</code>: Si votre ligne contient un appel de fonction ou de méthode, rentre dans à l&#8217;intérieur. &#8216;s&#8217; pour &#8216;step in&#8217;.</li>
<li> <code>r</code>: Si vous êtes dans une fonction ou une méthode, celà permet d&#8217;en sortir et de passer dans le scope du dessus. &#8216;r&#8217; pour &#8216;return&#8217;.</li>
<li><code>unt</code>: Si vous êtes à la dernière ligne d&#8217;une boucle, permet de reprendre l&#8217;exécution jusqu&#8217;à la sortie de la boucle. &#8216;unt&#8217; pour &#8216;until&#8217;.</li>
<li><code>q</code>: Quitte brutalement le programme en le faisant crasher. &#8216;q&#8217; pour &#8216;quit&#8217;.</li>
<li><code>c</code>: Quitte le debugger et continue l&#8217;exécution du programme normalement. Tous les changements que vous avez fait dans le code sont pris en compte. &#8216;c&#8217; pour &#8216;continue&#8217;.</li>
</ul>
<p>Pour utiliser une commande, il suffit de taper la lettre et d&#8217;appuyer sur <code>entrée</code>. Si vous appuyez sur <code>entrée</code> sans rien saisir, la commande précédente est exécutée, ce qui vous évitera de spammer le shell de commandes <code>n</code>.</p>
<h2>Les limites de pdb</h2>
<ul>
<li>Les commandes ont priorité sur le code Python. Vous ne pouvez donc pas assigner des variables dont le nom est en une seul lettre. C&#8217;est ennuyeux pour accéder à la variable &#8216;<code>i</code>&#8216; dans une boucle for. Dans ce cas, prefixez &#8216;<code>i</code>&#8216; par un &#8216;<code>!</code>&#8216; et il sera considéré comme du Python, et non comme une commande.</li>
<li>Si vous mettez <code>set_trace</code> dans une boucle, le debugger va se lancer à chaque tour de boucle, ce qui embrouille tout. Dans ce cas, et dans tous les cas où vous voulez que le debugger se lance à un moment particulier, utilisez un <code>if</code> ou un <code>try/except</code> pour que <code>set_trace</code> ne soit appelé que dans un cas précis.</li>
<li>Dans le cas de threads, de processus séparés, ou quand vous n&#8217;avez pas accès à <code>stdout</code>, <code>pdb</code> ne peut rien pour vous. Dans ce cas, le module <a href="http://docs.python.org/library/logging.html?highlight=logging#logging">logging</a> est votre ami.</li>
</ul>
<h2>pdb + ipython = ipdb</h2>
<p>Si vous êtes fan d&#8217;<a href="http://ipython.org/">ipython</a>, un coup de <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a>:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> ipdb</pre></div></div>

<p>Et ensuite dans le programme:</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> ipdb<span style="color: #66cc66;">;</span> ipdb.<span style="color: black;">set_trace</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Vous aurez alors accès au shell de <code>pdb</code>, mais avec en prime les commandes et l&#8217;autocompletion d&#8217;ipython</p>
<h2>Mettre un break point programmatiquement en javascript</h2>
<p>Dans une moindre mesure, on peut aussi lancer un shell de debug depuis javascript. Ouvrez votre fenêtre d&#8217;outils Web intégrés au navigateur, Firebug ou équivalent.</p>
<p>Normalement il faut trouver votre script, puis la ligne, et mettre un break point.</p>
<p>Mais dans les navigateurs récents, vous pouvez juste ajouter:</p>

<div class="wp_syntax"><div class="code"><pre class="javascript" style="font-family:monospace;"><span style="color: #003366; font-weight: bold;">debugger</span><span style="color: #339933;">;</span></pre></div></div>

<p>A la ligne voulue, et recharger la page. Votre outil de debuggage se mettra au break point automatiquement</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=750&amp;md5=318727230fcedf1e61d56d56e56ab30a" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/debugger-en-python-les-bases-de-pdb/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fdebugger-en-python-les-bases-de-pdb%2F&amp;language=en_GB&amp;category=text&amp;title=Debugger+en+Python%3A+les+bases+de+pdb&amp;description=Mettre+une+s%C3%A9rie+de+print+dans+son+programme+a+ses+limites%2C+et+python+poss%C3%A8de+nativement+une+excellente+alternative.+Pour+la+plupart+des+langages%2C+on+utilise+un+debugger+int%C3%A9gr%C3%A9+dans+un...&amp;tags=debug%2Cipdb%2Cipython%2Cpdb%2Cpython%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/05/snake-golf-ball.jpg" length="51992" type="image/jpg" />	</item>
	</channel>
</rss>
