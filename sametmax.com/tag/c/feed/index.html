<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; c</title>
	<atom:link href="http://sametmax.com/tag/c/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 14:20:37 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>Le choix d&#8217;un langage influence le fun de votre carrière</title>
		<link>http://sametmax.com/le-choix-dun-langage-influence-le-fun-de-votre-carriere/</link>
		<comments>http://sametmax.com/le-choix-dun-langage-influence-le-fun-de-votre-carriere/#comments</comments>
		<pubDate>Tue, 14 May 2013 09:47:04 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[c]]></category>
		<category><![CDATA[java]]></category>
		<category><![CDATA[list]]></category>
		<category><![CDATA[php]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[ruby]]></category>
		<category><![CDATA[scala]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6095</guid>
		<description><![CDATA[Les langages de programmation sont censés être des technologies neutres, mais comme toute chose utilisée dans le monde réel pour des usages concrets et nombreux, l'humain finit par leur donner une orientation, une préférence.]]></description>
			<content:encoded><![CDATA[<p>Les langages de programmation sont censés être des technologies neutres, mais comme toute chose utilisée dans le monde réel pour des usages concrets et nombreux, l&#8217;humain finit par leur donner une orientation, une préférence.</p>
<p>De fait, chaque langage finit par être plus utilisé dans certains types de métiers ou d&#8217;activités, pour certains types de projets, dans certains environnements. Plus important encore, un langage appelle d&#8217;autres outils, et un certain type de collègue, et même si, comme d&#8217;habitude, la généralisation est un piège à con, il y a bien des stéréotypes visibles qui se dégagent.</p>
<p>Ainsi, Java et PHP sont des langages pour lesquels il est très facile de trouver du travail. Il y a une telle base de code là dehors qu&#8217;il y a des annonces partout, et tout le temps. En revanche, les environnements Java sont généralement très très lourds à manipuler. Pas en terme de performance (Java est aujourd&#8217;hui très rapide), mais en terme de charge de travail : énormément de configuration, beaucoup d&#8217;abstractions et de design pattern imbriqués, des APIs et des formats très verbeux&#8230;</p>
<p>Travailler dans un monde Java, c&#8217;est généralement travailler à un rythme lent, plus souvent dans des grosses boîtes, pour des systèmes assez larges avec un grosse inertie. Ne vous attendez pas à des Java-party avec vos collègues après le boulot.</p>
<p>PHP, c&#8217;est la même chose, avec des projets et composants plus simples (dans des entreprises de toutes tailles), et souvent bien plus dégueulasses. Non pas qu&#8217;on ne puisse pas écrire du PHP propre, mais 15 ans de PHP codé à l&#8217;arrache ne s&#8217;effacent pas avec quelques années de Symfony, et autre cakePHP. Du coup on hérite souvent d&#8217;un projet moche comme ta mère. </p>
<p>Bref, Java et PHP vous garantissent un job, mais les projets sont rarement marrants, et l&#8217;ambiance au taff sera pas pumped up. Par contre il y a de la doc et des tutos, même si généralement ceux pour PHP sont de meilleure qualité que pour Java (qui peuvent être assez indigestes).</p>
<p>Il y a une alternative intermédiaire : le C#. Beau langage, beaux outils, c&#8217;est propre sans être trop lourd, et la base de code est pas à vomir. Mais on reste dans le corporate, et la plupart du temps, sur du 98% Microsoft ou affiliés. </p>
<p>Après vous avez des langages spécialisés comme Erlang, Scala, Lisp. Là, trouver du taff sera généralement un challenge. Ce n&#8217;est pas le genre de truc qu&#8217;on voit partout. Et le niveau sera difficile : un débutant peut arriver avec la bite et le couteau dans un projet PHP, mais si vous vous pointez avec 3 mois d&#8217;expérience sur une gateway jabber haute tolérance, le bidouillage ça va pas le faire. </p>
<p>Ce sont des langages qu&#8217;il faut choisir si on aime le taff de haut niveau, la débrouillardise et les solutions intelligentes. En général les missions sont super intéressantes, mais la reconversion est dure. Par contre, vous rencontrerez des collègues qui valent le détour.</p>
<p>Puis il y a les langages de bas niveau, type C/C++. Aujourd&#8217;hui, c&#8217;est massivement des missions scientifiques ou de l&#8217;embarqué : analyse d&#8217;image, cartes électroniques, petites machines, etc. Il y a encore des trucs pas cool genre Windev (j&#8217;ai un pote coincé là dedans, c&#8217;est triste, fuyez ces annonces), mais ce n&#8217;est plus la majorité. Ces langages, c&#8217;est une question de tempérament. Est-ce que vous aimez la minutie ? L&#8217;efficacité des algos ? Le travail sous contrainte technique ? Si oui, alors ce genre de taff peut être très sympa. Sinon, choisissez un langage plus dynamique.</p>
<p>Ensuite il y a les langages de niches : Cobol, Power Builder, etc. Là c&#8217;est généralement des projets de merde très bien payés. Plus personne ne veut coder avec ces trucs, mais ça coûte trop cher à changer. Les jeunes sont acceptés, les formations offertes, le salaire de début de carrière est bon, mais par contre, le code est un truc de mémé. C&#8217;est pas mal pour commencer une carrière et se faire un peu de thune, mais faut savoir en sortir, et ça ne donne pas de bonnes habitudes en prog.</p>
<p>Et pour finir il y des langages dit &#8220;modernes&#8221; (ce qui est un abus&#8230; de langage, car ils ne datent pas d&#8217;hier) comme Python, Ruby ou Javascript. Le côté &#8220;moderne&#8221; vient surtout du fait qu&#8217;ils sont maintenant très adaptés à des projets modernes, où la souplesse de développement a priorité sur le reste des caractéristiques. Choisissez ces langages si vous visez des missions, principalement Web, sur des produits récents. Ce sont les communautés les plus sympas et dynamiques, ça brasse pas mal dans le milieu et c&#8217;est assez jeune. Mais un grand nombre de start up, donc il faut pas chercher la sécurité de l&#8217;emploi.</p>
<p>Une petite parenthèse pour Python tout de même : il n&#8217;est pas autant limité au Web et on le voit aussi beaucoup dans le secteur scientifique et bancaire. C&#8217;est sa versatilité et la facilité de reconversion qu&#8217;il offre qui me fait dire que c&#8217;est un très bon choix comme premier langage. Mais. Car il y a un &#8220;mais&#8221;. Trouver une offre Python sera plus difficile qu&#8217;une offre Ruby, et BEAUCOUP plus difficile qu&#8217;une offre PHP ou Java. Après perso je n&#8217;ai jamais connu le chômage.</p>
<p>Warning ! Il faut faire gaffe à se lancer dans le dev Web. C&#8217;est très tentant, mais contrairement aux autres carrières, ça veut dire <a href="http://sametmax.com/evolution-de-la-courbe-dapprentissage-dun-dev-front-end/">une courbe d&#8217;apprentissage beaucoup plus longue</a>. Vous ne pouvez pas juste apprendre votre langage, ses libs et son env et vous vendre comme &#8220;expert&#8221;.</p>
<p>J&#8217;ai laissé pas mal de truc de côté, comme l&#8217;objective C, Haskell, Smalltalk, le Bash, Perl et <a href="http://99-bottles-of-beer.net">quelques milliers d&#8217;autres langages</a>. On ne peut pas tout faire, et je voudrais surtout peindre un tableau global du marché. En me relisant, je me dis que c&#8217;est bourré d&#8217;idées reçues, qu&#8217;il y a plein d&#8217;exceptions, etc. Mais je pense que les infos données peuvent permettre à des gens qui se posent la question de l&#8217;orientation de prendre une décision moins mauvaise que &#8220;je lance un D20 et on verra bien&#8221;.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=6095&amp;md5=8bd7c3e77140bd94c7422f6ef1194601" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/le-choix-dun-langage-influence-le-fun-de-votre-carriere/feed/</wfw:commentRss>
		<slash:comments>31</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fle-choix-dun-langage-influence-le-fun-de-votre-carriere%2F&amp;language=en_GB&amp;category=text&amp;title=Le+choix+d%26%238217%3Bun+langage+influence+le+fun+de+votre+carri%C3%A8re&amp;description=Les+langages+de+programmation+sont+cens%C3%A9s+%C3%AAtre+des+technologies+neutres%2C+mais+comme+toute+chose+utilis%C3%A9e+dans+le+monde+r%C3%A9el+pour+des+usages+concrets+et+nombreux%2C+l%26%238217%3Bhumain+finit+par+leur+donner...&amp;tags=c%2Cjava%2Clist%2Cphp%2Cpython%2Cruby%2Cscala%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/m6UwO0w.jpg" length="28964" type="image/jpg" />	</item>
		<item>
		<title>Appeler du code C depuis Python avec ctypes</title>
		<link>http://sametmax.com/appeler-du-code-c-depuis-python-avec-ctypes/</link>
		<comments>http://sametmax.com/appeler-du-code-c-depuis-python-avec-ctypes/#comments</comments>
		<pubDate>Sun, 05 May 2013 06:55:40 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[c]]></category>
		<category><![CDATA[ctypes]]></category>
		<category><![CDATA[dll]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[so]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=5811</guid>
		<description><![CDATA[On vous a dit et répété que Python c'était un super langage de glu et que ça pouvait très facilement s'interfacer avec les binaires produits par du C. Mais jusqu'à quel point ?]]></description>
			<content:encoded><![CDATA[<p>On vous a dit et répété que Python c&#8217;était un super langage de glu et que ça pouvait très facilement s&#8217;interfacer avec les binaires produits par du C. Mais jusqu&#8217;à quel point ?</p>
<p>En vérité c&#8217;est extrêmement simple : Python permet de se mapper directement sur un .dll ou un .so, et d&#8217;appeler n&#8217;importe quelle fonction qu&#8217;il contient depuis le code Python comme si c&#8217;était une fonction normale. Il n&#8217;y a rien à installer, c&#8217;est fourni d&#8217;office.</p>
<p>On peut tester ça facilement. Je ponds une lib d&#8217;une folle puissance grâce à mes talents de codeurs C internationalement connus dans le quartier :</p>

<div class="wp_syntax"><div class="code"><pre class="c" style="font-family:monospace;"><span style="color: #339933;">#include&lt;stdio.h&gt;</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/*
Attend un pointeur sur un array de caractères (une chaîne en C) 
et l'affiche.
*/</span>
dit_papa<span style="color: #009900;">&#40;</span><span style="color: #993333;">char</span> <span style="color: #339933;">*</span> p<span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #000066;">printf</span><span style="color: #009900;">&#40;</span><span style="color: #ff0000;">&quot;%s<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">,</span> p<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span>
&nbsp;
&nbsp;
<span style="color: #808080; font-style: italic;">/*
Attend deux entiers et les multiple
*/</span>
multiplier<span style="color: #009900;">&#40;</span><span style="color: #993333;">long</span> a<span style="color: #339933;">,</span> <span style="color: #993333;">long</span> b<span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #b1b100;">return</span> a <span style="color: #339933;">*</span> b<span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span>
&nbsp;
<span style="color: #808080; font-style: italic;">/*
Attend un pointeur de pointeur sur un array de char
parce qu'on aime les risques.
*/</span>
jakadi<span style="color: #009900;">&#40;</span><span style="color: #993333;">char</span> <span style="color: #339933;">**</span> p<span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    <span style="color: #000066;">printf</span><span style="color: #009900;">&#40;</span><span style="color: #ff0000;">&quot;%s<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">,</span> <span style="color: #339933;">*</span>p<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre></div></div>

<p>On compile tout ça. Comme je suis sous Nunux, j&#8217;utilise GCC et j&#8217;obtiens un .so, mais sous Windows c&#8217;est pareil avec VisualStudio et les .dll.</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">gcc</span> <span style="color: #660033;">-shared</span> -Wl,-soname,ZeLib <span style="color: #660033;">-o</span> ZeLib.so <span style="color: #660033;">-fPIC</span> ZeLib.c</pre></div></div>

<p>ZeLib.so est prête et frétille d&#8217;impatience à l&#8217;idée de vous servir. Il ne reste plus qu&#8217;à lancer le shell Python&#8230;</p>
<p>D&#8217;abord on fait ses imports, c&#8217;est dans la lib standard tout ça :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> ctypes</pre></div></div>

<p>Ensuite on se bind sur le binaire, il faut préciser un chemin absolu sinon ça ne marche pas :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> zelib = ctypes.<span style="color: black;">CDLL</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;/home/sam/Work/projet/ZeLib.so&quot;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Et derrière on peut appeler une fonction (Python fait la <a href="http://docs.python.org/2/library/ctypes.html?highlight=ctypes#fundamental-data-types">conversion entre tous les types</a> de bases Python et C) :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> res = zelib.<span style="color: black;">multiplier</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> res
<span style="color: #ff4500;">6</span></pre></div></div>

<p>Si on veut faire des chaînes, on ne peut pas passer de l&#8217;unicode. Comme mon shell a toutes les chaînes en unicode par défaut, je dois <a href="http://sametmax.com/lencoding-en-python-une-bonne-fois-pour-toute/">encoder</a> dans le charset de sortie (sur mon système, c&#8217;est UTF8):</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> zelib.<span style="color: black;">dit_papa</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;papa&quot;</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
papa
<span style="color: #ff4500;">5</span></pre></div></div>

<p>Notez au passage que la fonction retourne quelque chose même si je n&#8217;ai pas précisé de valeur de retour. Du coup j&#8217;aurais mieux fait de mettre un bon <code>return 0 </code>à la fin.</p>
<p>Si on veut appeler une fonction qui attend un pointeur, il faut d&#8217;abord caster son type en un type C, puis appeler <code>by_ref</code> dessus, qui va passer l&#8217;argument par référence, plutôt que par valeur :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> ctypes <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #66cc66;">*</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> s = ctypes.<span style="color: black;">c_char_p</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'kiwi'</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'utf8'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> zelib.<span style="color: black;">jakadi</span><span style="color: black;">&#40;</span>byref<span style="color: black;">&#40;</span>s<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
kiwi
<span style="color: #ff4500;">5</span></pre></div></div>

<p>Voilà.</p>
<p>Voilà, voilà.</p>
<p>Bon attention quand même, le C n&#8217;est pas aussi conciliant que le Python : le debug est plus dur (pas de stacktrace, mais un bon vieux core dump), pas de completion dans ipython, et on peut même planter la VM si on se débrouille bien :-) </p>
<p>P.S: je ne vais pas mettre le code C à télécharger et le code Python, franchement, il est pas énorme. Donc petite exception dans cet article : y a rien à DL et la syntaxe est pas à base de comments.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=5811&amp;md5=bf1653034ac1855f6140bbaef27708c1" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/appeler-du-code-c-depuis-python-avec-ctypes/feed/</wfw:commentRss>
		<slash:comments>26</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fappeler-du-code-c-depuis-python-avec-ctypes%2F&amp;language=en_GB&amp;category=text&amp;title=Appeler+du+code+C+depuis+Python+avec+ctypes&amp;description=On+vous+a+dit+et+r%C3%A9p%C3%A9t%C3%A9+que+Python+c%26%238217%3B%C3%A9tait+un+super+langage+de+glu+et+que+%C3%A7a+pouvait+tr%C3%A8s+facilement+s%26%238217%3Binterfacer+avec+les+binaires+produits+par+du+C.+Mais+jusqu%26%238217%3B%C3%A0...&amp;tags=c%2Cctypes%2Cdll%2Cpython%2Cso%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/1fem1pip1pul.jpg" length="588534" type="image/jpg" />	</item>
	</channel>
</rss>
