<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; ubuntu</title>
	<atom:link href="http://sametmax.com/tag/ubuntu/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 14:20:37 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>Changer la timezone sous Ubuntu Server en ligne de commande</title>
		<link>http://sametmax.com/changer-la-timezone-sous-ubuntu-server-en-ligne-de-commande/</link>
		<comments>http://sametmax.com/changer-la-timezone-sous-ubuntu-server-en-ligne-de-commande/#comments</comments>
		<pubDate>Fri, 15 Nov 2013 10:28:15 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[ntp]]></category>
		<category><![CDATA[timezone]]></category>
		<category><![CDATA[ubuntu]]></category>
		<category><![CDATA[utc]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7954</guid>
		<description><![CDATA[Avoir tous ses serveur à la même heure, c'est primordial. Et cette même heure devrait <a href="http://sametmax.com/les-time-zones-en-python/">toujours être UTC</a>. Sous Ubuntu server, ça se fait en deux lignes.
]]></description>
			<content:encoded><![CDATA[<p>Avoir tous ses serveur à la même heure, c&#8217;est primordial. Et cette même heure devrait <a href="http://sametmax.com/les-time-zones-en-python/">toujours être UTC</a>.</p>
<p>Du coup dans votre script de déploiement, n&#8217;oubliez pas de changer la timezone de la machine.</p>
<p>Sous Ubuntu server, ça se fait en deux lignes :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;UTC&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">tee</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>timezone
<span style="color: #c20cb9; font-weight: bold;">sudo</span> dpkg-reconfigure  <span style="color: #660033;">--frontend</span> noninteractive  tzdata</pre></div></div>

<p>Si vous avez des cron, redémarrez le daemon sinon il sera toujours décalé :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> service cron restart</pre></div></div>

<p>Si vous êtes du genre à aimer la précision, vous pouvez installer un daemon NTP qui permet de synchroniser l&#8217;horloge du serveur régulièrement avec un serveur distant :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #660033;">-y</span> <span style="color: #c20cb9; font-weight: bold;">install</span> ntp</pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7954&amp;md5=5233124b2b79eb104b08969a1448f361" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/changer-la-timezone-sous-ubuntu-server-en-ligne-de-commande/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fchanger-la-timezone-sous-ubuntu-server-en-ligne-de-commande%2F&amp;language=en_GB&amp;category=text&amp;title=Changer+la+timezone+sous+Ubuntu+Server+en+ligne+de+commande&amp;description=Avoir+tous+ses+serveur+%C3%A0+la+m%C3%AAme+heure%2C+c%26%238217%3Best+primordial.+Et+cette+m%C3%AAme+heure+devrait+toujours+%C3%AAtre+UTC.+Du+coup+dans+votre+script+de+d%C3%A9ploiement%2C+n%26%238217%3Boubliez+pas+de+changer+la...&amp;tags=ntp%2Ctimezone%2Cubuntu%2Cutc%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/11/wAiL8lw.png" length="492697" type="image/jpg" />	</item>
		<item>
		<title>Installer SSH Plus sur Ubuntu</title>
		<link>http://sametmax.com/installer-ssh-plus-sur-ubuntu/</link>
		<comments>http://sametmax.com/installer-ssh-plus-sur-ubuntu/#comments</comments>
		<pubDate>Thu, 24 Oct 2013 13:54:49 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[ssh]]></category>
		<category><![CDATA[sshplus]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7499</guid>
		<description><![CDATA[<a href="http://sametmax.com/mon-environnement-de-travail/">Je vous avais parlé</a> de <a href="http://www.gulecha.org/2011/07/29/sshplus-a-sshmenu-compatible-appindicator/">SSH Plus</a>, mais sans mentionner son process d'install, un peu chiant.]]></description>
			<content:encoded><![CDATA[<p><a href="http://sametmax.com/mon-environnement-de-travail/">Je vous avais parlé</a> de <a href="http://www.gulecha.org/2011/07/29/sshplus-a-sshmenu-compatible-appindicator/">SSH Plus</a>, mais sans mentionner son process d&#8217;install, un peu chiant.</p>
<p>Pour rappel, c&#8217;est un petit indicateur qui vous permet de lancer une commande arbitraire. Son usage principal est d&#8217;ouvrir un terminal qui se connecte immédiatement en SSH à un serveur distant, mais on peut y mettre n&#8217;importe quoi.</p>
<p>Pour l&#8217;installer :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666; font-style: italic;"># on installe les dépendances</span>
<span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> python-appindicator
<span style="color: #666666; font-style: italic;"># on se calle dans le dossier temporaire</span>
<span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp
<span style="color: #666666; font-style: italic;"># on download le script en Python</span>
<span style="color: #c20cb9; font-weight: bold;">wget</span> https:<span style="color: #000000; font-weight: bold;">//</span>raw.github.com<span style="color: #000000; font-weight: bold;">/</span>anilgulecha<span style="color: #000000; font-weight: bold;">/</span>misc<span style="color: #000000; font-weight: bold;">/</span>master<span style="color: #000000; font-weight: bold;">/</span>sshplus.py
<span style="color: #666666; font-style: italic;"># on le copie dans le dossier des exécutables</span>
<span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">mv</span> sshplus.py <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span>sshplus
<span style="color: #666666; font-style: italic;"># on le rend exécutable</span>
<span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">chmod</span> +x <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span>sshplus</pre></div></div>

<p>Pour le lancer, il n&#8217;y a plus qu&#8217;à faire :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">sshplus</pre></div></div>

<p>Dans un terminal.</p>
<p>Moi, je le rajoute dans ma liste des programme automatiquement lancé au démarrage, comme ça je n&#8217;y pense plus (&#8220;Dash&#8221; > &#8220;Applications au démarrage&#8221;).</p>
<p>Après, vous pouvez lui faire lancer les commandes que vous voulez, en les mettant dans le fichier de config (~/.sshplus) en suivant la syntaxe  </p>
<pre>Nom à afficher|commande|options</pre>
<p>Par exemple :</p>
<pre>Server Prod 12|guake|-t -n "new" -e "ssh username@adresse_ip"
</pre>
<p>Ceci va rajouter une entrée dans le menu nommée &#8220;Server Prod 12&#8243;. Si on clique dessus, ça lance <code>guake -t -n "new" -e "ssh username@adresse_ip"</code>, ce qui m&#8217;ouvre un nouvel onglet dans mon terminal guake avec lance la commande <code>ssh username@adresse_ip</code> juste après.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7499&amp;md5=41cedb422864ba4c710122ece621c37b" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/installer-ssh-plus-sur-ubuntu/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Finstaller-ssh-plus-sur-ubuntu%2F&amp;language=en_GB&amp;category=text&amp;title=Installer+SSH+Plus+sur+Ubuntu&amp;description=Je+vous+avais+parl%C3%A9+de+SSH+Plus%2C+mais+sans+mentionner+son+process+d%26%238217%3Binstall%2C+un+peu+chiant.+Pour+rappel%2C+c%26%238217%3Best+un+petit+indicateur+qui+vous+permet+de+lancer+une+commande+arbitraire....&amp;tags=ssh%2Csshplus%2Cubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/SwlAwJa.jpg" length="51490" type="image/jpg" />	</item>
		<item>
		<title>Rapide test d&#8217;Ubuntu 13.10</title>
		<link>http://sametmax.com/rapide-test-dubuntu-13-10/</link>
		<comments>http://sametmax.com/rapide-test-dubuntu-13-10/#comments</comments>
		<pubDate>Tue, 22 Oct 2013 12:45:54 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7501</guid>
		<description><![CDATA[Ubuntu 13.10 vient de sortir et j'ai donc fait une micro partition pour le tester.]]></description>
			<content:encoded><![CDATA[<p>Ubuntu 13.10 vient de sortir et j&#8217;ai donc fait une micro partition pour le tester.</p>
<p>Installation sans histoire, un peu plus de config que d&#8217;hab car il faut virer toutes les merdes intrusives pour la vie privée (mais heureusement, y a des settings pour ça). Pas beaucoup de modifs, apparemment ils ont bossé la vitesse et la stabilité, ce qui est rare pour une non LTS. </p>
<p>Le résultat est qu&#8217;on a un OS qui est beaucoup plus stable que ce que Canonical avait l&#8217;habitude de donner les premiers jours de release. Et légèrement plus rapide.</p>
<p>En fait je suis tenté de migrer (mais pas con au point de le faire avant quelques mois), c&#8217;est globalement agréable à utiliser, épuré et fluide. On a pas encore Mir installé par défaut (OUF), donc ça reste un truc viable, qui tourne bien, avec des paquets plus récents à dispo. </p>
<p>Mon seul chagrin, c&#8217;est la nouveau Nautilus. La recherche est maintenant récursive par défaut, et impossible à changer. <del datetime="2013-10-22T13:07:50+00:00">En prime, plus d&#8217;extensions possibles, du coup &#8220;open terminal here&#8221; et &#8220;compare with meld&#8221; partent à la poubelle, et je les aimais beaucoup.</del></p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7501&amp;md5=9cd758cab49143f3b4b32e4f2b81f3c5" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/rapide-test-dubuntu-13-10/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Frapide-test-dubuntu-13-10%2F&amp;language=en_GB&amp;category=text&amp;title=Rapide+test+d%26%238217%3BUbuntu+13.10&amp;description=Ubuntu+13.10+vient+de+sortir+et+j%26%238217%3Bai+donc+fait+une+micro+partition+pour+le+tester.+Installation+sans+histoire%2C+un+peu+plus+de+config+que+d%26%238217%3Bhab+car+il+faut+virer+toutes...&amp;tags=ubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/Kfnpv.gif" length="498010" type="image/jpg" />	</item>
		<item>
		<title>Garder une video flash en full screen et travailler sur un autre écran</title>
		<link>http://sametmax.com/garder-une-video-flash-en-full-screen-et-travailler-sur-un-autre-ecran/</link>
		<comments>http://sametmax.com/garder-une-video-flash-en-full-screen-et-travailler-sur-un-autre-ecran/#comments</comments>
		<pubDate>Tue, 06 Aug 2013 11:59:51 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[flash]]></category>
		<category><![CDATA[hexadecimal]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7029</guid>
		<description><![CDATA[Vous avez deux écrans. Vous regardez un tuto video sur le premier, et vous testez le code sur le deuxième. Malheureusement, impossible de mettre la vidéo en plein écran, car à peine avez vous cliqué sur le deuxième, que la vidéo retourne en mode réduit. Il existe un hack pour pallier ce problème.
]]></description>
			<content:encoded><![CDATA[<p>Vous avez deux écrans. Vous regardez un tuto video sur le premier, et vous testez le code sur le deuxième. Malheureusement, impossible de mettre la vidéo en plein écran, car à peine avez vous cliqué sur le deuxième, que la vidéo retourne en mode réduit.</p>
<p>Il existe un hack pour pallier ce problème.</p>
<p>J&#8217;ai bien dis un hack. Un truc moche, dont les conséquences sont mal connues. Mais ça marche, c&#8217;est bien pratique, et je suis d&#8217;ailleurs en train de rédiger cet article avec le premier épisode de <a href="http://www.dpstream.net/serie-5409-aj.html#js5409-,-1-,-01%20[VOST%20FR]">Vikings</a> en fond.</p>
<p>D&#8217;abord, il faut chopper un éditeur héxadécimal.</p>
<p>N&#8217;importe lequel fera l&#8217;affaire, moi sous Ubuntu j&#8217;utilise Ghex :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> ghex</pre></div></div>

<p>Il va vous falloir ouvrir le binaire flash avec. Yes, à l&#8217;ancienne. </p>
<p>La position du binaire est différent pour chaque OS. Je ne sais pas où il est sous Windows (ça doit être une DLL planquée dans system32 ou un truc du genre), mais sous Ubuntu (et surement sous n&#8217;importe quel Unix comme Red hat ou Max), on trouve le fichier facilement :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">$ <span style="color: #c20cb9; font-weight: bold;">locate</span> libflashplayer.so
<span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>flashplugin-installer<span style="color: #000000; font-weight: bold;">/</span>libflashplayer.so</pre></div></div>

<p>Du coup, on édite le fichier avec l&#8217;éditeur hexa en mode admin :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">$ <span style="color: #c20cb9; font-weight: bold;">sudo</span> ghex <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>flashplugin-installer<span style="color: #000000; font-weight: bold;">/</span>libflashplayer.so</pre></div></div>

<p>Il faut ensuite recherche la chaîne <code>_NET_ACTIVE_WINDOW</code>.</p>
<p>Pour ghex, c&#8217;est dans, le menu recherche est dans <em>Édition > Rechercher</em> :</p>
<div id="attachment_7034" class="wp-caption aligncenter" style="width: 336px"><a href="http://sametmax.com/wp-content/uploads/2013/08/recherche_ghex.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/08/recherche_ghex.jpg" alt="Capture d&#039;écran de la fenêtre de recherche du logiciel ghex" title="Attention, ne faites pas de copier / coller. Tapez la chaîne à la main." width="326" height="235" class="size-full wp-image-7034" /></a><p class="wp-caption-text">Attention, ne faites pas de copier / coller. Tapez la chaîne à la main.</p></div>
<p>Dans ce logiciel, la recherche sous forme de texte se fait dans <strong>la partie droite de la fenêtre</strong>.</p>
<p>L&#8217;éditeur va surligner le terme de la recherche, et va falloir cliquer sur n&#8217;importe quelle lettre et la remplacer par une autre. </p>
<div id="attachment_7031" class="wp-caption aligncenter" style="width: 442px"><a href="http://sametmax.com/wp-content/uploads/2013/08/libflashplayer.so-GHex_005.jpg"><img src="http://sametmax.com/wp-content/uploads/2013/08/libflashplayer.so-GHex_005.jpg" alt="Capture d&#039;écran de la fenêtre principale du logiciel ghex" title="Pareil, tout se passe dans la partie droite de la fenêtre" width="432" height="300" class="size-full wp-image-7031" /></a><p class="wp-caption-text">Pareil, tout se passe dans la partie droite de la fenêtre</p></div>
<p>Oui, oui, techniquement on est en train de créer un bug en détruisant le nom d&#8217;une constante.</p>
<p>Pour faire le remplacement sous Ghex, pas besoin de faire un backspace, un suprr, ou quoi que ce soit : cliquez sur une lettre de la sélection, appuyez sur une lettre de votre clavier, et c&#8217;est bon.</p>
<p><strong>Attention : il va falloir maintenant sauver votre travail, ce qui va faire planter toute app ou video flash en cours.</strong></p>
<p>C&#8217;est tout, vous pouvez retournez sur Youtube.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7029&amp;md5=ec7cbfa461380308e2ff3dc64d4f4494" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/garder-une-video-flash-en-full-screen-et-travailler-sur-un-autre-ecran/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fgarder-une-video-flash-en-full-screen-et-travailler-sur-un-autre-ecran%2F&amp;language=en_GB&amp;category=text&amp;title=Garder+une+video+flash+en+full+screen+et+travailler+sur+un+autre+%C3%A9cran&amp;description=Vous+avez+deux+%C3%A9crans.+Vous+regardez+un+tuto+video+sur+le+premier%2C+et+vous+testez+le+code+sur+le+deuxi%C3%A8me.+Malheureusement%2C+impossible+de+mettre+la+vid%C3%A9o+en+plein+%C3%A9cran%2C+car...&amp;tags=flash%2Chexadecimal%2Cubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/08/WUy4V.jpg" length="64376" type="image/jpg" />	</item>
		<item>
		<title>Ajouter un nœud de sortie Tor sur son serveur Ubuntu</title>
		<link>http://sametmax.com/ajouter-un-noeud-de-sortie-tor-sur-son-serveur-ubuntu/</link>
		<comments>http://sametmax.com/ajouter-un-noeud-de-sortie-tor-sur-son-serveur-ubuntu/#comments</comments>
		<pubDate>Fri, 28 Jun 2013 09:21:56 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[server]]></category>
		<category><![CDATA[tor]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6489</guid>
		<description><![CDATA[La procédure pour l'installation sur Ubuntu est beaucoup plus simple qu'au début du projet.]]></description>
			<content:encoded><![CDATA[<p>Installer un nœud de sortie Tor est un moyen de contribuer à son niveau à l&#8217;émancipation du Web. L&#8217;installer sur sa machine de bureau n&#8217;est pas très intéressant, mais on trouve des <a href="https://www.leaseweb.nl">serveurs à 7 euros par mois</a> de nos jours qui suffisent largement à cette tâche. </p>
<p>La procédure pour l&#8217;installation sur Ubuntu est beaucoup plus simple qu&#8217;au début du projet.</p>
<p>D&#8217;abord, il faut récupérer le nom de sa distrib :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">lsb_release <span style="color: #660033;">-c</span>
Codename: precise</pre></div></div>

<p>Ici pour pour moi &#8220;precise&#8221;.</p>
<p>Ensuite on rajoute <em>/etc/apt/sources.list</em> une ligne contenant <code>deb http://deb.torproject.org/torproject.org nom_distrib main</code>, dans mon cas :</p>
<p><code>deb http://deb.torproject.org/torproject.org precise main</code></p>
<p>On rajoute les clés du dépôt officiel de tor et on install tor (ntp pour synchroniser l&#8217;heure) :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">gpg <span style="color: #660033;">--keyserver</span> keys.gnupg.net <span style="color: #660033;">--recv</span> 886DDD89
gpg <span style="color: #660033;">--export</span> A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89 <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-key</span> add -
<span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> update
<span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> deb.torproject.org-keyring tor ntp</pre></div></div>

<p>A ce stade là vous avez un client Tor fonctionel, mais pas un nœd de sortie. Un petit <code>sudo vi /etc/tor/torrc</code> et on décommente la ligne :</p>
<p><code>#ORPort 9001</code></p>
<p>Il faut du coup ouvrir le port 9001 :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">iptables <span style="color: #660033;">-I</span> INPUT <span style="color: #660033;">-p</span> tcp <span style="color: #660033;">-m</span> tcp <span style="color: #660033;">--dport</span> <span style="color: #000000;">9001</span> <span style="color: #660033;">-j</span> ACCEPT
iptables <span style="color: #660033;">-I</span> OUTPUT <span style="color: #660033;">-p</span> tcp <span style="color: #660033;">-m</span> tcp <span style="color: #660033;">--dport</span> <span style="color: #000000;">9001</span> <span style="color: #660033;">-j</span> ACCEPT</pre></div></div>

<p>(Sauvegardez votre config iptables sinon au prochain reboot, votre port est à nouveau bloqué)</p>
<p>Et on relance le service.</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> service tor reload</pre></div></div>

<p>Pour voir si ça a bien fonctionné :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">cat</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>log<span style="color: #000000; font-weight: bold;">/</span>tor<span style="color: #000000; font-weight: bold;">/</span>log <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #7a0874; font-weight: bold;">test</span>
Self-testing indicates your ORPort is reachable from the outside. Excellent.</pre></div></div>

<p>Quelques avertissements tout de même :</p>
<ul>
<li>Tor est un projet utilisé massivement par des activistes politiques et personnes à la connexion internet et aux libertés bridées (c&#8217;est ceux qu&#8217;on cherche à aider), mais également des gens aux activités illégales (ventes de produits interdits dans leurs pays, ce qui va de la weed au GHB) voir carrément immorales (pédopornographie, terrorisme). En ouvrant un nœud Tor, vous n&#8217;avez aucun contrôle sur QUI utilise votre équipement, ou pour faire quoi.</li>
<li>Certains hébergeurs interdisent Tor. C&#8217;est le cas de <a href="http://www.cinfu.com/">cinfu</a>, un hébergeur qui accepte pourtant les <a href="sametmax.com/quest-ce-que-bitcoin/">Bitcoins</a> mais aussi, je viens de l&#8217;apprendre à mes dépends, de online.net et ses fameuses dédibox. Il m&#8217;ont donné 24 H pour fermer mon nœd Tor, et je vais donc devoir le migrer sur leaseweb ou OVH.</li>
<li>Le cadre légal autour de Tor est encore fluctuant. Je suis incapable de vous dire si vous pouvez être tenu pour responsable des activités illégales qui seraient perpétrées à travers votre équipement.</li>
<li>Ça va bouffer de la bande passante.</li>
</ul>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=6489&amp;md5=cb9fce27070fb8c80062ea02c7f40bd4" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/ajouter-un-noeud-de-sortie-tor-sur-son-serveur-ubuntu/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fajouter-un-noeud-de-sortie-tor-sur-son-serveur-ubuntu%2F&amp;language=en_GB&amp;category=text&amp;title=Ajouter+un+n%C5%93ud+de+sortie+Tor+sur+son+serveur+Ubuntu&amp;description=Installer+un+n%C5%93ud+de+sortie+Tor+est+un+moyen+de+contribuer+%C3%A0+son+niveau+%C3%A0+l%26%238217%3B%C3%A9mancipation+du+Web.+L%26%238217%3Binstaller+sur+sa+machine+de+bureau+n%26%238217%3Best+pas+tr%C3%A8s+int%C3%A9ressant%2C+mais+on...&amp;tags=server%2Ctor%2Cubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/06/op52w9Q.jpg" length="88624" type="image/jpg" />	</item>
		<item>
		<title>Tiens, je suis toujours sur OSX</title>
		<link>http://sametmax.com/tiens-je-suis-toujours-sur-osx/</link>
		<comments>http://sametmax.com/tiens-je-suis-toujours-sur-osx/#comments</comments>
		<pubDate>Wed, 19 Jun 2013 11:23:42 +0000</pubDate>
		<dc:creator>coyote</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[mac]]></category>
		<category><![CDATA[mac os]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6419</guid>
		<description><![CDATA[Soudain, je sais plus exactement vers quelle version, je crois que c'était la 10.10, Ubuntu a commencé à devenir de plus en plus pénible et les nouvelles versions n'ont fait qu'accroitre la frustration.]]></description>
			<content:encoded><![CDATA[<p style="text-align: center;"><em><small>Ceci est un post invité de <a href="http://sametmax.com/author/coyote/">coyote</a> posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.</small></em></p>
<p><strong>Attention</strong>: ce qui suit est un billet d&#8217;humeur personnel. Prenez le comme tel…</p>
<p>Je suis un <em>linuxien</em>. Pas un activiste, mais tout de même un fervent défenseur du logiciel libre et de Linux (oui pour moi écrire <em>GNU/Linux</em> partout c&#8217;est pédant et inutile – et ça te fait passer pour un gros nazi.). J&#8217;ai même créé une association de défense du libre, un <acronym title="Linux User Group">LUG</acronym> et fait <em>switcher</em> de très nombreuses personnes.</p>
<h2>Mais alors, <strong>bordel, que fais-je sur<sup>1</sup> OSX ?</strong></h2>
<p><sup>1</sup> Si quelqu&#8217;un a une règle pour décrire rapidement que l&#8217;on utilise un OS, en lieu et place de “<em>sur Ubuntu</em>”, “<em>sous Windows</em>’”, etc ; qu&#8217;il la balance car c&#8217;est juste insupportable.</p>
<p>Tout à commencé sans doute quand j&#8217;ai découvert Sublime Text (merci Sam!). J&#8217;ai alors rompu mon workflow entièrement libre pour y intégrer un outil proprio, mais fantastique et dont je me suis précipité pour payer la licence afin de remercier le développeur pour cette bouffée d&#8217;oxygène.</p>
<p>J&#8217;utilise régulièrement des Mac comme machine depuis plusieurs années (2003?) et ce pour plusieurs raisons:</p>
<ul>
<li>C&#8217;est propre. Pas de sticker dégueulasse, de look plastique ou autre.</li>
<li>C&#8217;est une grande marque avec peu de modèles: l&#8217;assurance d&#8217;avoir un support pour Linux relativement rapidement.</li>
<li>C&#8217;est de bonne qualité (oui il y a toujours des exceptions), ça dure longtemps et ça se revend pas trop mal.</li>
<li>Le connecteur d&#8217;alim aimanté ; tous ceux qui ont déjà cassé un laptop à cause de ça comprendront…</li>
<li>Je fais un peu de dev multiplateforme (libre!) et il faut toujours tester/ajuster sur OSX.</li>
</ul>
<p>Me voilà donc avec une machine Mac dont je suis satisfait, faisant tourner un Ubuntu que j&#8217;adore avec un dual boot que j&#8217;utilise dans les aéroports ou autre car la conso batterie est <strong>incomparable</strong> entre Ubuntu et OSX.</p>
<p>Linux a toujours eu des petits problèmes, la batterie dont je parlais, le WiFi, le suspend/hibernation, etc. Rien d&#8217;insurmontable pour quelqu&#8217;un de convaincu.</p>
<h2>L&#8217;aigle noir</h2>
<p>Soudain, je sais plus exactement vers quelle version, je crois que c&#8217;était la 10.10, Ubuntu a commencé à devenir de plus en plus pénible et les nouvelles versions n&#8217;ont fait qu&#8217;accroitre la frustration.</p>
<p>Le passage à Unity a été difficile, et le fait de tester d&#8217;autres alternatives (XFCE, Xmonad) permet de se rendre compte à quel point Ubuntu est <em>intégré</em>: beaucoup de composants ne sont plus vraiment interchangeable ou alors au prix de gros efforts de configurations voir de hacks. En bref, <strong>Ubuntu, c&#8217;est bien si tu y touches pas trop</strong>.</p>
<p>Au fil des versions, des nouveaux problèmes, des fonctionnalités perdues, toute tentative montrant à quel point Ubuntu s&#8217;écarte du Linux modulaire, j&#8217;ai décidé de franchir le Rubicon et de tester d&#8217;autres distros.</p>
<p>Pour faire (très) court :</p>
<ul>
<li>Toutes les non-debian ne m&#8217;ont pas plus: la gestion des paquets est contre-productive pour moi qui ait des années d&#8217;apt dans les dents. Surtout, c&#8217;est <strong>lent comme la mort</strong>. Incroyablement lent en 2013 ; WTF?</li>
<li>Les debian-ubuntu-based: la plupart sont des customisations d&#8217;Ubuntu avec des paquets différents, des thèmes et des outils. J&#8217;ai pas vu d&#8217;avantages vraiment et toutes ont des petits désagréments supplémentaires, sans compter que les problèmes spécifiques sont dur à résoudre car ils ont peu d&#8217;utilisateurs.</li>
<li>debian ; j&#8217;ai beaucoup aimé car c&#8217;est très simple, la modularité est là, la vitesse aussi ; c&#8217;est bien intégré. Malheureusement, la gestion non souple des paquets (soit tout est vieux, soit tout est jeune) couplé avec l&#8217;absence de PPA (<strong>les PPA, c&#8217;est génial!</strong>) font que j&#8217;ai renoncé.</li>
</ul>
<h2>Archlinux</h2>
<p>Je suis donc resté sur Archlinux. J&#8217;avais utilisé un peu par le passé et ça correspondait bien à ce que je voulais actuellement: quelque chose de propre, documenté ou je savais qu&#8217;en cas de problème, je pourrais l&#8217;identifier facilement.</p>
<p>Archlinux m&#8217;a prit du temps pour le configurer. C&#8217;est sans doute ce qui m&#8217;a le plus dérangé car <strong>j&#8217;utilise mon laptop pour travailler</strong>, pas pour geeker. Une journée de perdue à configurer la machine, c&#8217;est une journée de travail en moins avec des conséquences en sousous.</p>
<p>Mais j&#8217;étais satisfait d&#8217;Archlinux, c&#8217;était effectivement beaucoup plus simple et clair qu&#8217;Ubuntu. J&#8217;ai pu faire fonctionner des petites choses qui marchaient pas avec Ubuntu ; j&#8217;avais un Gnome à jour, etc.</p>
<p>Mais, car il y a toujours un mais ; Archlinux a aussi ses problèmes: il <strong>veut</strong> que vous soyez à jour, et vous avez pas intérêt à le contrarier ; mais en même temps, il faut vérifier ce qu&#8217;il fait donc re-perte de temps.</p>
<p>Au fil du temps, les problèmes des logiciels récents se faisaient plus frustrants ; une version qui marche ; une qui marche pas, etc.</p>
<p>Quand je me suis rendu compte que je devais redémarrer ma machine plus d&#8217;une fois par semaine, et que je perdais vraiment du temps avec des bêtises, je me suis dis “<em>oh et puis merde, je vais mettre OSX!</em>” (oui je reste relativement poli dans ma tête).</p>
<h2>Le trou noir</h2>
<p>J&#8217;ai formatté ma machine sur un coup de tête, un week-end, pour voir si vraiment Linux devenait de la fiente d&#8217;âne ou si c&#8217;était partout pareil. Je me suis dis, ce sera l&#8217;occasion de voir à quoi ressemble la concurrence, de voir comment se comporte cette machine dans son environnement naturel (genre voir ce que ça fait d&#8217;utiliser un SSD qui a couté la peau du Q). Je voulais tester ça une semaine, deux tout au plus.</p>
<p>C&#8217;était il y a des mois déjà. Je sais plus trop quand. Janvier ? Février ? Je ne m&#8217;en souviens pas car <strong>je ne pense plus à ma machine</strong>. Je l&#8217;oublie complètement.</p>
<p>Bien sûr, au début, je raillais ce système et ses perversions (installer GCC nécessite de passer par un Store à la con), et puis, passé les deux premiers jours de <em>setup</em>, je l&#8217;ai oublié. Le matin, j&#8217;arrive au boulot, la machine est là, allumée, prête, rapide, disponible. Je travaille, et je lui <em>clou le bec</em> en partant, chose qui ne marchait pas avant.</p>
<p>Je peux me promener avec sans craindre pour la batterie, je peux utiliser le Wifi à tout moment (pas besoin de patcher le kernel dans un hôtel), je peux faire de la visio-conf sans jongler avec 2 outils PulseAudio, le trackpad marche à merveille, le tout démarre en mois de 10s, j&#8217;ai mon Sublime Text, mon terminal, mon ipython et toute sa clique, bref, c&#8217;est le bonheur.</p>
<p>Je ne sais pas quand je vais retourner sous Linux ; la simple idée de me retaper le setup à l&#8217;envers alors que je suis si productif maintenant me donne la nausée. Je n&#8217;ai même pas été tenté à la sortie du 13.04. Tout juste ais-je pris le temps de lancer le Live-CD dans VirtualBox.</p>
<p>Bien sûr, tout n&#8217;est pas rose, je connais bien les arcanes de Linux, mais pas celles d&#8217;OSX ; dès qu&#8217;il y a une dépendances bizarre dans un projet (genre opencv), je prends peur car tout n&#8217;est pas aussi bien packagé, ou aussi facilement compilable, etc mais finalement, ça n&#8217;arrive pas très souvent.</p>
<p>Vous m&#8217;avez lu jusqu&#8217;ici, bravo, je n&#8217;ai pas écris tout ça pour vous convaincre de quoi que ce soit ou pour me justifier. Je suis toujours autant dérangé par Apple, je ne me sens pas à l&#8217;aise en utilisant OSX, mais je peux enfin utiliser ma machine comme l&#8217;outil de dev qu&#8217;il devrait être et rien d&#8217;autre ; c&#8217;est un soulagement très grand.</p>
<p>J&#8217;espère retrouver dans les commentaires de ce billet vos frustrations concernant Linux et pourquoi pas ce que vous faites pour y remédier (Punching Ball?).</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=6419&amp;md5=faed6b478a934ae40deca6d09439e907" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/tiens-je-suis-toujours-sur-osx/feed/</wfw:commentRss>
		<slash:comments>79</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Ftiens-je-suis-toujours-sur-osx%2F&amp;language=en_GB&amp;category=text&amp;title=Tiens%2C+je+suis+toujours+sur+OSX&amp;description=Ceci+est+un+post+invit%C3%A9+de+coyote+post%C3%A9+sous+licence+creative+common+3.0+unported.+Attention%3A+ce+qui+suit+est+un+billet+d%26%238217%3Bhumeur+personnel.+Prenez+le+comme+tel%E2%80%A6+Je+suis+un...&amp;tags=linux%2Cmac%2Cmac+os%2Cubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/06/35aTn.jpg" length="76539" type="image/jpg" />	</item>
		<item>
		<title>Alors, on passe à Ubuntu 13.04 ?</title>
		<link>http://sametmax.com/alors-on-passe-a-ubuntu-13-04/</link>
		<comments>http://sametmax.com/alors-on-passe-a-ubuntu-13-04/#comments</comments>
		<pubDate>Sat, 04 May 2013 07:06:51 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=5955</guid>
		<description><![CDATA[J'ai utilisé Ubuntu 13.04 depuis quelques jours. C'est un bon cru : l'interface est fluide (n'oubliez pas d'installer <a href="http://sebsauvage.net/logiciels/ubuntu_power.html">preload</a>) et quelques ajouts ergonomiques sympas ont fait leur apparition.]]></description>
			<content:encoded><![CDATA[<p>J&#8217;ai utilisé Ubuntu 13.04 depuis quelques jours. C&#8217;est un bon cru : l&#8217;interface est fluide (n&#8217;oubliez pas d&#8217;installer <a href="http://sebsauvage.net/logiciels/ubuntu_power.html">preload</a>) et quelques ajouts ergonomiques sympas ont fait leur apparition.</p>
<p>Mais globalement, je reste en 12.04 car :</p>
<ul>
<li>Il n&#8217;y a rien de si fantastique dans raring qui justifie une migration.</li>
<li>Il y a des programmes qui ne marchent plus (Qwit ou les plugins nautilus par exemple).</li>
<li>La 12.04 est très stable, c&#8217;est une LTS et elle sera supportée bien plus longtemps.</li>
</ul>
<p>Si vous devez installer une nouvelle version, installez la 13.04. Sinon, ne faites pas l&#8217;update, ça ne vaut pas le coup.</p>
<p>P.S: Ubuntu 13.04 vient avec Python 2.7 par défaut, et pas Python 3. C&#8217;est la 2eme fois qu&#8217;ils reportent. <a href="http://sametmax.com/dois-je-apprendre-python-2-ou-python-3/">Qu&#8217;est-ce que je vous disais, déjà ?</a></p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=5955&amp;md5=80a3db29927b1b405d03192d532cc6e8" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/alors-on-passe-a-ubuntu-13-04/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Falors-on-passe-a-ubuntu-13-04%2F&amp;language=en_GB&amp;category=text&amp;title=Alors%2C+on+passe+%C3%A0+Ubuntu+13.04+%3F&amp;description=J%26%238217%3Bai+utilis%C3%A9+Ubuntu+13.04+depuis+quelques+jours.+C%26%238217%3Best+un+bon+cru+%3A+l%26%238217%3Binterface+est+fluide+%28n%26%238217%3Boubliez+pas+d%26%238217%3Binstaller+preload%29+et+quelques+ajouts+ergonomiques+sympas+ont+fait+leur+apparition.+Mais+globalement%2C...&amp;tags=python%2Cubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/WYkOc.jpg" length="331591" type="image/jpg" />	</item>
		<item>
		<title>Mettre Ubuntu en veille en appuyant sur le bouton &#8216;power&#8217;</title>
		<link>http://sametmax.com/mettre-ubuntu-en-veille-en-appuyant-sur-le-bouton-power/</link>
		<comments>http://sametmax.com/mettre-ubuntu-en-veille-en-appuyant-sur-le-bouton-power/#comments</comments>
		<pubDate>Mon, 29 Apr 2013 07:24:43 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[settings]]></category>
		<category><![CDATA[suspend]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=5909</guid>
		<description><![CDATA[J'ai horreur que mon ordi se mette en veille quand je rabat le capot. C'est un ultra portable, donc je le balade partout. Du coup, je régle dans les options que la fermeture déclenche juste le verrouillage de l'écran : un geste et mon laptop est à l'abrit des blagues des petits malins dans les hackerspaces pendant la pose pipi.

Mais j'aime pouvoir le mettre en veille rapidement, en appuyant juste sur le bouton power, et il n'y a plus de paramètres pour le régler dans les settings d'Ubuntu.]]></description>
			<content:encoded><![CDATA[<p>J&#8217;ai horreur que mon ordi se mette en veille quand je rabat le capot. C&#8217;est un ultra portable, donc je le balade partout. Du coup, je régle dans les options que la fermeture déclenche juste le verrouillage de l&#8217;écran : un geste et mon laptop est à l&#8217;abrit des blagues des petits malins dans les hackerspaces pendant la pose pipi.</p>
<p>Mais j&#8217;aime pouvoir le mettre en veille rapidement, en appuyant juste sur le bouton power, et il n&#8217;y a plus de paramètres pour le régler dans les settings d&#8217;Ubuntu.</p>
<p>La solution et cette petite ligne de commande :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">gsettings <span style="color: #008000;">set</span> org.<span style="color: black;">gnome</span>.<span style="color: black;">settings</span>-daemon.<span style="color: black;">plugins</span>.<span style="color: black;">power</span> button-power <span style="color: #483d8b;">'suspend'</span></pre></div></div>

<p>Les valeurs possibles sont :</p>
<ul>
<li><strong>&#8216;blank&#8217;</strong> : aucune valeur.</li>
<li><strong>&#8216;suspend&#8217;</strong> : mettre en veille.</li>
<li><strong>&#8216;shutdown&#8217;</strong> : éteindre.</li>
<li><strong>&#8216;hibernate&#8217;</strong> : hiberner.</li>
<li><strong>&#8216;interactive&#8217;</strong> : afficher une fenêtre qui demande quoi faire.</li>
<li><strong>&#8216;nothing&#8217;</strong> : ne rien faire.</li>
</ul>
<p>On peut aussi <a href=" http://askubuntu.com/questions/66723/how-do-i-modify-the-power-options">le faire en graphique</a> pour ceux qui n&#8217;aiment pas le terminal.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=5909&amp;md5=790888b26cbe44bd429ed8a938f220ba" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/mettre-ubuntu-en-veille-en-appuyant-sur-le-bouton-power/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fmettre-ubuntu-en-veille-en-appuyant-sur-le-bouton-power%2F&amp;language=en_GB&amp;category=text&amp;title=Mettre+Ubuntu+en+veille+en+appuyant+sur+le+bouton+%26%238216%3Bpower%26%238217%3B&amp;description=J%26%238217%3Bai+horreur+que+mon+ordi+se+mette+en+veille+quand+je+rabat+le+capot.+C%26%238217%3Best+un+ultra+portable%2C+donc+je+le+balade+partout.+Du+coup%2C+je+r%C3%A9gle+dans+les+options...&amp;tags=settings%2Csuspend%2Cubuntu%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/04/JJLDYfI.jpg" length="30425" type="image/jpg" />	</item>
		<item>
		<title>Migrer wordpress d&#8217;un serveur à un autre &#8211; Pense-bête</title>
		<link>http://sametmax.com/migrer-wordpress-dun-serveur-a-un-autre-pense-bete/</link>
		<comments>http://sametmax.com/migrer-wordpress-dun-serveur-a-un-autre-pense-bete/#comments</comments>
		<pubDate>Wed, 09 Jan 2013 08:59:03 +0000</pubDate>
		<dc:creator>Max</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[migration]]></category>
		<category><![CDATA[ubuntu]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=4050</guid>
		<description><![CDATA[Quand on migre wordpress d'un serveur à autre sans vouloir se taper la réinstall il y a deux trois trucs à pas oublier...]]></description>
			<content:encoded><![CDATA[<p>Si on veut changer de serveur sans se taper la réinstall de wordpress ça peut devenir casse-tête si on oublie deux trois trucs&#8230;</p>
<p>Voici un petit pense-bête avec pour exemple une config Nginx / WordPress / php5-cgi  sur Ubuntu.</p>
<p>serveura.com = serveur sur lequel se trouve l&#8217;ancien WordPress à migrer<br />
serveurb.com = nouveau serveur qui va accueillir WordPress</p>
<p><strong>1. on sauve la db et on l&#8217;upload sur le nouveau serveur (on peut le faire à la fin si le blog a pas mal d&#8217;activité)</strong><br />
Sur le serveur A:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">mysqldump <span style="color: #660033;">-u</span> user_toto -ppass_toto base_a_toto <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>base_a_toto.sql
rsync <span style="color: #660033;">-P</span> <span style="color: #660033;">-azc</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>base_a_toto.sql user<span style="color: #000000; font-weight: bold;">@</span>serveurb.com:<span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>base_a_toto.sql</pre></div></div>

<p><strong>2. On copie wordpress sur le nouveau serveur</strong><br />
Sur le serveur A:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">rsync <span style="color: #660033;">-P</span> <span style="color: #660033;">-azc</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>monsite<span style="color: #000000; font-weight: bold;">/</span>wordpress<span style="color: #000000; font-weight: bold;">/</span> user<span style="color: #000000; font-weight: bold;">@</span>serveurb.com:<span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>monsite<span style="color: #000000; font-weight: bold;">/</span></pre></div></div>

<p><strong>3. Setup et configuration du nouveau serveur</strong><br />
Sur le serveur B:<br />
Installer les packets necessaires:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> php5-cgi php5-mysql mysql-server nginx spawn-fcgi <span style="color: #c20cb9; font-weight: bold;">sendmail</span></pre></div></div>

<p>Il faut lancer les services nginx et spawn-cgi (pour ce dernier on peut utiliser <a href="http://supervisord.org/">supervisord</a>)</p>
<p>Nginx:<br />
Editer le fichier /etc/nginx/conf.d/monsite.conf . Attention à bien indiquer le chemin absolu vers votre site pour <em>root</em></p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">server <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    listen      <span style="color: #000000;">80</span>;
    server_name  monsite.com www.monsite.com;                   <span style="color: #666666; font-style: italic;"># your domain name</span>
    root         <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>monsite<span style="color: #000000; font-weight: bold;">/</span>wordpress;  <span style="color: #666666; font-style: italic;"># absolute path to your WordPress installation</span>
    index index.php index.html;
&nbsp;
    error_log <span style="color: #ff0000;">&quot;/var/log/nginx_error.log&quot;</span>;
    access_log  <span style="color: #ff0000;">&quot;/var/log/nginx_access.log&quot;</span>;
&nbsp;
    try_files <span style="color: #007800;">$uri</span> <span style="color: #007800;">$uri</span><span style="color: #000000; font-weight: bold;">/</span> <span style="color: #000000; font-weight: bold;">/</span>index.php;
&nbsp;
    location ~ \.php$ <span style="color: #7a0874; font-weight: bold;">&#123;</span>
        include        <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>nginx<span style="color: #000000; font-weight: bold;">/</span>fastcgi_params;
        fastcgi_pass   127.0.0.1:<span style="color: #000000;">53217</span>;
        fastcgi_index index.php;
        fastcgi_buffers <span style="color: #000000;">8</span> 16k;
        fastcgi_buffer_size 32k;
        fastcgi_param  SCRIPT_FILENAME  <span style="color: #007800;">$document_root</span><span style="color: #007800;">$fastcgi_script_name</span>;
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
location = <span style="color: #000000; font-weight: bold;">/</span>robots.txt <span style="color: #7a0874; font-weight: bold;">&#123;</span>
        allow all;
        log_not_found off;
        access_log off;
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).</span>
location ~ <span style="color: #000000; font-weight: bold;">/</span>\. <span style="color: #7a0874; font-weight: bold;">&#123;</span>
        deny all;
        access_log off;
        log_not_found off;
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># Deny access to any files with a .php extension in the uploads directory</span>
location ~<span style="color: #000000; font-weight: bold;">*</span> ^<span style="color: #000000; font-weight: bold;">/</span>wp-content<span style="color: #000000; font-weight: bold;">/</span>uploads<span style="color: #000000; font-weight: bold;">/</span>.<span style="color: #000000; font-weight: bold;">*</span>.php$ <span style="color: #7a0874; font-weight: bold;">&#123;</span>
        deny all;
        access_log off;
        log_not_found off;
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># Deny access to any files with a .php extension in the uploads directory for multisite</span>
location ~<span style="color: #000000; font-weight: bold;">*</span> <span style="color: #000000; font-weight: bold;">/</span>files<span style="color: #000000; font-weight: bold;">/</span><span style="color: #7a0874; font-weight: bold;">&#40;</span>.<span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>.php$ <span style="color: #7a0874; font-weight: bold;">&#123;</span>
        deny all;
        access_log off;
        log_not_found off;
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></div></div>

<p><a href="http://serverfault.com/questions/6733/php-what-are-the-advantages-of-fastcgi-over-mod-php">Spawn-Fcgi</a>: C&#8217;est lui qui va lancer php5-cgi pour faire la liaison entre php et nginx. on va le lancer avec supervisor comme si c&#8217;était un service mais mieux.</p>
<p>Installation de Supervisor:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">apt-get</span> <span style="color: #c20cb9; font-weight: bold;">install</span> python-setuptools
easy_install supervisor
echo_supervisord_conf <span style="color: #000000; font-weight: bold;">&gt;</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>supervisord.conf</pre></div></div>

<p>Editez le fichier /etc/supervisord.conf pour y rajouter spawn-fcgi, c&#8217;est mieux de lancer php5-cgi avec un user autre que root (www-data ou autre) :</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>program:php5-cgi<span style="color: #7a0874; font-weight: bold;">&#93;</span>
<span style="color: #007800;">command</span>=<span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span>spawn-fcgi <span style="color: #660033;">-n</span> <span style="color: #660033;">-a</span> 127.0.0.1 <span style="color: #660033;">-p</span> <span style="color: #000000;">53217</span> <span style="color: #660033;">-u</span> www-data <span style="color: #660033;">-f</span> <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span>php5-cgi
<span style="color: #007800;">redirect_stderr</span>=<span style="color: #c20cb9; font-weight: bold;">true</span> 
<span style="color: #007800;">stdout_logfile</span>=<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>log<span style="color: #000000; font-weight: bold;">/</span>php5-cgi.log
<span style="color: #007800;">stdout_logfile_maxbytes</span>=10MB</pre></div></div>

<p>Pour lancer Spawn-fcgi:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">supervisorctl restart php5-cgi</pre></div></div>

<p>Mysql: on ajoute mysql au demarrage et on le lance</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">chkconfig mysql on
service mysql start</pre></div></div>

<p>Dump de la DB: il faut créer un user et une base sur la nouvelle install, si possible le même que sur l&#8217;ancien serveur pour faciliter la transition.<br />
Sur le serveur B:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">mysql <span style="color: #660033;">-u</span> root <span style="color: #660033;">-prootpass</span>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection <span style="color: #c20cb9; font-weight: bold;">id</span> is <span style="color: #000000;">42</span>
Server version: 5.5.28-0ubuntu0.12.04.3 <span style="color: #7a0874; font-weight: bold;">&#40;</span>Ubuntu<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
Copyright <span style="color: #7a0874; font-weight: bold;">&#40;</span>c<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #000000;">2000</span>, <span style="color: #000000;">2012</span>, Oracle and<span style="color: #000000; font-weight: bold;">/</span>or its affiliates. All rights reserved.
&nbsp;
Oracle is a registered trademark of Oracle Corporation and<span style="color: #000000; font-weight: bold;">/</span>or its
affiliates. Other names may be trademarks of their respective
owners.
&nbsp;
Type <span style="color: #ff0000;">'help;'</span> or <span style="color: #ff0000;">'\h'</span> <span style="color: #000000; font-weight: bold;">for</span> help. Type <span style="color: #ff0000;">'\c'</span> to <span style="color: #c20cb9; font-weight: bold;">clear</span> the current input statement.
&nbsp;
mysql<span style="color: #000000; font-weight: bold;">&gt;</span> create database base_a_toto;
Query OK, <span style="color: #000000;">1</span> row affected <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">0.00</span> sec<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
mysql<span style="color: #000000; font-weight: bold;">&gt;</span> GRANT ALL PRIVILEGES ON base_a_toto.<span style="color: #000000; font-weight: bold;">*</span> TO <span style="color: #ff0000;">&quot;user_toto&quot;</span><span style="color: #000000; font-weight: bold;">@</span><span style="color: #ff0000;">&quot;localhost&quot;</span> identified by <span style="color: #ff0000;">&quot;pass_toto&quot;</span>;
&nbsp;
Query OK, <span style="color: #000000;">0</span> rows affected <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">16.16</span> sec<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
mysql<span style="color: #000000; font-weight: bold;">&gt;</span> FLUSH PRIVILEGES;
Query OK, <span style="color: #000000;">0</span> rows affected <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">0.00</span> sec<span style="color: #7a0874; font-weight: bold;">&#41;</span></pre></div></div>

<p>Et on importe la base de données de serveura.com:</p>

<div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">mysql <span style="color: #660033;">-u</span> user_toto -ppass_toto base_a_toto <span style="color: #000000; font-weight: bold;">&lt;</span> <span style="color: #000000; font-weight: bold;">/</span>tmp<span style="color: #000000; font-weight: bold;">/</span>base_a_toto.sql</pre></div></div>

<p><strong>4. Changer les dns</strong><br />
des fois on oublie :) alors changez les dns et attendez un peu, normallement ça devrait crystalliser&#8230;</p>
<p>Ca prend pas 5 minutes, même avec les paquets tous prêts. on peut avoir de mauvaises surprises en route. Moi par exemple erreur 500 , pour m&#8217;aperçevoir au bout de 2 heures que j&#8217;avais pas installé php5-mysql d&#8217;où ce tuto ;)</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=4050&amp;md5=7bec150ad71bcbb5a9a5204da34ca11f" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/migrer-wordpress-dun-serveur-a-un-autre-pense-bete/feed/</wfw:commentRss>
		<slash:comments>14</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fmigrer-wordpress-dun-serveur-a-un-autre-pense-bete%2F&amp;language=en_GB&amp;category=text&amp;title=Migrer+wordpress+d%26%238217%3Bun+serveur+%C3%A0+un+autre+%26%238211%3B+Pense-b%C3%AAte&amp;description=Si+on+veut+changer+de+serveur+sans+se+taper+la+r%C3%A9install+de+wordpress+%C3%A7a+peut+devenir+casse-t%C3%AAte+si+on+oublie+deux+trois+trucs%26%238230%3B+Voici+un+petit+pense-b%C3%AAte+avec+pour+exemple...&amp;tags=migration%2Cubuntu%2Cwordpress%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/01/migration1.jpg" length="79816" type="image/jpg" />	</item>
		<item>
		<title>&#8220;ERROR: VIRTUALENVWRAPPER_LOG_DIR is not set&#8221; et &#8220;ImportError: cannot import name urandom&#8221;</title>
		<link>http://sametmax.com/error-virtualenvwrapper_log_dir-is-not-set-et-importerror-cannot-import-name-urandom/</link>
		<comments>http://sametmax.com/error-virtualenvwrapper_log_dir-is-not-set-et-importerror-cannot-import-name-urandom/#comments</comments>
		<pubDate>Sat, 17 Nov 2012 13:22:04 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[ubuntu]]></category>
		<category><![CDATA[virtualenvwrapper]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3122</guid>
		<description><![CDATA[Petit bug pour virtualenwrapper sous Ubuntu. Ca se corrige facilement.]]></description>
			<content:encoded><![CDATA[<p>Petits bugs pour <a href="http://sametmax.com/les-environnement-virtuels-python-virtualenv-et-virtualenvwrapper/">virtualenwrapper</a> sous Ubuntu. Ca se corrige facilement. </p>
<p>Ajoutez dans <em>.bashrc</em> pour corriger le premier:</p>
<p><code>export VIRTUALENVWRAPPER_LOG_DIR="$WORKON_HOME"<br />
export VIRTUALENVWRAPPER_HOOK_DIR="$WORKON_HOME"</code></p>
<p>Pour le second, il faut relancer la création de l&#8217;env, sur l&#8217;env lui-même. Si votre env s&#8217;appelle &#8220;mon_env&#8221;, faites:</p>
<p><code>mkvirtualenv mon_env</code></p>
<p>Il faut les mêmes paramètres qu&#8217;à la création de l&#8217;env.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=3122&amp;md5=94a9306a106f88c5ee3b6ed468602de0" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/error-virtualenvwrapper_log_dir-is-not-set-et-importerror-cannot-import-name-urandom/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Ferror-virtualenvwrapper_log_dir-is-not-set-et-importerror-cannot-import-name-urandom%2F&amp;language=en_GB&amp;category=text&amp;title=%26%238220%3BERROR%3A+VIRTUALENVWRAPPER_LOG_DIR+is+not+set%26%238221%3B+et+%26%238220%3BImportError%3A+cannot+import+name+urandom%26%238221%3B&amp;description=Petits+bugs+pour+virtualenwrapper+sous+Ubuntu.+Ca+se+corrige+facilement.+Ajoutez+dans+.bashrc+pour+corriger+le+premier%3A+export+VIRTUALENVWRAPPER_LOG_DIR%3D%22%24WORKON_HOME%22+export+VIRTUALENVWRAPPER_HOOK_DIR%3D%22%24WORKON_HOME%22+Pour+le+second%2C+il+faut+relancer+la+cr%C3%A9ation+de...&amp;tags=python%2Cubuntu%2Cvirtualenvwrapper%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/11/1510031-star1.gif" length="28252" type="image/jpg" />	</item>
	</channel>
</rss>
