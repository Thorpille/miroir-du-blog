<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max: Python, Django, Git et du cul &#187; python 3</title>
	<atom:link href="http://sametmax.com/tag/python-3/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Deux développeurs en vadrouille qui se sortent les doigts du code</description>
	<lastBuildDate>Wed, 05 Feb 2014 14:20:37 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.3.1</generator>
	<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2F&amp;language=en_US&amp;category=text&amp;title=Sam+%26amp%3B+Max%3A+Python%2C+Django%2C+Git+et+du+cul&amp;description=Deux+d%C3%A9veloppeurs+en+vadrouille+qui+se+sortent+les+doigts+du+code&amp;tags=blog" type="text/html" />
		<item>
		<title>Changement dans l&#8217;unpacking des iterables en Python 3</title>
		<link>http://sametmax.com/changement-dans-lunpacking-des-iterables-en-python-3/</link>
		<comments>http://sametmax.com/changement-dans-lunpacking-des-iterables-en-python-3/#comments</comments>
		<pubDate>Fri, 20 Dec 2013 07:49:59 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[python 3]]></category>
		<category><![CDATA[splat]]></category>
		<category><![CDATA[unpacking]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7656</guid>
		<description><![CDATA[Ahhh, l'unpacking... On croit qu'on a complètement <a href="http://sametmax.com/tag/unpacking/">fait le tour</a> de cette fonctionalité merveilleuse, et PAF, on découvre encore autre chose.

Par exemple, la syntaxe a été améliorée avec Python 3, et accepte maintenant un <a href="http://www.python.org/dev/peps/pep-3132/">unpacking partiel</a> !]]></description>
			<content:encoded><![CDATA[<p>Ahhh, l&#8217;unpacking&#8230; On croit qu&#8217;on a complètement <a href="http://sametmax.com/tag/unpacking/">fait le tour</a> de cette fonctionalité merveilleuse, et PAF, on découvre encore autre chose.</p>
<p>Par exemple, la syntaxe a été améliorée avec Python 3, et accepte maintenant un <a href="http://www.python.org/dev/peps/pep-3132/">unpacking partiel</a> !</p>
<p>Ca se fait en l&#8217;utilisant l&#8217;opérateur splat, c&#8217;est à dire l&#8217;étoile :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l = <span style="color: #008000;">list</span><span style="color: black;">&#40;</span><span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> l
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span>, <span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">3</span>, <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a, <span style="color: #66cc66;">*</span>b = l
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">3</span>, <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a, <span style="color: #66cc66;">*</span>b, c = l
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">2</span>, <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> c
<span style="color: #ff4500;">4</span></pre></div></div>

<p>Ca marche bien entendu également dans les boucles <code>for</code>.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7656&amp;md5=79234a2f0c8636aa390b93bd9fb7a3b5" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/changement-dans-lunpacking-des-iterables-en-python-3/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fchangement-dans-lunpacking-des-iterables-en-python-3%2F&amp;language=en_GB&amp;category=text&amp;title=Changement+dans+l%26%238217%3Bunpacking+des+iterables+en+Python+3&amp;description=Ahhh%2C+l%26%238217%3Bunpacking%26%238230%3B+On+croit+qu%26%238217%3Bon+a+compl%C3%A8tement+fait+le+tour+de+cette+fonctionalit%C3%A9+merveilleuse%2C+et+PAF%2C+on+d%C3%A9couvre+encore+autre+chose.+Par+exemple%2C+la+syntaxe+a+%C3%A9t%C3%A9+am%C3%A9lior%C3%A9e+avec+Python...&amp;tags=python%2Cpython+3%2Csplat%2Cunpacking%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/12/lHLWwNE.jpg" length="119468" type="image/jpg" />	</item>
		<item>
		<title>Conséquences de print devenant une fonction en Python 3</title>
		<link>http://sametmax.com/consequence-de-print-devenant-une-fonction-en-python-3/</link>
		<comments>http://sametmax.com/consequence-de-print-devenant-une-fonction-en-python-3/#comments</comments>
		<pubDate>Tue, 03 Dec 2013 08:31:37 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[print]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[python 3]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=8164</guid>
		<description><![CDATA[Devoir utiliser <code>print()</code> au lieu de <code>print</code> m'arrache la gueule, je dois l'avouer. J'ai l'impression que ces deux parenthèses ma prennent 5 heures à taper, là où avant mon petit espace était à portée de pouce.

Mais évidement, la décision de faire de <code>print</code> une fonction est parfaitement rationnelle, et en voici tous les avantages...]]></description>
			<content:encoded><![CDATA[<p>Devoir utiliser <code>print()</code> au lieu de <code>print</code> m&#8217;arrache la gueule, je dois l&#8217;avouer. J&#8217;ai l&#8217;impression que ces deux parenthèses ma prennent 5 heures à taper, là où avant mon petit espace était à portée de pouce.</p>
<p>Mais évidement, la décision de faire de <code>print</code> une fonction est parfaitement rationnelle, et en voici tous les avantages&#8230;</p>
<h2><code>print</code> n&#8217;est plus une déclaration, mais une expression</h2>
<p>Il y a deux types d&#8217;instructions en Python : les déclarations (&#8216;statement&#8217; dans la langue de Chuck Norris) et les expressions.</p>
<p>Les déclarations sont des instructions indépendantes : <code>while</code>, <code>var = 'valeur'</code>, <code>try</code>, <code>def</code>, etc. On ne peut pas les mettre dans une expression, seulement les imbriquer dans une autre déclaration.</p>
<p>Les expressions, elles, sont imbricables dans n&#8217;importe quoi, et elles retournent toujours quelques chose quelque chose, fusse <code>None</code>. Parmis les expressions on retrouve : les lambdas, les listes en intentions, les appels de fonctions, etc.</p>
<p>Avant, <code>print</code> était une déclaration, ce qui était très peu souple. Maintenant, c&#8217;est un appel de fonction, et donc une expression.</p>
<p>On peut donc utiliser <code>print</code> dans une autre expression et ainsi :</p>
<p>Dans une <a href="http://sametmax.com/fonctions-anonymes-en-python-ou-lambda/">lambda</a> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;">crier = <span style="color: #ff7700;font-weight:bold;">lambda</span> x, <span style="color: #66cc66;">*</span>a, <span style="color: #66cc66;">**</span>k: <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>x.<span style="color: black;">upper</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>, <span style="color: #66cc66;">*</span>a, <span style="color: #66cc66;">**</span>k<span style="color: black;">&#41;</span></pre></div></div>

<p>Dans une <a href="http://sametmax.com/python-love-les-listes-en-intention-partie/">liste en intention</a> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: black;">&#91;</span><span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>x<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span></pre></div></div>

<h2>Plus de syntaxe bizarre</h2>
<p>Comment supprimer le saut de ligne quand on print avec l&#8217;ancienne syntaxe ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">&quot;Hello&quot;</span>, <span style="color: #808080; font-style: italic;"># &lt;- notez la virgule</span>
<span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">&quot;You&quot;</span>
Hello You</pre></div></div>

<p>Avec la nouvelle syntaxe :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Hello &quot;</span>, end=<span style="color: #483d8b;">''</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'You'</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Comment rediriger le print vers stderr avec l&#8217;ancienne syntaxe ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #66cc66;">&gt;&gt;</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">stderr</span>, <span style="color: #483d8b;">'arg !'</span></pre></div></div>

<p>Avec la nouvelle ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'arg !'</span>, <span style="color: #008000;">file</span>=<span style="color: #dc143c;">sys</span>.<span style="color: black;">stderr</span><span style="color: black;">&#41;</span></pre></div></div>

<p>Comment faire une liste séparée par des virgules avec l&#8217;ancienne syntaxe ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l = <span style="color: black;">&#91;</span><span style="color: #483d8b;">'Des petits trous'</span>, <span style="color: #483d8b;">'des petits trous'</span>, <span style="color: #483d8b;">'toujours des petits trous'</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">', '</span>.<span style="color: black;">join</span><span style="color: black;">&#40;</span>l<span style="color: black;">&#41;</span>
Des petits trous, des petits trous, toujours des petits trous</pre></div></div>

<p>Avec la nouvelle ?</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #66cc66;">*</span>l, sep=<span style="color: #483d8b;">', '</span><span style="color: black;">&#41;</span></pre></div></div>

<p>En gros, la syntaxe est unifiée, plus besoin de penser à tous ces cas particuliers. Et en plus on peut demander de l&#8217;aide avec <code>help(print)</code> alors qu&#8217;avant ça faisait une syntaxe error.</p>
<h2>On peut récupérer une référence sur
<pre>print</pre>
</h2>
<p>Et donc la passer en paramètre pour faire de l&#8217;<a href="http://sametmax.com/quest-ce-quun-callback/">injection de dépendance</a> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> truc<span style="color: black;">&#40;</span>a, <span style="color: #ff7700;font-weight:bold;">print</span>=<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># faire un truc avec a</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>a<span style="color: black;">&#41;</span><span style="color: #66cc66;">;</span> <span style="color: #808080; font-style: italic;"># on peut utiliser print normalement</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">logging</span>
log = loging.<span style="color: black;">getLogger</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
truc<span style="color: black;">&#40;</span>machin, <span style="color: #ff7700;font-weight:bold;">print</span>=log<span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># on print pas, on log !</span>
truc<span style="color: black;">&#40;</span>autre_machin, <span style="color: #ff7700;font-weight:bold;">print</span>=<span style="color: #ff7700;font-weight:bold;">lambda</span> <span style="color: #66cc66;">*</span>a, <span style="color: #66cc66;">**</span>k: <span style="color: #008000;">None</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># ignore les prints !</span></pre></div></div>

<p>Et également appliquer tous les outils de programmation fonctionnelle de Python :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
<span style="color: #ff7700;font-weight:bold;">from</span> functools <span style="color: #ff7700;font-weight:bold;">import</span> partial
error = partial<span style="color: black;">&#40;</span><span style="color: #ff7700;font-weight:bold;">print</span>, <span style="color: #008000;">file</span>=<span style="color: #dc143c;">sys</span>.<span style="color: black;">stderr</span><span style="color: black;">&#41;</span>
error<span style="color: black;">&#40;</span><span style="color: #483d8b;">'Wrong !'</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># va directement sur stderr</span></pre></div></div>

<h2>Activer <code>print()</code> en Python 2.7</h2>
<p>Si vous voulez prendre toute de suite de bonnes habitudes, vous pouvez faire, en Python 2.7 :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">__future__</span> <span style="color: #ff7700;font-weight:bold;">import</span> print_function</pre></div></div>

 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=8164&amp;md5=a05024d9531d9af8137f90e782c3a559" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/consequence-de-print-devenant-une-fonction-en-python-3/feed/</wfw:commentRss>
		<slash:comments>13</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fconsequence-de-print-devenant-une-fonction-en-python-3%2F&amp;language=en_GB&amp;category=text&amp;title=Cons%C3%A9quences+de+print+devenant+une+fonction+en+Python+3&amp;description=Devoir+utiliser+print%28%29+au+lieu+de+print+m%26%238217%3Barrache+la+gueule%2C+je+dois+l%26%238217%3Bavouer.+J%26%238217%3Bai+l%26%238217%3Bimpression+que+ces+deux+parenth%C3%A8ses+ma+prennent+5+heures+%C3%A0+taper%2C+l%C3%A0+o%C3%B9+avant+mon+petit...&amp;tags=print%2Cpython%2Cpython+3%2Cblog" type="text/html" />
	</item>
		<item>
		<title>Les annotations en Python 3</title>
		<link>http://sametmax.com/les-annotations-en-python-3/</link>
		<comments>http://sametmax.com/les-annotations-en-python-3/#comments</comments>
		<pubDate>Wed, 06 Nov 2013 06:05:43 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[annotations]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[python 3]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7602</guid>
		<description><![CDATA[Que peut-on attendre d'une fonctionnalité optionnelle qui ne fait absolument rien ?]]></description>
			<content:encoded><![CDATA[<p>Mais oui, on va parler un peu plus de Python 3 à partir de maintenant \o/</p>
<p>C&#8217;est qu&#8217;avec la prochaine version 3.4 qui <a href="http://docs.python.org/3.4/whatsnew/3.4.html">apporte tellement de bonnes choses</a>, <a href="https://docs.djangoproject.com/en/dev/releases/1.6/">Django 1.6</a>  pleinement compatible et des libs comme <a href="http://pillow.readthedocs.org/en/latest/">Pillow</a> et <a href="https://pypi.python.org/pypi/six/1.1.0">six</a> pour combler les trous, ça y est, on peut enfin s&#8217;y mettre.</p>
<p>Commençons donc par les <a href="http://www.python.org/dev/peps/pep-3107/">annotations</a>, feature simple, et qu&#8217;on ne retrouve pas backportée en 2.7.</p>
<h2>D&#8217;abord, à quoi servent les annotations ?</h2>
<p>A rien !</p>
<p>Non, non, je ne déconne pas. Non seulement les annotations sont parfaitement optionnelles, mais en plus elles n&#8217;ont aucun effet.</p>
<p>Je répète pour que ça rentre : vous n&#8217;avez pas à utiliser les annotations. Aucun programme Python n&#8217;a besoin d&#8217;utiliser les annotations. Vous pouvez programmer votre vie entière en Python sans avoir jamais à utiliser les annotations. Et si vous les utilisez, elles ne changeront rien à votre programme.</p>
<p>Point.</p>
<h2>Non, mais sérieux, ça sert à quoi ?</h2>
<p>Python est un langage très souple, et une raison de sa souplesse c&#8217;est que la nature des données que vous traitez est dynamiquement découverte à l’exécution. Particulièrement, le type des variables est dynamique. La portée des variable est dynamique.</p>
<p>Avantages :</p>
<ul>
<li>Le code est court et clair.</li>
<li>Le langage est très facile à apprendre.</li>
<li>On peut utiliser le duck typing.</li>
</ul>
<p>Inconvénients :</p>
<ul>
<li>Il faut écrire des informations en plus dans la doc.</li>
<li>Le code est plus lent car la VM ne peut optimiser le code pour les types.</li>
<li>Les IDE ont moins d&#8217;outils pour aider à la rédaction du code.</li>
</ul>
<p>C&#8217;est la nature de Python. Pour certains cas, c&#8217;est ce qu&#8217;on veut. Dans d&#8217;autres cas où ce n&#8217;est pas adapté, il faut choisir un autre langage.</p>
<p>Les annotations sont là pour corriger ce point : on va permettre de fournir des informations en plus, <strong>si, et seulement, si, on le souhaite</strong>.</p>
<p>Ces informations n&#8217;auront aucun impact sur l&#8217;exécution du code. La VM Python va les ignorer. Mais un outil extérieur pourra potentiellement les utiliser pour en faire quelque chose.</p>
<h2>Show me the code !</h2>
<p>Faites chauffer votre interpréteur de Python 3&#8230;</p>
<p>On peut annoter <strong>uniquement</strong> les paramètres d&#8217;une fonction (ou méthode) :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> ma_fonction<span style="color: black;">&#40;</span>param1: <span style="color: #483d8b;">&quot;Une annotation&quot;</span>, param2: <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>, param3: <span style="color: #008000;">int</span><span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>param1, param2, param3<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ma_fonction<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span>,<span style="color: #ff4500;">2</span>,<span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>  <span style="color: #808080; font-style: italic;"># une annotation ne change absolument RIEN</span>
<span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> <span style="color: #ff4500;">3</span></pre></div></div>

<p>L&#8217;annotation se note donc ainsi : nom du paramètre: annotation.</p>
<p>L&#8217;annotation PEUT être n&#8217;importe quelle expression Python valide. En fait l&#8217;annotation DOIT être une expression valide. Et <strong>cette expression sera exécutée</strong> une, et une seule fois, à l&#8217;initialisation du module. Le résultat sera stocké et accessible, via l&#8217;attribut <code>__annotations__</code> :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> ma_fonction.__annotations__
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'param1'</span>: <span style="color: #483d8b;">'Une annotation'</span>, <span style="color: #483d8b;">'param2'</span>: <span style="color: #ff4500;">2</span>, <span style="color: #483d8b;">'param3'</span>: <span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'int'</span><span style="color: #66cc66;">&gt;</span><span style="color: black;">&#125;</span></pre></div></div>

<p>Évidément, les annotations se mélangent sans problème avec les cas avancés de paramétrage :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> ma_fonction<span style="color: black;">&#40;</span>param1 : <span style="color: #483d8b;">&quot;Une annotation&quot;</span> = <span style="color: #483d8b;">&quot;valeur par défaut&quot;</span>, <span style="color: #66cc66;">*</span>param2: <span style="color: #483d8b;">&quot;Autre annotation&quot;</span><span style="color: black;">&#41;</span>:
... <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>param1, param2<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ma_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
valeur par défaut <span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></div></div>

<p>On peut également spécifier une annotation pour la valeur de retour :</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> ma_fonction<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> -<span style="color: #66cc66;">&gt;</span> <span style="color: #008000;">None</span>: <span style="color: #808080; font-style: italic;"># un petit goût de coffeescript</span>
...     <span style="color: #ff7700;font-weight:bold;">pass</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ma_fonction.__annotations__
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'return'</span>: <span style="color: #008000;">None</span><span style="color: black;">&#125;</span></pre></div></div>

<p>Et combiner tout ce bordel pour faire des trucs bien compliqués qui vous garantissent la sécurité d&#8217;emploi, ce qui manque cruellement en Python (les trucs compliqués, pas la sécurité d&#8217;emploi&#8230;):</p>

<div class="wp_syntax"><div class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> ma_fonction<span style="color: black;">&#40;</span>param1: <span style="color: #ff7700;font-weight:bold;">lambda</span> x: x <span style="color: #66cc66;">*</span> <span style="color: #ff4500;">2</span>,
...                 <span style="color: black;">param2</span>: <span style="color: black;">&#40;</span><span style="color: #ff7700;font-weight:bold;">lambda</span> x: x <span style="color: #66cc66;">*</span> <span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span> = <span style="color: #ff4500;">5</span>,
...                 <span style="color: #66cc66;">**</span>params : <span style="color: #483d8b;">&quot;Keywords parameters rocks&quot;</span><span style="color: black;">&#41;</span> -<span style="color: #66cc66;">&gt;</span> <span style="color: #008000;">list</span>:
...     <span style="color: black;">res</span> = <span style="color: black;">&#91;</span>param1, param2<span style="color: black;">&#93;</span>
...     <span style="color: black;">res</span>.<span style="color: black;">extend</span><span style="color: black;">&#40;</span>params<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ma_fonction<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">2</span>, param3=<span style="color: #ff4500;">3</span>, param4=<span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>, <span style="color: #ff4500;">2</span>, <span style="color: #483d8b;">'param4'</span>, <span style="color: #483d8b;">'param3'</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ma_fonction.__annotations__
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'return'</span>: <span style="color: #66cc66;">&lt;</span>class <span style="color: #483d8b;">'list'</span><span style="color: #66cc66;">&gt;</span>, <span style="color: #483d8b;">'param1'</span>: <span style="color: #66cc66;">&lt;</span>function <span style="color: #66cc66;">&lt;</span>lambda<span style="color: #66cc66;">&gt;</span> at 0x7f77a2982e60<span style="color: #66cc66;">&gt;</span>, <span style="color: #483d8b;">'param2'</span>: <span style="color: #ff4500;">4</span>, <span style="color: #483d8b;">'params'</span>: <span style="color: #483d8b;">'Keywords parameters rocks'</span><span style="color: black;">&#125;</span></pre></div></div>

<p>Les lambdas ne peuvent pas être annotées par contre.</p>
<h2>Le potentiel des annotations</h2>
<p>Les annotations sont le cas typique d&#8217;une fonctionnalité bac à sable. En clair, sur la mailling list il y a eu de nombreuses requêtes pour permettre de la vérification de type, de l&#8217;auto documentation, de la translittération et autres joyeusetés.</p>
<p>Ne sachant pas comment répondre de manière propre à ces demandes, ni lesquelles étaient les plus prioritaires, les annotations ont été créées. Le but et de laisser maintenant la communauté fabriquer les outils, et ainsi :</p>
<ul>
<li>Ceux pour les fonctionnalités les plus utilisées seront naturellement priorisées.</li>
<li>Les standards pour les annotations vont émerger par l&#8217;usage, et pas parce que Guido l&#8217;a décidé depuis son bureau au doigt mouillé.</li>
<li>Les fonctionnalités du genre &#8220;je veux un poney&#8221; seront tout simplement ignorées puisque personne ne travaillera suffisamment dessus (quand quelque chose est un caprice, le capricieux se sort rarement les extrémités manuelles de la cavité rectale.)</li>
</ul>
<p>Des outils comme <a href="http://www.fightingquaker.com/pyanno/">pyanno</a> donnaient déjà un exemple de ce que la communauté pouvait désirer. Reste à savoir si ce sera vraiment utilisé. Les gens qui font du Python sont rarement fan du Java. Mais le caractère optionnel de la chose pourrait bien ajouter un vrai plus au langage sans l&#8217;alourdir.</p>
<p>Voici donc ce qu&#8217;on peut attendre des outils tierces parties qui utiliseront les annotations dans le futur :</p>
<h3>Amélioration des performances</h3>
<p>L&#8217;utilisation de <a href="https://rpython.readthedocs.org/en/improve-docs/">RPython</a> pour coder <a href="http://pypy.org/">Pypy</a> a montré que les perfs de Python pouvaient être fantastiques, si on rajoutait quelques annotations. RPython, est, je le rappelle, un subset de Python (donc tout code RPython tourne dans l&#8217;interpréteur Python normal), mais avec des annotations de type, sous forme de commentaires.</p>
<p>On peut donc imaginer que dans le futur, les codes en fort besoin de perfs comme pour l&#8217;embarqué ou le traitement scientifique, pourront ajouter dans les parties clés de l&#8217;algo des annotations pour booster la vitesse ou diminuer la mémoire consommée. On parlerait ici alors d&#8217;annotation de type. <code>int</code>, <code>list</code>, <code>UneClasse</code> sont en effet des expressions Python valides&#8230;</p>
<p>L&#8217;avantage de l&#8217;annotation, c&#8217;est son caractère purement optionnel, qu&#8217;on peut ajouter seulement à certains codes, ou à une partie du code.</p>
<h3>Aide à la saisie</h3>
<p>Les IDE ont du mal avec Python. La complétion du code, l&#8217;aide en popup, la refactorisation automatique et toutes ces joyeusetés sont rarement bien implémentées.</p>
<p>Dans ma vie de tous les jours, je m&#8217;en branle. Je code tellement vite en Python, je ne m&#8217;en aperçois même pas. Mais quand j&#8217;utilise une nouvelle lib, ça peut être utile.</p>
<p>Typiquement, pour un code comme celui de <a href="https://github.com/sametmax/0bin/">0bin</a>, je ne me servirais pas des annotations. Mais pour une lib comme <a href="https://github.com/sametmax/minibelt">minibelt</a>, je prendrais peut être le temps de mettre des annotations de type, pour aider ceux qui vont l&#8217;utiliser. Ou une annotation pour signaler les exceptions que certaines fonctions peuvent lever.</p>
<h3>Génération de documentation</h3>
<p>Certains voient les annotations comme un complément aux docstrings. Ce n&#8217;est pas mon cas, mais je vous le note, au cas où ça devienne une tendance.</p>
<h3>Vérification de Type</h3>
<p>Dans la même lignée de l&#8217;aide à la saisie, pour certaines fonctions (c&#8217;est rare, mais ça arrive), on veut éviter le duck typing et forcer l&#8217;utilisateur à passer un type en particulier. Avoir cette possibilité via les annotations pourraient être utile.</p>
<p>Je suis septique sur cet usage, en effet des libs existent depuis des années pour faire cela, et plus, via des décorateurs, et ça n&#8217;est pas très utilisé. La différence est qu&#8217;un mécanisme standard pourra être détecté par les IDE.</p>
<p>Après on risque d&#8217;avoir des abus pour ce genre de fonctionnalités. Je vois d&#8217;ici arriver les codeurs d&#8217;autres langages caféinés, essayant de pousser l&#8217;usage d&#8217;une annotation rendant des attributs <code>private</code> :-)</p>
<p>Heureusement, les annotations seront normalement pour toujours optionnelles.</p>
<h3>Translittération de code</h3>
<p>Vous avez un code Python et vous voulez le transformer en code Cobol ? Bon, le compilateur de Pypy a déjà le potentiel de le faire, mais avec les annotations, il est potentiellement possible de rajouter suffisamment d&#8217;informations pour qu&#8217;on puisse toujours transformer un code de Python vers un autre langage Turing complet.</p>
<p>J&#8217;ai dit potentiellement.</p>
<h2>Je répète une dernière fois&#8230;</h2>
<p>Les annotations ne font rien. Elles n&#8217;ont pas le but de faire quelque chose et de toute façon sont optionnelles.</p>
<p>Leur but est de permettre à la communauté de créer des nouveaux outils utilisant les annotations et voir lesquels seront les plus utilisés, matures et désirés.</p>
<p>Pour le moment, il n&#8217;y a pas grand chose de fait avec, mais jusqu&#8217;ici Python 3 n&#8217;a pas été très populaire. Cela risque de changer avec 2014 qui propulsera Python 3.4 dans la cour des grands.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7602&amp;md5=07b3f32d4f8ec8a3a4e4363f39dbfc9b" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/les-annotations-en-python-3/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fles-annotations-en-python-3%2F&amp;language=en_GB&amp;category=text&amp;title=Les+annotations+en+Python+3&amp;description=Mais+oui%2C+on+va+parler+un+peu+plus+de+Python+3+%C3%A0+partir+de+maintenant+%5Co%2F+C%26%238217%3Best+qu%26%238217%3Bavec+la+prochaine+version+3.4+qui+apporte+tellement+de+bonnes+choses%2C+Django+1.6...&amp;tags=annotations%2Cpython%2Cpython+3%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/11/qyx8R0R.jpg" length="23185" type="image/jpg" />	</item>
		<item>
		<title>Mon premier projet Python3</title>
		<link>http://sametmax.com/mon-premier-projet-python3/</link>
		<comments>http://sametmax.com/mon-premier-projet-python3/#comments</comments>
		<pubDate>Thu, 03 Oct 2013 18:37:01 +0000</pubDate>
		<dc:creator>coyote</dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[django]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[python 3]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7281</guid>
		<description><![CDATA[Ceci est un post invité de Coyote posté sous licence creative common 3.0 unported. Et oui, il fallait bien que ça arrive. La genèse Bon, ça avait commencé doucement. Il y a de ça quelques temps (avant même l&#8217;article de Sam), j&#8217;avais configuré mon Sublimissime pour qu&#8217;il me force les import du __futur__. Étant moi-même [...]]]></description>
			<content:encoded><![CDATA[<blockquote><p>
Ceci est un post invité de <a href="http://sametmax.com/author/coyote/">Coyote</a> posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/">creative common 3.0 unported</a>.
</p></blockquote>
<p>Et oui, il fallait bien que ça arrive.</p>
<h3>La genèse</h3>
<p>Bon, ça avait commencé doucement. Il y a de ça quelques temps (avant même l&#8217;article de Sam), j&#8217;avais configuré mon Sublimissime pour qu&#8217;il me force les <code>import</code> du <code>__futur__</code>.<br />
Étant moi-même un peu un nazi de la convention de code, ça ne m&#8217;a pas dérangé plus que cela: les keyword <code>print</code> et autres sont pas trop ma tasse de thé. Par contre, c&#8217;est vrai que ça m&#8217;a un peu forcé la main sur les import relatifs, que j&#8217;utilisais visiblement un peu trop.</p>
<p>Récemment, sur un autre projet, je me dis “allez, je passe à la syntaxe <code>"hello {}".format("world")</code> au lieu des <code>"hello" % "world"</code>” puisque c&#8217;est ce qui est désormais recommandé. Bon, c&#8217;est un peu chiant au début mais on s&#8217;y fait vite.</p>
<p>Aussi, j&#8217;ai adopté la suppression des prefix <strong>u</strong> devant les strings. Je sais qu&#8217;avec Python 3.3 on peut à nouveau les utiliser, mais vraiment, j&#8217;ai toujours trouvé ça moche et insupportable, alors je suis <strong>très</strong> content de ne plus avoir à me les farcir.<br />
Que ceux que je vois râler me disent comment ils justifient qu&#8217;avec ce temple de la simplicité et de la lisibilité qu&#8217;est Python, on doivent préfixer toutes nos chaines par des petits <code>u</code> ridicules.</p>
<p>Voilà pour l&#8217;historique, lentement mais surement, je me préparais à prendre peut-être de bonnes habitudes pour le jour (très) lointain ou Python3 deviendrait réalité.</p>
<p>Et c&#8217;est là que mon collègue, un pervers à lunettes, nous propose d&#8217;utiliser PY3 pour de vrai, sur un nouveau projet.</p>
<p>C&#8217;est vrai que le projet s&#8217;y prêtait bien: un petit site web de CRUD avec Django. On s&#8217;est gratté le menton deux minutes et puis on s&#8217;est dit “pourquoi pas ?”.</p>
<h3>Par où commencer ?</h3>
<p>C&#8217;est con hein, mais la première chose que tu fais, c&#8217;est te demander qu&#8217;est ce qui change entre PY2 et PY3.<br />
Et bien la réponse est pas simple du tout et si tu crois que tu vas trouver une URL avec une liste de chose à changer, tu te trompes lourdement.</p>
<p>Le problème est que PY3.0 avait sans doute dû être fini à la pisse et que donc les choses ont beaucoup évoluées entre 3.0, 3.1, 3.2 et 3.3. J&#8217;ai lu beaucoup de posts sans importance sur toutes ces étapes intermédiaires, mais la conclusion, c&#8217;est que grosso-modo, il faut passer de 2.7 à 3.3. Entre les deux, c&#8217;est un peu comme naitre au <a href="https://fr.wikipedia.org/wiki/Sahara_Occidental">Sahara Occidental</a>.</p>
<h3>Installer PY3.3</h3>
<p>Comme on travaille en équipe, on a des setup différents: OSX, Ubuntu 12.04 et Ubuntu 13.04.</p>
<p>Ça c&#8217;est passé sans douleur malgré les appréhensions. Pour Ubuntu, il suffit d&#8217;utiliser le <a href="https://launchpad.net/~fkrull/+archive/deadsnakes">ppa deadsnakes</a>.<br />
Une fois installé, un coup de <em>virtualenv</em> (<code>mkvirtualenv -p /usr/bin/python3.3 monenv3</code>) et c&#8217;est parti.</p>
<h3>Les dépendances</h3>
<p>Comme expliqué plus haut, on a choisi de faire ce projet en PY3 parce qu&#8217;il est petit et sans dépendances ; donc pas très représentatif.<br />
Cependant, on utilise:<br />
<code>Django==1.5.4<br />
South==0.8.2<br />
django-mptt==0.6.0<br />
django-picklefield==0.3.0<br />
numpy==1.7.1<br />
unicodecsv*</code></p>
<p>Aucun problème avec ceux là. On a cru que South nous faisait des misères mais en fait c&#8217;était un import relatif avec un <code>pass</code> de cochon qui foutait la merde (<code>try: from local_settings import * except ImportError: pass</code>.<br />
Donc la leçon ici, c&#8217;est que <strong>les imports relatifs c&#8217;est mal</strong>.</p>
<p>Au niveau des dépendances, on a du se séparer de batbelt. Oui, je parle bien de <a href="https://github.com/sametmax/Bat-belt">sametmax/Bat-Belt</a> qui n&#8217;est pas du tout PY3 proof. Ne pleurez pas, moi aussi j&#8217;ai été très déçu et j&#8217;attends des explications (foireuses, je les vois venir d&#8217;ici).</p>
<p>Bref, comme on utilise batbelt pour presque rien, on a copié honteusement (<a href="https://en.wikipedia.org/wiki/Zlib_License">ou pas</a>) le code nécessaire.</p>
<p>Dernière remarque, vous voyez dans la liste <code>unicodecsv</code>. C&#8217;est un peu tricky puisque PY3 supporte unicode par défaut, le module <code>csv</code> de PY3 fonctionne directement ; et de fait, <code>unicodecsv</code> n&#8217;existe plus. Oui, je me suis fait avoir comme un débutant.<br />
Bref, comme on souhaite aussi supporter PY2 et pas uniquement PY3, on a un beau <code>if PY2: import unicodecsv as csv else: import csv</code>.</p>
<h3>Les problèmes</h3>
<p>Peu nombreux je dois dire et c&#8217;est plutôt encourageant. De tête:</p>
<ul>
<li>Fini les <code>__unicode__()</code> dans les modèles Django.<br />
Pour gérer ce cas à la con, on utilise ce <a href="https://raw.github.com/mitsuhiko/jinja2/master/jinja2/_compat.py">fichier _compat de Jinja2</a>. Je vous encourage à le copier, il défini notamment la variable PY2 pratique pour switcher comme le cas du csv ci-dessus.<br />
Bref, dans ce _compat, il y a un class decorator <code>implements_to_string</code> qui permet de ne définir que <code>__str__()</code> (renvoie de l&#8217;unicode) et le reste est géré automatiquement.<br />Django propose la même chose via <code>django.utils.encoding.python_2_unicode_compatible</code> mais je préfère la toolbox Jinja.</li>
<li>J&#8217;ai parlé dans les dépendances du cas <code>unicodecsv</code>. Ici c&#8217;était le seul, mais clairement dans beaucoup de projet qui manipulent des stream ou des fichiers, il va falloir faire ce genre de combines pour suporter PY2 et PY3.</li>
<li>Un edge case très rigolo (après coup!) avec le <code>django-picklefield</code>. Le field se comportait correctement avec PY3 mais pas avec PY2 et pas dans tous les cas. Du bonheur à <s>tariner</s>déboguer.<br />Pour l&#8217;anecdote: <code><br />
x = MyModel(id=1)<br />
x.picklefield = [1,2,3]<br />
x.save()</p>
<p>x = MyModel(id=2)<br />
x.picklefield = {'a': 1, 'b': 3}<br />
x.save()</code><br />
Ce code fonctionne bien avec PY3, mais avec PY2, le fait de réutiliser le même nom de variable rend le PickleField tout chose et donc il sérialise deux fois la valeur passée. Encore une fois, <strong>la leçon ici est d&#8217;être rigoureux</strong>.</li>
<li>Les fonctions du type <code>dict.keys()</code> et assimilés ne renvoient plus de listes, mais ont été remplacés par leur équivalents générateurs (<code>dict.iterkeys()</code>) et ceux-ci n&#8217;existent plus. Donc un peu de gymnastique syntaxique quand on est habitué à l&#8217;ancienne syntaxe.</li>
<li>Numpy refusait de s&#8217;installer sur certaines versions d&#8217;Ubuntu (je me souviens plus laquelle) car il ne trouvait pas un des headers de Python. C&#8217;est du au fait qu&#8217;il cherche ce header dans le même répertoire que le header précédent alors qu&#8217;il est stocké ailleurs. Un symlink fait l&#8217;affaire.</li>
<li>Enfin, le dernier problème, qui va réveler que <strong>tout ceci n&#8217;est qu&#8217;une imposture</strong>: <code>chaussette</code> et <code>circus</code> que j&#8217;utilise pour le déploiement ne sont pas compatibles PY3 !! Pas de debug ici, ça ne s&#8217;installe même pas. Résulalt: <strong>on a déployé en PY 2.7</strong>. Bon, pour vous consoler (et moi avec), le github de ces 2 projets est plein de commits récents en rapport avec PY3 donc j&#8217;imagine que ça ne saurait tarder.</li>
</ul>
<h3>Conclusion</h3>
<p>Et bien, on a un petit projet développé à plusieurs, en PY3.3, qui est déployé en PY2.7 donc c&#8217;est possible ; on a pas rencontré de grande difficultées donc je pense que pour du web, c&#8217;est pas loin d&#8217;être mûr.</p>
<p><strong>Pas grand chose à dire</strong> finalement, et c&#8217;est sans doute ça le plus important !</p>
<p>Allez bookmarker le site <a href="http://python3porting.com">python3porting</a> qui contient les infos sur ce qui a changé. Ca a l&#8217;air long mais en fait, y&#8217;a beaucoup de cas spécifiques.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=7281&amp;md5=dec3880c1a22a4a73680bebe3f8f04fc" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/mon-premier-projet-python3/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fmon-premier-projet-python3%2F&amp;language=en_GB&amp;category=text&amp;title=Mon+premier+projet+Python3&amp;description=Ceci+est+un+post+invit%C3%A9+de+Coyote+post%C3%A9+sous+licence+creative+common+3.0+unported.+Et+oui%2C+il+fallait+bien+que+%C3%A7a+arrive.+La+gen%C3%A8se+Bon%2C+%C3%A7a+avait+commenc%C3%A9+doucement.+Il...&amp;tags=django%2Cpython%2Cpython+3%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/28-manipulations-photographiques-brillantes-qui-vous-feront-rever9.jpg" length="163962" type="image/jpg" />	</item>
		<item>
		<title>Dois-je apprendre Python 2 ou Python 3 ?</title>
		<link>http://sametmax.com/dois-je-apprendre-python-2-ou-python-3/</link>
		<comments>http://sametmax.com/dois-je-apprendre-python-2-ou-python-3/#comments</comments>
		<pubDate>Wed, 12 Sep 2012 13:57:39 +0000</pubDate>
		<dc:creator>Sam</dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[migration]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[python 3]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=2098</guid>
		<description><![CDATA[Les deux versions étant incompatibles, et Python 3 ayant plein de super fonctionnalités que Python 2 n'a pas, mais la V2 étant encore très rependue, on peut se demander lequel on doit apprendre.]]></description>
			<content:encoded><![CDATA[<p>Les deux versions étant incompatibles, et Python 3 ayant plein de super fonctionnalités que Python 2 n&#8217;a pas, mais la V2 étant encore très répandue, on peut se demander lequel on doit apprendre.</p>
<h2>Etat du lard</h2>
<p>Python 3 permet de s&#8217;affranchir de beaucoup de problèmes d&#8217;encoding en utilisant unicode par défaut. A partir de la version 3.3, il va venir avec un <a href="sametmax.com/les-environnement-virtuels-python-virtualenv-et-virtualenvwrapper">virtualenv</a> intégré, et distutils2, rendant le packaging et le déploiement beaucoup plus simple. Sans compter la délégation à un sous générateur. Plus besoin non plus d&#8217;utiliser &#8216;object&#8217; dans l&#8217;héritage, et des tas de libs nettoyées. Bref, un comportement plus simple et un langage plus beau.</p>
<p>Python 2 lui est néanmoins présent encore partout:</p>
<ul>
<li>Ubuntu est toujours en 2.7, et <a href="https://wiki.ubuntu.com/Python/3">passera en 3 dans la prochaine version,</a> mais laissant la possibilité d&#8217;installer la 2.</li>
<li>Mac OS utilise toujours la 2.6 par défaut.</li>
<li>Certains serveurs Web sont toujours en 2.4 (!) si bien que Max  recompile carrément Python 2.6 dessus (oui, c&#8217;est un acharné).</li>
<li>Django est en phase de <a href="https://www.djangoproject.com/weblog/2012/mar/13/py3k/">transition version Python 3</a>, mais pour le moment ce n&#8217;est pas fait, et il sera toujours compatible avec Python 2.7 pour les deux prochaines versions.</li>
<li>Une bonne partie des libs sur pypi et sur github sont <a href="http://python3wos.appspot.com/">toujours en Python 2</a>, ou au moins compatibles avec.</li>
</ul>
<p>Enfin, l&#8217;outil <a href="http://docs.python.org/library/2to3.html">2to3</a> permet de convertir automatiquement, et facilement, la plupart des codes de Python 2 vers Python 3.</p>
<h2>Apprentissage et usage</h2>
<p>Dans la vie de tous les jours, en tant que programmeur Python, vous allez donc forcément être confronté à Python 2 pendant encore 3 ou 4 ans. Je rappelle que Python 2.4 était encore assez courant il y a deux ans, et qu&#8217;il y a 5 ans je lisais encore des questions sur les fora concernant Python 2.2.</p>
<p>Or, Python 2 est plus compliqué que Python 3, il demande des connaissances particulières: gérer l&#8217;encoding, setuper son virtualenv, faire gaffe à bien utiliser &#8216;object&#8217;, connaitre les noms des libs mal standardisés, etc.</p>
<p>Dans tous les cas, il sera toujours <strong>beaucoup</strong> plus simple d&#8217;apprendre Python 2 et de passer à Python 3 que l&#8217;inverse, et il est improbable que vous n&#8217;ayez pas besoin de toucher un code en Python 2. Hey, nous même, nous codons encore tous nos projets en Python 2. On se posera la question de la migration quand Django l&#8217;aura fait, et même là, on aura des tas de projets qui resteront pour toujours en V2.</p>
<p>Donc, si vous apprenez (ou enseignez le Python)<strong>, le choix le plus pragmatique est d&#8217;apprendre avec Python 2, et de rajouter l&#8217;apprentissage des différences entre la V2 et la V3</strong>. Ce faisant vous saurez aussi comment faire migrer un projet, ce dont il est possible que vous ayez un jour besoin.</p>
 <p><a href="http://sametmax.com/?flattrss_redirect&amp;id=2098&amp;md5=c3e446888e7ec4563a109b99d4d87d46" title="Flattr" target="_blank"><img src="http://sametmax.com/wp-content/plugins/flattr/img/flattr-badge-large.png" alt="flattr this!"/></a></p>]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/dois-je-apprendre-python-2-ou-python-3/feed/</wfw:commentRss>
		<slash:comments>17</slash:comments>
		<atom:link rel="payment" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=sam_et_max&amp;popout=1&amp;url=http%3A%2F%2Fsametmax.com%2Fdois-je-apprendre-python-2-ou-python-3%2F&amp;language=en_GB&amp;category=text&amp;title=Dois-je+apprendre+Python+2+ou+Python+3+%3F&amp;description=Les+deux+versions+%C3%A9tant+incompatibles%2C+et+Python+3+ayant+plein+de+super+fonctionnalit%C3%A9s+que+Python+2+n%26%238217%3Ba+pas%2C+mais+la+V2+%C3%A9tant+encore+tr%C3%A8s+r%C3%A9pandue%2C+on+peut+se+demander+lequel...&amp;tags=migration%2Cpython%2Cpython+3%2Cblog" type="text/html" />
<enclosure url="http://sametmax.com/wp-content/uploads/2012/09/6a0120a85dcdae970b01287770a775970c.jpg" length="42754" type="image/jpg" />	</item>
	</channel>
</rss>
