<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; etoile</title>
	<atom:link href="http://sametmax.com/tag/etoile/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>L&#8217;opérateur splat (l&#8217;étoile: *) en Python 32</title>
		<link>http://sametmax.com/operateur-splat-ou-etoile-en-python/</link>
		<comments>http://sametmax.com/operateur-splat-ou-etoile-en-python/#comments</comments>
		<pubDate>Fri, 01 Jun 2012 18:34:59 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[etoile]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[splat]]></category>
		<category><![CDATA[unpacking]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=173</guid>
		<description><![CDATA[L'utilisation du signe étoile (<code>*</code>, dit opérateur "splat") en Python est très simple, mais certains cas sont peu intuitifs. Les nouveaux venus ont souvent besoin d'un peu plus d'explications que ce que donne la doc. Les utilisateurs d'autres langages sont généralement déroutés car ils sont habitués certaines fonctionnalités qu'on ne retrouvent pas en Python. ]]></description>
				<content:encoded><![CDATA[<aside style="text-align:center; font-size:60%"><em>Cet article a été mis à jour et contient maintenant du code Python en version 3</em></aside>
<p>L’utilisation du signe étoile (<code>*</code>, dit opérateur « splat ») en Python est très simple, mais certains cas sont peu intuitifs. Les nouveaux venus ont souvent besoin d’un peu plus d’explications que ce que donne la doc. Les utilisateurs d’autres langages sont généralement déroutés, car ils sont habitués à certaines fonctionnalités qu’on ne retrouve pas en Python.</p>
<h2>Ce que <code>*</code> ne permet pas de faire</h2>
<p>Il n’y a pas de pointeur en Python, et les passages par référence sont automatiques. Du coup&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">mon_objet <span style="color: #66cc66;">=</span> MaClasse<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
mon_pointeur <span style="color: #66cc66;">=</span> *mon_objet
ma_valeur <span style="color: #66cc66;">=</span> **mon_pointeur</pre></td></tr></table></div>

<p>N’existe pas en Python. On ne peut pas récupérer un pointeur. On ne peut pas choisir si l’on passe une variable par valeur ou par référence. Tout est automatique et transparent.</p>
<h2>Les usages basiques de <code>*</code></h2>
<p>La multiplication et la puissance fonctionnent comme on l’attend&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span>*<span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># multiplier 2 par 3</span>
<span style="color: #ff4500;">6</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span>**<span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># élever 2 à la puissance 3</span>
<span style="color: #ff4500;">8</span></pre></td></tr></table></div>

<p>Mais déjà, Python se démarque du lot, car l’opérateur <code>*</code> est surchargé par défaut, et peut s’appliquer aux chaines de caractères et aux listes. Pour les chaines, c’est simple&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;a&quot;</span> * <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># on peut multiplier une chaîne par un nombre, et cela donne une chaîne</span>
aaa
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;a&quot;</span> ** <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># ça ne marche pas avec les puissances</span>
<span style="color: #008000;">TypeError</span>: unsupported operand <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>s<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> ** <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">pow</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>: <span style="color: #483d8b;">'str'</span> <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #483d8b;">'int'</span></pre></td></tr></table></div>

<p>Pour les listes, c’est plus subtil. Une liste de nombres se multiplie sans y penser&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>l * <span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
 <span style="color: #808080; font-style: italic;"># on peut multiplier une liste par un nombre, cela donne une liste</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>l ** <span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
 <span style="color: #808080; font-style: italic;"># ça ne marche pas avec les puissances</span>
<span style="color: #008000;">TypeError</span>: unsupported operand <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>s<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> ** <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">pow</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>: <span style="color: #483d8b;">'list'</span> <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #483d8b;">'int'</span></pre></td></tr></table></div>

<p>En revanche, <strong>multiplier une liste d’objets modifiables ne fait que répéter la référence vers cet objet</strong>&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#93;</span>
 <span style="color: #808080; font-style: italic;"># on fait une liste contenant un dictionnaire</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> dicos <span style="color: #66cc66;">=</span> l * <span style="color: #ff4500;">3</span>
 <span style="color: #808080; font-style: italic;"># on peut multiplier une liste par un nombre, cela donne une liste</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>dicos<span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>On a l’impression que le comportement est le même que précédemment, en fait pas du tout. Ici <strong>on a pas une liste de 3 dictionnaires, mais une liste de 3 références vers le même dictionnaire</strong>. Si on modifie le premier élément de la liste, la modification se voit partout&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> d <span style="color: #66cc66;">=</span> dicos<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># on récupère ce qu'on croit être le premier dictionnaire</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d<span style="color: black;">&#91;</span><span style="color: #483d8b;">&quot;Nouvelle cle&quot;</span><span style="color: black;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;Nouvelle valeur&quot;</span> <span style="color: #808080; font-style: italic;"># on le modifie</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>dicos<span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># afficher la liste montre que les 3 dictionnaires sont en fait un seul et même objet</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">'Nouvelle cle'</span>: <span style="color: #483d8b;">'Nouvelle valeur'</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span>
 <span style="color: black;">&#123;</span><span style="color: #483d8b;">'Nouvelle cle'</span>: <span style="color: #483d8b;">'Nouvelle valeur'</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span>
 <span style="color: black;">&#123;</span><span style="color: #483d8b;">'Nouvelle cle'</span>: <span style="color: #483d8b;">'Nouvelle valeur'</span><span style="color: black;">&#125;</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p> Plus pragmatiquement, on peut juste vérifier que c’est la même référence en utilisant la fonction <code>id() </code>:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"> <span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>d<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff4500;">139656035401544</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>d<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># même dico !</span>
    <span style="color: #ff4500;">139656035401544</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># dico différent</span>
    <span style="color: #ff4500;">139655914013832</span></pre></td></tr></table></div>

<p>Moralité, <code>*</code> sur une liste fait rarement ce qu’on veut.</p>
<h2>Unpacking</h2>
<p>Python intègre une fonctionnalité, l’unpacking, qui permet de prendre chaque élément d’un <a href="http://sametmax.com/les-trucmuchables-en-python/">itérable</a> et de les attribuer à des variables distinctes, d’un seul coup. C’est un raccourci très pratique&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> drapeau <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;bleu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;blanc&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;rouge&quot;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># ici on utilise un tuple, mais ça marche avec tout itérable</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> premiere_couleur <span style="color: #66cc66;">=</span> drapeau<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> deuxieme_couleur <span style="color: #66cc66;">=</span> drapeau<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> troisieme_couleur <span style="color: #66cc66;">=</span> drapeau<span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>premiere_couleur<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'bleu'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>deuxieme_couleur<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'blanc'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>troisieme_couleur<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'rouge'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> couleur1<span style="color: #66cc66;">,</span> couleur2<span style="color: #66cc66;">,</span> couleur3 <span style="color: #66cc66;">=</span>  drapeau <span style="color: #808080; font-style: italic;"># la même opération, en une ligne grâce à l'unpacking</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>couleur1<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'bleu'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>couleur2<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'blanc'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>couleur3<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'rouge'</span></pre></td></tr></table></div>

<p><strong>Vous n’avez rien à faire, l’unpacking est automatique</strong>&nbsp;: il suffit de mettre à gauche du signe <code>=</code> le même nombre de variables qu’il y a d’éléments dans la séquence à droite du signe <code>=</code>. Dans le cas contraire, Python râle&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> un<span style="color: #66cc66;">,</span> deux <span style="color: #66cc66;">=</span> drapeau
<span style="color: #008000;">ValueError</span>: too many values to unpack
<span style="color: #66cc66;">&gt;&gt;&gt;</span> un<span style="color: #66cc66;">,</span> deux<span style="color: #66cc66;">,</span> trois<span style="color: #66cc66;">,</span> quatre <span style="color: #66cc66;">=</span> drapeau
<span style="color: #008000;">ValueError</span>: need more than <span style="color: #ff4500;">3</span> values to unpack</pre></td></tr></table></div>

<p>Quel rapport avec <code>*</code> ?</p>
<p>Et bien d’abord, il permet de gérer ce cas où il y a plus d’éléments que de variables en disant « je veux que cette variable contienne le reste »:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">couleur1<span style="color: #66cc66;">,</span> *autres_couleurs <span style="color: #66cc66;">=</span> drapeau
<span style="color: #66cc66;">&gt;&gt;&gt;</span> couleur1
    <span style="color: #483d8b;">'bleu'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> autres_couleurs
    <span style="color: black;">&#91;</span><span style="color: #483d8b;">'blanc'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'rouge'</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> *autres_couleurs<span style="color: #66cc66;">,</span> derniere_couleur <span style="color: #66cc66;">=</span> drapeau
<span style="color: #66cc66;">&gt;&gt;&gt;</span> autres_couleurs
    <span style="color: black;">&#91;</span><span style="color: #483d8b;">'bleu'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'blanc'</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> derniere_couleur
    <span style="color: #483d8b;">'rouge'</span></pre></td></tr></table></div>

<p>Ensuite, il permet de <strong>forcer l’unpacking </strong>dans le cas où c’est ambigu.</p>
<p>Faisons une petite fonction de test qui ne fait qu’afficher chacun de ses paramètres&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> afficher_trois_elements<span style="color: black;">&#40;</span>elem1<span style="color: #66cc66;">,</span> elem2<span style="color: #66cc66;">=</span><span style="color: #008000;">None</span><span style="color: #66cc66;">,</span> elem3<span style="color: #66cc66;">=</span><span style="color: #008000;">None</span><span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem1<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem2<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem3<span style="color: black;">&#41;</span>
...
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>drapeau<span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'bleu'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'blanc'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'rouge'</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">None</span>
<span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Passer drapeau affiche logiquement le tuple comme premier paramètre, et ensuite les valeurs par défaut du premier et du second paramètre.</p>
<p>En utilisant <code>*</code>, nous pouvons forcer l’unpacking de telle sorte que les valeurs du tuple soient passées individuellement comme autant de paramètres&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*drapeau<span style="color: black;">&#41;</span>
bleu
blanc
rouge</pre></td></tr></table></div>

<p>Très pratique quand vous utilisez une collection tout au long du programme pour vous éviter de sans cesse trainer des variables intermédiaires. D’autant que ça marche combiné aux slices&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;element que l'on ne veut pas&quot;</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*l<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">1</span>
<span style="color: #ff4500;">2</span>
<span style="color: #ff4500;">3</span></pre></td></tr></table></div>

<p>Encore mieux, on peut utiliser <code>**</code> pour forcer l’unpacking des dictionnaires. Les valeurs du dictionnaire deviennent les valeurs des paramètres, mais cette association se fait par nom&nbsp;: <strong>chaque clé du dictionnaire doit correspondre à un nom de paramètre</strong>. Ainsi&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem2&quot;</span>: <span style="color: #483d8b;">&quot;feu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem3&quot;</span>: <span style="color: #483d8b;">&quot;air&quot;</span><span style="color: black;">&#125;</span>
 <span style="color: #808080; font-style: italic;"># les clés ont le bon nom</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>**elements<span style="color: black;">&#41;</span>
eau
feu
air</pre></td></tr></table></div>

<p>Si une clé ne possède pas le nom adéquat, tout plante&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem2&quot;</span>: <span style="color: #483d8b;">&quot;feu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;rien_a_voir&quot;</span>: <span style="color: #483d8b;">&quot;air&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>**elements<span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: afficher_trois_elements<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> got an unexpected <span style="color: #dc143c;">keyword</span> argument <span style="color: #483d8b;">'rien_a_voir'</span></pre></td></tr></table></div>

<p>Une autre erreur courante est d’utiliser <code>*</code> avec un dictionnaire. Dans ce cas l’unpacking fonctionne, mais comme itérer sur un dictionnaire donne une liste de clés, c’est comme si vous passiez une liste en paramètres contenant les clés&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem2&quot;</span>: <span style="color: #483d8b;">&quot;feu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem3&quot;</span><span style="color: #66cc66;">;</span>: <span style="color: #483d8b;">&quot;air&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*elements<span style="color: black;">&#41;</span>
elem2
elem3
elem1</pre></td></tr></table></div>

<p>Si vous donnez moins de valeurs qu’il n’y a de paramètres, Python remplit tout ce qu’il peut&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*drapeau<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
bleu
blanc
<span style="color: #008000;">None</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>**elements<span style="color: black;">&#41;</span>
eau
<span style="color: #008000;">None</span>
<span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Dans le cas inverse – si il y a plus d’éléments que de paramètres – Python vous envoie vous brosser&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> forces <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;rouge&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;bleu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;jaune&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;rose&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;vert&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*forces<span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: afficher_trois_elements<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> takes at most <span style="color: #ff4500;">3</span> arguments <span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span> given<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Paramétrage dynamique</h2>
<p><em>Attention, cet usage est souvent confondu avec celui qu’on vient de voir dans la partie précédente. Ils ne font pas du tout la même chose !</em></p>
<p>Il est parfois pratique de définir une fonction qui accepte un nombre infini de paramètres. Exemple bidon, une fonction qui multiplie ses arguments entre eux&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">return</span> a * b <span style="color: #808080; font-style: italic;"># attention, là on utilise &lt;code&gt;*&lt;/code&gt; pour multiplier, ne cherchez rien de compliqué ;-)</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>multiply<span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">6</span></pre></td></tr></table></div>

<p>Bien sûr, si on veut rajouter un troisième paramètre, il faut la réécrire. Pareil pour un quatrième. Finalement, on finit par demander de passer une liste pour permettre un nombre arbitraire&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>elements_a_multiplier<span style="color: black;">&#41;</span>:
...     <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> elements_a_multiplier:
...         <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> res * i
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> multiply<span style="color: black;">&#40;</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">24</span></pre></td></tr></table></div>

<p>Et bien sachez qu’il existe une autre possibilité, autoriser le passage d’une infinité de paramètres ! Cela se fait bien sûr avec <code>*</code>.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>*tous_les_elements<span style="color: black;">&#41;</span>: <span style="color: #808080; font-style: italic;"># on ne change pas grand chose, on rajoute juste &lt;code&gt;*&lt;/code&gt;</span>
...     <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> tous_les_elements:
...         <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> res * i
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> multiply<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>
 <span style="color: #808080; font-style: italic;"># mais plus besoin d'une séquence !</span>
<span style="color: #ff4500;">26</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> multiply<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">120</span></pre></td></tr></table></div>

<p>Comment ça marche ? C’est simple, <strong>tous les arguments sont automatiquement stockés dans une liste</strong>, et cette liste est le paramètre que l’on a désigné par <code>*</code>.</p>
<p>Ce système très puissant peut être utilisé conjointement avec des paramètres normaux&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span><span style="color: #ff7700;font-weight:bold;">def</span> afficher<span style="color: black;">&#40;</span>elem1<span style="color: #66cc66;">,</span> elem2<span style="color: #66cc66;">,</span> *elemx<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem1<span style="color: black;">&#41;</span>
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem2<span style="color: black;">&#41;</span>
...    <span style="color: #ff7700;font-weight:bold;">for</span> e <span style="color: #ff7700;font-weight:bold;">in</span> elemx:
...        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;(*) %s&quot;</span> % e<span style="color: black;">&#41;</span>
…
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Toi&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Moi&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Luke&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Anakin&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Obi Wan&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Robert&quot;</span><span style="color: black;">&#41;</span>
Toi
Moi
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Luke
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Anakin
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Obi Wan
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Robert</pre></td></tr></table></div>

<p>La seule condition est de mettre <code>*</code> sur un paramètre situé après tous les autres. <code>*</code> est toujours en dernier, et il n’apparait qu’une seule fois. Enfin, il existe une convention pour le nom de cet argument&nbsp;: <code>*args</code>.</p>
<p>Bonne nouvelle, on peut utiliser aussi <code>**</code>. Comme on peut s’y attendre, il permet de récupérer aussi une infinité de paramètres, mais <strong>sous forme de dictionnaire</strong>. Cela signifie qu’il ne récupère que les paramètres nommés&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> afficher_recette<span style="color: black;">&#40;</span>recette<span style="color: #66cc66;">,</span> **ingredients<span style="color: black;">&#41;</span>: <span style="color: #808080; font-style: italic;"># ingrédients sera un dictionnaire</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>recette<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> ingredient <span style="color: #ff7700;font-weight:bold;">in</span> ingredients.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
...         <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot; - %s: %s&quot;</span> % ingredient<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_recette<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;moukraines à la glaviouse&quot;</span><span style="color: #66cc66;">,</span>
...                  <span style="color: black;">creme</span><span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;trop&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;"># on doit donner le nom de ce paramètre</span>
...                  <span style="color: black;">moukraines</span><span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;suffisamment&quot;</span><span style="color: #66cc66;">,</span>
...                  <span style="color: black;">glaviouse</span><span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;si disponible&quot;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># mais l'ordre des paramètres importe peu</span>
moukraines à la glaviouse
 - glaviouse : si disponible
 - creme : trop
 - moukraines : suffisamment</pre></td></tr></table></div>

<p>Il faut également mettre <code>**</code> après tous les autres arguments. La convention pour nommer ce paramètre est <code>**kwargs</code>, pour « keyword arguments ». Enfin, on peut mélanger tout ça d’un coup&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> affichage_hybride<span style="color: black;">&#40;</span>parametre_normal<span style="color: #66cc66;">,</span>
...                       <span style="color: black;">parametre_avec_default</span><span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;valeur par défaut&quot;</span><span style="color: #66cc66;">,</span>
...                       *args<span style="color: #66cc66;">,</span>
...                       **kwargs<span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>parametre_normal<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>parametre_avec_default<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>args<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>kwargs<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> affichage_hybride<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;param1&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;param2&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;infini1&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;infini2&quot;</span><span style="color: #66cc66;">,</span> kwinfini1<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> kwinfini2<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
param1
param2
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'infini1'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'infini2'</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'kwinfini1'</span>: <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'kwinfini2'</span>: <span style="color: #ff4500;">2</span><span style="color: black;">&#125;</span></pre></td></tr></table></div>

<p><strong>On doit absolument mettre les paramètres dans cet ordre</strong>&nbsp;:</p>
<ol>
<li>paramètres normaux et obligatoires;</li>
<li>paramètres normaux facultatifs (valeur par défaut);</li>
<li>paramètres dynamiques;</li>
<li>paramètres dynamiques nommés.
</li>
</ol>
<p>En plus, cela permet en effet de faire jouer les valeurs par défaut de manière très souple&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="c" style="font-family:monospace;"><span style="color: #339933;">&gt;&gt;&gt;</span> affichage_hybride<span style="color: #009900;">&#40;</span><span style="color: #ff0000;">&quot;param tout seul&quot;</span><span style="color: #009900;">&#41;</span>
param tout seul
valeur par défaut
<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span><span style="color: #009900;">&#125;</span></pre></td></tr></table></div>

<p>Enfin, on peut définir des paramètres qui ne peuvent être passés qu’en spécifiant leur nom. On les appelle les « keyword only parameters ». Pour ce faire, il faut mettre au moins un <code>*</code>, et tout ce qu’il y a après sans étoile ne peut plus être passé comme argument positionnel :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> coooool<span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> *args<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> args<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;cool&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;stdin&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
<span style="color: #008000;">TypeError</span>: coooool<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> missing <span style="color: #ff4500;">1</span> required keyword-only argument: <span style="color: #483d8b;">'keyword_only'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;cool&quot;</span><span style="color: #66cc66;">,</span> keyword_only<span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
yeah <span style="color: black;">&#40;</span><span style="color: #483d8b;">'cool'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#41;</span> man</pre></td></tr></table></div>

<p>Si vous n’avez pas un <code>*args</code> à placer, on peut mettre l’étoile toute seule :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> coooool<span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> *<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;stdin&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
<span style="color: #008000;">TypeError</span>: coooool<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> takes <span style="color: #ff4500;">1</span> positional argument but <span style="color: #ff4500;">2</span> were given
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> keyword_only<span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
yeah man</pre></td></tr></table></div>

<h2>Python 3.5</h2>
<p>Je mets à jour cet article un mois avant la sortie annoncée de Python 3.5, qui parmi ses nouvelles fonctionnalités, rajoute encore des super pouvoirs à l’opérateur splat.</p>
<p>On peut faire de l’unpacking directement dans les littéraux :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> *<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> *<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#40;</span>*<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #ff4500;">1</span>: <span style="color: #ff4500;">2</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d2 <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">4</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#123;</span>**d<span style="color: #66cc66;">,</span> **d2<span style="color: black;">&#125;</span>
<span style="color: black;">&#123;</span><span style="color: #ff4500;">1</span>: <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">4</span><span style="color: black;">&#125;</span></pre></td></tr></table></div>

<p>On peut utiliser plusieurs fois l’unpacking des arguments dans un même appel :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> pouet<span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: #66cc66;">,</span> d<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: #66cc66;">,</span> d<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> couleurs <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'ocre'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'moutarde'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> pouet<span style="color: black;">&#40;</span>*couleurs<span style="color: #66cc66;">,</span> *<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># double étoile !</span>
ocre moutarde <span style="color: #ff4500;">0</span> <span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<h2>Jouons un peu</h2>
<p>Si vous vous sentez à l’aise avec tout ça, vous pouvez mélanger plusieurs usages de <code>*</code> d’un coup. Je vous laisse donc en guise de conclusion un petit combo qui utilise un code précédent&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>*args<span style="color: black;">&#41;</span>:
...     <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> args:
...         <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> res * i
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>multiply<span style="color: black;">&#40;</span>*<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>*<span style="color: #ff4500;">6</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff4500;">2</span>**<span style="color: #ff4500;">6</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">True</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/operateur-splat-ou-etoile-en-python/feed/</wfw:commentRss>
		<slash:comments>32</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/06/images.jpeg" length="7655" type="image/jpg" />	</item>
	</channel>
</rss>
