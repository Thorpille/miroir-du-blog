<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; troll</title>
	<atom:link href="http://sametmax.com/tag/troll/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Droit de réponse au troll JS 17</title>
		<link>http://sametmax.com/droit-de-reponse-au-troll-js/</link>
		<comments>http://sametmax.com/droit-de-reponse-au-troll-js/#comments</comments>
		<pubDate>Wed, 19 Mar 2014 08:17:08 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[troll]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=9812</guid>
		<description><![CDATA[<em>Comme tous les trolls, on a eu le droit à <a href="http://sametmax.com/un-gros-troll-de-plus-sur-javacscript/">la cohue dans les comments</a>, mais une réponse a eu l'élégance de faire ça <a href="https://gist.github.com/DavidBruant/9549803#file-gistfile1-md">sur un pastebin</a> à part et de structurer l'argumentation.

Et en plus de faire un bisou.

J'aime le droit de réponse, et puisque cette personne n'a visiblement pas de blog (et que ça risque de se perdre dans le fin fond du web), je le publie ici, avec son autorisation.</em>]]></description>
				<content:encoded><![CDATA[<p><em>Comme tous les trolls, on a eu le droit à <a href="http://sametmax.com/un-gros-troll-de-plus-sur-javacscript/">la cohue dans les comments</a>, mais une réponse a eu l&#8217;élégance de faire ça <a href="https://gist.github.com/DavidBruant/9549803#file-gistfile1-md">sur un pastebin</a> à part et de structurer l&#8217;argumentation.</p>
<p>Et en plus de faire un bisou.</p>
<p>J&#8217;aime le droit de réponse, et puisque cette personne n&#8217;a visiblement pas de blog (et que ça risque de se perdre dans le fin fond du web), je le publie ici, avec son autorisation.</em></p>
<blockquote><p>C’est quand Google a enfin pu donner des perfs décentes – c’est à dire celles qu’ont d’autres langage depuis une décennie – à Javascript que les gens ont envisagé de l’utiliser sur le serveur.</p>
</blockquote>
<p>Nan, c&#8217;est parce que Ryan Dahl a compris l&#8217;importance de la programmation asynchrone et que les gens qui font du JS sont déjà dans le moule de l&#8217;asynchrone et que c&#8217;était donc une communauté facile à convaincre.<br />
C&#8217;est juste une bonne coïncidence qu&#8217;au moins une VM très performante est dispo.</p>
<p>Node.js massacre beaucoup d&#8217;autres langages en performance grâce à l&#8217;asynchrone, pas grand chose d&#8217;autre, sûrement pas la &#8220;vitesse du langage&#8221;.</p>
<blockquote>
<p>Javascript (&#8230;) ne sert absolument à rien sans un framework côté serveur</p>
</blockquote>
<p>On compare des choux et des carottes. Un langage (syntaxe, sémantique) ne sert à rien. Il faut toujours des trucs en plus. Dans un contexte web, à quoi sert Ruby sans Rails ?</p>
<blockquote>
<p>côté client il est parfaitement improductif sans une lib pour gommer les incompatibilités entre les implémentations.</p>
</blockquote>
<p>Le web est un pari ambitieux qui a des coûts. Mais il faut aussi comprendre les enjeux du web. Aucun téléphone ne sort sans navigateur web aujourd&#8217;hui. Ca n&#8217;est même pas une discussion. Ca a des coûts qui vont avec. On peut <a href="https://www.youtube.com/watch?v=0l-OhSpKLdQ" rel="noreferrer">rêver d&#8217;un autre monde</a>, mais essayons d&#8217;avancer dans celui qu&#8217;on a entre temps ;-)</p>
<blockquote>
<p>Au cas où vous ne l’aurez pas encore compris, je vomis sur Javascript. Mais je code avec, et j’offre même des formations dessus, car je suis pragmatique. Les besoins de l’industrie, l’inertie technologie et le contexte social / technique / économique dictent bien plus souvent les standards que nous utilisons que leurs qualités intrasèques. Sinon nous n’aurions pas utilisé le format .doc ou les VHS.<br />
En fait, je ne détesterais pas autant Javascript si je n’en avais pas besoin quotidiennement. Je le hais du plus profond de mon âme justement parce que c’est non seulement une contrainte inamovible de mon métier, mais en plus une tumeur que les chercheurs annoncent voir grossir de jour en jour. Avec le sourire, les connards !</p>
</blockquote>
<p>Bienvenue dans l&#8217;humanité ;-)</p>
<blockquote>
<p>Les experts recommandent d’éviter la moitié du langage</p>
</blockquote>
<p>Du fat d&#8217;être langage du web et de la contrainte de backward-compat du web, JS ne peut pas se débarrasser de ses <em>bad parts</em>. <a href="https://www.youtube.com/watch?v=7eNFQqMSxtU" rel="noreferrer">J&#8217;ai donné un talk sur le sujet</a>. Être efficace en JS nécessite de comprendre un peu son histoire et les pièges à éviter. C&#8217;est le coût d&#8217;être le langage du web. Mais c&#8217;est bien le web, non ? Ca vaut le coup, non ?</p>
<blockquote>
<p>En fait activer <code>use strict</code> dès que possible pour éviter l’insertion de ; automatiques.</p>
</blockquote>
<p>wtf? N&#8217;importe quoi ! La spec ECMAScript 5 est la référence pour les différences entre strict et &#8220;sloppy&#8221; mode. Pour des ressources un peu plus digestes :<br />
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode</a><br />
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode/Transitioning_to_strict_mode" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/Strict_mode/Transitioning_to_strict_mode</a></p>
<blockquote>
<p>Cependant, faites gaffe quand vous convertissez du code parce que :</p>
<div class="highlight highlight-js">
<pre><span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="mi">1</span>
<span class="o">=&gt;</span> <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="kc">undefined</span>
</pre>
</div>
</blockquote>
<p>Mais c&#8217;est quoi ce business de la désinformation !!<br />
<code>a = 1</code> est une expression qui permet de faire <code>a = b = 1</code>, donc sa valeur est la valeur de la sous-expression de droite. <code>var a = 1</code> n&#8217;est pas une expression (<code>if(var a = 1){}</code> est une SyntaxError), donc le REPL se contente de retourner undefined, mais ça n&#8217;a aucune importance en pratique.</p>
<blockquote>
<p>Ah oui, et ne pas utiliser les mots clés new ou with pour vos propres libs. Si, si, on bannit carrément des mots clés, c’est écrit dans le livre.</p>
</blockquote>
<p>Douglas Crockford est une seule personne. On a le droit aussi de ne pas être d&#8217;accord. Utiliser <code>with</code>, c&#8217;est souvent se tirer une balle dans le pied, d&#8217;où le bannissement dans le strict mode. Mais <code>new</code>, c&#8217;est plus une question de style. Je suis assez expert JS, j&#8217;utilise <code>new</code> et je le vis bien.</p>
<blockquote>
<p>Faire du JS propre présuppose l’utilisation de design patterns<br />
En l’état, on ne peut pas écrire du JS propre.</p>
</blockquote>
<p>En français aussi, il y a des figures de style. En l&#8217;état, on peut écrire du JS propre. Je veux bien admettre que ça exige beaucoup plus de disciplines que d&#8217;autres langages, mais ça s&#8217;arrête là. Encore une fois, JS est obligé de porter le poids de son histoire parce que c&#8217;est le langage du web.</p>
<blockquote>
<p>Au fait, vous avez déjà essayé d’expliquer le prototypage à quelqu’un ? Bonne chance !</p>
</blockquote>
<p><a href="http://davidbruant.github.io/ObjectViz/" rel="noreferrer">http://davidbruant.github.io/ObjectViz/</a></p>
<blockquote>
<p>J’ouvre Firefox, je tape <code>[] + {}</code></p>
</blockquote>
<p>J&#8217;écris ça quotidiennement aussi, ça m&#8217;aide beaucoup pour écrire des interfaces facilement utilisables par les utilisateurs. <code>[] + {}</code> créé aussi des méta-promesses qui permettent de faire de l&#8217;asynchrone un peu plus rapide que la vitesse de la lumière.</p>
<p>Si tu additionnes des choux et des carottes, faut pas s&#8217;étonner. Si des fois, tu es fatigué, utilise TypeScript pour aider avec la discipline.</p>
<blockquote>
<p>chaines multilignes</p>
</blockquote>
<p>Ca arrive dans ES6 <a href="https://gist.github.com/lukehoban/9303054#template-strings" rel="noreferrer">https://gist.github.com/lukehoban/9303054#template-strings</a></p>
<blockquote>
<p>list compréhension à la Python</p>
</blockquote>
<p>ES6 : <a href="https://gist.github.com/lukehoban/9303054#comprehensions" rel="noreferrer">https://gist.github.com/lukehoban/9303054#comprehensions</a><br />
Implémenté dans Firefox et dans la Nightly depuis la semaine dernière.</p>
<blockquote>
<p>Et encore, je suis cool, je mets un code JS qui utilise l.length directement dans la boucle et pas de variable pour l[i].</p>
</blockquote>
<p>Nan, mais c&#8217;est bon, on est en 2014, plus besoin de ces conneries :-) Y&#8217;en a jamais eu besoin, c&#8217;était juste de la micro-optimisations de gens qui pensaient que ça avait un impact significatif après qu&#8217;ils aient fait un micro-benchmark sur le sujet.</p>
<blockquote>
<p>Array.map arrive avec JS 1.6 et les arrays comprehensions avec la 1.7&#8230;</p>
</blockquote>
<p>Cute :-)<br />
Array.prototype.map, on peut le <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map?redirectlocale=en-US&amp;redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2Fmap#Polyfill" rel="noreferrer">polyfiller</a></p>
<p>JavaScript 1.6, 1.7, ça n&#8217;existe pas. C&#8217;est des gens chez Mozilla, ils étaient bourrés (Brendan Eich a continué à boire même après avoir créé et shippé JS en 10 jours), ils ont donné des numéros de version, après le mot &#8220;JavaScript&#8221;, mais c&#8217;était pour rire (c&#8217;était lié au numéro de version de SpiderMonkey, moteur JS de Firefox). Seuls les numéros de spec d&#8217;ECMAScript ont un sens un peu sérieux.</p>
<blockquote>
<p>que vous pourrez utiliser sur tous les navigateurs d’ici 2056.</p>
</blockquote>
<p><code>.map</code> tu peux l&#8217;utiliser depuis des années. Les array compréhension, ça marche sur <a href="http://google.github.io/traceur-compiler/demo/repl.html" rel="noreferrer">Traceur</a></p>
<blockquote>
<p>PASramètre<br />
Comment on fait ça en Javascript ?</p>
</blockquote>
<p>Tiens <a href="https://gist.github.com/lukehoban/9303054#default--rest--spread" rel="noreferrer">https://gist.github.com/lukehoban/9303054#default&#8211;rest&#8211;spread</a><br />
J&#8217;ai utilisé ça en TypeScript (mais ceux qui préfèrent Traceur peuvent aussi choisir ça) sur un vrai projet qui tourne sur de vrais mobiles il y a presque un an.</p>
<blockquote>
<p>Ah mais il faut utiliser coffeescript !<br />
Oui donc pas Javascript. Point made.</p>
</blockquote>
<p>Jeremy Ashkenas, inventeur de CoffeeScript le décrit en disant &#8220;it&#8217;s just JavaScript&#8221;. Je dis ça&#8230;</p>
<blockquote>
<p>Vous trouvez ça normal ?<br />
Vous trouvez que c’est le signe d’un BON langage ?</p>
</blockquote>
<p>Aucune importance. C&#8217;est ce qu&#8217;on a, il faut vivre avec, bon gré mal gré.</p>
<p>Gros bisous,</p>
<p>David</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/droit-de-reponse-au-troll-js/feed/</wfw:commentRss>
		<slash:comments>17</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/03/y7awF8c.png" length="650419" type="image/jpg" />	</item>
		<item>
		<title>Réponse à l&#8217;article &#8220;Ruby -vs- Python&#8221; de Bodo Tasche 22</title>
		<link>http://sametmax.com/reponse-a-larticle-ruby-vs-python-de-bodo-tasche/</link>
		<comments>http://sametmax.com/reponse-a-larticle-ruby-vs-python-de-bodo-tasche/#comments</comments>
		<pubDate>Thu, 04 Oct 2012 14:44:29 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[ruby]]></category>
		<category><![CDATA[troll]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=2461</guid>
		<description><![CDATA[C'est pas encore vendredi, mais je ne  pouvais pas laisser passer ça. Petite réponse à Bodo Tasche, affûtez votre english car j'ai la flemme de traduire sa prose.]]></description>
				<content:encoded><![CDATA[<p>C&#8217;est pas encore vendredi, mais je ne  <a href="http://xkcd.com/386/">pouvais pas</a> laisser passer <a href="http://bitboxer.de/2012/10/03/ruby-vs-python/">ça</a>. Petite réponse à Bodo Tasche, affûtez votre english car j&#8217;ai la flemme de traduire sa prose (si quelqu&#8217;un se propose, il aura droit à un tampon :-p).</p>
<blockquote><p>Ruby and Python. Two languages. Two communities. Both have a similar target: to make software development better. Better than Java, better than PHP and better for everyone. But where is the difference? And what language is “better”? For the last question I can say: none is better. Both camps are awesome and do tons of great stuff. But for the first question the answer is longer. And I hope to provide that in this little article</p>
<p>Is the difference in the toolset around the language? No, I don’t think so. Both have good package managers, tons of libraries for all kind of stuff and a few decent web frameworks.</p></blockquote>
<p>Heu&#8230; si. Il y a une énorme différence.</p>
<p><strong>Ruby a RVM, un truc enorme et très difficile à mettre en oeuvre</strong>. Python a <a href="sametmax.com/les-environnement-virtuels-python-virtualenv-et-virtualenvwrapper">virtualenv</a>, un truc léger et très simple à faire passer. Conséquence ? Une grande partie des rubistes n&#8217;utilisent pas RVM et leurs projets souffrent de problèmes constant de compatibilité. Combien de fois j&#8217;ai vu des <code>gems install</code> planter à cause de ça&#8230;</p>
<p>Et <strong>combien y a-t-il de RAD pour faire des applications en Ruby ?</strong> Ca influe sur le nombre d&#8217;applications desktop écrites en Ruby.</p>
<p><strong>Combien y a-t-il d&#8217;outils pour facilement interfacer Ruby avec d&#8217;autres technologies ?</strong> Python est utilisé massivement comme langage d&#8217;extensions à cause de ça (Sublime Text, Blender, Nautilus, Inscape, etc).</p>
<p>Quant aux libs. <strong>On utilise Ruby pour quoi en dehors du Web ?</strong> Développement de jeu ? Sur tablette tactile ? Simulation scientifique ? Application desktop ? Très peu. Alors que Python <a href="http://sametmax.com/quest-ce-quon-peut-faire-avec-python/">est utilisé pour tout ça</a>. La raison est justement le large panel de libs. Python a beaucoup, beaucoup, beaucoup plus de libs que Ruby.</p>
<p>Youhou ! Pour accéder à Internet, on utilise un ordinateur plein de trucs qui ne sont pas sur Internet ! Pour servir un site Web aussi !</p>
<p><strong>L&#8217;écosystème, c&#8217;est la moitié de l’intérêt d&#8217;un langage</strong>. Je ne retire pas à Ruby le mérite de la qualité du sien: il est innovant, dynamique, sa communauté est fantastique. Mais on est loin d&#8217;avoir dans Ruby le dixième des outils et libs qu&#8217;on a en Python. C&#8217;est pour ça que Mac <del datetime="2012-10-04T09:44:47+00:00">embarque</del> embarquait Python par défaut et pas Ruby. C&#8217;est pour ça qu&#8217;Ubuntu est massivement codé en Python et pas en Ruby. Ca fait toute la différence.</p>
<blockquote><p>I think there is something else that is way more important. The culture.</p></blockquote>
<p>+ 1. Et Ruby en a une excellente. Faites un bisou aux gars de 37 signals.</p>
<blockquote><p>Okay, now what is the difference in the culture? It is pretty easy. Python folks are really conservative and afraid of change, Ruby folks love the new shiny stuff even if it breaks older things. It’s that simple. But it has huge consequences.</p></blockquote>
<p>Ce n&#8217;est pas la seule différence, mec. Les rubistes sont vachement plus sympa, d&#8217;une manière générale. Les pythonistes que je connais sont généralement assez blafards. Compétents, mais pas funny fun. Et les rubistes sont plus actifs socialement, du coup: plus d&#8217;events, plus d&#8217;articles de blog, plus de vidéos&#8230; Et ça, c&#8217;est un gros plus pour Ruby.</p>
<p>Mais d&#8217;un autre côté, Python a la culture des comptable: du code lisible, et de la documentation. Et comme c&#8217;est un peu mon job de lire le code 500 fois par jour et de fouiller dans la doc, c&#8217;est très important pour moi. <strong>Les docs Ruby, parfois, c&#8217;est vraiment une grosse blague</strong>. Regarder dans le code source n&#8217;est pas un bon palliatif. Une doc indique une manière officielle de faire, une manière figée, stable, qu&#8217;on va pouvoir utiliser et supporter sur des années. C&#8217;est important.</p>
<blockquote><p>One you can see for example in the adaption of Ruby 1.9 vs Python 3. Both new versions did tons of breaking changes. A lot of code needed changes to run on the new plattform. In the Ruby world the transition went pretty quick. In the Python world it is very troublesome. Some Python people even say that Python 3 is broken and all energy should be focused on the 2.x-branch of the language. The Ruby community saw the opportunities. The Python community only saw the update problems. Yes, there have been update problems in the Ruby world, but we found an easy way to fix this: isitruby19.com. A simple plattform that showed if the gem is ready for 1.9. And if it wasn’t and the gem was important, it got fixed with pull requests or something similar. And the problems went away fast.</p></blockquote>
<p>Ouai mais tu vois (tu me permet de te tutoyer ? en anglais on s&#8217;en fou de toute façon&#8230;), c&#8217;est vachement plus facile de tout péter quand on a pas deux OS majeurs qui se basent dessus. Je sais pas si tu as déjà essayé de faire upgrader un repo complet de milliers d&#8217;apps open sources, mais ça prend du temps.</p>
<p>Oh, et <strong>Python est là depuis vachement plus longtemps que Ruby</strong>. Python était même là avant Java. Chaque corps de métier à un sacret paquet de code à faire migrer, et ils sont pas tous en lean management super agile mega scrum mode, eux. Les biologistes qui utilisent Python pour faire leurs simulations depuis 10 ans, ils ont pas que ça à foutre d&#8217;upgrader leur code. Pour eux la prog, c&#8217;est pas &#8220;Fuck yeah, new features, I&#8217;m going to touch myself on Vx and migrate&#8221;. Pour eux c&#8217;est 7 ans de scripts d&#8217;analyse de génome à se retaper alors que ce n&#8217;est qu&#8217;un outil ennuyeux à leurs yeux.</p>
<blockquote><p>Both models of thinking have pros and cons. The Python world is more stable, you can update your django installation without much troubles. But that also means new technology is only added very slowly. The Ruby world loves changes.</p></blockquote>
<p>La différence majeur entre Rails et Django ? Rails: chaque version stable possède des gros trous qu&#8217;ils bouchent au fur et à mesure, parce que c&#8217;est pas grâve, on est flexible et adaptif mec, on release early et often. Django, en version 0.96, tout le monde l&#8217;utilisait déjà en production car le truc était rock solide.</p>
<p>Alors oui, y a moins de features. Mais ma plateforme ne m&#8217;explose pas à la gueule. Et<a href="http://sametmax.com/je-voulais-juste-installer-une-gem/"> pip installe fonctionne</a>.</p>
<blockquote><p>So much that most of the “new stuff” in the Python world was tested in the Ruby world first.</p></blockquote>
<p>Ca c&#8217;est vrai. Merci d&#8217;ailleurs. Mais encore une fois, on parle d&#8217;une catégorie de libs qui se limitent au dev Web. C&#8217;est le même débat que &#8220;Mac est innovant&#8221;. C&#8217;est certain, quand on a une archi et 3 modèles à supporter, c&#8217;est plus facile de faire un truc innovant: on a pas à supporter de compatibilité.</p>
<blockquote><p>We love changes so much that the Rails core is build around that idea. You can easily change nearly everything and extend everything. Most of the new stuff the Rails Core Team is testing right now for version 4 is available as plugin for Rails 3. This is pretty interesting if you love new things, love change, and love playing around with stuff. If you don’t and hate the idea of breaking changes, you maybe are better suited with the Python way. But don’t be afraid of breaking changes. They are all pretty well documented in the release guides. It’s not voodoo.</p></blockquote>
<p>Si. <strong>C&#8217;est carrément du voodoo</strong>. Le monkey patching des objets built-in, c&#8217;est la porte ouverte à toutes les fenêtres, et quand deux libs le font en même temps, BOUM.</p>
<p>Et le nouveau, c&#8217;est marrant. Je suis pour le nouveau. Max m&#8217;engueule tout le temps car je veux essayer les trucs nouveaux. Mais pas instable. L&#8217;écosystème de Ruby est instable. Si les langages étaient des OS, Java serait Debian, Python serait Ubuntu LTS, Ruby serait Ubuntu RC. J&#8217;utilise la dernière Ubuntu pour mon desktop, parce qu&#8217;avoir Unity qui plante une fois par jour ne me dérange pas. Mais sur le serveur, je prends la version la plus stable, parce que j&#8217;ai pas besoin de &lt;blink&gt;, j&#8217;ai besoin de &lt;strong&gt;.</p>
<blockquote><p>I for myself love the Ruby mindset. Something like Rails or Asset Pipelines or all the other things would not be possible if we are stuck with “no, don’t change that, it works pretty well that way”. Someone has to be the leader. Someone has to play around with new ideas. Yes, some ideas won’t fly, some are removed pretty quickly. But at least we tried them. Yes, I know that some people prefer the conservative way. If you consider yourself to be like that, you should at least try Python. I stay with Ruby.</p></blockquote>
<p>C&#8217;est vrai qu&#8217;on ne fait rien d&#8217;innovant en Python: <a href="http://www.raspberrypi.org/faqs">programmation du rasberry py</a>, <a href="http://pythonneuro.sciencesconf.org/">simulation neurale</a>, <a href="http://pypi.python.org/pypi/clize/1.0b">facilitation du parsing d&#8217;arguments</a>, <a href="http://www.bittorrent.com/intl/fr/">création du meilleur protocole d&#8217;échange en P2P au monde</a>&#8230; Ah, par innovation tu veux dire une énième lib Web ? Pardon, je croyais qu&#8217;on parlait de programmation au sens large du terme.</p>
<p>Dans ce cas: Twisted était là bien avant event-machine (ou même NodeJs). Wep.py était là avant Sinatra. Virtualenv était là avant RVM. Zope était là 6 ans avant ROR avec son ORM et son langage de template.</p>
<p><strong>Et oui, vous avez bien amélioré tout ça. Et c&#8217;est génial.</strong> C&#8217;est comme ça que ce doit être. Mais arrêtez de vous prendre pour l&#8217;élément indispensable de l&#8217;innonvation de la programmation Web moderne. Vous n&#8217;êtes pas tous des <a href="https://en.wikipedia.org/wiki/Jason_Fried"> Jason Fried</a>. Et là plupart des choses que l&#8217;on fait aujourd&#8217;hui on été inventé par les mecs de Lisp, Haskel et Smalltalk de toute façon, qui eux même se sont inspirés de l&#8217;amont. On giant shoulders, tout ça, tout ça&#8230;</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/reponse-a-larticle-ruby-vs-python-de-bodo-tasche/feed/</wfw:commentRss>
		<slash:comments>22</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/10/50495508c4f7c8ecb8235ba6109c10b9_view.jpg" length="44884" type="image/jpg" />	</item>
		<item>
		<title>Déterrer le cadavre d&#8217;un troll : Non, PHP n&#8217;est pas simple 28</title>
		<link>http://sametmax.com/deterer-le-cadavre-dun-troll-non-php-nest-pas-simple/</link>
		<comments>http://sametmax.com/deterer-le-cadavre-dun-troll-non-php-nest-pas-simple/#comments</comments>
		<pubDate>Sat, 28 Jul 2012 14:18:19 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[php]]></category>
		<category><![CDATA[troll]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1132</guid>
		<description><![CDATA[J'ai passé des années à coder en PHP. J'ai vu du code très propre faire des choses très belles. <strong>Ce n'est pas grâce au langage, mais en dépit de lui.</strong>]]></description>
				<content:encoded><![CDATA[<p>Sujet <a href="http://www.steike.com/code/php-must-die/">traité</a> <a href="http://keithdevens.com/weblog/archive/2003/Aug/13/HATE-PHP">100</a> <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">fois</a> mais c&#8217;est à vocation thérapeuthique.</p>
<p>Quand on demande pourquoi je préfère Python à PHP, je réponds souvent que Python est beaucoup plus simple à utiliser. C&#8217;est généralement le moment où tout le monde me répond que PHP est justement un langage qui a eu du succès parcequ&#8217;il était simple.</p>
<p><a href="https://www.youtube.com/watch?v=07IQcxW7dg4">Faux</a>. </p>
<p>PHP a eu du succès parcequ&#8217;il a une excellente doc, des tutoriaux partout sur le net, et une méthode de déploiement facile proposée pour la plupart des hébergeurs.</p>
<p>Le code lui-même, n&#8217;est pas simple du tout. Prenez par exemple la fonction de base pour ouvrir un fichier, <code>fopen()</code>.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="php" style="font-family:monospace;"><span style="color: #339933;">@</span><span style="color: #990000;">fopen</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'http://example.com/not-existing-file'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'r'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr></table></div>

<p>Savez vous ce que ce code va faire ?</p>
<p>Si PHP a été compilé avec <code>--disable-url-fopen-wrapper</code>, ça ne marchera pas. &#8220;Ne marchera pas&#8221; veut-il dire retourner <code>null</code> ou lever une exception ? Aucune idée, la doc ne le dit pas. De toute façon cette option est retirée avec PHP 5.2.5, et nous sommes en PHP 5.3.10 sur la plupart des distribs. Sauf sur la plupart des hébergeurs&#8230;</p>
<p>Si <code>allow_url_fopen</code> est désactivé dans <code>php.ini</code>, ça ne marchera pas non plus. Aucune idée de pourquoi.</p>
<p>Grâve à ce merveilleux &#8220;@&#8221;, le warning en cas de fichier n&#8217;existant pas ne sera pas affiché pas vrai ?</p>
<p>Sauf bien sur si <code>scream.enabled</code> est activé dans le <code>php.ini</code> ou manuellement avec <code>ini_set</code>.</p>
<p>A condition que le niveau <code>error_reporting</code> soit ajusté en conséquence.</p>
<p>Mais alors sa sortie dépend du paramètre <code>display_errors</code>, lui même activable dans le <code>php.ini</code> ou par <code>ini_set</code>.</p>
<p>Et si par un hasard incroyable vous savez tout cela, savez-vous comment est configuré votre hébergeur ?</p>
<h2>
This is going to be legend&#8230;</h2>
<p>Après il est vrai que l&#8217;écosystème de Python, lui, possède une richesse qui le rend complexe. et le déploiement n&#8217;est pas aussi simple qu&#8217;avec PHP. D&#8217;ailleurs, <strong>je ne prétend pas qu&#8217;on ne puisse pas coder d&#8217;excellents produits avec PHP</strong>. Mais ce n&#8217;est pas grâce à la prétendue simplicité du langage (Ruby et même Javascript sont plus simples).</p>
<p>Le Web utilise par exemple massivement le JSON. Mais saviez-vous que json_decode retourne <code>null</code> en cas d&#8217;erreur de décodage ? Ce qui est aussi une valeur de retour de décoage de JSON valide, vous forçant donc à a vérifier <code>json_last_error</code> à chaque appel.</p>
<p>Je vous passe l&#8217;habituelle critique de la surabondance de fonctions PHP pour faire des choses similaires, mais avec des noms complètement à l&#8217;arrache (chercher du texte: <code>ereg</code>, <code>eregi</code>, <code>mb_ereg</code>, <code>mb_eregi</code>, <code>preg_match</code>, <code>strstr</code>, <code>strchr</code>, <code>stristr</code>, <code>strrchr</code>, <code>strpos</code>, <code>stripos</code>, <code>strrpos</code>, <code>strripos</code>, <code>mb_strpos</code>, <code>mb_strrpos</code>) ainsi que de l&#8217;inutilité totale du signe <code>==</code> (<code>"foo" == true</code>, et <code>"foo" == 0</code> mais <code>true != 0</code>). </p>
<p>Par contre, quelqu&#8217;un pourrait m&#8217;expliquer pourquoi les noms des variables sont sensibles à la casse, mais PAS ceux des fonctions et classes ?</p>
<p>Et vous voulez vérifier qu&#8217;une variable est vide ou n&#8217;existe pas ? <code>empty()</code> est là pour ça ! Sauf que <code>empty($var)</code> marche, mais <code>empty($var1 || $var2)</code> lève une exception.</p>
<h2>&#8230;wait for it&#8230;<br />
</h2>
<p>En parlant d&#8217;exception, amusons nous un peu avec la gestions des erreurs:</p>
<ul>
<li>la généricité c&#8217;est pas pour demain: <code>curl_error</code>, <code>json_last_error</code>, <code>openssl_error_string</code>, <code>imap_errors</code>, <code>mysql_error</code>, <code>xml_get_error_code</code>, <code>bzerror</code>, <code>date_get_last_errors</code>&#8230;</li>
<li>on autorise à rendre les erreurs silencieuses avec &#8216;@&#8217; (wtf ?)</li>
<li>pas de stack trace. Un bug ? Démerde toi. Le langage est en typage faible, tu vas t&#8217;amuser !</li>
<li><code>::</code> est nommé <code>T_PAAMAYIM_NEKUDOTAYIM</code> et <code><<</code>, <code>T_SL</code>, et la première fois qu'on le voit dans un message d'erreur, ça fait tout drôle. Il vaut mieux ne pas être déconnecté.</li>
<li><code>E_ALL</code> inclue toutes les catégories d'erreur. Sauf <code>E_STRICT</code>. Quelqu'un sait à quoi sert <code>E_STRICT</code> ?</li>
<li>on a pas le droit de lever une exception dans <code>__toString</code> ! Si on le fait, PHP balance une erreur fatale, et ...</li>
<li>... les erreurs fatales ne peuvent pas être gérées dans un <code>try/catch</code>. Et de toute façon il n'y a pas de clause <code>finally</code>.
</li>
</ul>
<p>Et quand PHP évolue, au lieu de corriger ce bordel, on rajoute une couche !</p>
<p>Par exemple, PHP est faiblement typé. Sauf qu'on peut maintenant forcer le type des paramètres d'une fonction en donnant ce qu'on appelle des <a href="http://fr.php.net/manual/en/language.oop5.typehinting.php">type hints</a>. Sauf qu'on qu'on ne peut pas choisir "string" ou "int" ni aucun type de base pour cela. Sauf que les fontions de les bibliothèques standards elles, le font sans problème. Il faut donc utiliser une classe que l'on fait soit même. Sauf que les "type hints" acceptent une classe <strong>non déclarée</strong> comme type (faute de frappe mon ami...). Sauf que dans ce cas on ne peut passer aucun argument à la fonction. Absolument aucun.</p>
<p>Par contre, mettre des arguments nommés pour les fonctions, ça, on ne le rajoute pas. <a href="http://www.php.net/~derick/meeting-notes.html#named-parameters">Ca rendrait le code plus bordélique</a>, et il faut garder le langage simple. C'est d'ailleurs, j'en suis certain, au nom de cette simplicité que <code>mktime</code> a pour ordre d'arguments: heure, minute, seconde, mois, jour, année.</p>
<h2>... dary !</h2>
<p>Heureusement il y a des fonctions cachées qui font que PHP est vraiment un langage pour faciliter la vie du débutant:</p>
<p><code>preg_replace</code> avec le flag <code>/e</code> prend la chaine, effectue le remplacement, et ensuite fait un <code>eval()</code> dessus !</p>
<p><code>scandir</code> retourne une liste de fichiers dans un dossier, mais pas dans l'ordre du dossier. Non, ce serait pas fun. Il les retourne dans l'ordre alphabetique, ou l'inverse si on lui passe un argument. Ce qui est logique, puisque PHP est bien connu pour manque de fontions de tris: <code>array_multisort</code>, <code>arsort</code>, <code>asort</code>, <code>ksort</code>, <code>krsort</code>, <code>natsort</code>, <code>natcasesort</code>, <code>sort</code>, <code>rsort</code>, <code>uasort</code>, <code>uksort</code>, <code>usort</code>.</p>
<p><code>parse_str</code> ne parse pas une chaîne, mais une "query string". Qu'il dump ensuite dans l'espace de nom local. A moins qu'on lui passe un array à populer. Mais dans tous les cas la fonction ne retourne rien.</p>
<p><code>gzgetss</code> parse les lignes d'un fichier *.gz et en retire les ligne HTML. Indispensable dans la vie de tous les jours, ça valait le coup d'en faire une fonction built-in. Hier encore je me demandais comme j'aillais rajouter cette opération à toutes mes vues Django.</p>
<p><code>php_uname</code> retourne l'OS courrant, mais en cas d'échec, il retourne silencieusement l'OS sur lequel il a été compilé.</p>
<p>Et les arrays... Cette structure de donnée magique qu'on aime tant quand on commence à programmer. Ca fait tout, tout je vous dis !</p>
<p>Les arrays sont une combinaisons de lists, ordered hashes, ordered sets et sparse lists. Là ou c'est amusant, c'est quand on tente de les comparer:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="php" style="font-family:monospace;"><span style="color: #990000;">array_diff</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;marc&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">12</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;alice&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">23</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
           <span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;marc&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">23</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;alice&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">12</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr></table></div>

<p>Quel comportement vérifier, celui d'une liste, d'un set ou d'un mapping ?</p>
<p>Ici la réponse est un set, ce qui fait que les deux arrays sont considérés comme égaux.</p>
<p>Par contre:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="php" style="font-family:monospace;"><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;foo&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;bar&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">!=</span> <span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;bar&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;foo&quot;</span><span style="color: #009900;">&#41;</span></pre></td></tr></table></div>

<p>Et:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="php" style="font-family:monospace;"><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;foo&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;bar&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">2</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;bar&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;foo&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span></pre></td></tr></table></div>

<p>Tient, tant qu'on est dans la prédictibilité de comportement. Puisque PHP est un langage simple, quelqu'un peut me prédire ce que ça fait ?</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="php" style="font-family:monospace;">php <span style="color: #339933;">&gt;</span> <span style="color: #000088;">$a</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #339933;">;</span>
php <span style="color: #339933;">&gt;</span> <span style="color: #000088;">$a</span><span style="color: #339933;">++;</span>
php <span style="color: #339933;">&gt;</span> <span style="color: #b1b100;">echo</span> <span style="color: #000088;">$a</span><span style="color: #339933;">;</span></pre></td></tr></table></div>

<p>Non ?</p>
<p>Ben ça a affiche <code>1</code>. Si, si.</p>
<p>Mais comme on aime bien la congruence chez Zend:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="php" style="font-family:monospace;">php <span style="color: #339933;">&gt;</span> <span style="color: #000088;">$a</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #339933;">;</span>
php <span style="color: #339933;">&gt;</span> <span style="color: #000088;">$a</span><span style="color: #339933;">--;</span>
php <span style="color: #339933;">&gt;</span> <span style="color: #b1b100;">echo</span> <span style="color: #000088;">$a</span><span style="color: #339933;">;</span></pre></td></tr></table></div>

<p>Ça n'affiche rien.</p>
<p>Et pour finir sur une petite note de sécurité spécial noob: include accepte une url en paramètre.</p>
<p>J'ai passé des années à coder en PHP. J'ai vu du code très propre faire des choses très belles. <strong>Ce n'est pas grâce au langage, mais en dépit de lui.</strong></p>
<p>Je suis heureux que le langage ai eu un tel succès. Il a permis au Web de devenir ce qu'il est. Il est temps maintenant de passer à autre chose.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/deterer-le-cadavre-dun-troll-non-php-nest-pas-simple/feed/</wfw:commentRss>
		<slash:comments>28</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/07/evil_treasure_trolls.jpg" length="30344" type="image/jpg" />	</item>
	</channel>
</rss>
