<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; request</title>
	<atom:link href="http://sametmax.com/tag/request/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Requests fait partie de la lib standard ! 3</title>
		<link>http://sametmax.com/requests-fait-partie-de-la-lib-standard/</link>
		<comments>http://sametmax.com/requests-fait-partie-de-la-lib-standard/#comments</comments>
		<pubDate>Thu, 29 May 2014 05:07:29 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Gadgets]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[request]]></category>
		<category><![CDATA[stdlib]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=10360</guid>
		<description><![CDATA[Enfin, presque :)]]></description>
				<content:encoded><![CDATA[<p>Enfin, presque :)</p>
<p>J&#8217;étais en train d&#8217;installer en vieux requirements.txt quand soudain :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">  File <span style="color: #483d8b;">&quot;
&nbsp;
/usr/lib/python2.7/dist-packages/pip/download.py&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">23</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    <span style="color: #ff7700;font-weight:bold;">from</span> requests.<span style="color: black;">adapters</span> <span style="color: #ff7700;font-weight:bold;">import</span> BaseAdapter
<span style="color: #008000;">ImportError</span>: No module named adapters</pre></td></tr></table></div>

<p>Wut ?</p>
<p>Mon erreur était due à une version de requests trop ancienne. J&#8217;upgrade et ça remarche. Mais ça m&#8217;a intrigué :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">⟩ grin <span style="color: #ff0000;">&quot;requests&quot;</span>  <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>python2.7<span style="color: #000000; font-weight: bold;">/</span>dist-packages<span style="color: #000000; font-weight: bold;">/</span>pip<span style="color: #000000; font-weight: bold;">/</span>
<span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>python2.7<span style="color: #000000; font-weight: bold;">/</span>dist-packages<span style="color: #000000; font-weight: bold;">/</span>pip<span style="color: #000000; font-weight: bold;">/</span>download.py:
   <span style="color: #000000;">22</span> : import requests, six
   <span style="color: #000000;">23</span> : from requests.adapters import BaseAdapter
   <span style="color: #000000;">24</span> : from requests.auth import AuthBase, HTTPBasicAuth
   <span style="color: #000000;">25</span> : from requests.compat import IncompleteRead
   <span style="color: #000000;">26</span> : from requests.exceptions import InvalidURL, ChunkedEncodingError
   <span style="color: #000000;">27</span> : from requests.models import Response
   <span style="color: #000000;">28</span> : from requests.structures import CaseInsensitiveDict
  <span style="color: #000000;">120</span> :         <span style="color: #666666; font-style: italic;"># Store the new username and password to use for future requests</span>
  <span style="color: #000000;">182</span> :         <span style="color: #666666; font-style: italic;"># We only work for requests with a host of localhost</span>
  <span style="color: #000000;">211</span> : class PipSession<span style="color: #7a0874; font-weight: bold;">&#40;</span>requests.Session<span style="color: #7a0874; font-weight: bold;">&#41;</span>:
  <span style="color: #000000;">548</span> :         except requests.HTTPError <span style="color: #c20cb9; font-weight: bold;">as</span> exc:
<span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>python2.7<span style="color: #000000; font-weight: bold;">/</span>dist-packages<span style="color: #000000; font-weight: bold;">/</span>pip<span style="color: #000000; font-weight: bold;">/</span>index.py:
   <span style="color: #000000;">17</span> : import html5lib, requests, pkg_resources
   <span style="color: #000000;">18</span> : from requests.exceptions import SSLError
   <span style="color: #000000;">80</span> :         <span style="color: #666666; font-style: italic;"># The Session we'll use to make requests</span>
  <span style="color: #000000;">689</span> :         except requests.HTTPError <span style="color: #c20cb9; font-weight: bold;">as</span> exc:
  <span style="color: #000000;">692</span> :         except requests.ConnectionError <span style="color: #c20cb9; font-weight: bold;">as</span> exc:
  <span style="color: #000000;">697</span> :         except requests.Timeout:</pre></td></tr></table></div>

<p>Je regarde le code source github, qui <a href="https://github.com/pypa/pip/blob/develop/pip/download.py">diffère</a> de celui de mon système :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> pip._vendor.<span style="color: black;">requests</span>.<span style="color: black;">adapters</span> <span style="color: #ff7700;font-weight:bold;">import</span> BaseAdapter<span style="color: #66cc66;">,</span> HTTPAdapter
<span style="color: #ff7700;font-weight:bold;">from</span> pip._vendor.<span style="color: black;">requests</span>.<span style="color: black;">auth</span> <span style="color: #ff7700;font-weight:bold;">import</span> AuthBase<span style="color: #66cc66;">,</span> HTTPBasicAuth
<span style="color: #ff7700;font-weight:bold;">from</span> pip._vendor.<span style="color: black;">requests</span>.<span style="color: black;">compat</span> <span style="color: #ff7700;font-weight:bold;">import</span> IncompleteRead
<span style="color: #ff7700;font-weight:bold;">from</span> pip._vendor.<span style="color: black;">requests</span>.<span style="color: #dc143c;">exceptions</span> <span style="color: #ff7700;font-weight:bold;">import</span> ChunkedEncodingError</pre></td></tr></table></div>

<p>Mais ça reste bien requests.</p>
<p>Donc, si vous avez la 3.4, vous avez pip installé, qui maintenant embed requests. Donc Python 3.4 vient forcément avec requests \o/</p>
<p>Si vous supportez uniquement cette plateforme, vous pouvez faire :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">try</span>:
    <span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">ImportError</span>:
    <span style="color: #ff7700;font-weight:bold;">import</span> pip._vendor.<span style="color: black;">requests</span> <span style="color: #ff7700;font-weight:bold;">as</span> requests</pre></td></tr></table></div>

<p>Et bénéficier de requests sans rien installer.</p>
<p>Tout ça pour ça.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/requests-fait-partie-de-la-lib-standard/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
	</channel>
</rss>
