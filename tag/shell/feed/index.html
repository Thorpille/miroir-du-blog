<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; shell</title>
	<atom:link href="http://sametmax.com/tag/shell/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Black awk down 8</title>
		<link>http://sametmax.com/black-awk-down/</link>
		<comments>http://sametmax.com/black-awk-down/#comments</comments>
		<pubDate>Tue, 06 Jan 2015 10:26:20 +0000</pubDate>
		<dc:creator><![CDATA[foX]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[Gadget]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=10493</guid>
		<description><![CDATA[Qui n'a jamais rêvé d'avoir un shell Unix un peu plus pythonic ? Les oneliners en sed et Awk bien chiadés, c'est l'apanage des grands barbus en sandales et ça déchire, mais ça reste cryptique et la manipulation de liste et de chaînes de caractères est tout de même limitée.]]></description>
				<content:encoded><![CDATA[<blockquote><p>Ceci est un post invité de <a href="http://sametmax.com/author/foX" target="_blank">foX </a>posté sous licence <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">creative common 3.0 unported</a>.</p></blockquote>
<h2>Introduction (sans douleur)</h2>
<p>Qui n&#8217;a jamais rêvé d&#8217;avoir un shell Unix un peu plus pythonic ? Les oneliners en <a href="http://fr.wikipedia.org/wiki/Stream_Editor" title="sed">sed</a> et <a href="http://fr.wikipedia.org/wiki/Awk" title="Awk">Awk</a> bien chiadés, c&#8217;est l&#8217;apanage des grands barbus en sandales et ça déchire, mais ça reste cryptique et la manipulation de liste et de chaînes de caractères est tout de même limitée. On peut dégainer perl en one line, comme ça c&#8217;est encore plus puissant mais moins lisible&#8230;</p>
<p>Et python dans tout ça ? En oneliner, ça craint, car le principe d&#8217;indentation ne facilite pas les choses et on finit avec une imbrication de bazar de parenthèses illisible.</p>
<p>La solution ? Pour se faire plaisir : une bonne pyp. Le bidule s&#8217;installe avec&#8230; pip (c&#8217;est une méta pipe).</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> pyp</pre></td></tr></table></div>

<p>pyp (<a href="http://code.google.com/p/pyp/" title="pyp">Python Power at the Prompt</a>) va enchanter votre shell unix et vous envoyer au 7ème ciel. Petit tour d&#8217;horizon de la merveille.</p>
<h2>Pyp et les strings</h2>
<p>C&#8217;est la base quand on bricole des oneliners en shell, tripoter des strings.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ls</span> <span style="color: #000000; font-weight: bold;">*</span>JPG <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;'mv', p, p.replace('JPG', 'jpg')&quot;</span></pre></td></tr></table></div>

<p>Revoyons l&#8217;action au ralenti : </p>
<ul>
<li>ls *JPG va nous lister tous les fichiers qui finissent par JPG dans le dossier courant.</li>
<li>Ensuite on envoie cela dans pyp avec un pipe Unix. Celui-ci va composer une ligne de commande qui est la concaténation d&#8217;une commande unix (mv pour renommer un fichier), ce qu&#8217;on aura reçu en entrée (qui s&#8217;appelle par convention &#8220;p&#8221;) et une version modifiée de p où l&#8217;on remplace JPG par jpg.</li>
</ul>
<p>On voit ici que l&#8217;on utilise la méthode replace de la classe str python. On peut utiliser n&#8217;importe quelle méthode de str : lower, upper, title, strip(tease), count etc. Avec des petits bonus comme refindall(re) :-)</p>
<p>Ça donne quoi ma brave dame ? Et bien si on avait des fichiers appelés porn1.JPG et ass.JPG notre jolie commande renverrait :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">mv</span> porn1.JPG porn1.jpg
<span style="color: #c20cb9; font-weight: bold;">mv</span> ass.JPG ass.jpg</pre></td></tr></table></div>

<p>Ok, bien gentil me direz-vous, mais qu&#8217;en fait-on ? Et bien ou l&#8217;on pipe ça dans le shell ( | sh) ou alors on passe l&#8217;argument -x (ou &#8211;execute) à pyp ou directement exécuter le résultat.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ls</span> <span style="color: #000000; font-weight: bold;">*</span>JPG <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;'mv', p, p.replace('JPG', 'jpg')&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">sh</span>
<span style="color: #666666; font-style: italic;"># ou bien</span>
<span style="color: #c20cb9; font-weight: bold;">ls</span> <span style="color: #000000; font-weight: bold;">*</span>JPG <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #660033;">-x</span> <span style="color: #ff0000;">&quot;'mv', p, p.replace('JPG', 'jpg')&quot;</span></pre></td></tr></table></div>

<p>Pourquoi on aime bien python ? Car il slice le bread comme un chef. Pyp aussi, oeuf corse, quelques exemples :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;sam-et-max&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;p.split('-')[2]&quot;</span>
<span style="color: #666666; font-style: italic;"># max</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># La même chose en plus court. Le m, comme minus, sous-entend qu'on split sur &quot;-&quot;</span>
<span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;sam-et-max&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;m[2]&quot;</span>
<span style="color: #666666; font-style: italic;"># max</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;sam-et-max&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;m[0], m[2]&quot;</span>
<span style="color: #666666; font-style: italic;"># sam max</span></pre></td></tr></table></div>

<p>Comme vous avez vu, il y a un petit raccourci sympa avec m (comme minus) au lieu de p. C&#8217;est pas fini, vous en avez d&#8217;autres : d (dot) pour un point, w (whitespace) pour une espace, u pour underscore, s pour slash&#8230; Ils ont pensé à tout.</p>
<h2>Des pyp à la chaîne</h2>
<p>On tout de suite envie de remettre le couvert avec une autre pyp. C&#8217;est possible et même encouragé. Le symbole utilisé est le pipe unix | dans une commande pyp. Ce n&#8217;est donc pas un pipe du shell mais un pipe interne de pyp. Vous suivez ? Un petit exemple :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;sam et max&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[0] | 'avant : ', o, 'après :', p&quot;</span>
<span style="color: #666666; font-style: italic;"># avant :  sam et max après : sam</span></pre></td></tr></table></div>

<p>Le p représente toujours le paramètre courant. Donc dans la seconde partie du pipe, c&#8217;est le premier élément de la liste issu du split de la chaîne &#8220;sam et max&#8221; sur l&#8217;espace (w comme whitespace). Vous suivez toujours ? Oui, bon. Et donc le o ? Et bien c&#8217;est le paramètre d&#8217;origine non modifié. Et il y a h (comme history ou comme hâlibi !) pour avoir le paramètre p à toutes les étapes de la chaîne de pipe&#8230; Beaucoup de puissance on vous dit !</p>
<p>On peut aussi rouler^w faire des join facilement avec les mêmes raccourcis. Par exemple on split sur les espaces puis join sur slash :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;sam et max aiment le lourd en fin de soirée&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[:6]|s&quot;</span>
<span style="color: #666666; font-style: italic;"># sam/et/max/aiment/le/lourd</span></pre></td></tr></table></div>

<h2>Une liste de pyp avec une belle pp</h2>
<p>S&#8217;il y a un bien un truc qui envoie du bois avec python, c&#8217;est la gestion des listes. Pyp n&#8217;est pas en reste. C&#8217;est pp qui contient les listes. En avant :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ls</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;pp[3]&quot;</span>
<span style="color: #666666; font-style: italic;"># Affiche le troisième fichier</span></pre></td></tr></table></div>

<p>On peut utiliser toutes les méthodes standards de la classe list (sort, count etc.) plus quelques bonus :</p>
<p># Équivalent de | sort | uniq</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ls</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;pp.uniq()&quot;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># Additionne tous les PID des process de machine.</span>
<span style="color: #666666; font-style: italic;"># Ça ne sert à rien, mais c'est un exemple hein ?</span>
<span style="color: #c20cb9; font-weight: bold;">ps</span> <span style="color: #660033;">-ef</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[1] | int(p) | sum(pp)&quot;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># Voilà qui est plus utile. </span>
<span style="color: #666666; font-style: italic;"># Au passage, on note que la ligne d'en-tête est ignoré et ne fait pas planter pyp.</span>
<span style="color: #666666; font-style: italic;"># Malin le lapin.</span>
<span style="color: #c20cb9; font-weight: bold;">df</span> <span style="color: #660033;">-m</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[1] | int(p) | sum(pp)&quot;</span></pre></td></tr></table></div>

<h2>pyp au naturel</h2>
<p>Pour compléter les fonctions python, pyp propose quelques fonctions maisons tout à fait sympathiques. Florilège :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;Sam Bill Max&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;p.kill('Bill')&quot;</span>  <span style="color: #666666; font-style: italic;"># quand c'est pas bill, c'est kenny...</span>
<span style="color: #666666; font-style: italic;"># Sam  Max</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #000000;">124</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;(int(p)/2+30)&quot;</span>
<span style="color: #666666; font-style: italic;"># 91</span>
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">ls</span>  <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;n, p&quot;</span>
<span style="color: #666666; font-style: italic;"># Liste des fichiers avec un numéro croissant devant</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>fox<span style="color: #000000; font-weight: bold;">/</span>video<span style="color: #000000; font-weight: bold;">/</span>gangbang.avi  <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;'Dir='+p.dir, '<span style="color: #000099; font-weight: bold;">\n</span>File='+p.file, '<span style="color: #000099; font-weight: bold;">\n</span>Ext='+p.ext&quot;</span> <span style="color: #666666; font-style: italic;"># basename, dirname et ses amis</span>
<span style="color: #666666; font-style: italic;"># Dir=/home/fox/video </span>
<span style="color: #666666; font-style: italic;"># File=gangbang.avi </span>
<span style="color: #666666; font-style: italic;"># Ext=avi</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># On définit le séparateur de liste comme l'espace, </span>
<span style="color: #666666; font-style: italic;"># puis on regroupe la liste par deux élément</span>
<span style="color: #666666; font-style: italic;"># et enfin on fait un join sur le caractère tiret (minus)</span>
<span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;1 2 3 4 5 6&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;pp.delimit(' ') | pp.divide(2) | m&quot;</span>
<span style="color: #666666; font-style: italic;"># 1-2</span>
<span style="color: #666666; font-style: italic;"># 3-4</span>
<span style="color: #666666; font-style: italic;"># 5-6</span>
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">ps</span> <span style="color: #660033;">-ef</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[1] | int(p) | max(pp)&quot;</span> 
<span style="color: #666666; font-style: italic;"># (le PID le plus grand)</span></pre></td></tr></table></div>

<h2>pyp en intention ou intention de pyp ?</h2>
<p>Il ne faut pas se gêner, on peut utiliser les excellentes <a href="http://sametmax.com/python-love-les-listes-en-intention-partie/" title="Listes en intention">listes en intention</a> de Python.  Voici tous les PID impaires :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ps</span> <span style="color: #660033;">-ef</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[1] | int(p) | [i for i in pp if i%2] | p &quot;</span></pre></td></tr></table></div>

<h2>L&#8217;industrie de la pyp c&#8217;est un truc de macro</h2>
<p>Les bonnes choses, ça se garde, alors voilà :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">ps</span> <span style="color: #660033;">-ef</span> <span style="color: #000000; font-weight: bold;">|</span> pyp <span style="color: #ff0000;">&quot;w[1] | int(p) | [i for i in pp if i%2] | p &quot;</span> <span style="color: #660033;">-s</span> odd  <span style="color: #666666; font-style: italic;"># on enregistre la macro 'odd'</span>
&nbsp;
<span style="color: #c20cb9; font-weight: bold;">ps</span> ef <span style="color: #000000; font-weight: bold;">|</span> pyp odd <span style="color: #666666; font-style: italic;"># c'est aussi simple que cela ;-)</span></pre></td></tr></table></div>

<h2>pyp sur grand écran</h2>
<p>Cette petite pépite est développée par Sony Pictures Imageworks pour ses besoins internes. Le développement n&#8217;est pas très collaboratif (un commit par release&#8230;) mais reste ouvert aux contributions externes. C&#8217;est sous une licence de type BSD.<br />
Les loulous ont fait une jolie vidéo de tutorial très bling bling. C&#8217;est l&#8217;avantage de bosser dans le milieu : </p>
<p><span class='embed-youtube' style='text-align:center; display: block;'><iframe class='youtube-player' type='text/html' width='1170' height='689' src='http://www.youtube.com/embed/eWtVWF0JSJA?version=3&#038;rel=1&#038;fs=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' frameborder='0' allowfullscreen='true'></iframe></span></p>
<h2>Et bien plus encore&#8230;</h2>
<p>Cet outil merveilleux possède encore des fonctionnalités qui vont vous le faire adorer comme son mode interactif avec une coloration syntaxique sympathique, la gestion de l&#8217;historique dans le pipe et beaucoup d&#8217;autres. Adieu sed, awk, uniq, sort et con sort, vous étiez mes premiers amours, mais pyp vous chasse dehors.</p>
<p>Ce n&#8217;est pas la seule ni la première tentative de faire la peau d&#8217;awk avec python. Sam avait déjà écrit <a href="http://sametmax.com/remplacer-sed-awk-cut-et-perl-par-python-orgasme-pour-sysadmin/" title="une pyped pour Sam">un article </a>sur une autre solution aussi appelée pyped.</p>
<h2> C&#8217;est donc parfait ? </h2>
<p>Oui, bien entendu. Aucun défaut, aucun bug. Ok&#8230; voici les limites : </p>
<ul>
<ol>Perf de daube. Sur des petits volumes (quelques milliers de lignes) ça le fait. Au delà, ça rame. Quelques patch sont proposés pour diviser par trois le temps de traitement :-)</ol>
<ol>Conso mémoire obcène. Idem, pour des petits volumes on s&#8217;en fout, mais sinon ça peut rapidement chiffrer. Pourquoi ? Le machin ne fonctionne pas en stream, tout est gardé en mémoire et à chaque étape de transformation (pour permettre d&#8217;accéder à l&#8217;historique).</ol>
<ol>C&#8217;est installé sur votre pc, mais pas partout, contrairement à ce bon vieux awk. </ol>
</ul>
<p>Amusez vous bien, celui qui fait la plus jolie commande pyp dans les commentaires aura le droit à un bisous.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/black-awk-down/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/06/hawk.jpg" length="364221" type="image/jpg" />	</item>
		<item>
		<title>Rejouer un session de terminal avec playitagainsam 10</title>
		<link>http://sametmax.com/rejouer-un-session-de-terminal-avec-playitagainsam/</link>
		<comments>http://sametmax.com/rejouer-un-session-de-terminal-avec-playitagainsam/#comments</comments>
		<pubDate>Thu, 22 May 2014 08:29:36 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=10298</guid>
		<description><![CDATA[<a href="https://github.com/rfk/playitagainsam">playitagainsam</a>, ou PIAS  a pour but de rejouer des sessions shell: il lance un shell, enregistre ce qu'on y a tapé, et quand on quitte le shell, sauvegarde le tout dans un fichier. Ensuite, on peut lire le contenu du fichier et revoir la session shell telle qu'elle a été tapée.]]></description>
				<content:encoded><![CDATA[<p>Combien de fois, durant une formation, on m&#8217;a demandé si je pouvais donner un dump de la session shell.</p>
<p><a href="https://github.com/rfk/playitagainsam">playitagainsam</a>, ou PIAS, a exactement pour but de faire cela: il lance un shell, enregistre ce qu&#8217;on y a tapé, et quand on quitte le shell, sauvegarde le tout dans un fichier. Ensuite, on peut lire le contenu du fichier et revoir la session shell telle qu&#8217;elle a été tapée.</p>
<p>C&#8217;est un programme Python, on peut donc le <a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> installer :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pip <span style="color: #c20cb9; font-weight: bold;">install</span> playitagainsam <span style="color: #660033;">--user</span></pre></td></tr></table></div>

<p>Ensuite, on lance une session à enregistrer avec la sous commande record :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias record nom_du_fichier_ou_sauver_l_enregistrement</pre></td></tr></table></div>

<p>PIAS va lancer un nouveau shell, par défaut le même que votre shell actuel (souvent bash, pour moi fish), mais vous pouvez préciser un type de shell spécial avec <code>--shell</code>. Ex :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias record ex1 <span style="color: #660033;">--shell</span> ipython</pre></td></tr></table></div>

<p>A partir de là il n&#8217;y a rien à faire. On peut travailler normalement et oublier qu&#8217;on a utilisé PIAS. Une fois qu&#8217;on a terminé sa petite affaire, il suffit de sortir du shell (CTRL + D, exit, etc), et la session va être sauvegardée dans un format JSON facile à corriger à la main si vous souhaitez la rendre plus agréable :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#123;</span>
  <span style="color: #ff0000;">&quot;events&quot;</span>: <span style="color: #7a0874; font-weight: bold;">&#91;</span>
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;OPEN&quot;</span>,
      <span style="color: #ff0000;">&quot;size&quot;</span>: <span style="color: #7a0874; font-weight: bold;">&#91;</span>
        <span style="color: #000000;">162</span>,
        <span style="color: #000000;">33</span>
      <span style="color: #7a0874; font-weight: bold;">&#93;</span>,
      <span style="color: #ff0000;">&quot;term&quot;</span>: <span style="color: #ff0000;">&quot;1c53f048e3a74984b2a93af175e24e87&quot;</span>
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>,
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;PAUSE&quot;</span>,
      <span style="color: #ff0000;">&quot;duration&quot;</span>: <span style="color: #000000;">0.10042214393615723</span>
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>,
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;WRITE&quot;</span>,
      <span style="color: #ff0000;">&quot;data&quot;</span>: <span style="color: #ff0000;">&quot;\u001b]0;sam@sametmax.com: /tmp\u0007sam@sametmax.com:/tmp$ &quot;</span>,
      <span style="color: #ff0000;">&quot;term&quot;</span>: <span style="color: #ff0000;">&quot;1c53f048e3a74984b2a93af175e24e87&quot;</span>
    <span style="color: #7a0874; font-weight: bold;">&#125;</span>,
    <span style="color: #7a0874; font-weight: bold;">&#123;</span>
      <span style="color: #ff0000;">&quot;act&quot;</span>: <span style="color: #ff0000;">&quot;ECHO&quot;</span>,
      <span style="color: #ff0000;">&quot;data&quot;</span>: <span style="color: #ff0000;">&quot;touch essai&quot;</span>,
      <span style="color: #ff0000;">&quot;term&quot;</span>: <span style="color: #ff0000;">&quot;1c53f048e3a74984b2a93af175e24e87&quot;</span>
...
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></td></tr></table></div>

<p>Quand vous voulez rejouer la session :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias play fichier_d_enregistrement</pre></td></tr></table></div>

<p>Par défaut il faut appuyer sur une touche quelconque du clavier pour voir apparaitre chaque caractère, donnant l&#8217;impression que vous êtes un hacker de Hollywood. C&#8217;est rigolo, mais parfaitement chiant à la longue. On peut faire jouer la session automatiquement avec l&#8217;option <code>--auto-type</code> qui va taper chaque ligne automatiquement. Il suffira alors d&#8217;appuyer sur entrée à chaque ligne pour avoir le résultat suivant. C&#8217;est mon mode préféré. </p>
<p>Si vous êtes un gros feignant, vous pouvez tout jouer en automatique en rajoutant l&#8217;option <code>--auto-waypoint</code> qui va vous dispenser de taper entrée à chaque fin de ligne. Ex :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">pias play ex1 <span style="color: #660033;">--auto-type</span> <span style="color: #660033;">--auto-waypoint</span></pre></td></tr></table></div>

<p><strong>La session jouée est simulée.</strong> Elle n&#8217;a aucun impacte sur le système. Si vous faites un <code>mkdir</code> dans bash ou un <code>shutil.rmtree</code> dans python, ça ne fera rien.</p>
<p>Néanmoins, parfois il est utile d&#8217;avoir le effets réels des commandes. Dans ce cas on peut utiliser <code>--live-replay</code>. Attention, faites bien gaffe à ce que vous allez jouer&#8230;</p>
<p>playitagainsam est intéressant pour tout ce qui est formation et tutorial, d&#8217;autant plus qu&#8217;il existe un <a href="https://github.com/rfk/playitagainsam-js/">player javascript</a> pour faire la démonstration de vos sessions shell sur un blog ou un slideshow.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/rejouer-un-session-de-terminal-avec-playitagainsam/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/05/G67guCh.jpg" length="36803" type="image/jpg" />	</item>
		<item>
		<title>Profiter du notebook de IPython  23</title>
		<link>http://sametmax.com/profiter-du-notebook-de-ipython/</link>
		<comments>http://sametmax.com/profiter-du-notebook-de-ipython/#comments</comments>
		<pubDate>Wed, 23 Oct 2013 13:53:15 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7507</guid>
		<description><![CDATA[IPython est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec tellement d&#8217;astuces intégrées que ça donne envie de vomir des arc-en-ciel. Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : le notebook. Si vous êtes [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="http://ipython.org">IPython</a> est un des outils qui me font trouver la programmation Python plus agréable que dans tous les autres langages : un shell avec <a href="http://sametmax.com/tag/ipython/">tellement d&#8217;astuces intégrées</a> que ça donne envie de vomir des arc-en-ciel.</p>
<p>Aujourd&#8217;hui je vais vous parler d&#8217;une fonctionnalité fantastique est très peu connue de IPython : <a href="http://ipython.org/notebook.html">le notebook</a>.</p>
<p>Si vous êtes scientifique ou manipulez pas mal de graphiques et de données numériques, <a href="http://www.randalolson.com/2012/05/12/a-short-demo-on-how-to-use-ipython-notebook-as-a-research-notebook/">c&#8217;est un must have</a>. Mais personnellement je trouve que c&#8217;est aussi un fantastique outil d&#8217;éducation, c&#8217;est génial pour les cours, les démos, et expérimenter avec du code inconnu.</p>
<p>Ça se présente sous la forme d&#8217;un shell IPython intégré dans une page Web, mais que l&#8217;on peut avoir sur son desktop, pas besoin d&#8217;avoir un serveur distant. Si vous avez un peu de temps, voici une vidéo de démo (avec un musique horrible) :</p>

<!-- iframe plugin v.2.9 wordpress.org/plugins/iframe/ -->
<iframe width="420" height="315" src="//www.youtube.com/embed/H6dLGQw9yFQ" frameborder="0" scrolling="no" class="iframe-class"></iframe>

<p>L&#8217;installation sous Ubuntu, c&#8217;est juste :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> <span style="color: #c20cb9; font-weight: bold;">apt-get install</span> ipython-notebook</pre></td></tr></table></div>

<p>Pour Windows, il me semble, de mémoire, que c&#8217;est intégré dans l&#8217;exe. Pour Mac, je ne sais pas.</p>
<p>Et derrière il suffit de lancer la commande :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">ipython notebook</pre></td></tr></table></div>

<p>Et il va vous ouvrir votre navigateur avec un onglet sur votre notebook.</p>
<p>L’intérêt principal du notebook est que TOUT le code est coloré et est modifiable comme sur dans fichier mais TOUT le code est exécutable (et affiche son résultat juste après chaque ligne) comme dans un shell iPython, avec completion du code. Le meilleur des deux mondes quoi.</p>
<p>En prime on peut embeder du <a href="http://daringfireball.net/projects/markdown/syntax">markdown</a> (et donc des liens, des images, etc) dans le même notebook, sauvegarder ça pour plus tard, le partager, etc.</p>
<p>Personnellement, j&#8217;ai ceci dans mon .bashrc :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">notebook <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #007800;">processes</span>=$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">ps</span> aux <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-i</span> <span style="color: #660033;">-P</span> <span style="color: #ff0000;">&quot;ipython notebook&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">wc</span> -l<span style="color: #7a0874; font-weight: bold;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$processes</span> <span style="color: #660033;">-lt</span> <span style="color: #000000;">2</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>
    <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #7a0874; font-weight: bold;">pushd</span> <span style="color: #000000; font-weight: bold;">/</span>tmp
        <span style="color: #c20cb9; font-weight: bold;">nohup</span> ipython notebook <span style="color: #660033;">--port</span> <span style="color: #000000;">8889</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">&amp;</span>
        <span style="color: #7a0874; font-weight: bold;">popd</span>
    <span style="color: #000000; font-weight: bold;">else</span>
        firefox http:<span style="color: #000000; font-weight: bold;">//</span>127.0.0.1:<span style="color: #000000;">8889</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></td></tr></table></div>

<p>Comme ça en une commande je lance le serveur du notebook sur le port que je veux si il ne tourne pas, et si il tourne, j&#8217;ouvre firefox et ouvre un onglet dessus.</p>
<p>Quelques autres options très utiles :</p>
<p><strong>&#8211;pylab </strong>: Charger plein de libs pour transformer IPython en un matlab killer.<br />
<strong>&#8211;gui=lib </strong> : permet d&#8217;intégrer l&#8217;event loop de QT, wx, gtk, etc.<br />
<strong>&#8211;ip=0.0.0.0</strong> : si on veut que d&#8217;autres puisse accéder à notre notebook.</p>
<p>Il existe un <a href="http://nbviewer.ipython.org/">espèce de pastebin</a> spécialement fait pour le notebook, qui permet de partager ses expérimentations.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/profiter-du-notebook-de-ipython/feed/</wfw:commentRss>
		<slash:comments>23</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/10/piNYkzq.jpg" length="97823" type="image/jpg" />	</item>
		<item>
		<title>Nouvelle config iPython 9</title>
		<link>http://sametmax.com/nouvelle-config-ipython/</link>
		<comments>http://sametmax.com/nouvelle-config-ipython/#comments</comments>
		<pubDate>Sun, 19 May 2013 17:24:44 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=6158</guid>
		<description><![CDATA[J'ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.

Voici ce que j'ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>...]]></description>
				<content:encoded><![CDATA[<p>J&#8217;ai bricolé une config pour iPython dernièrement. Rappelez-vous, on peut complètement <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">customiser ce shell</a>.</p>
<p>Voici ce que j&#8217;ai dans mon <em>./.config/ipython/profile_default/ipython_config.py</em>:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'doctest_mode on'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from __future__ import unicode_literals, absolute_import, division'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import sys'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import os'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import re'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import json'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import base64'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import calendar'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import csv'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import datetime'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import itertools'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import random'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import hashlib'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import tempfile'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import argparse'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import math'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import random'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import subprocess'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from glob import glob'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from uuid import uuid4'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from collections import Counter, OrderedDict'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">&quot;&quot;&quot;
def initial_imports():
&nbsp;
    # ne faites pas ça dans un code de prod :-)
    global path, relativedelta, requests 
&nbsp;
    print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nImported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
&nbsp;
    try:
        from path import path
        print('Imported : &quot;path&quot;')
    except ImportError:
        print(&quot;'path' is not available&quot;)
&nbsp;
    try:
        from dateutil import relativedelta
        print('Imported : &quot;relativedelta&quot;')
    except ImportError:
        print(&quot;'dateutil' is not available&quot;)
&nbsp;
    try:
        import requests
        print('Imported : &quot;requests&quot;')
    except ImportError:
        print(&quot;'requests' is not available&quot;)
&nbsp;
    try:
        env = os.environ['VIRTUAL_ENV']
        print(&quot;<span style="color: #000099; font-weight: bold;">\\</span>nENV '{}'. You can import:<span style="color: #000099; font-weight: bold;">\\</span>n&quot;.format(os.path.basename(env)))
        cmd = subprocess.check_output([env + &quot;/bin/pip&quot;, &quot;freeze&quot;],
                                      stderr=subprocess.STDOUT).strip().split(&quot;<span style="color: #000099; font-weight: bold;">\\</span>n&quot;)
        p = re.compile(r'(^.*<span style="color: #000099; font-weight: bold;">\:</span><span style="color: #000099; font-weight: bold;">\s</span>)|((#|@).*$)|(==.*$)')
        print(&quot;'&quot; + &quot;', '&quot;.join(sorted(set(os.path.basename(p.sub('', f)) for f in cmd))) + &quot;'&quot;)
    except KeyError:
        pass
&nbsp;
    print('')
&quot;&quot;&quot;</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">&quot;initial_imports()&quot;</span>
<span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>Du coup, au démarrage d&#8217;iPython j&#8217;ai les bénéfices suivant :</p>
<ul>
<li>Comportement de Python 3 pour l&#8217;unicode, les imports et la division. Ils sont plus sains et facile à manipuler (plus besoin de préfixer de &#8216;u&#8217; les chaînes par exemple).</li>
<li>J&#8217;ai tout de suite sous la main une tonne de modules que j&#8217;utilise souvent sans avoir à les importer (os, datetime, random, etc).</li>
<li>J&#8217;importe aussi des modules optionnels (path, requests&#8230;).</li>
<li>Je sais si je suis dans un environnement virtuel, et si oui, ce qu&#8217;il y a installé dedans.</li>
</ul>
<p>Je vire aussi la bannière de démarrage :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span></pre></td></tr></table></div>

<p>Et hop, mon affichage au démarrage ressemble à ça :</p>
<pre>$ ipython
Exception reporting mode: Plain
Doctest mode is: ON

Imported : 'sys', 'os', 're', 'json', 'base64', 'calendar', 'csv', 'datetime', 'itertools', 'random', 'hashlib', 'tempfile', 'argparse', 'math', 'random', 'glob', 'uuid4', 'datetime', 'timedelta', 'Counter', 'OrderedDict', 'subprocess'

'path' is not available
'dateutil' is not available
Imported : "requests"

ENV 'my_env'. You can import:

'BeautifulSoup', 'Django', 'Fabric', 'Jinja2', 'Pillow', 'Pygments', 'Sphinx', 'URLObject', 'Werkzeug', 'argparse', 'beautifulsoup4', 'colorlog', 'distribute', 'django-appconf', 'django-bootstrap-pagination', 'django-bootstrap-toolkit', 'django-compressor', 'django-debug-toolbar', 'django-extensions', 'django-guardian', 'django-loginas', 'django-model-utils', 'django-pdb', 'django-pytest', 'django-rest-framework.git', 'django-template-repl', 'docutils', 'easy-thumbnails', 'feedparser', 'gunicor

</pre>
<p>Ça fait un gros bloc visuellement, mais ça ne s&#8217;affiche qu&#8217;une fois, et le délai est acceptable.</p>
<p>Si j&#8217;ai besoin de l&#8217;info à nouveau, je peux toujours appeler :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">initial_imports<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Que ce genre de choses soient possibles et faciles me font adorer Python. La force du langage, ce n&#8217;est pas seulement son core, c&#8217;est tout son environnement, ses libs, ses outils qui gravitent autour qui rendent l&#8217;expérience de dev fantastique.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/nouvelle-config-ipython/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/05/5e4itlu.jpg" length="273612" type="image/jpg" />	</item>
		<item>
		<title>A l&#8217;intérieur de mon .bashrc 22</title>
		<link>http://sametmax.com/a-linterieur-de-mon-bashrc/</link>
		<comments>http://sametmax.com/a-linterieur-de-mon-bashrc/#comments</comments>
		<pubDate>Tue, 22 Jan 2013 10:26:44 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>
		<category><![CDATA[virtualenv]]></category>
		<category><![CDATA[virtualenvwrapper]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=4238</guid>
		<description><![CDATA[Généralement montrer son <em>.bashrc</em> donne rapidement lieu dans les comments à un concours de celui qui a la plus longue (jusqu'à ce qu'arrive un utilisateur de zsh, et alors commence le concours de celui qui pisse le plus loin). Mais bon, aujourd'hui j'ai la flemme d'écrire un article complet.]]></description>
				<content:encoded><![CDATA[<p>Généralement montrer son <em>.bashrc</em> donne rapidement lieu dans les comments à un concours de celui qui a la plus longue (jusqu&#8217;à ce qu&#8217;arrive un utilisateur de zsh, et alors commence le concours de celui qui pisse le plus loin). Mais bon, aujourd&#8217;hui j&#8217;ai la flemme d&#8217;écrire un article complet.</p>
<p>Rappel : le <em>.bashrc</em> c&#8217;est le fichier qui est automatiquement chargé au démarrage du shell bash, le shell par défaut sur la plupart des Unix incluant Mac et Ubuntu.</p>
<p>Donc si vous voulez avoir une expérience de travail personnalisée dans votre terminal, c&#8217;est dans ce fichier que ça se passe.</p>
<p>Personnellement, j&#8217;ai tout le bordel que met Ubuntu par défaut (notamment les trucs avec les autocomplétions de partout). En en prime je rajoute :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666; font-style: italic;"># un raccourcis pour lancer Redis car je le met sur off par défaut mais je le </span>
<span style="color: #666666; font-style: italic;"># lance souvent</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> redis <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #000000; font-weight: bold;">!</span> <span style="color: #660033;">-e</span> <span style="color: #ff0000;">&quot;/var/run/redis/redis-server.pid&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> ; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #c20cb9; font-weight: bold;">sudo</span> service redis-server start
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># un tas de raccourcis type</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> projet_django <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    workon projet_django;
    <span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>Work<span style="color: #000000; font-weight: bold;">/</span>projet_django<span style="color: #000000; font-weight: bold;">/</span>repo<span style="color: #000000; font-weight: bold;">/</span>projet_django;
&nbsp;
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$#</span> <span style="color: #660033;">-ne</span> <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        .<span style="color: #000000; font-weight: bold;">/</span>manage.py $<span style="color: #000000; font-weight: bold;">@</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">sb</span>=<span style="color: #ff0000;">'projet_django'</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># CF: http://sametmax.com/un-alias-bash-pour-django-virtualenv-dont-je-ne-peux-plus-me-passer/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># fonction fétiche de bourrin</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">function</span> killbill <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #007800;">BAK</span>=<span style="color: #007800;">$IFS</span>
    <span style="color: #007800;">IFS</span>=$<span style="color: #ff0000;">'\n'</span>
    <span style="color: #000000; font-weight: bold;">for</span> <span style="color: #c20cb9; font-weight: bold;">id</span> <span style="color: #000000; font-weight: bold;">in</span> $<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #c20cb9; font-weight: bold;">ps</span> aux <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-P</span> <span style="color: #660033;">-i</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">grep</span> <span style="color: #660033;">-v</span> <span style="color: #ff0000;">&quot;grep&quot;</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">awk</span> <span style="color: #ff0000;">'{printf $2&quot; &quot;; for (i=11; i&lt;NF; i++) printf $i&quot; &quot;; print $NF}'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>; <span style="color: #000000; font-weight: bold;">do</span> 
        <span style="color: #007800;">service</span>=$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$id</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">cut</span> <span style="color: #660033;">-d</span> <span style="color: #ff0000;">&quot; &quot;</span> <span style="color: #660033;">-f</span> <span style="color: #000000;">1</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$2</span> == <span style="color: #ff0000;">&quot;-t&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
            <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$service</span> <span style="color: #000000; font-weight: bold;">\&quot;</span>$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$id</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">cut</span> <span style="color: #660033;">-d</span> <span style="color: #ff0000;">&quot; &quot;</span> <span style="color: #660033;">-f</span> <span style="color: #000000;">2</span>-<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">\&quot;</span> <span style="color: #ff0000;">&quot;would be killed&quot;</span>
        <span style="color: #000000; font-weight: bold;">else</span>
&nbsp;
            <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$service</span> <span style="color: #000000; font-weight: bold;">\&quot;</span>$<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #007800;">$id</span> <span style="color: #000000; font-weight: bold;">|</span> <span style="color: #c20cb9; font-weight: bold;">cut</span> <span style="color: #660033;">-d</span> <span style="color: #ff0000;">&quot; &quot;</span> <span style="color: #660033;">-f</span> <span style="color: #000000;">2</span>-<span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #000000; font-weight: bold;">\&quot;</span> <span style="color: #ff0000;">&quot;killed&quot;</span>
            <span style="color: #c20cb9; font-weight: bold;">kill</span> <span style="color: #660033;">-9</span> <span style="color: #007800;">$service</span>
        <span style="color: #000000; font-weight: bold;">fi</span>
    <span style="color: #000000; font-weight: bold;">done</span>
    <span style="color: #007800;">IFS</span>=<span style="color: #007800;">$BAK</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># que j'ai un peu amélioré depuis http://sametmax.com/tu-vas-crever-oui/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># une fonction pour commiter rapidement </span>
<span style="color: #000000; font-weight: bold;">function</span> commit <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #c20cb9; font-weight: bold;">git commit</span> <span style="color: #660033;">-m</span> <span style="color: #ff0000;">&quot;<span style="color: #780078;">`echo &quot;$*&quot; | sed -e 's/^./\U&amp;\E/g'`</span>&quot;</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">co</span>=commit;
&nbsp;
<span style="color: #666666; font-style: italic;"># en gros on tappe &quot;co message de commit&quot;. Sans guillement, sans rien.</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># des completions pour manage.py et git</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>.django_bash_completion
<span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>.git-completion.bash
&nbsp;
<span style="color: #666666; font-style: italic;"># activation du cache de pip pour éviter de télécharger 20 fois la même lib</span>
&nbsp;
<span style="color: #007800;">PIP_DOWNLOAD_CACHE</span>=<span style="color: #ff0000;">'/opt/pip-cache'</span>;
<span style="color: #7a0874; font-weight: bold;">export</span> PIP_DOWNLOAD_CACHE;
&nbsp;
<span style="color: #666666; font-style: italic;"># un super outil pour un git plus user friendly</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-s</span> <span style="color: #ff0000;">&quot;/home/sam/.scm_breeze/scm_breeze.sh&quot;</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #ff0000;">&quot;/home/sam/.scm_breeze/scm_breeze.sh&quot;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">c</span>=<span style="color: #ff0000;">&quot;git_index&quot;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># j'en avais parlé ici : http://sametmax.com/scm-breeze-facilite-la-selection-de-vos-fichiers-a-commiter-sous-git-avec/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># un prompt personalisé tout en couleur</span>
<span style="color: #666666; font-style: italic;"># formaté comme ça: [nom du virtualenv] sam ~/path (branche git) $</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">source</span> ~<span style="color: #000000; font-weight: bold;">/</span>.prompt.bash
&nbsp;
<span style="color: #666666; font-style: italic;"># le fichier ressemble à ça : http://0bin.net/paste/d103a91dc41818462da0c8468ddddf4141f2efd6#dKr6qWHfAVZsSnOQ7fA4pPQ3Dquhz0Oj1b2OF8xw6vA=</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># la configuration de virtualenv wrapper </span>
<span style="color: #7a0874; font-weight: bold;">export</span> <span style="color: #007800;">WORKON_HOME</span>=<span style="color: #000000; font-weight: bold;">/</span>home<span style="color: #000000; font-weight: bold;">/</span>sam<span style="color: #000000; font-weight: bold;">/</span>.virtualenvs
<span style="color: #c20cb9; font-weight: bold;">mkdir</span> <span style="color: #660033;">-p</span> <span style="color: #007800;">$WORKON_HOME</span>
<span style="color: #7a0874; font-weight: bold;">source</span> <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span>virtualenvwrapper.sh
&nbsp;
<span style="color: #666666; font-style: italic;"># plus de détails ici : http://sametmax.com/les-environnement-virtuels-python-virtualenv-et-virtualenvwrapper/</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># j'ai récément succombé aux sirène du virtualenv automatique</span>
<span style="color: #666666; font-style: italic;"># j'avais beaucoup d'a priori (particulirement écraser la commande CD)</span>
<span style="color: #666666; font-style: italic;"># mais à l'usage, c'est pratique</span>
has_virtualenv<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-e</span> .venv <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        workon <span style="color: #000000; font-weight: bold;">`</span><span style="color: #c20cb9; font-weight: bold;">cat</span> .venv<span style="color: #000000; font-weight: bold;">`</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
venv_cd <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #7a0874; font-weight: bold;">builtin</span> <span style="color: #7a0874; font-weight: bold;">cd</span> <span style="color: #ff0000;">&quot;$@&quot;</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> has_virtualenv
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">cd</span>=<span style="color: #ff0000;">&quot;venv_cd&quot;</span>
has_virtualenv
&nbsp;
<span style="color: #666666; font-style: italic;"># en gros ça m'active un virtualenv si il y a un fichier .venv avec un nom</span>
<span style="color: #666666; font-style: italic;"># de virtualenv dedans dans le dossier courrant</span>
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># je vous en parlais récement (http://sametmax.com/configurer-votre-terminal-pour-quil-vous-notifie-de-la-fin-dune-commande-longue/)</span>
<span style="color: #666666; font-style: italic;"># c'est pour avoir une notifi à la fin des commandes longues </span>
notify_when_long_running_commands_finish_install
&nbsp;
&nbsp;
<span style="color: #666666; font-style: italic;"># ca c'est un truc de feignasse car je me souviens jamais comment extraire </span>
<span style="color: #666666; font-style: italic;"># en ligne de commande tel ou tel format</span>
&nbsp;
extract <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-f</span> <span style="color: #007800;">$1</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>
    <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #000000; font-weight: bold;">case</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">in</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.7z<span style="color: #7a0874; font-weight: bold;">&#41;</span> 7z x <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.lzma<span style="color: #7a0874; font-weight: bold;">&#41;</span> unlzma <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.rar<span style="color: #7a0874; font-weight: bold;">&#41;</span> unrar x <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar.bz2<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvjf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.bz2<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">bunzip2</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar.gz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvzf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.gz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">gunzip</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tar.xz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> Jxvf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.xz<span style="color: #7a0874; font-weight: bold;">&#41;</span> xz <span style="color: #660033;">-d</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tbz2<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvjf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.tgz<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">tar</span> xvzf <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.zip<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #c20cb9; font-weight: bold;">unzip</span> <span style="color: #007800;">$1</span> <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span>.Z<span style="color: #7a0874; font-weight: bold;">&#41;</span> uncompress <span style="color: #000000; font-weight: bold;">;;</span>
            <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;don't know how to extract '$1'...&quot;</span> <span style="color: #000000; font-weight: bold;">;;</span>
        <span style="color: #000000; font-weight: bold;">esac</span>
    <span style="color: #000000; font-weight: bold;">else</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #ff0000;">&quot;Error: '$1' is not a valid file!&quot;</span>
        <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">0</span>
    <span style="color: #000000; font-weight: bold;">fi</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># ça date de http://sametmax.com/decompresser-sous-linux-en-ligne-de-commande/</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># et quelques alias pour des tâches de tous les jours</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">alias</span> ..=<span style="color: #ff0000;">'cd ..'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> ...=<span style="color: #ff0000;">'cd ../../'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> ....=<span style="color: #ff0000;">'cd ../../../'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> .....=<span style="color: #ff0000;">'cd ../../../../'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> ......=<span style="color: #ff0000;">'cd ../../../../../'</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">process</span>=<span style="color: #ff0000;">'ps aux | grep'</span>
<span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">serve</span>=<span style="color: #ff0000;">&quot;python -c 'import SimpleHTTPServer; SimpleHTTPServer.test()'&quot;</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/a-linterieur-de-mon-bashrc/feed/</wfw:commentRss>
		<slash:comments>22</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/01/23207079.jpg" length="22869" type="image/jpg" />	</item>
		<item>
		<title>Quelques bonnes raisons de plus d&#8217;utiliser iPython 7</title>
		<link>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/</link>
		<comments>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/#comments</comments>
		<pubDate>Sun, 23 Dec 2012 18:01:36 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[docstring]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3644</guid>
		<description><![CDATA[Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.]]></description>
				<content:encoded><![CDATA[<p>Le shell Python est vraiment pratique pour expérimenter, apprendre le langage, tester un snippet vitos ou administrer son site à distance. Mais <a href="http://ipython.org/">iPython</a>, ola, iPython, il déchire sa génitrice avec une poutrelle en verre pilé.</p>
<p>Voici quelques commandes qui vous donneront moult raisons de plus pour très vite installer ce shell alternatif.</p>
<h2>Autocall</h2>
<p>Taper des parenthèses et des guillemets, c&#8217;est sooooooo 1995.  iPython peut vous les rajouter automatiquement dans les appels de fonctions, il faut juste préfixer de &#8220;/&#8221;, &#8220;,&#8221; ou &#8220;;&#8221; votre appel de fonction pour qu&#8217;il fasse la conversion:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">/f <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span><span style="color: #ff4500;">2</span> <span style="color: #66cc66;">=&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">,</span>f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> <span style="color: #66cc66;">=&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1&quot;</span><span style="color: #66cc66;">,</span><span style="color: #483d8b;">&quot;2&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">;</span>f <span style="color: #ff4500;">1</span> <span style="color: #ff4500;">2</span> <span style="color: #66cc66;">=&gt;</span> f<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;1 2&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Accès au shell système</h2>
<p>Préfixez votre commande d&#8217;un &#8220;!&#8221; bien couillu, et iPython va vous exécuter ça dans le shell système (par exemple bash) et vous retourner le résulat:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">!</span> cat /etc/fstab | grep <span style="color: #483d8b;">'ext4'</span>
UUID<span style="color: #66cc66;">=</span>e33c5b98-<span style="color: #ff4500;">1570</span>-44d6-a32f-5e7970e1e588 /               ext4    errors<span style="color: #66cc66;">=</span>remount-ro <span style="color: #ff4500;">0</span>       <span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<p>Oui, oui, on est dans un shell Python là. Ou comment bien faire chier la coloration syntaxique de votre blog.</p>
<p>Et on peut mettre tout ça dans une variable et le traiter en Python derrière:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> files <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">!</span>ls
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span>f.<span style="color: black;">upper</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> f <span style="color: #ff7700;font-weight:bold;">in</span> files<span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #483d8b;">'BUREAU'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'DOCUMENTS'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'EXAMPLES.DESKTOP'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'IMAGES'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'MOD<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a8LES'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'MUSIQUE'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'PUBLIC'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'T<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9L<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9CHARGEMENTS'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'UBUNTU ONE'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'VID<span style="color: #000099; font-weight: bold;">\x</span>c3<span style="color: #000099; font-weight: bold;">\x</span>a9OS'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>A noter que tout est exécuté dans un autre process, ainsi <code>!cd</code> n&#8217;aura aucun effet. Mais tout est prévu: <code>%cd</code> et <code>%pwd</code> proxient tout ça vers <code>os.chdir</code> et <code>os.getcwd</code> :-)</p>
<h2>Debugger</h2>
<p>Entrez <code>%timeit</code> expression pour qu&#8217;il qu&#8217;iPython vous l&#8217;exécute 10000000 fois et vous donne sa performance.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> %<span style="color: #dc143c;">timeit</span> x<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span>**<span style="color: #ff4500;">100</span>
<span style="color: #ff4500;">10000000</span> loops<span style="color: #66cc66;">,</span> best of <span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">22.5</span> ns per loop</pre></td></tr></table></div>

<p>Autre commande: <code>%pdb</code> vous lancera automatiquement votre <a href="http://sametmax.com/debugger-en-python-les-bases-de-pdb/">débuggeur favoris</a> si une exception se lève durant votre session.</p>
<h2>Se faciliter la vie</h2>
<p><code>%edit</code> ouvre un editeur (par défault VI sous nunux, mais c&#8217;est <a href="http://sametmax.com/personnalisez-le-demarrage-dipython/">configurable</a>), et si vous sauvegardez, le contenu tapé est récupéré et exécuté par iPython. Génial pour les bouts de code trop relou à taper sur le prompt.</p>
<p><code>%gui qt|wx|gtk</code> lance l&#8217;intégration de la main loop d&#8217;un des toolkits graphiques afin pour de pouvoir faire mumuse avec des widgets sans bloquer votre shell.</p>
<p>Vous étiez vous demandé pourquoi le prompt iPython était plein de <code>In</code> et de <code>Out</code>, et pas de <code>>>></code> ? Parce que tout l&#8217;historique est numéroté, et accessible:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: In<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">39</span><span style="color: black;">&#93;</span>: u<span style="color: #483d8b;">'1 + 1'</span>
&nbsp;
In <span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">38</span><span style="color: black;">&#93;</span>
Out<span style="color: black;">&#91;</span><span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span>: <span style="color: #ff4500;">2</span></pre></td></tr></table></div>

<p>Mais vous pouvez aussi utiliser <code>%doctest_mode</code> qui donne à votre prompt un air de shell Python normal. L&#8217;avantage ? On peut copier le contenu d&#8217;un autre shell dedans (et donc d&#8217;une doctest) avec les chevrons !</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">In <span style="color: black;">&#91;</span><span style="color: #ff4500;">49</span><span style="color: black;">&#93;</span>: %doctest_mode
<span style="color: #008000;">Exception</span> reporting mode: Plain
Doctest mode <span style="color: #ff7700;font-weight:bold;">is</span>: ON
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> pom <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'pom'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'pom'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'pom'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'pom'</span><span style="color: black;">&#41;</span>:
...     ...     <span style="color: #ff7700;font-weight:bold;">print</span> pom
...     ... 
<span style="color: black;">pom</span>
pom
pom
pom</pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/quelques-bonnes-raisons-de-plus-dutiliser-ipython/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/277EB_mac-gyver.jpg" length="14600" type="image/jpg" />	</item>
		<item>
		<title>Personnalisez le démarrage d&#8217;iPython 8</title>
		<link>http://sametmax.com/personnalisez-le-demarrage-dipython/</link>
		<comments>http://sametmax.com/personnalisez-le-demarrage-dipython/#comments</comments>
		<pubDate>Sun, 16 Dec 2012 13:14:54 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[configuration]]></category>
		<category><![CDATA[ipython]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=3643</guid>
		<description><![CDATA[iPython, c'est bon. Et ça peut être encore meilleur.]]></description>
				<content:encoded><![CDATA[<p><a href="http://ipython.org/">iPython</a>, c&#8217;est bon. Et ça peut être encore meilleur.</p>
<p>Avant on ajoutait un peu de sel à notre super shell en éditant les fichiers <em>.ipython/ipythonrc</em> et <em>.ipython/ipy_user_conf.py</em>. Mais ça c&#8217;était avant.</p>
<p>Maintenant on fait :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666;">$ </span>ipython profile create</pre></td></tr></table></div>

<p>Ce qui va créer un fichier <code>~/.config/ipython/profile_default/ipython_config.py</code> (et <code>ipython_qtconsole_config.py</code> si vous avez installé la version qt).</p>
<p>Il ne vous reste plus qu&#8217;à éditer ce fichier pour personnaliser le démarrage de iPython.</p>
<h2>Executer du code au démarrage</h2>
<p>N&#8217;importe quelle ligne de code Python ou de commande magique (les trucs qui commencent pas &#8216;%&#8217; qui ne fonctionnent que dans iPython) !</p>
<p>Très utile pour les imports par exemple. Voici ce que je fais moi au démarrage :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">exec_lines</span> <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
<span style="color: #483d8b;">'%doctest_mode'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'import os, sys, re, json'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'from datetime import datetime, timedelta'</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'''
try:
    from path import path
except ImportError:
    pass
'''</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'''
try:
    import requests
except ImportError:
    pass
'''</span><span style="color: #66cc66;">,</span>
<span style="color: #483d8b;">'''
try:
    from batbelt.structs import *
    from batbelt.objects import attr
    from batbelt.strings import slugify, normalize, json_dumps, json_loads
except ImportError:
    pass
'''</span>
<span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>Du coup j&#8217;ai quasiment jamais besoin d&#8217;importer un truc, car ce que j&#8217;utilise le plus est déjà là. <code>%doctest_mode</code> me permet de coller des docstrings sans me fouler.</p>
<h2>Programmation graphique</h2>
<p>iPython possède une boucle principale. Les toolkits graphiques aussi. Si vous faites vos essais du code du second dans le premier, ça va bloquer. Heureusement on peut demander à iPython d&#8217;intégrer la main loop d&#8217;un des toolkits graphiques les plus célèbres en choisissant parmi : &#8216;qt&#8217;, &#8216;wx&#8217;, &#8216;gtk&#8217;, &#8216;glut&#8217;, &#8216;pyglet&#8217; et &#8216;osx&#8217; et en settant :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">gui</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'qt'</span></pre></td></tr></table></div>

<h2>Virer le header</h2>
<p>Quand on lance le shell, il vous raconte sa vie. Pour lui dire de fermer sa gueule :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">display_banner</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span></pre></td></tr></table></div>

<h2>Lancer un script complet</h2>
<p>Bon, ça c&#8217;est si vous avez de gros besoins&#8230;</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalIPythonApp</span>.<span style="color: black;">file_to_run</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'/path/to/script.py'</span></pre></td></tr></table></div>

<h2>Sauter la confirmation à la fermeture</h2>
<p>Oui, je suis sûr te vouloir te fermer connard ! Tu crois que j&#8217;ai appuyé sur Ctrl + d par erreur en éternuant ?</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">confirm_exit</span> <span style="color: #66cc66;">=</span> <span style="color: #008000;">False</span></pre></td></tr></table></div>

<h2>Choisir son éditeur externe</h2>
<p>Si vous tapez <code>%edit</code> dans iPython, il ouvre un éditeur. Vous tapez votre code, vous sauvegardez, vous fermez. Et iPython récupère le code et l&#8217;éxécute. Par défault il utilise VI. On peut faire mieux.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">c.<span style="color: black;">TerminalInteractiveShell</span>.<span style="color: black;">editor</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'/chemin/vers/sublime-text -w'</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/personnalisez-le-demarrage-dipython/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/12/6089448781_03743e140c_z.jpg" length="196127" type="image/jpg" />	</item>
		<item>
		<title> Le _ (underscore) dans le shell interactif Python 12</title>
		<link>http://sametmax.com/le-_-underscode-dans-le-shell-interactif-python/</link>
		<comments>http://sametmax.com/le-_-underscode-dans-le-shell-interactif-python/#comments</comments>
		<pubDate>Thu, 20 Sep 2012 19:51:30 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1186</guid>
		<description><![CDATA[C'est une fonctionnalité que peu de gens connaissent, pourtant très utile.]]></description>
				<content:encoded><![CDATA[<p>C&#8217;est une fonctionnalité que peu de gens connaissent, pourtant très utile.</p>
<p>Dans le shell Python, à chaque fois qu&#8217;on évalue une expression, le résultat affiché est référencé dans la variable <code>_</code>.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff4500;">1</span> + <span style="color: #ff4500;">1</span>
<span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> _
<span style="color: #ff4500;">2</span></pre></td></tr></table></div>

<p>On peut évidement la réutiliser comme n&#8217;importe quelle variable:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span>x * <span style="color: #ff4500;">2</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> _<span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>Pour éviter d&#8217;effacer la variable trop souvent, quand le résultat retourné est <code>None</code>, <code>_</code> ne change pas, donc il ne change pas quand on <code>print</code> :-)</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff4500;">1</span> <span style="color: #66cc66;">&gt;</span> <span style="color: #ff4500;">2</span> <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">None</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> _
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">'a'</span>
a
<span style="color: #66cc66;">&gt;&gt;&gt;</span> _
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>Ça ne marche que dans le shell, pas dans un script.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/le-_-underscode-dans-le-shell-interactif-python/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/09/mamie-fume.jpg" length="41440" type="image/jpg" />	</item>
		<item>
		<title>Etre prévenu quand une longue commande a fini son éxécution sous Ubuntu et Mac 7</title>
		<link>http://sametmax.com/etre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac/</link>
		<comments>http://sametmax.com/etre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac/#comments</comments>
		<pubDate>Mon, 18 Jun 2012 18:19:24 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Administration System]]></category>
		<category><![CDATA[alert]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=947</guid>
		<description><![CDATA[Quand on lance une commande qui tourne pendant un certain bout de temps (typiquement une migration ou un encodage en masse), on a pas envie d'avoir les yeux vissés sur le terminal pour savoir quand elle se termine.
]]></description>
				<content:encoded><![CDATA[<p>Quand on lance une commande qui tourne pendant un certain bout de temps (typiquement une migration ou un encodage en masse), on a pas envie d&#8217;avoir les yeux vissés sur le terminal pour savoir quand elle se termine.</p>
<h2>Alertes sous Ubuntu</h2>
<p>Entrez simplement:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">alert <span style="color: #ff0000;">&quot;Encore merci et bonne chance, nous sommes avec vous.&quot;</span></pre></td></tr></table></div>

<p>Ceci va faire apparaitre une notification avec le message passé en paramètre.</p>
<p>Pour avoir l&#8217;alerte lancée une fois une commande terminée, il suffit de la mettre just après, derrière un point virgule:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sleep</span> <span style="color: #000000;">5</span>; alert</pre></td></tr></table></div>

<p><em>Le message sera alors la commande précédente.</em></p>
<p>Pour ceux qui ne sont pas sous Ubuntu, on peut créer la commande manuellement (Ubuntu ne fait que mettre cette ligne par défaut dans le <em>.bashrc</em>):</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">alias</span> <span style="color: #007800;">alert</span>=<span style="color: #ff0000;">'notify-send --urgency=low -i &quot;$([ $? = 0 ] &amp;&amp; echo terminal || echo error)&quot; &quot;$(history|tail -n1|sed -e '</span><span style="color: #000000; font-weight: bold;">\'</span><span style="color: #ff0000;">'s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'</span><span style="color: #000000; font-weight: bold;">\'</span><span style="color: #ff0000;">')&quot;'</span></pre></td></tr></table></div>

<p>Il faut bien entendu s&#8217;assurer que la commande &#8220;notify-send&#8221; soit installée.</p>
<h2>Alertes sous Mac</h2>
<p>Mac vient avec un synthétiseur vocal qui peut être utilisé de manière similaire:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;">say <span style="color: #ff0000;">&quot;I just want to thank you both, we're all counting on you.&quot;</span></pre></td></tr></table></div>

<p>Le Mac va alors vous lire la phrase à haute, hum&#8230; voix. Il faut bien sûr s&#8217;assurer que l&#8217;on a le volume réglé en conséquence sinon l&#8217;alerte risque de ne pas se passer comme prévu :-)</p>
<p>Un bon truc donc pour foutre la honte à votre collègue de bureau, mettez le sond à fond et lancez juste avant la pause déjeûner dans un onglet discretos:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sleep</span> <span style="color: #000000;">5000</span>; say <span style="color: #ff0000;">&quot;Oh yeah bitch, just like that, just like that. Suck it ! Suck it hard. Oh Yeaaaaaaaaaaaaaa!&quot;</span></pre></td></tr></table></div>

<p>C&#8217;est particulièrement perturbant sur une voix de synthèse.</p>
<p>Cette commande fonctionne mieux avec des phrases en anglais.</p>
<p><strong>Attention</strong> cependant, ces deux astuces ne fonctionnent qu&#8217;en local, puisse qu&#8217;un ordinateur distant n&#8217;a pas accès au système de notification de votre desktop. Un défaut ennuyeux car on lance souvent des commandes longues via SSH.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/etre-prevenu-quand-une-longue-commande-a-fini-son-execution-sous-ubuntu-et-mac/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/06/navi.jpg" length="37975" type="image/jpg" />	</item>
	</channel>
</rss>
