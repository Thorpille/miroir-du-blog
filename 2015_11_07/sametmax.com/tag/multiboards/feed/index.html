<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; multiboards</title>
	<atom:link href="http://sametmax.com/tag/multiboards/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Multiboards Customizable &#8211; Le retour de la mort de la peur de mourir 18</title>
		<link>http://sametmax.com/multiboards-customizable-le-retour-de-la-mort-de-la-peur-de-mourir/</link>
		<comments>http://sametmax.com/multiboards-customizable-le-retour-de-la-mort-de-la-peur-de-mourir/#comments</comments>
		<pubDate>Tue, 18 Aug 2015 11:46:48 +0000</pubDate>
		<dc:creator><![CDATA[Max]]></dc:creator>
				<category><![CDATA[Gadgets]]></category>
		<category><![CDATA[Programmation]]></category>
		<category><![CDATA[Web]]></category>
		<category><![CDATA[custom]]></category>
		<category><![CDATA[multiboards]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16741</guid>
		<description><![CDATA[gna gna gna]]></description>
				<content:encoded><![CDATA[<p>Pour ceux qui ont suivi la lamentable mais néanmoins <a href="http://sametmax.com/multiboards-est-desormais-customisable/">poilante mise en prod de la nouvelle version buggée de MB </a> j&#8217;ai du reporter un rendez-vous avec mon escort pour réparer le bébé.</p>
<p>Normalement ça devrait marcher (ça valait pas un post mais c&#8217;est pour remplir un peu plus les BAL des abonnés&#8230;)</p>
<p>Rendez-vous <a href="http://www.multiboards.net/">ici</a> ou <a href="http://www.multiboards.net/">là</a> ou encore <a href="http://www.multiboards.net/">là</a> et donnez-moi vos impressions si comme moi vous n&#8217;avez pas d&#8217;ami et passez votre temps à la maison devant l&#8217;ordi au lieu de vous dorer la pilule entouré de femmes fontaines sur une île déserte.</p>
<p><a href="http://fluxrss.fr/">Une source de flux RSS pas mal ici.<br />
</a></p>
<p>PS: Normalement dans l&#8217;onglet en haut à droite il devrait y avoir la liste des boards populaires, on calcule ça en fonction du nombre de <a href="http://sametmax.com/utilisateurs-en-ligne-avec-le-sorted-set-de-redis/">visiteurs en ligne en temps réel</a>, Sam avait fait un article dessus.</p>
<p>Et une bonne fin qui pourrait faire brève de comptoir:<br />
&#8220;Tant que le board n&#8217;est pas populaire il reste anonyme&#8221; (et donc ne s&#8217;affiche pas dans l&#8217;onglet) ^^</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/multiboards-customizable-le-retour-de-la-mort-de-la-peur-de-mourir/feed/</wfw:commentRss>
		<slash:comments>18</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2015/08/48ecd4820947.jpg" length="23363" type="image/jpg" />	</item>
		<item>
		<title>cd multiboards; git checkout versionquimarche 6</title>
		<link>http://sametmax.com/cd-multiboards-git-checkout-versionquimarche/</link>
		<comments>http://sametmax.com/cd-multiboards-git-checkout-versionquimarche/#comments</comments>
		<pubDate>Tue, 28 Jul 2015 16:21:20 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[multiboards]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16706</guid>
		<description><![CDATA[Il y a des mises en prod heureuse. Et d'autres non.

Là c'est non.

Je rollback jusqu'à ce qu'on répare tout ça.]]></description>
				<content:encoded><![CDATA[<p>Il y a des mises en prod heureuses. Et d&#8217;autres non.</p>
<p>Là c&#8217;est non.</p>
<p>Je rollback jusqu&#8217;à ce qu&#8217;on répare tout ça.</p>
<p><span class='embed-youtube' style='text-align:center; display: block;'><iframe class='youtube-player' type='text/html' width='1170' height='689' src='http://www.youtube.com/embed/M1r4d2UWRPc?version=3&#038;rel=1&#038;fs=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' frameborder='0' allowfullscreen='true'></iframe></span></p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/cd-multiboards-git-checkout-versionquimarche/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2015/07/VCcArdF.jpg" length="12486" type="image/jpg" />	</item>
		<item>
		<title>Multiboards est désormais customisable 22</title>
		<link>http://sametmax.com/multiboards-est-desormais-customisable/</link>
		<comments>http://sametmax.com/multiboards-est-desormais-customisable/#comments</comments>
		<pubDate>Sun, 26 Jul 2015 19:23:54 +0000</pubDate>
		<dc:creator><![CDATA[Max]]></dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[multiboards]]></category>
		<category><![CDATA[rss]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16696</guid>
		<description><![CDATA[Multiboards est une simple page web qui affiche les flux rss de certains sites sélectionnés par nos soins. Après quelques années de service on s'est aperçu que pas mal de monde l'utilisait mais jusqu'à présent on ne pouvait pas sélectionner ses sources, c'est maintenant possible.]]></description>
				<content:encoded><![CDATA[<p>J&#8217;avais pensé à un titre du genre: &#8220;Vous aussi, créez votre propre <a href="http://multiboards.net/">Multiboards</a> et devenez riche&#8221; mais ça risquait de faire légèrement pompeux. On garde donc un titre simple.</p>
<p>Pour ceux qui ne connaissaient pas, Multiboards est une simple page web qui affiche les flux rss de certains sites sélectionnés par nos soins. Après quelques années de service on s&#8217;est aperçu que pas mal de monde l&#8217;utilisait, on a même eu des suggestions d&#8217;améliorations (merci Nain Genieu) et des demandes de libération du code source.<br />
Bon le code c&#8217;est pas pour tout de suite car il est super crade et que Sam acceptera jamais de laisser ça sans passer un bon coup de balais factoriseur XR-2200. Mais en attendant vous pouvez créer vos pages d&#8217;agrégation de flux persos et les partager avec le monde entier ou votre voisine de palier (celle qui a d&#8217;énormes nibards).</p>
<p>Pour créer son board on va sur <a href="http://multiboards.net/build">http://multiboards.net/build</a> et on ajoute ses flux RSS, on peut déplacer les flux dans la grille à sa convenance s&#8217;ils n&#8217;ont pas été rentrés dans le bon ordre. Lorsque l&#8217;on est satisfait avec sa page, on clique sur le bouton vert et on peut voir le mimi, le rara le miracle apparaître sous nos yeux ébahis !</p>
<p><img class="aligncenter size-full wp-image-16697" src="http://sametmax.com/wp-content/uploads/2015/07/mb_custo.jpg" alt="mb_custo" width="600" height="355" /></p>
<p>Pour le moment vu que ça a été fait à l&#8217;arrache dans les chiottes de l&#8217;aéroport de Manille y a pas bcp de fonctionnalités marrantes mais lorsque le code sera libéré on espère avoir de jolies contribs ^^.</p>
<p>Quelques idées pour le futur:</p>
<ul>
<li>Ajouter une alerte sur des mots-clef comme&#8230; &#8220;salope&#8221; (c&#8217;est important les mots-clef)</li>
<li>Lorsque une url a été lu l&#8217;indiquer sur la grille en lui attribuant une autre couleur</li>
<li>rajouter des radios ou des fonctionnalités au player</li>
<li>pouvoir customizer ses radios, les news de bas de page et pourquoi pas d&#8217;autres sources d&#8217;images à la place d&#8217;imgur</li>
<li>et plein d&#8217;autres choses qui ne devraient pas exister si nous étions dans un monde parfait.</li>
</ul>
<p>NB:<br />
Le player a été changé aussi, plus de flash et place au HTML5, un petit player maison hyper simple mais qui fait son job.</p>
<p>On attend vos retours, ça doit foisonner de bugs</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/multiboards-est-desormais-customisable/feed/</wfw:commentRss>
		<slash:comments>22</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2015/07/PC118016.jpg" length="136278" type="image/jpg" />	</item>
		<item>
		<title>Aux couleurs du site 11</title>
		<link>http://sametmax.com/aux-couleurs-du-site/</link>
		<comments>http://sametmax.com/aux-couleurs-du-site/#comments</comments>
		<pubDate>Wed, 22 Jul 2015 10:41:26 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[multiboards]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16645</guid>
		<description><![CDATA[On est en train de tweaker un peut <a href="http://multiboards.net/">multiboards.net</a> Max et moi, et il a voulu ajouter un feature rigolote : les flux sont affichés avec une palette de couleur proche de celle du site. ]]></description>
				<content:encoded><![CDATA[<p>On est en train de tweaker un peu <a href="http://multiboards.net/">multiboards.net</a> Max et moi, et il a voulu ajouter un feature rigolote : les flux sont affichés avec une palette de couleurs proche de celle du site.</p>
<p>Comme récupérer les couleurs d&#8217;un site est compliqué, on s&#8217;est rabattus sur les couleurs du favicon, qui en théorie doit résumer l&#8217;identité d&#8217;un site. Ce n&#8217;est pas parfait, mais c&#8217;est plus simple à implémenter.</p>
<p>Au début, on avait écrit une solution avec Pillow et numpy. Ça marchait très bien, mais des extensions compilées juste pour faire de la déco c&#8217;était un peu lourd, surtout si un jour on libère le code source (mais vu comme les sources sont dégueues et qu&#8217;on a pas de doc, pour le moment c&#8217;est pas gagné).</p>
<p>On a donc changé notre fusil d&#8217;épaule, et on a choisit une nouvelle technique : faire la moitié du taff côté client.</p>
<h2>Récupérer le favicon côté serveur</h2>
<p>On ne peut pas faire des requêtes cross domain en JS, donc on doit toujours récupérer l&#8217;image côté serveur. <code>get_favicon_url()</code> parse le site à coup de regex (c&#8217;est mal mais ça évite de rajouter BeautifulSoup en dépendance pour une balise) pour récupérer son URL sur la page donnée, ou à défaut, sur la page à la racine du site. On se donne plusieurs essais en cas d&#8217;erreurs de réseau :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">urllib</span>
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">urlparse</span> 
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> get_favicon_url<span style="color: black;">&#40;</span>url<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> try_home_page<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot; Try to find a favicon url on the given page &quot;&quot;&quot;</span>
&nbsp;
    parsed_url <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">urlparse</span>.<span style="color: #dc143c;">urlparse</span><span style="color: black;">&#40;</span>url<span style="color: black;">&#41;</span>
    url_root <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;%s://%s&quot;</span> % <span style="color: black;">&#40;</span>parsed_url.<span style="color: black;">scheme</span><span style="color: #66cc66;">,</span> parsed_url.<span style="color: black;">netloc</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #808080; font-style: italic;"># try to get it using a regex on the current URL</span>
        html <span style="color: #66cc66;">=</span> fetch_url<span style="color: black;">&#40;</span>url<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span>retry<span style="color: black;">&#41;</span>
        html <span style="color: #66cc66;">=</span> html.<span style="color: black;">decode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'ascii'</span><span style="color: #66cc66;">,</span> errors<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'ignore'</span><span style="color: black;">&#41;</span>
        pattern <span style="color: #66cc66;">=</span> r<span style="color: #483d8b;">&quot;&quot;&quot;
                               href=(?:&quot;|')<span style="color: #000099; font-weight: bold;">\s</span>*
                               (?P&lt;favicon&gt;[^<span style="color: #000099; font-weight: bold;">\s</span>'&quot;]*favicon.[a-zA-Z]{3,4})
                               <span style="color: #000099; font-weight: bold;">\s</span>*(?:&quot;|')
                          &quot;&quot;&quot;</span>
&nbsp;
        match <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">re</span>.<span style="color: black;">search</span><span style="color: black;">&#40;</span>pattern<span style="color: #66cc66;">,</span> html<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">re</span>.<span style="color: black;">U</span>|<span style="color: #dc143c;">re</span>.<span style="color: black;">VERBOSE</span><span style="color: black;">&#41;</span>
        favicon_url <span style="color: #66cc66;">=</span> match.<span style="color: black;">groups</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">IOError</span>:
        <span style="color: #808080; font-style: italic;"># this is a network error so eventually, let it crash</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #ff7700;font-weight:bold;">not</span> try_home_page:
            <span style="color: #ff7700;font-weight:bold;">raise</span>
        <span style="color: #808080; font-style: italic;"># try with the home page, maybe this one is accessible</span>
        favicon_url <span style="color: #66cc66;">=</span> get_favicon_url<span style="color: black;">&#40;</span>url_root<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span>retry<span style="color: #66cc66;">,</span>
                                                       try_home_page<span style="color: #66cc66;">=</span><span style="color: #008000;">False</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IndexError</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">AttributeError</span><span style="color: black;">&#41;</span>:
        <span style="color: #808080; font-style: italic;"># url is not on this page, try the home page</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> try_home_page:
            <span style="color: #ff7700;font-weight:bold;">return</span> get_favicon_url<span style="color: black;">&#40;</span>url_root<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span>retry<span style="color: #66cc66;">,</span> try_home_page<span style="color: #66cc66;">=</span><span style="color: #008000;">False</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># can't find the favicon url, default to standard url</span>
        favicon_url <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'/favicon.ico'</span>
&nbsp;
    <span style="color: #808080; font-style: italic;"># make sure to have the domain of the original website in the favicon url</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> url_root <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #ff7700;font-weight:bold;">in</span> favicon_url:
        favicon_url <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;%s/%s&quot;</span> % <span style="color: black;">&#40;</span>url_root<span style="color: #66cc66;">,</span> favicon_url.<span style="color: black;">lstrip</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> favicon_url
&nbsp;
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> fetch_favicon<span style="color: black;">&#40;</span>url<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot; Returns the bytes of the favicon of this site &quot;&quot;&quot;</span>
    favicon_url <span style="color: #66cc66;">=</span> get_favicon_url<span style="color: black;">&#40;</span>url<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span>retry<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> fetch_url<span style="color: black;">&#40;</span>favicon_url<span style="color: #66cc66;">,</span> retry<span style="color: #66cc66;">=</span>retry<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p><code>fetch_favicon()</code> télécharge l&#8217;image proprement dite et retourne les bits tels quels. Notez que tout ça est synchrone et bloquant, mais heureusement le traffic de multiboards est sans doute trop faible pour poser problème.</p>
<h2>Exposer le résultat au client</h2>
<p>Ensuite il faut faire le lien entre le client et le serveur. On fait donc un petit routing (c&#8217;est du bottle) qui va retourner tout ça en base64 afin qu&#8217;on puisse l&#8217;utiliser directement dans un objet <code>Image</code> JS :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">base64</span>
<span style="color: #ff7700;font-weight:bold;">from</span> bottle <span style="color: #ff7700;font-weight:bold;">import</span> post<span style="color: #66cc66;">,</span> HTTPError
&nbsp;
<span style="color: #66cc66;">@</span>post<span style="color: black;">&#40;</span><span style="color: #483d8b;">'/favicon'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">def</span> fetch_favicon_base64<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    <span style="color: #483d8b;">&quot;&quot;&quot; Return the favicon URL from a website &quot;&quot;&quot;</span>
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        url <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'url'</span><span style="color: black;">&#93;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">KeyError</span>:
        <span style="color: #ff7700;font-weight:bold;">raise</span> HTTPError<span style="color: black;">&#40;</span><span style="color: #ff4500;">400</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;You must pass a site URL&quot;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        <span style="color: #808080; font-style: italic;"># return favicon as base64 url to be easily included in</span>
        <span style="color: #808080; font-style: italic;"># a img tag</span>
        favicon <span style="color: #66cc66;">=</span> fetch_favicon<span style="color: black;">&#40;</span>url<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> b<span style="color: #483d8b;">'data:image/x-icon;base64,'</span> + <span style="color: #dc143c;">base64</span>.<span style="color: black;">b64encode</span><span style="color: black;">&#40;</span>favicon<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: black;">&#40;</span><span style="color: #008000;">IOError</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">raise</span> HTTPError<span style="color: black;">&#40;</span><span style="color: #ff4500;">400</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Unable to find any favicon URL&quot;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Récupérer la palette côté client</h2>
<p>Avec un peu d&#8217;AJAX sur notre vue, on récupère les bits de l&#8217;image, et on fout le tout dans un objet <code>Image</code> qu&#8217;on passe à la lib <a href="http://lokeshdhakar.com/projects/color-thief/">ColorThief</a>. Cette dernière nous renvoie un array avec la palette. On convertit tout ça en code hexadécimal, et on diminue la luminosité de certaines couleurs pour rendre le texte plus lisible.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="javascript" style="font-family:monospace;"> $.<span style="color: #660066;">post</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'/favicon'</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span>url<span style="color: #339933;">:</span> url<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">done</span><span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>data<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span>
&nbsp;
        <span style="color: #006600; font-style: italic;">// load an image with the base64 data of the favicon</span>
        <span style="color: #000066; font-weight: bold;">var</span> image <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">new</span> Image<span style="color: #339933;">;</span>
        image.<span style="color: #660066;">src</span> <span style="color: #339933;">=</span> data<span style="color: #339933;">;</span>
        image.<span style="color: #660066;">onload</span> <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
&nbsp;
            <span style="color: #006600; font-style: italic;">// ask ColorThief for the main favicon colors</span>
            <span style="color: #000066; font-weight: bold;">var</span> colorThief <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">new</span> ColorThief<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #000066; font-weight: bold;">var</span> bc <span style="color: #339933;">=</span> colorThief.<span style="color: #660066;">getPalette</span><span style="color: #009900;">&#40;</span>image<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
            <span style="color: #006600; font-style: italic;">// some tools to convert the RGB array into</span>
            <span style="color: #006600; font-style: italic;">// rgb hex string</span>
            <span style="color: #000066; font-weight: bold;">function</span> componentToHex<span style="color: #009900;">&#40;</span>c<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
                <span style="color: #000066; font-weight: bold;">var</span> hex <span style="color: #339933;">=</span> c.<span style="color: #660066;">toString</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
                <span style="color: #000066; font-weight: bold;">return</span> hex.<span style="color: #660066;">length</span> <span style="color: #339933;">==</span> <span style="color: #CC0000;">1</span> <span style="color: #339933;">?</span> <span style="color: #3366CC;">&quot;0&quot;</span> <span style="color: #339933;">+</span> hex <span style="color: #339933;">:</span> hex<span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
            <span style="color: #000066; font-weight: bold;">function</span> rgbToHex<span style="color: #009900;">&#40;</span>array<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
                <span style="color: #000066; font-weight: bold;">return</span> componentToHex<span style="color: #009900;">&#40;</span>array<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">0</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> componentToHex<span style="color: #009900;">&#40;</span>array<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> componentToHex<span style="color: #009900;">&#40;</span>array<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">2</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
            <span style="color: #006600; font-style: italic;">// make the color brigther</span>
            <span style="color: #000066; font-weight: bold;">function</span> increase_brightness<span style="color: #009900;">&#40;</span>hex<span style="color: #339933;">,</span> percent<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span>
&nbsp;
                <span style="color: #006600; font-style: italic;">// convert 3 char codes --&gt; 6, e.g. `E0F` --&gt; `EE00FF`</span>
                <span style="color: #000066; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span>hex.<span style="color: #660066;">length</span> <span style="color: #339933;">==</span> <span style="color: #CC0000;">3</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span>
                    hex <span style="color: #339933;">=</span> hex.<span style="color: #660066;">replace</span><span style="color: #009900;">&#40;</span><span style="color: #009966; font-style: italic;">/(.)/g</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'$1$1'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
                <span style="color: #009900;">&#125;</span>
&nbsp;
                <span style="color: #000066; font-weight: bold;">var</span> r <span style="color: #339933;">=</span> parseInt<span style="color: #009900;">&#40;</span>hex.<span style="color: #660066;">substr</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">0</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">2</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
                    g <span style="color: #339933;">=</span> parseInt<span style="color: #009900;">&#40;</span>hex.<span style="color: #660066;">substr</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">2</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">2</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span>
                    b <span style="color: #339933;">=</span> parseInt<span style="color: #009900;">&#40;</span>hex.<span style="color: #660066;">substr</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">4</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">2</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
                <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #3366CC;">''</span> <span style="color: #339933;">+</span>
                   <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">0</span><span style="color: #339933;">|</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">1</span><span style="color: #339933;">&lt;&lt;</span><span style="color: #CC0000;">8</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> r <span style="color: #339933;">+</span> <span style="color: #009900;">&#40;</span><span style="color: #CC0000;">256</span> <span style="color: #339933;">-</span> r<span style="color: #009900;">&#41;</span> <span style="color: #339933;">*</span> percent <span style="color: #339933;">/</span> <span style="color: #CC0000;">100</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">toString</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">substr</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span>
                   <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">0</span><span style="color: #339933;">|</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">1</span><span style="color: #339933;">&lt;&lt;</span><span style="color: #CC0000;">8</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> g <span style="color: #339933;">+</span> <span style="color: #009900;">&#40;</span><span style="color: #CC0000;">256</span> <span style="color: #339933;">-</span> g<span style="color: #009900;">&#41;</span> <span style="color: #339933;">*</span> percent <span style="color: #339933;">/</span> <span style="color: #CC0000;">100</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">toString</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">substr</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span>
                   <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">0</span><span style="color: #339933;">|</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">1</span><span style="color: #339933;">&lt;&lt;</span><span style="color: #CC0000;">8</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> b <span style="color: #339933;">+</span> <span style="color: #009900;">&#40;</span><span style="color: #CC0000;">256</span> <span style="color: #339933;">-</span> b<span style="color: #009900;">&#41;</span> <span style="color: #339933;">*</span> percent <span style="color: #339933;">/</span> <span style="color: #CC0000;">100</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">toString</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">16</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">substr</span><span style="color: #009900;">&#40;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
            <span style="color: #006600; font-style: italic;">/* Define board colors */</span>
            <span style="color: #000066; font-weight: bold;">var</span> header <span style="color: #339933;">=</span>  <span style="color: #3366CC;">'#'</span> <span style="color: #339933;">+</span> rgbToHex<span style="color: #009900;">&#40;</span>bc<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">0</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #000066; font-weight: bold;">var</span> odd <span style="color: #339933;">=</span> <span style="color: #3366CC;">'#'</span> <span style="color: #339933;">+</span> increase_brightness<span style="color: #009900;">&#40;</span>rgbToHex<span style="color: #009900;">&#40;</span>bc<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">90</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #000066; font-weight: bold;">var</span> even <span style="color: #339933;">=</span> <span style="color: #3366CC;">'#'</span> <span style="color: #339933;">+</span> increase_brightness<span style="color: #009900;">&#40;</span>rgbToHex<span style="color: #009900;">&#40;</span>bc<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">2</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #CC0000;">90</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr></table></div>

<p>Est-ce que la feature est utile ? Je ne sais pas, c&#8217;est un peu gadget, mais c&#8217;était marrant à faire, et c&#8217;est vrai qu&#8217;on identifie bien chaque site sur la page du coup. </p>
<p>L&#8217;idée ici est que le serveur et le client travaillent en équipe, et que grâce au navigateur on a une stack de traitement image/audio/video à portée de code. D&#8217;ailleurs on a viré le plugin flash des radios pour le remplacer par du chteumeuleu 5.</p>
<p>On peut imaginer la même chose avec tous les outils côtés en JS, ceci incluant les préprocesseurs et minifieurs JS ou CSS : pas besoin d&#8217;installer Node pour faire tourner tout ça, il suffit de déléguer le boulot à un tab du browser. Pour améliorer la stack, on pourrait par ailleurs utiliser du RPC avec WAMP et même prévenir le navigateur quand un fichier est prêt avec PUB/SUB afin qu&#8217;il le recharge. Vous avez vu comme j&#8217;arrive toujours à placer crossbar ?</p>
<p>J&#8217;ai un pote qui va venir dans quelques jours pour creuser cette idée qui permettrait d&#8217;avoir en pur Python une sorte de livereload sans extension, sans gros GUI, qui transpile tout et rafraichit tout avec un simple fichier de config. Peut être aurons nous le temps de faire un proto.</p>
<p>C&#8217;était l&#8217;inspiration du jour, passez une excellente canicule !</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/aux-couleurs-du-site/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2015/07/LPYCHKx.jpg" length="86941" type="image/jpg" />	</item>
		<item>
		<title>Multiboards a été migré 7</title>
		<link>http://sametmax.com/multiboards-a-ete-migre/</link>
		<comments>http://sametmax.com/multiboards-a-ete-migre/#comments</comments>
		<pubDate>Fri, 26 Sep 2014 07:30:14 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Philo et culture]]></category>
		<category><![CDATA[meta]]></category>
		<category><![CDATA[migration]]></category>
		<category><![CDATA[multiboards]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=12242</guid>
		<description><![CDATA[<a href="http://multiboards.net/">multiboards.net</a>, la page Web qu'on trempe dans son café, a été migrée.]]></description>
				<content:encoded><![CDATA[<p><a href="http://multiboards.net/">multiboards.net</a>, la page Web qu&#8217;on trempe dans son café, a été migrée. Comme il n&#8217;y a aucune donnée associée, ben, le truc n&#8217;a pas bougé, dont vous le retrouverez tel qu&#8217;avant.</p>
<p>Plusieurs personnes nous ont demandé le code source. La raison pour laquelle il n&#8217;est pas publié, c&#8217;est que c&#8217;est un amas de code vraiment peu ragoutant, et qu&#8217;il faudrait vraiment le nettoyer pour éviter que la honte ne s&#8217;abatte sur nous.</p>
<p>Max voudrait en faire un truc personnalisable, avec des widgets, et tout, à la netwibes mais en plus simple. Je pense que ça n&#8217;arrivera jamais :)</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/multiboards-a-ete-migre/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/09/tumblr_nbn02s0t2e1r539hzo1_500.jpg" length="44005" type="image/jpg" />	</item>
		<item>
		<title>Le meilleur de l&#8217;actu IT fr, le temps d&#8217;un café: le multiboards 25</title>
		<link>http://sametmax.com/le-meilleur-de-lactu-it-le-temps-dun-cafe-le-multiboards/</link>
		<comments>http://sametmax.com/le-meilleur-de-lactu-it-le-temps-dun-cafe-le-multiboards/#comments</comments>
		<pubDate>Tue, 14 Aug 2012 19:49:10 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Web]]></category>
		<category><![CDATA[bottle]]></category>
		<category><![CDATA[jquery]]></category>
		<category><![CDATA[multiboards]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=1697</guid>
		<description><![CDATA[Max vous disais qu'il avait concocté un exemple de ce qu'on peut faire rapidement avec cette lib...]]></description>
				<content:encoded><![CDATA[<p>Dans son tuto sur <a href="http://sametmax.com/creer-un-site-avec-bottle-en-5-minutes-parceque-7-cest-impossible-voyons/">bottle</a>, Max vous disait qu&#8217;il avait concocté un exemple de ce qu&#8217;on peut faire rapidement avec cette lib.</p>
<p>Ainsi est né <a href="http://multiboards.net/">multiboards.net</a>.</p>
<p>C&#8217;est très simple: il déteste les flux RSS, et veut juste rapidement avoir toutes les infos intéressantes sur l&#8217;actu informatique en buvant son kawa le matin, sans se fouler.</p>
<p>Le multiboards répond simplissimement à ce besoin en offrant sur une page qui s&#8217;auto refresh :</p>
<ul>
<li>les actus des meilleurs blogs (sélectionnés par le dictateur Max) IT;</li>
<li>les actus des meilleurs sites généralistes IT;</li>
<li>les offres d&#8217;emplois IT en France, principalement Python;</li>
<li>des actus plus générales de Google news;</li>
<li>tout ça enrobé de conneries pour le lulz venant de imgur, bashfr et vdm;</li>
<li>et une radio intégrée dans le menu en haut qui vous diffuse de la zik si vous êtes d&#8217;humeur à cliquer dessus.</li>
</ul>
<div id="attachment_1698" style="width: 472px" class="wp-caption aligncenter"><a href="http://sametmax.com/wp-content/uploads/2012/08/Multiboards-les-infos-fraîches-de-vos-sites-préférés-2012-08-14-15-54-00.png" class="grouped_elements" rel="tc-fancybox-group1697"><img class=" wp-image-1698  " title="Des articles, des news, de bêtises, en un coup d'oeil" src="http://sametmax.com/wp-content/uploads/2012/08/Multiboards-les-infos-fraîches-de-vos-sites-préférés-2012-08-14-15-54-00.png" alt="Capture d'écran du multiboards" width="462" height="241" /></a><p class="wp-caption-text">Des articles, des news, de bêtises, en un coup d&#39;oeil</p></div>
<p>C&#8217;est du bottle, donc du Python, et massivement du jQuery, avec un petit peut de Redis mais alors vraiment pour la couleur. Car en fait, quasiment tout se passe côté client et ne tape quasiment pas notre serveur. Très KISS.</p>
<p>Il n&#8217;y aura pas de version qu&#8217;on peut customiser par user, qui demande une registration ou quoique ce soit. Le multiboard, c&#8217;est ça, et juste ça.</p>
<p>Maintenant chers amis, il va falloir tous spammer de commentaires ce post pour motiver l&#8217;auteur afin qu&#8217;il mette le code source sous licence libre. Parceque c&#8217;est une feignasse, le Max, je vous le rappelle, et que ça voudrait dire qu&#8217;il devrait écrire une doc et nettoyer le <code>random.randint()</code> qu&#8217;il a mis pour le compteur de visiteurs.</p>
<p><strong>Ah oui, on a rajouté le lien dans le menu.</strong></p>
<p>&nbsp;</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/le-meilleur-de-lactu-it-le-temps-dun-cafe-le-multiboards/feed/</wfw:commentRss>
		<slash:comments>25</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/08/coffee2.png" length="85865" type="image/jpg" />	</item>
	</channel>
</rss>
