<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; splat</title>
	<atom:link href="http://sametmax.com/tag/splat/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Enrichissement du tuto sur l’opérateur splat 8</title>
		<link>http://sametmax.com/enrichissement-du-tuto-sur-loperateur-splat/</link>
		<comments>http://sametmax.com/enrichissement-du-tuto-sur-loperateur-splat/#comments</comments>
		<pubDate>Tue, 01 Sep 2015 14:13:37 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[splat]]></category>
		<category><![CDATA[unpacking]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=16864</guid>
		<description><![CDATA[Si vous ne l'avez pas lu, sautez dessus, il est formidable !]]></description>
				<content:encoded><![CDATA[<p>Ça, c’est un <a href="http://sametmax.com/operateur-splat-ou-etoile-en-python/">super tuto</a> que vous ne trouverez pas ailleurs. Et maintenant il est encore plus super, car je lui ai ajouté l’unpacking étendu de Python 3, et l’unpacking généralisé de Python 3.5. Et en prime les modifications cosmétiques et pratiques habituelles.</p>
<p>Si vous ne l&#8217;avez pas lu, sautez dessus, il est formidable !</p>
<p>En parlant de sauter, ne sautons pas un repas :</p>
<p><iframe src="http://flashservice.xvideos.com/embedframe/654951" frameborder=0 width=510 height=400 scrolling=no></iframe></p>
<p>Et oui ! Le foot fetish est une niche très porteuse.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/enrichissement-du-tuto-sur-loperateur-splat/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2015/09/yp6vkSa.gif" length="508620" type="image/jpg" />	</item>
		<item>
		<title>Qu&#8217;est-ce que l&#8217;unpacking en Python et à quoi ça sert ? 9</title>
		<link>http://sametmax.com/quest-ce-que-lunpacking-en-python-et-a-quoi-ca-sert/</link>
		<comments>http://sametmax.com/quest-ce-que-lunpacking-en-python-et-a-quoi-ca-sert/#comments</comments>
		<pubDate>Fri, 26 Dec 2014 09:03:15 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[iterable]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[splat]]></category>
		<category><![CDATA[unpacking]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=13019</guid>
		<description><![CDATA[Ce terme apparaît dans de nombreux articles du blog, et je prends parfois le temps de l'expliquer superficiellement. Évidement, à de nombreux moments j'ai fais des tutos en ayant la connaissance de l'unpacking comme prérequis, et rien vers quoi faire un lien. Corrigeons ça, en attendant que je traduise les slides sur WAMP.]]></description>
				<content:encoded><![CDATA[<p>Ce terme apparaît dans de nombreux articles du blog, et je prends parfois le temps de l&#8217;expliquer superficiellement. Évidemment, à de nombreux moments j&#8217;ai fait des tutos en ayant la connaissance de l&#8217;unpacking comme prérequis, et rien vers quoi faire un lien. Corrigeons ça, en attendant que je traduise les slides sur WAMP.</p>
<h2>Le principe de base</h2>
<p>Normalement, si vous voulez mettre le contenu d&#8217;un tuple dans des variables, vous devez procéder ainsi :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> ducks <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'riri'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'fifi'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'loulou'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> duck1 <span style="color: #66cc66;">=</span> ducks<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> duck2 <span style="color: #66cc66;">=</span> ducks<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> duck3 <span style="color: #66cc66;">=</span> ducks<span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>duck1<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'riri'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>duck2<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'fifi'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>duck3<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'loulou'</span></pre></td></tr></table></div>

<p>L’unpacking, qu&#8217;on pourrait traduire par le terme fort moche de &#8220;déballage&#8221;, dans le sens &#8220;ouvrir un colis&#8221;, permet de faire la même chose, bien plus facilement :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> duck1<span style="color: #66cc66;">,</span> duck2<span style="color: #66cc66;">,</span> duck3 <span style="color: #66cc66;">=</span>  ducks
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>duck1<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'riri'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>duck2<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'fifi'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>duck3<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'loulou'</span></pre></td></tr></table></div>

<p>Il n&#8217;y a rien à faire, c&#8217;est automatique. La seule condition est que le nombre de variables à gauche du signe égal soit le même que le nombre d&#8217;éléments dans la collection de droite.</p>
<p>D&#8217;ailleurs, ça marche même avec un seul élément :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> ducks <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'riri'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> duck1<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">=</span> ducks <span style="color: #808080; font-style: italic;"># notez la virgule</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> duck1
<span style="color: #483d8b;">'riri'</span></pre></td></tr></table></div>

<p>Et ça marche avec n&#8217;importe quel <a href="http://sametmax.com/les-trucmuchables-en-python/">itérable</a>, pas uniquement les tuples. Avec une liste, une string, un générateur&#8230;</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: #66cc66;">,</span> d <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> c
<span style="color: #ff4500;">3</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> b <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;12&quot;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: #483d8b;">'2'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> yolo<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">yield</span> <span style="color: #483d8b;">&quot;leroy&quot;</span>
    <span style="color: #ff7700;font-weight:bold;">yield</span> <span style="color: #483d8b;">&quot;jenkins&quot;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> nom<span style="color: #66cc66;">,</span> prenom <span style="color: #66cc66;">=</span> yolo<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> nom
<span style="color: #483d8b;">'leroy'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> prenom
<span style="color: #483d8b;">'jenkins'</span></pre></td></tr></table></div>

<p>Ça marche bien entendu avec un dico ou un set, mais comme ils ne sont pas ordonnés, c&#8217;est pas très utile.</p>
<h2>Astuces autour de l&#8217;unpacking</h2>
<p>On peut utiliser l&#8217;unpacking dans des endroits inattendus. Par exemple, pour échanger la valeur de deux variables :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> a <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> b <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span>b<span style="color: #66cc66;">,</span> a<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> b <span style="color: #66cc66;">=</span> b<span style="color: #66cc66;">,</span> a <span style="color: #808080; font-style: italic;"># les parenthèses sont facultatives dans les tuples</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: #ff4500;">2</span></pre></td></tr></table></div>

<p>Puisqu&#8217;on est dans les tuples sans parenthèses, on peut retourner un tuple et donner l&#8217;illusion de retourner plusieurs variables :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> duckmebaby<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #483d8b;">&quot;rifi&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'filou'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'louri'</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> et<span style="color: #66cc66;">,</span> hop<span style="color: #66cc66;">,</span> la <span style="color: #66cc66;">=</span> duckmebaby<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> et
<span style="color: #483d8b;">'rifi'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> hop
<span style="color: #483d8b;">'filou'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> la
<span style="color: #483d8b;">'louri'</span></pre></td></tr></table></div>

<p>Allons plus loin.</p>
<p>On peut utiliser l&#8217;unpacking à l&#8217;intérieur d&#8217;une boucle <code>for</code>. Souvenez vous que les itérables peuvent contenir d&#8217;autres itérables. Par exemple, j&#8217;ai une liste qui contient 3 tuples, chaque tuple contient deux éléments :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> scores <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Monique'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'3'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'David'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'Dick'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> score <span style="color: #ff7700;font-weight:bold;">in</span> scores:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>score<span style="color: black;">&#41;</span>
...
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'Monique'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'3'</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'David'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'Dick'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Si je veux afficher le nom et le score l&#8217;un en dessous de l&#8217;autre :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> nom_et_score <span style="color: #ff7700;font-weight:bold;">in</span> scores:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>nom_et_score<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>nom_et_score<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
...
<span style="color: black;">Monique</span>
<span style="color: #ff4500;">3</span>
David
<span style="color: #ff4500;">10</span>
Dick
<span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<p>Je peux appliquer l&#8217;unpacking dans la boucle pour rendre cette opération plus élégante :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> nom<span style="color: #66cc66;">,</span> score <span style="color: #ff7700;font-weight:bold;">in</span> scores:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>nom<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>score<span style="color: black;">&#41;</span>
...
<span style="color: black;">Monique</span>
<span style="color: #ff4500;">3</span>
David
<span style="color: #ff4500;">10</span>
Dick
<span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<p>Cela marche avec des itérables plus gros, bien entendu. C&#8217;est aussi particulièrement utile avec des dictionnaires car on peut les transformer en itérable de tuples :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> scores <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'Monique'</span>: <span style="color: #483d8b;">'3'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'David'</span>: <span style="color: #ff4500;">10</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'Dick'</span>: <span style="color: #ff4500;">1</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> scores<span style="color: black;">&#91;</span><span style="color: #483d8b;">'Monique'</span><span style="color: black;">&#93;</span>
<span style="color: #483d8b;">'3'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> scores.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># transformation !</span>
dict_items<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'Monique'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'3'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'David'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'Dick'</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> nom<span style="color: #66cc66;">,</span> score <span style="color: #ff7700;font-weight:bold;">in</span> scores.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>nom<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>score<span style="color: black;">&#41;</span>
...
<span style="color: black;">Monique</span>
<span style="color: #ff4500;">3</span>
David
<span style="color: #ff4500;">10</span>
Dick
<span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<p>Tout aussi utile, mais plus compliqué, est l&#8217;usage de l&#8217;unpacking dans l&#8217;appel de fonction. Pour cela, on utilise <a href="http://sametmax.com/operateur-splat-ou-etoile-en-python/">l&#8217;opérateur splat</a>, l&#8217;étoile en Python.</p>
<p>Soit une fonction qui additionne des nombres :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> add<span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">return</span> a + b + c
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> add<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">6</span></pre></td></tr></table></div>

<p>Oui, imaginons que je suis complètement débile, et que j&#8217;ai cette fonction pérave dans mon code. Vous noterez dans les articles que je l&#8217;utilise souvent sur le blog. C&#8217;est la fonction fourre tout pour expliquer un truc quand j&#8217;ai pas d&#8217;idée.</p>
<p>Maintenant, imaginez que je veuille additionner des canards. Si, ça marche en Python :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #483d8b;">'riri'</span> + <span style="color: #483d8b;">'fifi'</span> + <span style="color: #483d8b;">'loulou'</span> <span style="color: #808080; font-style: italic;"># what the duck ?</span>
<span style="color: #483d8b;">'rirififiloulou'</span></pre></td></tr></table></div>

<p>Maintenant je me refais mon tuples de canards :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #808080; font-style: italic;"># nous entrerons dans la bande à picsou, youhou</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> duckyou <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'riri'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'fifi'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'loulou'</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Si je veux utiliser ma fonction pourrie pour mon use case stupide, je ferai ceci :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> add<span style="color: black;">&#40;</span>duckyou<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span> duckyou<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span> duckyou<span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'rirififiloulou'</span></pre></td></tr></table></div>

<p>Voilà une perte de productivité intolérable, c&#8217;est pas comme ça qu&#8217;on va faire fructifier son sou fétiche.</p>
<p>On peut forcer l&#8217;unpacking avec l&#8217;étoile :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> add<span style="color: black;">&#40;</span>*duckyou<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'rirififiloulou'</span></pre></td></tr></table></div>

<p>Si on oublie l&#8217;étoile, le premier paramètre reçoit tout le tuple, et les autres paramètres rien :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> add<span style="color: black;">&#40;</span>duckyou<span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> 
    add<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: add<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> missing <span style="color: #ff4500;">2</span> required positional arguments: <span style="color: #483d8b;">'b'</span> <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #483d8b;">'c'</span></pre></td></tr></table></div>

<p>Les fonctions ont même le droit à un bonus car on peut unpacker des dictionnaires en utilisant la <strong>double</strong> étoile. Ca ne marche qu&#8217;avec les fonctions, et ça va déballer le dico pour que chaque paire clé/valeur soit passée comme nom et valeur de l&#8217;argument :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> pas_add<span style="color: black;">&#40;</span>arg1<span style="color: #66cc66;">,</span> arg2<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>arg1<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>arg2<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> pas_add<span style="color: black;">&#40;</span>arg1<span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;Je suis la valeur 1&quot;</span><span style="color: #66cc66;">,</span> arg2<span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;Je m'en branle de qui tu es&quot;</span><span style="color: black;">&#41;</span>
Je suis la valeur <span style="color: #ff4500;">1</span>
Je m<span style="color: #483d8b;">'en branle de qui tu es
&gt;&gt;&gt; dicocorico = {'</span>arg1<span style="color: #483d8b;">': '</span>cotcot<span style="color: #483d8b;">', '</span>arg2<span style="color: #483d8b;">': '</span>ouai je pête un cable<span style="color: #66cc66;">,</span> l\<span style="color: #483d8b;">'avion me soule'</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> pas_add<span style="color: black;">&#40;</span>**dicocorico<span style="color: black;">&#41;</span>
cotcot
ouai je pête un cable<span style="color: #66cc66;">,</span> l<span style="color: #483d8b;">'avion me soule</span></pre></td></tr></table></div>

<p>Quand on unpacke des paramètres, il faut s&#8217;assurer que le nombre d&#8217;arguments passé n&#8217;est pas supérieur à ceux existant, sinon ça plante :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> dicocorico <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'arg1'</span>: <span style="color: #483d8b;">'cocot'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'arg2'</span>: <span style="color: #483d8b;">'ouai je pête un cable, l<span style="color: #000099; font-weight: bold;">\'</span>avion me soule'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'dang'</span>: <span style="color: #483d8b;">'je suis en trop et ça fait chier tout le monde'</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> pas_add<span style="color: black;">&#40;</span>**dicocorico<span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> 
    pas_add<span style="color: black;">&#40;</span>**dicocorico<span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: pas_add<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> got an unexpected <span style="color: #dc143c;">keyword</span> argument <span style="color: #483d8b;">'dang'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> stuplet <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> pas_add<span style="color: black;">&#40;</span>*stuplet<span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> 
    pas_add<span style="color: black;">&#40;</span>*stuplet<span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: pas_add<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> takes <span style="color: #ff4500;">2</span> positional arguments but <span style="color: #ff4500;">3</span> were given</pre></td></tr></table></div>

<p>Par contre, rien ne vous empêche de fournir moins d&#8217;arguments et de remplir les autres à la main :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> encore_add<span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: #66cc66;">,</span> d<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">return</span> a + b + <span style="color: #ff4500;">0</span> + c + d <span style="color: #808080; font-style: italic;"># je feinte</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> encore_add<span style="color: black;">&#40;</span><span style="color: #ff4500;">10</span><span style="color: #66cc66;">,</span> *stuplet<span style="color: black;">&#41;</span>
<span style="color: #ff4500;">16</span></pre></td></tr></table></div>

<p>Et on peut bien entendu faire le mega mix. Par exemple, prenons la fonction <code>print</code>, dont la signature accepte une infinité d&#8217;arguments positionnels et quelques arguments nommés :</p>
<p><code>print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)</code></p>
<p>Aller, on va lui unpacker sa mère :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> ducks <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #483d8b;">'riri'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'fifi'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'loulou'</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># is this duck typing ?</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> keywords <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'sep'</span>: <span style="color: #483d8b;">' / '</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;end&quot;</span>: <span style="color: #483d8b;">&quot; : vous êtes du coin ? <span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'picsou'</span><span style="color: #66cc66;">,</span> *ducks<span style="color: #66cc66;">,</span> **keywords<span style="color: black;">&#41;</span>
picsou / riri / fifi / loulou : vous êtes du coin ?</pre></td></tr></table></div>

<p>Ça c&#8217;est fait.</p>
<h2>Python 3, c&#8217;est du chocolat</h2>
<p>En Python 3, l&#8217;unpacking a été amélioré, et on peut maintenant faire de l&#8217;unpacking partiel :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #808080; font-style: italic;"># exemple 100% repompé d'un autre article du blog. Duck it.</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: #008000;">list</span><span style="color: black;">&#40;</span><span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> l
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> *b <span style="color: #66cc66;">=</span> l
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> *b<span style="color: #66cc66;">,</span> c <span style="color: #66cc66;">=</span> l
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> c
<span style="color: #ff4500;">4</span></pre></td></tr></table></div>

<p>Ce qui peut être très pratique sur les longs itérables. Comment obtenir la dernière ligne d&#8217;un fichier ?</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> *contenu<span style="color: #66cc66;">,</span> dernire_ligne <span style="color: #66cc66;">=</span> <span style="color: #008000;">open</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'/etc/fstab'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> dernire_ligne
<span style="color: #483d8b;">'UUID=0e8c3132-8fa2-46d5-a541-2890db9b371f none            swap    sw              0       0<span style="color: #000099; font-weight: bold;">\n</span>'</span></pre></td></tr></table></div>

<p>Ou alors, dans une boucle :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> initiale<span style="color: #66cc66;">,</span> *reste <span style="color: #ff7700;font-weight:bold;">in</span> ducks:
    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>initiale<span style="color: black;">&#41;</span>
...
<span style="color: black;">r</span>
f
l</pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/quest-ce-que-lunpacking-en-python-et-a-quoi-ca-sert/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/12/BKqSshR.jpg" length="87017" type="image/jpg" />	</item>
		<item>
		<title>Changement dans l&#8217;unpacking des iterables en Python 3 6</title>
		<link>http://sametmax.com/changement-dans-lunpacking-des-iterables-en-python-3/</link>
		<comments>http://sametmax.com/changement-dans-lunpacking-des-iterables-en-python-3/#comments</comments>
		<pubDate>Fri, 20 Dec 2013 07:49:59 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[python 3]]></category>
		<category><![CDATA[splat]]></category>
		<category><![CDATA[unpacking]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=7656</guid>
		<description><![CDATA[Ahhh, l'unpacking... On croit qu'on a complètement <a href="http://sametmax.com/tag/unpacking/">fait le tour</a> de cette fonctionalité merveilleuse, et PAF, on découvre encore autre chose.

Par exemple, la syntaxe a été améliorée avec Python 3, et accepte maintenant un <a href="http://www.python.org/dev/peps/pep-3132/">unpacking partiel</a> !]]></description>
				<content:encoded><![CDATA[<p>Ahhh, l&#8217;unpacking&#8230; On croit qu&#8217;on a complètement <a href="http://sametmax.com/tag/unpacking/">fait le tour</a> de cette fonctionalité merveilleuse, et PAF, on découvre encore autre chose.</p>
<p>Par exemple, la syntaxe a été améliorée avec Python 3, et accepte maintenant un <a href="http://www.python.org/dev/peps/pep-3132/">unpacking partiel</a> !</p>
<p>Ca se fait en l&#8217;utilisant l&#8217;opérateur splat, c&#8217;est à dire l&#8217;étoile :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: #008000;">list</span><span style="color: black;">&#40;</span><span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> l
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> *b <span style="color: #66cc66;">=</span> l
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a<span style="color: #66cc66;">,</span> *b<span style="color: #66cc66;">,</span> c <span style="color: #66cc66;">=</span> l
<span style="color: #66cc66;">&gt;&gt;&gt;</span> a
<span style="color: #ff4500;">0</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> b
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> c
<span style="color: #ff4500;">4</span></pre></td></tr></table></div>

<p>Ca marche bien entendu également dans les boucles <code>for</code>.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/changement-dans-lunpacking-des-iterables-en-python-3/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/12/lHLWwNE.jpg" length="119468" type="image/jpg" />	</item>
		<item>
		<title>Pourquoi il faut éviter import * en Python 11</title>
		<link>http://sametmax.com/pourquoi-il-faut-eviter-import-en-python/</link>
		<comments>http://sametmax.com/pourquoi-il-faut-eviter-import-en-python/#comments</comments>
		<pubDate>Mon, 25 Nov 2013 07:00:41 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[import]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[splat]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=8082</guid>
		<description><![CDATA[Vous l'avez sans doute lu 100 fois, mais savez-vous pourquoi ?]]></description>
				<content:encoded><![CDATA[<p>Ne pas utiliser l&#8217;<a href="http://sametmax.com/operateur-splat-ou-etoile-en-python/">opérateur splat</a> dans un import, vous l&#8217;avez sans doute lu 100 fois, mais savez-vous pourquoi ?</p>
<p>Regardez la fonction <code>open</code> :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">help</span><span style="color: black;">&#40;</span><span style="color: #008000;">open</span><span style="color: black;">&#41;</span>
    <span style="color: #008000;">open</span><span style="color: black;">&#40;</span>name<span style="color: black;">&#91;</span><span style="color: #66cc66;">,</span> mode<span style="color: black;">&#91;</span><span style="color: #66cc66;">,</span> buffering<span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> -<span style="color: #66cc66;">&gt;</span> <span style="color: #008000;">file</span> <span style="color: #008000;">object</span>
&nbsp;
    Open a <span style="color: #008000;">file</span> using the <span style="color: #008000;">file</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #008000;">type</span><span style="color: #66cc66;">,</span> returns a <span style="color: #008000;">file</span> <span style="color: #008000;">object</span>.  <span style="color: black;">This</span> <span style="color: #ff7700;font-weight:bold;">is</span> the
    preferred way to <span style="color: #008000;">open</span> a <span style="color: #008000;">file</span>.  <span style="color: black;">See</span> <span style="color: #008000;">file</span>.__doc__ <span style="color: #ff7700;font-weight:bold;">for</span> further information.
<span style="color: black;">&#40;</span>END<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Maintenant, si j&#8217;importe le module <code>os</code>, ça ne change rien :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">os</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">help</span><span style="color: black;">&#40;</span><span style="color: #008000;">open</span><span style="color: black;">&#41;</span>
    <span style="color: #008000;">open</span><span style="color: black;">&#40;</span>name<span style="color: black;">&#91;</span><span style="color: #66cc66;">,</span> mode<span style="color: black;">&#91;</span><span style="color: #66cc66;">,</span> buffering<span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> -<span style="color: #66cc66;">&gt;</span> <span style="color: #008000;">file</span> <span style="color: #008000;">object</span>
&nbsp;
    Open a <span style="color: #008000;">file</span> using the <span style="color: #008000;">file</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #008000;">type</span><span style="color: #66cc66;">,</span> returns a <span style="color: #008000;">file</span> <span style="color: #008000;">object</span>.  <span style="color: black;">This</span> <span style="color: #ff7700;font-weight:bold;">is</span> the
    preferred way to <span style="color: #008000;">open</span> a <span style="color: #008000;">file</span>.  <span style="color: black;">See</span> <span style="color: #008000;">file</span>.__doc__ <span style="color: #ff7700;font-weight:bold;">for</span> further information.
<span style="color: black;">&#40;</span>END<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Si par contre j&#8217;importe tout le contenu du module <code>os</code>, sans namespace :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">os</span> <span style="color: #ff7700;font-weight:bold;">import</span> *
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">help</span><span style="color: black;">&#40;</span><span style="color: #008000;">open</span><span style="color: black;">&#41;</span>
    <span style="color: #008000;">open</span><span style="color: black;">&#40;</span>filename<span style="color: #66cc66;">,</span> flag <span style="color: black;">&#91;</span><span style="color: #66cc66;">,</span> mode<span style="color: #66cc66;">=</span><span style="color: #ff4500;">0777</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> -<span style="color: #66cc66;">&gt;</span> fd
&nbsp;
    Open a <span style="color: #008000;">file</span> <span style="color: black;">&#40;</span><span style="color: #ff7700;font-weight:bold;">for</span> low level IO<span style="color: black;">&#41;</span>.
<span style="color: black;">&#40;</span>END<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>La différence ?</p>
<p>Dans le premier cas, on a la fonction <code>open()</code> built-in de Python. Dans le second cas, la fonction <code>os.open()</code> a été importée et a remplacé la fonction <code>open()</code>.</p>
<p>Ici le bug sera très difficile à trouver, car les deux fonctions ont presque la même signature :</p>
<p><code>open(name[, mode[, buffering]]) -> file object</code></p>
<p>VS </p>
<p><code>open(filename, flag [, mode=0777]) -> fd</code></p>
<p>Et en plus un usage très similaire.</p>
<p>Bottom line, <code>import *</code>, c&#8217;est pour les sessions shell. Dans vos fichiers de code, ne l&#8217;utilisez pas, vous ne savez pas ce que vous importez.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/pourquoi-il-faut-eviter-import-en-python/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2013/11/pyclusion.jpg" length="72541" type="image/jpg" />	</item>
		<item>
		<title>L&#8217;opérateur splat (l&#8217;étoile: *) en Python 32</title>
		<link>http://sametmax.com/operateur-splat-ou-etoile-en-python/</link>
		<comments>http://sametmax.com/operateur-splat-ou-etoile-en-python/#comments</comments>
		<pubDate>Fri, 01 Jun 2012 18:34:59 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[etoile]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[splat]]></category>
		<category><![CDATA[unpacking]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=173</guid>
		<description><![CDATA[L'utilisation du signe étoile (<code>*</code>, dit opérateur "splat") en Python est très simple, mais certains cas sont peu intuitifs. Les nouveaux venus ont souvent besoin d'un peu plus d'explications que ce que donne la doc. Les utilisateurs d'autres langages sont généralement déroutés car ils sont habitués certaines fonctionnalités qu'on ne retrouvent pas en Python. ]]></description>
				<content:encoded><![CDATA[<aside style="text-align:center; font-size:60%"><em>Cet article a été mis à jour et contient maintenant du code Python en version 3</em></aside>
<p>L’utilisation du signe étoile (<code>*</code>, dit opérateur « splat ») en Python est très simple, mais certains cas sont peu intuitifs. Les nouveaux venus ont souvent besoin d’un peu plus d’explications que ce que donne la doc. Les utilisateurs d’autres langages sont généralement déroutés, car ils sont habitués à certaines fonctionnalités qu’on ne retrouve pas en Python.</p>
<h2>Ce que <code>*</code> ne permet pas de faire</h2>
<p>Il n’y a pas de pointeur en Python, et les passages par référence sont automatiques. Du coup&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">mon_objet <span style="color: #66cc66;">=</span> MaClasse<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
mon_pointeur <span style="color: #66cc66;">=</span> *mon_objet
ma_valeur <span style="color: #66cc66;">=</span> **mon_pointeur</pre></td></tr></table></div>

<p>N’existe pas en Python. On ne peut pas récupérer un pointeur. On ne peut pas choisir si l’on passe une variable par valeur ou par référence. Tout est automatique et transparent.</p>
<h2>Les usages basiques de <code>*</code></h2>
<p>La multiplication et la puissance fonctionnent comme on l’attend&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span>*<span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># multiplier 2 par 3</span>
<span style="color: #ff4500;">6</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span>**<span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># élever 2 à la puissance 3</span>
<span style="color: #ff4500;">8</span></pre></td></tr></table></div>

<p>Mais déjà, Python se démarque du lot, car l’opérateur <code>*</code> est surchargé par défaut, et peut s’appliquer aux chaines de caractères et aux listes. Pour les chaines, c’est simple&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;a&quot;</span> * <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># on peut multiplier une chaîne par un nombre, et cela donne une chaîne</span>
aaa
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;a&quot;</span> ** <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># ça ne marche pas avec les puissances</span>
<span style="color: #008000;">TypeError</span>: unsupported operand <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>s<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> ** <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">pow</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>: <span style="color: #483d8b;">'str'</span> <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #483d8b;">'int'</span></pre></td></tr></table></div>

<p>Pour les listes, c’est plus subtil. Une liste de nombres se multiplie sans y penser&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>l * <span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
 <span style="color: #808080; font-style: italic;"># on peut multiplier une liste par un nombre, cela donne une liste</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>l ** <span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
 <span style="color: #808080; font-style: italic;"># ça ne marche pas avec les puissances</span>
<span style="color: #008000;">TypeError</span>: unsupported operand <span style="color: #008000;">type</span><span style="color: black;">&#40;</span>s<span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> ** <span style="color: #ff7700;font-weight:bold;">or</span> <span style="color: #008000;">pow</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>: <span style="color: #483d8b;">'list'</span> <span style="color: #ff7700;font-weight:bold;">and</span> <span style="color: #483d8b;">'int'</span></pre></td></tr></table></div>

<p>En revanche, <strong>multiplier une liste d’objets modifiables ne fait que répéter la référence vers cet objet</strong>&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#93;</span>
 <span style="color: #808080; font-style: italic;"># on fait une liste contenant un dictionnaire</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> dicos <span style="color: #66cc66;">=</span> l * <span style="color: #ff4500;">3</span>
 <span style="color: #808080; font-style: italic;"># on peut multiplier une liste par un nombre, cela donne une liste</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>dicos<span style="color: black;">&#41;</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p>On a l’impression que le comportement est le même que précédemment, en fait pas du tout. Ici <strong>on a pas une liste de 3 dictionnaires, mais une liste de 3 références vers le même dictionnaire</strong>. Si on modifie le premier élément de la liste, la modification se voit partout&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> d <span style="color: #66cc66;">=</span> dicos<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># on récupère ce qu'on croit être le premier dictionnaire</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d<span style="color: black;">&#91;</span><span style="color: #483d8b;">&quot;Nouvelle cle&quot;</span><span style="color: black;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;Nouvelle valeur&quot;</span> <span style="color: #808080; font-style: italic;"># on le modifie</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>dicos<span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># afficher la liste montre que les 3 dictionnaires sont en fait un seul et même objet</span>
<span style="color: black;">&#91;</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">'Nouvelle cle'</span>: <span style="color: #483d8b;">'Nouvelle valeur'</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span>
 <span style="color: black;">&#123;</span><span style="color: #483d8b;">'Nouvelle cle'</span>: <span style="color: #483d8b;">'Nouvelle valeur'</span><span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span>
 <span style="color: black;">&#123;</span><span style="color: #483d8b;">'Nouvelle cle'</span>: <span style="color: #483d8b;">'Nouvelle valeur'</span><span style="color: black;">&#125;</span><span style="color: black;">&#93;</span></pre></td></tr></table></div>

<p> Plus pragmatiquement, on peut juste vérifier que c’est la même référence en utilisant la fonction <code>id() </code>:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"> <span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>d<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
    <span style="color: #ff4500;">139656035401544</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span>d<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># même dico !</span>
    <span style="color: #ff4500;">139656035401544</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #008000;">id</span><span style="color: black;">&#40;</span><span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># dico différent</span>
    <span style="color: #ff4500;">139655914013832</span></pre></td></tr></table></div>

<p>Moralité, <code>*</code> sur une liste fait rarement ce qu’on veut.</p>
<h2>Unpacking</h2>
<p>Python intègre une fonctionnalité, l’unpacking, qui permet de prendre chaque élément d’un <a href="http://sametmax.com/les-trucmuchables-en-python/">itérable</a> et de les attribuer à des variables distinctes, d’un seul coup. C’est un raccourci très pratique&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> drapeau <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;bleu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;blanc&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;rouge&quot;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># ici on utilise un tuple, mais ça marche avec tout itérable</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> premiere_couleur <span style="color: #66cc66;">=</span> drapeau<span style="color: black;">&#91;</span><span style="color: #ff4500;">0</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> deuxieme_couleur <span style="color: #66cc66;">=</span> drapeau<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> troisieme_couleur <span style="color: #66cc66;">=</span> drapeau<span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>premiere_couleur<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'bleu'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>deuxieme_couleur<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'blanc'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>troisieme_couleur<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'rouge'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> couleur1<span style="color: #66cc66;">,</span> couleur2<span style="color: #66cc66;">,</span> couleur3 <span style="color: #66cc66;">=</span>  drapeau <span style="color: #808080; font-style: italic;"># la même opération, en une ligne grâce à l'unpacking</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>couleur1<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'bleu'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>couleur2<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'blanc'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>couleur3<span style="color: black;">&#41;</span>
<span style="color: #483d8b;">'rouge'</span></pre></td></tr></table></div>

<p><strong>Vous n’avez rien à faire, l’unpacking est automatique</strong>&nbsp;: il suffit de mettre à gauche du signe <code>=</code> le même nombre de variables qu’il y a d’éléments dans la séquence à droite du signe <code>=</code>. Dans le cas contraire, Python râle&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> un<span style="color: #66cc66;">,</span> deux <span style="color: #66cc66;">=</span> drapeau
<span style="color: #008000;">ValueError</span>: too many values to unpack
<span style="color: #66cc66;">&gt;&gt;&gt;</span> un<span style="color: #66cc66;">,</span> deux<span style="color: #66cc66;">,</span> trois<span style="color: #66cc66;">,</span> quatre <span style="color: #66cc66;">=</span> drapeau
<span style="color: #008000;">ValueError</span>: need more than <span style="color: #ff4500;">3</span> values to unpack</pre></td></tr></table></div>

<p>Quel rapport avec <code>*</code> ?</p>
<p>Et bien d’abord, il permet de gérer ce cas où il y a plus d’éléments que de variables en disant « je veux que cette variable contienne le reste »:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;">couleur1<span style="color: #66cc66;">,</span> *autres_couleurs <span style="color: #66cc66;">=</span> drapeau
<span style="color: #66cc66;">&gt;&gt;&gt;</span> couleur1
    <span style="color: #483d8b;">'bleu'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> autres_couleurs
    <span style="color: black;">&#91;</span><span style="color: #483d8b;">'blanc'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'rouge'</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> *autres_couleurs<span style="color: #66cc66;">,</span> derniere_couleur <span style="color: #66cc66;">=</span> drapeau
<span style="color: #66cc66;">&gt;&gt;&gt;</span> autres_couleurs
    <span style="color: black;">&#91;</span><span style="color: #483d8b;">'bleu'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'blanc'</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> derniere_couleur
    <span style="color: #483d8b;">'rouge'</span></pre></td></tr></table></div>

<p>Ensuite, il permet de <strong>forcer l’unpacking </strong>dans le cas où c’est ambigu.</p>
<p>Faisons une petite fonction de test qui ne fait qu’afficher chacun de ses paramètres&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> afficher_trois_elements<span style="color: black;">&#40;</span>elem1<span style="color: #66cc66;">,</span> elem2<span style="color: #66cc66;">=</span><span style="color: #008000;">None</span><span style="color: #66cc66;">,</span> elem3<span style="color: #66cc66;">=</span><span style="color: #008000;">None</span><span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem1<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem2<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem3<span style="color: black;">&#41;</span>
...
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>drapeau<span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'bleu'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'blanc'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'rouge'</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">None</span>
<span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Passer drapeau affiche logiquement le tuple comme premier paramètre, et ensuite les valeurs par défaut du premier et du second paramètre.</p>
<p>En utilisant <code>*</code>, nous pouvons forcer l’unpacking de telle sorte que les valeurs du tuple soient passées individuellement comme autant de paramètres&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*drapeau<span style="color: black;">&#41;</span>
bleu
blanc
rouge</pre></td></tr></table></div>

<p>Très pratique quand vous utilisez une collection tout au long du programme pour vous éviter de sans cesse trainer des variables intermédiaires. D’autant que ça marche combiné aux slices&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> l <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;element que l'on ne veut pas&quot;</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*l<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">1</span>
<span style="color: #ff4500;">2</span>
<span style="color: #ff4500;">3</span></pre></td></tr></table></div>

<p>Encore mieux, on peut utiliser <code>**</code> pour forcer l’unpacking des dictionnaires. Les valeurs du dictionnaire deviennent les valeurs des paramètres, mais cette association se fait par nom&nbsp;: <strong>chaque clé du dictionnaire doit correspondre à un nom de paramètre</strong>. Ainsi&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem2&quot;</span>: <span style="color: #483d8b;">&quot;feu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem3&quot;</span>: <span style="color: #483d8b;">&quot;air&quot;</span><span style="color: black;">&#125;</span>
 <span style="color: #808080; font-style: italic;"># les clés ont le bon nom</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>**elements<span style="color: black;">&#41;</span>
eau
feu
air</pre></td></tr></table></div>

<p>Si une clé ne possède pas le nom adéquat, tout plante&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem2&quot;</span>: <span style="color: #483d8b;">&quot;feu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;rien_a_voir&quot;</span>: <span style="color: #483d8b;">&quot;air&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>**elements<span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: afficher_trois_elements<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> got an unexpected <span style="color: #dc143c;">keyword</span> argument <span style="color: #483d8b;">'rien_a_voir'</span></pre></td></tr></table></div>

<p>Une autre erreur courante est d’utiliser <code>*</code> avec un dictionnaire. Dans ce cas l’unpacking fonctionne, mais comme itérer sur un dictionnaire donne une liste de clés, c’est comme si vous passiez une liste en paramètres contenant les clés&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem2&quot;</span>: <span style="color: #483d8b;">&quot;feu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;elem3&quot;</span><span style="color: #66cc66;">;</span>: <span style="color: #483d8b;">&quot;air&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*elements<span style="color: black;">&#41;</span>
elem2
elem3
elem1</pre></td></tr></table></div>

<p>Si vous donnez moins de valeurs qu’il n’y a de paramètres, Python remplit tout ce qu’il peut&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*drapeau<span style="color: black;">&#91;</span>:-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
bleu
blanc
<span style="color: #008000;">None</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> elements <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">&quot;elem1&quot;</span>: <span style="color: #483d8b;">&quot;eau&quot;</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>**elements<span style="color: black;">&#41;</span>
eau
<span style="color: #008000;">None</span>
<span style="color: #008000;">None</span></pre></td></tr></table></div>

<p>Dans le cas inverse – si il y a plus d’éléments que de paramètres – Python vous envoie vous brosser&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> forces <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;rouge&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;bleu&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;jaune&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;rose&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;vert&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_trois_elements<span style="color: black;">&#40;</span>*forces<span style="color: black;">&#41;</span>
<span style="color: #008000;">TypeError</span>: afficher_trois_elements<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> takes at most <span style="color: #ff4500;">3</span> arguments <span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span> given<span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Paramétrage dynamique</h2>
<p><em>Attention, cet usage est souvent confondu avec celui qu’on vient de voir dans la partie précédente. Ils ne font pas du tout la même chose !</em></p>
<p>Il est parfois pratique de définir une fonction qui accepte un nombre infini de paramètres. Exemple bidon, une fonction qui multiplie ses arguments entre eux&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">return</span> a * b <span style="color: #808080; font-style: italic;"># attention, là on utilise &lt;code&gt;*&lt;/code&gt; pour multiplier, ne cherchez rien de compliqué ;-)</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>multiply<span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">6</span></pre></td></tr></table></div>

<p>Bien sûr, si on veut rajouter un troisième paramètre, il faut la réécrire. Pareil pour un quatrième. Finalement, on finit par demander de passer une liste pour permettre un nombre arbitraire&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>elements_a_multiplier<span style="color: black;">&#41;</span>:
...     <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> elements_a_multiplier:
...         <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> res * i
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> multiply<span style="color: black;">&#40;</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">24</span></pre></td></tr></table></div>

<p>Et bien sachez qu’il existe une autre possibilité, autoriser le passage d’une infinité de paramètres ! Cela se fait bien sûr avec <code>*</code>.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>*tous_les_elements<span style="color: black;">&#41;</span>: <span style="color: #808080; font-style: italic;"># on ne change pas grand chose, on rajoute juste &lt;code&gt;*&lt;/code&gt;</span>
...     <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> tous_les_elements:
...         <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> res * i
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> multiply<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span>
 <span style="color: #808080; font-style: italic;"># mais plus besoin d'une séquence !</span>
<span style="color: #ff4500;">26</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> multiply<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span>
<span style="color: #ff4500;">120</span></pre></td></tr></table></div>

<p>Comment ça marche ? C’est simple, <strong>tous les arguments sont automatiquement stockés dans une liste</strong>, et cette liste est le paramètre que l’on a désigné par <code>*</code>.</p>
<p>Ce système très puissant peut être utilisé conjointement avec des paramètres normaux&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span><span style="color: #ff7700;font-weight:bold;">def</span> afficher<span style="color: black;">&#40;</span>elem1<span style="color: #66cc66;">,</span> elem2<span style="color: #66cc66;">,</span> *elemx<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem1<span style="color: black;">&#41;</span>
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>elem2<span style="color: black;">&#41;</span>
...    <span style="color: #ff7700;font-weight:bold;">for</span> e <span style="color: #ff7700;font-weight:bold;">in</span> elemx:
...        <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;(*) %s&quot;</span> % e<span style="color: black;">&#41;</span>
…
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Toi&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Moi&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Luke&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Anakin&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Obi Wan&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;Robert&quot;</span><span style="color: black;">&#41;</span>
Toi
Moi
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Luke
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Anakin
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Obi Wan
<span style="color: black;">&#40;</span>*<span style="color: black;">&#41;</span> Robert</pre></td></tr></table></div>

<p>La seule condition est de mettre <code>*</code> sur un paramètre situé après tous les autres. <code>*</code> est toujours en dernier, et il n’apparait qu’une seule fois. Enfin, il existe une convention pour le nom de cet argument&nbsp;: <code>*args</code>.</p>
<p>Bonne nouvelle, on peut utiliser aussi <code>**</code>. Comme on peut s’y attendre, il permet de récupérer aussi une infinité de paramètres, mais <strong>sous forme de dictionnaire</strong>. Cela signifie qu’il ne récupère que les paramètres nommés&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> afficher_recette<span style="color: black;">&#40;</span>recette<span style="color: #66cc66;">,</span> **ingredients<span style="color: black;">&#41;</span>: <span style="color: #808080; font-style: italic;"># ingrédients sera un dictionnaire</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>recette<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> ingredient <span style="color: #ff7700;font-weight:bold;">in</span> ingredients.<span style="color: black;">items</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
...         <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot; - %s: %s&quot;</span> % ingredient<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> afficher_recette<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;moukraines à la glaviouse&quot;</span><span style="color: #66cc66;">,</span>
...                  <span style="color: black;">creme</span><span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;trop&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;"># on doit donner le nom de ce paramètre</span>
...                  <span style="color: black;">moukraines</span><span style="color: #66cc66;">=</span> <span style="color: #483d8b;">&quot;suffisamment&quot;</span><span style="color: #66cc66;">,</span>
...                  <span style="color: black;">glaviouse</span><span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;si disponible&quot;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># mais l'ordre des paramètres importe peu</span>
moukraines à la glaviouse
 - glaviouse : si disponible
 - creme : trop
 - moukraines : suffisamment</pre></td></tr></table></div>

<p>Il faut également mettre <code>**</code> après tous les autres arguments. La convention pour nommer ce paramètre est <code>**kwargs</code>, pour « keyword arguments ». Enfin, on peut mélanger tout ça d’un coup&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> affichage_hybride<span style="color: black;">&#40;</span>parametre_normal<span style="color: #66cc66;">,</span>
...                       <span style="color: black;">parametre_avec_default</span><span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;valeur par défaut&quot;</span><span style="color: #66cc66;">,</span>
...                       *args<span style="color: #66cc66;">,</span>
...                       **kwargs<span style="color: black;">&#41;</span>:
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>parametre_normal<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>parametre_avec_default<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>args<span style="color: black;">&#41;</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>kwargs<span style="color: black;">&#41;</span>
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> affichage_hybride<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;param1&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;param2&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;infini1&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;infini2&quot;</span><span style="color: #66cc66;">,</span> kwinfini1<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> kwinfini2<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
param1
param2
<span style="color: black;">&#40;</span><span style="color: #483d8b;">'infini1'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'infini2'</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#123;</span><span style="color: #483d8b;">'kwinfini1'</span>: <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'kwinfini2'</span>: <span style="color: #ff4500;">2</span><span style="color: black;">&#125;</span></pre></td></tr></table></div>

<p><strong>On doit absolument mettre les paramètres dans cet ordre</strong>&nbsp;:</p>
<ol>
<li>paramètres normaux et obligatoires;</li>
<li>paramètres normaux facultatifs (valeur par défaut);</li>
<li>paramètres dynamiques;</li>
<li>paramètres dynamiques nommés.
</li>
</ol>
<p>En plus, cela permet en effet de faire jouer les valeurs par défaut de manière très souple&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="c" style="font-family:monospace;"><span style="color: #339933;">&gt;&gt;&gt;</span> affichage_hybride<span style="color: #009900;">&#40;</span><span style="color: #ff0000;">&quot;param tout seul&quot;</span><span style="color: #009900;">&#41;</span>
param tout seul
valeur par défaut
<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span><span style="color: #009900;">&#125;</span></pre></td></tr></table></div>

<p>Enfin, on peut définir des paramètres qui ne peuvent être passés qu’en spécifiant leur nom. On les appelle les « keyword only parameters ». Pour ce faire, il faut mettre au moins un <code>*</code>, et tout ce qu’il y a après sans étoile ne peut plus être passé comme argument positionnel :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> coooool<span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> *args<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> args<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;cool&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;stdin&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
<span style="color: #008000;">TypeError</span>: coooool<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> missing <span style="color: #ff4500;">1</span> required keyword-only argument: <span style="color: #483d8b;">'keyword_only'</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;cool&quot;</span><span style="color: #66cc66;">,</span> keyword_only<span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
yeah <span style="color: black;">&#40;</span><span style="color: #483d8b;">'cool'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#41;</span> man</pre></td></tr></table></div>

<p>Si vous n’avez pas un <code>*args</code> à placer, on peut mettre l’étoile toute seule :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> coooool<span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> *<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>normal<span style="color: #66cc66;">,</span> keyword_only<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;stdin&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
<span style="color: #008000;">TypeError</span>: coooool<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> takes <span style="color: #ff4500;">1</span> positional argument but <span style="color: #ff4500;">2</span> were given
<span style="color: #66cc66;">&gt;&gt;&gt;</span> coooool<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;yeah&quot;</span><span style="color: #66cc66;">,</span> keyword_only<span style="color: #66cc66;">=</span><span style="color: #483d8b;">&quot;man&quot;</span><span style="color: black;">&#41;</span>
yeah man</pre></td></tr></table></div>

<h2>Python 3.5</h2>
<p>Je mets à jour cet article un mois avant la sortie annoncée de Python 3.5, qui parmi ses nouvelles fonctionnalités, rajoute encore des super pouvoirs à l’opérateur splat.</p>
<p>On peut faire de l’unpacking directement dans les littéraux :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> *<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> *<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#40;</span>*<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
<span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #ff4500;">1</span>: <span style="color: #ff4500;">2</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d2 <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">4</span><span style="color: black;">&#125;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: black;">&#123;</span>**d<span style="color: #66cc66;">,</span> **d2<span style="color: black;">&#125;</span>
<span style="color: black;">&#123;</span><span style="color: #ff4500;">1</span>: <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span>: <span style="color: #ff4500;">4</span><span style="color: black;">&#125;</span></pre></td></tr></table></div>

<p>On peut utiliser plusieurs fois l’unpacking des arguments dans un même appel :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> pouet<span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: #66cc66;">,</span> d<span style="color: black;">&#41;</span>:
...    <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>a<span style="color: #66cc66;">,</span> b<span style="color: #66cc66;">,</span> c<span style="color: #66cc66;">,</span> d<span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> couleurs <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span><span style="color: #483d8b;">'ocre'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'moutarde'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> pouet<span style="color: black;">&#40;</span>*couleurs<span style="color: #66cc66;">,</span> *<span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># double étoile !</span>
ocre moutarde <span style="color: #ff4500;">0</span> <span style="color: #ff4500;">1</span></pre></td></tr></table></div>

<h2>Jouons un peu</h2>
<p>Si vous vous sentez à l’aise avec tout ça, vous pouvez mélanger plusieurs usages de <code>*</code> d’un coup. Je vous laisse donc en guise de conclusion un petit combo qui utilise un code précédent&nbsp;:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">def</span> multiply<span style="color: black;">&#40;</span>*args<span style="color: black;">&#41;</span>:
...     <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
...     <span style="color: #ff7700;font-weight:bold;">for</span> i <span style="color: #ff7700;font-weight:bold;">in</span> args:
...         <span style="color: black;">res</span> <span style="color: #66cc66;">=</span> res * i
...     <span style="color: #ff7700;font-weight:bold;">return</span> res
...
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>multiply<span style="color: black;">&#40;</span>*<span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>*<span style="color: #ff4500;">6</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff4500;">2</span>**<span style="color: #ff4500;">6</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">True</span></pre></td></tr></table></div>

]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/operateur-splat-ou-etoile-en-python/feed/</wfw:commentRss>
		<slash:comments>32</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2012/06/images.jpeg" length="7655" type="image/jpg" />	</item>
	</channel>
</rss>
