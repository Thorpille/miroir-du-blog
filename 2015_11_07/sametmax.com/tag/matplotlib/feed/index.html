<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Sam &#38; Max &#187; matplotlib</title>
	<atom:link href="http://sametmax.com/tag/matplotlib/feed/" rel="self" type="application/rss+xml" />
	<link>http://sametmax.com</link>
	<description>Du code, du cul</description>
	<lastBuildDate>Sat, 07 Nov 2015 10:56:13 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=4.1</generator>
	<item>
		<title>Les bases de Numpy 22</title>
		<link>http://sametmax.com/les-bases-de-numpy/</link>
		<comments>http://sametmax.com/les-bases-de-numpy/#comments</comments>
		<pubDate>Wed, 19 Feb 2014 19:18:54 +0000</pubDate>
		<dc:creator><![CDATA[Sam]]></dc:creator>
				<category><![CDATA[Programmation]]></category>
		<category><![CDATA[matplotlib]]></category>
		<category><![CDATA[numpy]]></category>
		<category><![CDATA[python]]></category>

		<guid isPermaLink="false">http://sametmax.com/?p=9198</guid>
		<description><![CDATA[Numpy est une lib destinée à la manipulation de grands ensembles de nombres et est très utilisée par la communauté scientifique.

Elle propose des types et des opérations beaucoup plus performants que ceux de la lib standard, et possède des raccourcis pour les traitements de masse.

Malheureusement, c'est aussi une lib complexe, et, comme souvent dans le monde de la science, les tutos pourraient être plus clairs.
]]></description>
				<content:encoded><![CDATA[<p><a href="http://www.numpy.org/">Numpy</a> est une lib destinée à la manipulation de grands ensembles de nombres et est très utilisée par la communauté scientifique.</p>
<p>Elle propose des types et des opérations beaucoup plus performants que ceux de la lib standard, et possède des raccourcis pour les traitements de masse.</p>
<p>Malheureusement, c&#8217;est aussi une lib complexe, et, comme souvent dans le monde de la science, les tutos pourraient être plus clairs.</p>
<p>Cet article ne prétend pas à une couverture exhaustive de Numpy, d&#8217;autant que je n&#8217;ai pas le niveau en maths pour faire une simple dérivée alors des opérations matricielles complexes&#8230;</p>
<p>Mais ça devrait permettre de démystifier le truc pour les gens qui regardent ça de loin comme si c&#8217;était un pingouin au Mali.</p>
<p>Commencez par installer la bestiole avec un <code><a href="http://sametmax.com/votre-python-aime-les-pip/">pip</a> install numpy</code>. Faites-vous un café pendant que ça compile.</p>
<h2><code>array</code> sur image</h2>
<p>A la base de Numpy, il y a la manipulation d&#8217;ensembles ordonnés de nombres. On peut faire les opérations voulues sur un type <code>list</code> ordinaire, mais ce serait lent, et ça prendrait pas mal de mémoire.</p>
<p>L&#8217;alternative est d&#8217;utiliser un type optimisé comme <code>ndarray</code>, fourni par Numpy.</p>
<p>Cela se manipule comme une tuple, avec une différence majeure : il ne peut contenir qu&#8217;un seul type de données. Donc on ne met que des <code>int</code>, ou que des <code>str</code>, que des <code>bool</code>, etc.</p>
<p>On peut construire un array à partir de n&#8217;importe quel itérable :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> numpy <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">array</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">&quot;azerty&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'azerty'</span><span style="color: #66cc66;">,</span>
      dtype<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'&lt;U6'</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">1.0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2.0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3.0</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span> <span style="color: #ff4500;">1</span>.<span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">2</span>.<span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">3</span>.<span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Mais souvent on utilisera une fonction générant un array automatiquement afin d&#8217;éviter de créer deux structures de données (la liste, puis l&#8217;array par exemple).</p>
<p>On peut utiliser <code>arange</code>, qui est l&#8217;équivalent de <code>range</code>, mais pour les arrays :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> numpy <span style="color: #ff7700;font-weight:bold;">import</span> arange
<span style="color: #66cc66;">&gt;&gt;&gt;</span> arange<span style="color: black;">&#40;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">100</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span> <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">9</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">11</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">13</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">15</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">17</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">19</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">21</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">23</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">25</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">27</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">29</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">31</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">33</span><span style="color: #66cc66;">,</span>
       <span style="color: #ff4500;">35</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">37</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">39</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">41</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">43</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">45</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">47</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">49</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">51</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">53</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">55</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">57</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">59</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">61</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">65</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">67</span><span style="color: #66cc66;">,</span>
       <span style="color: #ff4500;">69</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">71</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">73</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">75</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">77</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">79</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">81</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">83</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">85</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">87</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">89</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">91</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">93</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">95</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">97</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">99</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Ainsi que des choses plus perfectionnées comme <code>linspace</code>, qui retourne un array de n nombre de valeurs <strong>uniformément réparties</strong> entre deux bornes:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">from</span> numpy <span style="color: #ff7700;font-weight:bold;">import</span> linspace
<span style="color: #66cc66;">&gt;&gt;&gt;</span> linspace<span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">100</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">15</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 15 valeur entre 0 et 100</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span>   <span style="color: #ff4500;">0</span>.        <span style="color: #66cc66;">,</span>    <span style="color: #ff4500;">7.14285714</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">14.28571429</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">21.42857143</span><span style="color: #66cc66;">,</span>
         <span style="color: #ff4500;">28.57142857</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">35.71428571</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">42.85714286</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">50</span>.        <span style="color: #66cc66;">,</span>
         <span style="color: #ff4500;">57.14285714</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">64.28571429</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">71.42857143</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">78.57142857</span><span style="color: #66cc66;">,</span>
         <span style="color: #ff4500;">85.71428571</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">92.85714286</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">100</span>.        <span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Comme les tuples, les arrays sont itérables, sliceables, indexables et de  taille fixe :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> sistance <span style="color: #66cc66;">=</span> arange<span style="color: black;">&#40;</span><span style="color: #ff4500;">10</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> a: <span style="color: #808080; font-style: italic;"># iterable</span>
...     <span style="color: #ff7700;font-weight:bold;">print</span> x
...
<span style="color: #ff4500;">0</span>
<span style="color: #ff4500;">1</span>
<span style="color: #ff4500;">2</span>
<span style="color: #ff4500;">3</span>
<span style="color: #ff4500;">4</span>
<span style="color: #ff4500;">5</span>
<span style="color: #ff4500;">6</span>
<span style="color: #ff4500;">7</span>
<span style="color: #ff4500;">8</span>
<span style="color: #ff4500;">9</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> sistance<span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span>:<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># sliceable</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> sistance<span style="color: black;">&#91;</span>-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># indexable</span>
<span style="color: #ff4500;">9</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> sistance.<span style="color: black;">append</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">11</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># taille fixe</span>
Traceback <span style="color: black;">&#40;</span>most recent call last<span style="color: black;">&#41;</span>:
  File <span style="color: #483d8b;">&quot;&lt;ipython-input-17-389b8ea2fe68&gt;&quot;</span><span style="color: #66cc66;">,</span> line <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #66cc66;">&lt;</span>module<span style="color: #66cc66;">&gt;</span>
    sistance.<span style="color: black;">append</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">11</span><span style="color: black;">&#41;</span>
<span style="color: #008000;">AttributeError</span>: <span style="color: #483d8b;">'numpy.ndarray'</span> <span style="color: #008000;">object</span> has no attribute <span style="color: #483d8b;">'append'</span></pre></td></tr></table></div>

<p>L&#8217;array représente donc une photographie figée de vos données, mais comme vous allez le voir, rapide et précise à manipuler.</p>
<h2>Opérations groupées</h2>
<p>La caractéristique marquante de l&#8217;array, c&#8217;est que si vous lui appliquez un opérateur mathématique, un nouvel array est retourné dont TOUTES les valeurs ont été modifiées.</p>
<p>Par exemple, si vous multipliez un array, un nouvel array est retourné avec toutes les valeurs multipliées :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> duku <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> au_milieu <span style="color: #66cc66;">=</span> duku * <span style="color: #ff4500;">2</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> au_milieu
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>En fait, numpy fait une boucle implicite &#8211; et performante &#8211; sur tout l&#8217;array pour chaque opération mathématique. Et ça devient intéressant quand on veut faire des opérations entre plusieurs arrays entre eux :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> duku
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> au_milieu
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> de_tram <span style="color: #66cc66;">=</span> duku + au_milieu
<span style="color: #66cc66;">&gt;&gt;&gt;</span> de_tram
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">9</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<h2>Une autre dimension</h2>
<p>Si on travaille sur une liste plate, l&#8217;array est pratique, mais on en reste là. Néanmoins sa grande force est sa capacité à travailler sur plusieurs dimensions, et donc modifier tout aussi facilement des arrays d&#8217;arrays d&#8217;arrays d&#8217;arrays (arrête !) :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> thorique <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">9</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> thorique
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">6</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">9</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> thorique ** <span style="color: #ff4500;">3</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span>  <span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span>   <span style="color: #ff4500;">8</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">27</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span> <span style="color: #ff4500;">64</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">125</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">216</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">343</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">512</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">729</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>L&#8217;opération a été appliquée à tous les éléments sans faire de boucle, et en suivant l&#8217;imbrication de la structure de données récursivement.</p>
<p>Mais la partie la plus funky, c&#8217;est que le slicing AUSSI, peut se faire sur plusieurs dimensions.</p>
<p>Vous connaissez le slicing à une dimension :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">random</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ticence <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span><span style="color: #dc143c;">random</span>.<span style="color: black;">randint</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">100</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ticence
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">77</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">44</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">93</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">65</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span> <span style="color: #ff4500;">8</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">64</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">36</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">80</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">77</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">69</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">24</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">57</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">18</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">99</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">60</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">33</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">71</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">99</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">33</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">60</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">98</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">85</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">70</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> ticence<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>:<span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span> <span style="color: #808080; font-style: italic;"># récupération des élément de 1 (inclus) à 4 (exclus)</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span> <span style="color: #ff4500;">8</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">64</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">36</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">80</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">77</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">69</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">24</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">57</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">18</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">99</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
       <span style="color: black;">&#91;</span><span style="color: #ff4500;">60</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">33</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">71</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">99</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Mais avec un array numpy, on peut utiliser une <strong>virgule</strong> après le premier slicing, et mettre un nouveau slicing qui va travailler sur la dimension suivante.</p>
<p>Par exemple, ici j&#8217;applique le slice <code>1:4</code> sur la première dimension (je diminue le nombre de lignes) et ensuite j&#8217;applique le slicing <code>0:3</code> sur la seconde dimension (je diminue le nombre d&#8217;éléments de chaque lignes restantes, donc des colonnes).</p>
<pre lang=python>>>> ticence[1:4, 0:3]
array([[ 8, 64, 36],
       [69, 24, 57],
       [60, 33, 63]])</pre>
<p>Ca marche comme ça :</p>
<pre lang=python>array[slicing_sur_dimension1, slicing_sur_dimension2, slicing_sur_dimension3, etc]</pre>
<p>Si on commence à avoir beaucoup de dimensions et qu&#8217;on ne veut toucher que la dernière dimension, on peut utiliser Ellipsis.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> d2 <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span><span style="color: #dc143c;">random</span>.<span style="color: black;">randint</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">100</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d3 <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span>d2.<span style="color: #dc143c;">copy</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span> <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d4 <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span>d3.<span style="color: #dc143c;">copy</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>  <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d5 <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span>d4.<span style="color: #dc143c;">copy</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>  <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d6 <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span>d5.<span style="color: #dc143c;">copy</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>  <span style="color: #ff7700;font-weight:bold;">for</span> x <span style="color: #ff7700;font-weight:bold;">in</span> <span style="color: #008000;">range</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #66cc66;">&gt;&gt;&gt;</span> d6<span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span>:<span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span>...<span style="color: #66cc66;">,</span>-<span style="color: #ff4500;">3</span>:-<span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
          <span style="color: black;">&#91;</span>... <span style="color: black;">plein</span> de trucs ...<span style="color: black;">&#93;</span>
          <span style="color: black;">&#91;</span><span style="color: black;">&#91;</span> <span style="color: #ff4500;">9</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">86</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span><span style="color: #ff4500;">16</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span><span style="color: #ff4500;">63</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">26</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span><span style="color: #ff4500;">51</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">5</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">46</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
&nbsp;
          <span style="color: black;">&#91;</span><span style="color: black;">&#91;</span> <span style="color: #ff4500;">9</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">86</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span><span style="color: #ff4500;">16</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">40</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span><span style="color: #ff4500;">63</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">26</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span><span style="color: #ff4500;">51</span><span style="color: #66cc66;">,</span>  <span style="color: #ff4500;">5</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
           <span style="color: black;">&#91;</span> <span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">46</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>La dernière ligne, on prend un tableau à 6 dimensions, on applique un slicing <code>1:3</code> sur la première dimension, et un slicing <code>-3:-1</code> sur la <strong>dernière</strong> dimension.</p>
<p>Il est vrai que je ne m&#8217;en sers pas souvent.</p>
<p>Ok, je ne m&#8217;en suis jamais servi de toute ma vie. A part pour ce tuto. Mais c&#8217;est super classe non ?</p>
<p>Attention, cela ne marche que si toutes les dimensions ont le même nombre d&#8217;éléments. Cela se voit facilement en cas d&#8217;erreur car si le nombre d&#8217;éléments n&#8217;est pas bon, numpy va afficher votre array en ligne et pas sous forme de tabulaire :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #66cc66;">&gt;&gt;&gt;</span> <span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">9</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span><span style="color: #ff4500;">9</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
<span style="color: #dc143c;">array</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">9</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">8</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">9</span><span style="color: black;">&#93;</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span> dtype<span style="color: #66cc66;">=</span><span style="color: #008000;">object</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Vous voyez en plus qu&#8217;il précise ici <code>dtype=object</code>, alors qu&#8217;il ne l&#8217;a pas fait plus haut.</p>
<h2>Matplotlib pour afficher tout ça</h2>
<p>En théorie, la lib matplotlib n&#8217;a rien à voir avec numpy. En pratique les utilisateurs de numpy utilisent très souvent numpy + matplotlib + ipython pour avoir une équivalent de matlab en Python.</p>
<p>Matplotlib est une lib qui permet de dessiner des graphes, mais qui a la particularité d&#8217;être orienté interaction. C&#8217;est à dire qu&#8217;elle est plus destinée à fabriquer votre graphe à la main, en bidouillant vos données, et possède dont des facilités pour cela.</p>
<p>D&#8217;abord on <code>pip install matplotlib</code>, et on prie pour que ça marche car sur certains OS ça plante méchamment.</p>
<p>Et ensuite dans son shell, on peut créer un petit graphe facilement sans trop se soucier des réglages, ceux par défaut étant pas mal :</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> pylab <span style="color: #ff7700;font-weight:bold;">import</span> plot<span style="color: #66cc66;">,</span> xlabel<span style="color: #66cc66;">,</span> ylabel<span style="color: #66cc66;">,</span> title<span style="color: #66cc66;">,</span> legend
<span style="color: #ff7700;font-weight:bold;">from</span> numpy <span style="color: #ff7700;font-weight:bold;">import</span> sin<span style="color: #66cc66;">,</span> pi<span style="color: #66cc66;">,</span> linspace
&nbsp;
<span style="color: #808080; font-style: italic;"># On active le mode interactif.</span>
<span style="color: #808080; font-style: italic;"># Cela permet de voir notre graph</span>
<span style="color: #808080; font-style: italic;"># en popup et de le modifier</span>
<span style="color: #808080; font-style: italic;"># en temps réel.</span>
ion<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># Utilisation de mes vagues connaissances</span>
<span style="color: #808080; font-style: italic;"># de trigo pour pondre une sinusite...</span>
<span style="color: #808080; font-style: italic;"># Heu, une sinusoide.</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># Un array de 50 points répartis uniformément</span>
<span style="color: #808080; font-style: italic;"># entre 0 et 2pi. Ca va nous servir de</span>
<span style="color: #808080; font-style: italic;"># première coordonnée pour nos points.</span>
x <span style="color: #66cc66;">=</span> linspace<span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2</span> * pi<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># La fonction sin() de numpy va</span>
<span style="color: #808080; font-style: italic;"># faire un nouvel array avec le sinus</span>
<span style="color: #808080; font-style: italic;"># des points de l'array précédent.</span>
<span style="color: #808080; font-style: italic;"># Ca nous fait notre deuxième coordonnée.</span>
y <span style="color: #66cc66;">=</span> sin<span style="color: black;">&#40;</span>x<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># On dessine la courbe, et on lui donne un pti nom</span>
plot<span style="color: black;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> label<span style="color: #66cc66;">=</span>u<span style="color: #483d8b;">&quot;Moi&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #808080; font-style: italic;"># Si je me suis pas trop planté ça devrait osciller</span>
<span style="color: #808080; font-style: italic;"># entre 1 et -1</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># On labellise les abscisses et les ordonnées</span>
<span style="color: #808080; font-style: italic;"># car des données sans une échelle claire ne</span>
<span style="color: #808080; font-style: italic;"># servent à rien.</span>
ylabel<span style="color: black;">&#40;</span>u<span style="color: #483d8b;">&quot;Self esteem (sur l'echelle de Richter)&quot;</span><span style="color: black;">&#41;</span>
xlabel<span style="color: black;">&#40;</span>u<span style="color: #483d8b;">'Temps passé sur Dota (en joule par km)'</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># On titre notre œuvre</span>
title<span style="color: black;">&#40;</span><span style="color: #483d8b;">&quot;Brace yourself, the graph is comming&quot;</span><span style="color: black;">&#41;</span>
<span style="color: #808080; font-style: italic;"># On active la légende car le sujet est légendaire</span>
legend<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre></td></tr></table></div>

<p>Ce qui nous affiche :</p>
<div id="attachment_9201" style="width: 416px" class="wp-caption aligncenter"><a href="http://sametmax.com/wp-content/uploads/2014/02/brace.png" class="grouped_elements" rel="tc-fancybox-group9198"><img src="http://sametmax.com/wp-content/uploads/2014/02/brace.png" alt="Graphe de courbe sinusoidale" title="J&#039;imagine toujours un petit train sur ce genre de courbe" width="406" height="306" class="size-full wp-image-9201" /></a><p class="wp-caption-text">J&#039;imagine toujours un petit train sur ce genre de courbe</p></div>
<p>Vous ne vous transformerez pas tout de suite en chercheur du CNRS après avoir lu ce tuto, mais j&#8217;espère qu&#8217;il vous aura donné un peu envie de faire mumuse avec Python pour manipuler vos données scientifiques.</p>
]]></content:encoded>
			<wfw:commentRss>http://sametmax.com/les-bases-de-numpy/feed/</wfw:commentRss>
		<slash:comments>22</slash:comments>
	<enclosure url="http://sametmax.com/wp-content/uploads/2014/02/bLXjrQc.jpg" length="169906" type="image/jpg" />	</item>
	</channel>
</rss>
